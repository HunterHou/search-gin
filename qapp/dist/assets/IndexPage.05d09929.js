import{c as F,a as f,h as b,d as p,g as H,s as Y,r as g,w as O,v as X,u as Z,aA as ee,j as te,C as c,D,L as i,P as n,$ as C,K as o,Q as P,R as j,Y as k,H as w,M as _,O as I}from"./index.28e7109e.js";import{u as J,a as W}from"./use-dark.b4db51ef.js";import{Q as R}from"./QCardSection.93926701.js";import{Q as K}from"./QSeparator.bf96b603.js";import{Q as U}from"./QCardActions.ead537bc.js";import{u as ae,Q as E}from"./System.a4acd3b7.js";import{T as le}from"./TouchPan.2dcd1e54.js";import{u as ne}from"./use-quasar.48f7c58d.js";import{R as oe,O as re,D as se}from"./searchAPI.b2ada469.js";import{axios as L}from"./axios.1ba4a54d.js";import{o as ie}from"./index.2db9940f.js";import"./touch.3df10340.js";import"./selection.87870af4.js";var ue=F({name:"QBanner",props:{...J,inlineActions:Boolean,dense:Boolean,rounded:Boolean},setup(e,{slots:r}){const{proxy:{$q:d}}=H(),v=W(e,d),q=f(()=>"q-banner row items-center"+(e.dense===!0?" q-banner--dense":"")+(v.value===!0?" q-banner--dark q-dark":"")+(e.rounded===!0?" rounded-borders":"")),s=f(()=>`q-banner__actions row items-center justify-end col-${e.inlineActions===!0?"auto":"all"}`);return()=>{const u=[b("div",{class:"q-banner__avatar col-auto row items-center self-start"},p(r.avatar)),b("div",{class:"q-banner__content col text-body2"},p(r.default))],x=p(r.action);return x!==void 0&&u.push(b("div",{class:s.value},x)),b("div",{class:q.value+(e.inlineActions===!1&&x!==void 0?" q-banner--top-padding":""),role:"alert"},u)}}});const de=["top","middle","bottom"];var ce=F({name:"QBadge",props:{color:String,textColor:String,floating:Boolean,transparent:Boolean,multiLine:Boolean,outline:Boolean,rounded:Boolean,label:[Number,String],align:{type:String,validator:e=>de.includes(e)}},setup(e,{slots:r}){const d=f(()=>e.align!==void 0?{verticalAlign:e.align}:null),v=f(()=>{const q=e.outline===!0&&e.color||e.textColor;return`q-badge flex inline items-center no-wrap q-badge--${e.multiLine===!0?"multi":"single"}-line`+(e.outline===!0?" q-badge--outline":e.color!==void 0?` bg-${e.color}`:"")+(q!==void 0?` text-${q}`:"")+(e.floating===!0?" q-badge--floating":"")+(e.rounded===!0?" q-badge--rounded":"")+(e.transparent===!0?" q-badge--transparent":"")});return()=>b("div",{class:v.value,style:d.value,role:"status","aria-label":e.label},Y(r.default,e.label!==void 0?[e.label]:[]))}}),G=F({name:"QSplitter",props:{...J,modelValue:{type:Number,required:!0},reverse:Boolean,unit:{type:String,default:"%",validator:e=>["%","px"].includes(e)},limits:{type:Array,validator:e=>e.length!==2||typeof e[0]!="number"||typeof e[1]!="number"?!1:e[0]>=0&&e[0]<=e[1]},emitImmediately:Boolean,horizontal:Boolean,disable:Boolean,beforeClass:[Array,String,Object],afterClass:[Array,String,Object],separatorClass:[Array,String,Object],separatorStyle:[Array,String,Object]},emits:["update:modelValue"],setup(e,{slots:r,emit:d}){const{proxy:{$q:v}}=H(),q=W(e,v),s=g(null),u={before:g(null),after:g(null)},x=f(()=>`q-splitter no-wrap ${e.horizontal===!0?"q-splitter--horizontal column":"q-splitter--vertical row"} q-splitter--${e.disable===!0?"disabled":"workable"}`+(q.value===!0?" q-splitter--dark":"")),S=f(()=>e.horizontal===!0?"height":"width"),V=f(()=>e.reverse!==!0?"before":"after"),y=f(()=>e.limits!==void 0?e.limits:e.unit==="%"?[10,90]:[50,1/0]);function $(a){return(e.unit==="%"?a:Math.round(a))+e.unit}const B=f(()=>({[V.value]:{[S.value]:$(e.modelValue)}}));let Q,z,T,N,h;function M(a){if(a.isFirst===!0){const m=s.value.getBoundingClientRect()[S.value];Q=e.horizontal===!0?"up":"left",z=e.unit==="%"?100:m,T=Math.min(z,y.value[1],Math.max(y.value[0],e.modelValue)),N=(e.reverse!==!0?1:-1)*(e.horizontal===!0?1:v.lang.rtl===!0?-1:1)*(e.unit==="%"?m===0?0:100/m:1),s.value.classList.add("q-splitter--active");return}if(a.isFinal===!0){h!==e.modelValue&&d("update:modelValue",h),s.value.classList.remove("q-splitter--active");return}const t=T+N*(a.direction===Q?-1:1)*a.distance[e.horizontal===!0?"y":"x"];h=Math.min(z,y.value[1],Math.max(y.value[0],t)),u[V.value].value.style[S.value]=$(h),e.emitImmediately===!0&&e.modelValue!==h&&d("update:modelValue",h)}const A=f(()=>[[le,M,void 0,{[e.horizontal===!0?"vertical":"horizontal"]:!0,prevent:!0,stop:!0,mouse:!0,mouseAllDir:!0}]]);function l(a,t){a<t[0]?d("update:modelValue",t[0]):a>t[1]&&d("update:modelValue",t[1])}return O(()=>e.modelValue,a=>{l(a,y.value)}),O(()=>e.limits,()=>{Z(()=>{l(e.modelValue,y.value)})}),()=>{const a=[b("div",{ref:u.before,class:["q-splitter__panel q-splitter__before"+(e.reverse===!0?" col":""),e.beforeClass],style:B.value.before},p(r.before)),b("div",{class:["q-splitter__separator",e.separatorClass],style:e.separatorStyle,"aria-disabled":e.disable===!0?"true":void 0},[X("div",{class:"q-splitter__separator-area absolute-full"},p(r.separator),"sep",e.disable!==!0,()=>A.value)]),b("div",{ref:u.after,class:["q-splitter__panel q-splitter__after"+(e.reverse===!0?"":" col"),e.afterClass],style:B.value.after},p(r.after))];return b("div",{class:x.value,ref:s},Y(r.default,a))}}});const me=async()=>{const e=await L.get("/api/typeSizeMap");return e&&e.data},fe=async()=>{const e=await L.get("/api/tagSizeMap");return e&&e.data},ve=async()=>{const e=await L.get("/api/scanTime");return e&&e.data},ye=o("div",{class:"text-h5 q-pa-md"},"\u6587\u4EF6\u626B\u63CF\u5206\u6790",-1),_e={class:"q-pa-md"},ge=o("div",{class:"text-h5 q-mb-md"},"\u6807\u7B7E\u5206\u5E03",-1),be={class:"q-gutter-sm",style:{display:"flex","flex-direction":"row","flex-wrap":"wrap","justify-content":"flex-start"}},he={class:"q-pa-md"},qe=o("div",{class:"text-h5 q-mb-md"},"\u626B\u63CF\u5206\u6790",-1),xe={class:"row justify-center q-gutter-sm"},Ce={class:"text-h6"},we={class:"text-subtitle2"},Se={class:"text-subtitle2"},ke={class:"q-pa-md"},pe=o("div",{class:"text-h5 q-mb-md"},"\u6587\u4EF6\u5206\u6790",-1),Ve={class:"row justify-center q-gutter-sm"},Be={class:"text-h6"},ze={class:"text-subtitle2"},Me={class:"text-subtitle2"},De={style:{display:"flex","flex-direction":"row","justify-content":"space-around"}},Ue={__name:"IndexPage",setup(e){const r=g(50),d=g(50),{push:v,go:q}=ee(),s=ae();document.title="\u9996\u9875";const u=ne(),x=g(!1),S=g([]),V=g([]),y=g([]);ie(["`"],l=>{M()});const $=l=>{s.setPage(1),s.FileSearchParam.Keyword=l,s.setMovieType(""),v("/search?from=index")},B=l=>{const{IsDir:a,Name:t}=l,m=!a&&t!=="\u5168\u90E8"?t:"";s.setPage(1),a&&s.setKeyword(t),s.setMovieType(m),v("/search?from=index")},Q=async()=>{const l=await me();l&&(S.value=l,z(),T())},z=async()=>{const l=await fe();l&&(V.value=l)},T=async()=>{const l=await ve();y.value=l};te(()=>{Q()});const N=async l=>{const{Name:a}=l;(await re({dirpath:a})).Code==200?u.notify({type:"positive",message:"\u6267\u884C\u6210\u529F"}):u.notify({type:"warning",message:"\u6267\u884C\u5931\u8D25"})},h=async l=>{const{Name:a}=l;(await se({dirpath:a})).Code==200?(u.notify({type:"positive",message:"\u6267\u884C\u6210\u529F"}),M()):u.notify({type:"warning",message:"\u6267\u884C\u5931\u8D25"})},M=async()=>{const{data:l}=await oe();console.log(l),l.Code==200?A():u.notify({type:"warning",message:l.Message})},A=()=>{window.location.reload()};return(l,a)=>(c(),D("div",null,[i(ue,{"inline-actions":"",rounded:"",class:"bg-blue text-white q-mt-sd",style:{position:"relative"}},{action:n(()=>[i(C,{style:{background:"#FF0080",color:"white"},label:"\u626B\u63CF",icon:"search",loading:x.value,size:"small",onClick:a[0]||(a[0]=t=>M())},null,8,["loading"]),i(C,{color:"green",class:"q-ml-md",label:"\u5237\u65B0",icon:"refresh",onClick:A})]),default:n(()=>[ye]),_:1}),i(G,{modelValue:r.value,"onUpdate:modelValue":a[2]||(a[2]=t=>r.value=t)},{before:n(()=>[o("div",_e,[ge,o("div",be,[(c(!0),D(P,null,j(V.value,t=>(c(),D("div",{key:t,style:{width:"auto"}},[t.Cnt>1?(c(),k(C,{key:0,color:"secondary",class:"btn-fixed-width",onClick:m=>$(t.Name)},{default:n(()=>[w(_(`${t.Name} (${t.Cnt})`)+" ",1),i(ce,{color:"orange",floating:""},{default:n(()=>[w(_(t.SizeStr),1)]),_:2},1024)]),_:2},1032,["onClick"])):I("",!0)]))),128))])])]),after:n(()=>[i(G,{modelValue:d.value,"onUpdate:modelValue":a[1]||(a[1]=t=>d.value=t),horizontal:""},{before:n(()=>[o("div",he,[qe,o("div",xe,[(c(!0),D(P,null,j(y.value,t=>(c(),k(E,{class:"my-card",key:t},{default:n(()=>[i(R,null,{default:n(()=>[o("div",Ce,_(t.Name),1),o("div",we,"\u65F6\u95F4\uFF1A"+_(t.Cnt),1),o("div",Se,"\u6587\u4EF6\u6570\uFF1A"+_(t.Size),1)]),_:2},1024),i(K),i(U,{vertical:""},{default:n(()=>[i(C,{flat:"",color:"blue",onClick:m=>B({...t,IsDir:!0})},{default:n(()=>[w("\u4F20\u9001")]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024))),128))])])]),after:n(()=>[o("div",ke,[pe,w(" "+_()+" ",1),o("div",Ve,[(c(!0),D(P,null,j(S.value,t=>(c(),k(E,{class:"my-card",key:t},{default:n(()=>[i(R,null,{default:n(()=>[o("div",Be,_(t.Name),1),o("div",ze,"\u6587\u4EF6\u6570\uFF1A"+_(t.Cnt),1),o("div",Me,"\u6587\u4EF6\u5927\u5C0F\uFF1A"+_(t.SizeStr),1)]),_:2},1024),i(K),i(U,{vertical:""},{default:n(()=>[o("div",De,[t.IsDir?I("",!0):(c(),k(C,{key:0,color:"blue",flat:"",onClick:m=>B(t)},{default:n(()=>[w("\u4F20\u9001")]),_:2},1032,["onClick"])),t.IsDir?(c(),k(C,{key:1,color:"blue",flat:"",onClick:m=>N(t)},{default:n(()=>[w("\u6253\u5F00")]),_:2},1032,["onClick"])):I("",!0),t.IsDir?(c(),k(C,{key:2,color:"red",flat:"",onClick:m=>h(t)},{default:n(()=>[w("\u5220\u9664")]),_:2},1032,["onClick"])):I("",!0)])]),_:2},1024)]),_:2},1024))),128))])])]),_:1},8,["modelValue"])]),_:1},8,["modelValue"])]))}};export{Ue as default};
