import{d as $e,e as Le,h as Fe,g as Qe,r as ae,k as Oe,c as Re,l as je}from"./QChip.3f83ae11.js";import{c as X,r as E,an as me,ac as ie,u as ge,aa as ue,w as p,j as be,o as R,g as j,af as ze,k as N,aQ as F,B as _e,ap as Ie,h as C,aR as Ve,aS as Ke,aT as Ge,a as x,p as Ne,ak as Ue,a4 as Y,ae as Xe,T as Ye,d as we,aM as Je,a5 as Ze,aU as xe,a0 as et,$ as K,aH as tt,ad as nt}from"./index.31b52109.js";import{Q as ot}from"./QBtnGroup.426aedb7.js";import{c as lt}from"./selection.ef9be21a.js";import{h as at,u as it,d as ut,e as st,f as rt,g as ct}from"./QItem.c5452813.js";import{u as dt,a as ft}from"./use-dark.2834d345.js";var jt=X({name:"QField",inheritAttrs:!1,props:$e,emits:Le,setup(){return Fe(Qe())}});const ht={target:{default:!0},noParentEvent:Boolean,contextMenu:Boolean};function vt({showing:e,avoidEmit:t,configureAnchorEl:n}){const{props:o,proxy:l,emit:u}=j(),a=E(null);let f=null;function v(i){return a.value===null?!1:i===void 0||i.touches===void 0||i.touches.length<=1}const c={};n===void 0&&(Object.assign(c,{hide(i){l.hide(i)},toggle(i){l.toggle(i),i.qAnchorHandled=!0},toggleKey(i){me(i,13)===!0&&c.toggle(i)},contextClick(i){l.hide(i),ie(i),ge(()=>{l.show(i),i.qAnchorHandled=!0})},prevent:ie,mobileTouch(i){if(c.mobileCleanup(i),v(i)!==!0)return;l.hide(i),a.value.classList.add("non-selectable");const d=i.target;ue(c,"anchor",[[d,"touchmove","mobileCleanup","passive"],[d,"touchend","mobileCleanup","passive"],[d,"touchcancel","mobileCleanup","passive"],[a.value,"contextmenu","prevent","notPassive"]]),f=setTimeout(()=>{f=null,l.show(i),i.qAnchorHandled=!0},300)},mobileCleanup(i){a.value.classList.remove("non-selectable"),f!==null&&(clearTimeout(f),f=null),e.value===!0&&i!==void 0&&lt()}}),n=function(i=o.contextMenu){if(o.noParentEvent===!0||a.value===null)return;let d;i===!0?l.$q.platform.is.mobile===!0?d=[[a.value,"touchstart","mobileTouch","passive"]]:d=[[a.value,"mousedown","hide","passive"],[a.value,"contextmenu","contextClick","notPassive"]]:d=[[a.value,"click","toggle","passive"],[a.value,"keyup","toggleKey","passive"]],ue(c,"anchor",d)});function h(){ze(c,"anchor")}function m(i){for(a.value=i;a.value.classList.contains("q-anchor--skip");)a.value=a.value.parentNode;n()}function g(){if(o.target===!1||o.target===""||l.$el.parentNode===null)a.value=null;else if(o.target===!0)m(l.$el.parentNode);else{let i=o.target;if(typeof o.target=="string")try{i=document.querySelector(o.target)}catch{i=void 0}i!=null?(a.value=i.$el||i,n()):(a.value=null,console.error(`Anchor: target "${o.target}" not found`))}}return p(()=>o.contextMenu,i=>{a.value!==null&&(h(),n(i))}),p(()=>o.target,()=>{a.value!==null&&h(),g()}),p(()=>o.noParentEvent,i=>{a.value!==null&&(i===!0?h():n())}),be(()=>{g(),t!==!0&&o.modelValue===!0&&a.value===null&&u("update:modelValue",!1)}),R(()=>{f!==null&&clearTimeout(f),h()}),{anchorEl:a,canShow:v,anchorEvents:c}}function mt(e,t){const n=E(null);let o;function l(f,v){const c=`${v!==void 0?"add":"remove"}EventListener`,h=v!==void 0?v:o;f!==window&&f[c]("scroll",h,N.passive),window[c]("scroll",h,N.passive),o=v}function u(){n.value!==null&&(l(n.value),n.value=null)}const a=p(()=>e.noParentEvent,()=>{n.value!==null&&(u(),t())});return R(a),{localScrollTarget:n,unconfigureScrollTarget:u,changeScrollEvent:l}}const D=[];function zt(e){return D.find(t=>t.contentEl!==null&&t.contentEl.contains(e))}function ye(e,t){do{if(e.$options.name==="QMenu"){if(e.hide(t),e.$props.separateClosePopup===!0)return F(e)}else if(e.__qPortal===!0){const n=F(e);return n!==void 0&&n.$options.name==="QPopupProxy"?(e.hide(t),n):e}e=F(e)}while(e!=null)}function _t(e,t,n){for(;n!==0&&e!==void 0&&e!==null;){if(e.__qPortal===!0){if(n--,e.$options.name==="QMenu"){e=ye(e,t);continue}e.hide(t)}e=F(e)}}function gt(e){for(e=e.parent;e!=null;){if(e.type.name==="QGlobalDialog")return!0;if(e.type.name==="QDialog"||e.type.name==="QMenu")return!1;e=e.parent}return!1}function bt(e,t,n,o){const l=E(!1),u=E(!1);let a=null;const f={},v=o==="dialog"&&gt(e);function c(m){if(m===!0){ae(f),u.value=!0;return}u.value=!1,l.value===!1&&(v===!1&&a===null&&(a=Ke(!1,o)),l.value=!0,D.push(e.proxy),Oe(f))}function h(m){if(u.value=!1,m!==!0)return;ae(f),l.value=!1;const g=D.indexOf(e.proxy);g!==-1&&D.splice(g,1),a!==null&&(Ge(a),a=null)}return _e(()=>{h(!0)}),e.proxy.__qPortal=!0,Ie(e.proxy,"contentEl",()=>t.value),{showPortal:c,hidePortal:h,portalIsActive:l,portalIsAccessible:u,renderPortal:()=>v===!0?n():l.value===!0?[C(Ve,{to:a},n())]:void 0}}const Se={transitionShow:{type:String,default:"fade"},transitionHide:{type:String,default:"fade"},transitionDuration:{type:[String,Number],default:300}};function wt(e,t=()=>{},n=()=>{}){return{transitionProps:x(()=>{const o=`q-transition--${e.transitionShow||t()}`,l=`q-transition--${e.transitionHide||n()}`;return{appear:!0,enterFromClass:`${o}-enter-from`,enterActiveClass:`${o}-enter-active`,enterToClass:`${o}-enter-to`,leaveFromClass:`${l}-leave-from`,leaveActiveClass:`${l}-leave-active`,leaveToClass:`${l}-leave-to`}}),transitionStyle:x(()=>`--q-transition-duration: ${e.transitionDuration}ms`)}}function xt(){let e;const t=j();function n(){e=void 0}return Ne(n),R(n),{removeTick:n,registerTick(o){e=o,ge(()=>{e===o&&(Ue(t)===!1&&e(),e=void 0)})}}}const q=[];let $;function yt(e){$=e.keyCode===27}function St(){$===!0&&($=!1)}function Ct(e){$===!0&&($=!1,me(e,27)===!0&&q[q.length-1](e))}function Ce(e){window[e]("keydown",yt),window[e]("blur",St),window[e]("keyup",Ct),$=!1}function kt(e){Y.is.desktop===!0&&(q.push(e),q.length===1&&Ce("addEventListener"))}function se(e){const t=q.indexOf(e);t>-1&&(q.splice(t,1),q.length===0&&Ce("removeEventListener"))}const H=[];function ke(e){H[H.length-1](e)}function pt(e){Y.is.desktop===!0&&(H.push(e),H.length===1&&document.body.addEventListener("focusin",ke))}function Et(e){const t=H.indexOf(e);t>-1&&(H.splice(t,1),H.length===0&&document.body.removeEventListener("focusin",ke))}const{notPassiveCapture:Q}=N,P=[];function O(e){const t=e.target;if(t===void 0||t.nodeType===8||t.classList.contains("no-pointer-events")===!0)return;let n=D.length-1;for(;n>=0;){const o=D[n].$;if(o.type.name==="QTooltip"){n--;continue}if(o.type.name!=="QDialog")break;if(o.props.seamless!==!0)return;n--}for(let o=P.length-1;o>=0;o--){const l=P[o];if((l.anchorEl.value===null||l.anchorEl.value.contains(t)===!1)&&(t===document.body||l.innerRef.value!==null&&l.innerRef.value.contains(t)===!1))e.qClickOutside=!0,l.onClickOutside(e);else return}}function Tt(e){P.push(e),P.length===1&&(document.addEventListener("mousedown",O,Q),document.addEventListener("touchstart",O,Q))}function re(e){const t=P.findIndex(n=>n===e);t>-1&&(P.splice(t,1),P.length===0&&(document.removeEventListener("mousedown",O,Q),document.removeEventListener("touchstart",O,Q)))}let ce,de;function fe(e){const t=e.split(" ");return t.length!==2?!1:["top","center","bottom"].includes(t[0])!==!0?(console.error("Anchor/Self position must start with one of top/center/bottom"),!1):["left","middle","right","start","end"].includes(t[1])!==!0?(console.error("Anchor/Self position must end with one of left/middle/right/start/end"),!1):!0}function qt(e){return e?!(e.length!==2||typeof e[0]!="number"||typeof e[1]!="number"):!0}const U={"start#ltr":"left","start#rtl":"right","end#ltr":"right","end#rtl":"left"};["left","middle","right"].forEach(e=>{U[`${e}#ltr`]=e,U[`${e}#rtl`]=e});function he(e,t){const n=e.split(" ");return{vertical:n[0],horizontal:U[`${n[1]}#${t===!0?"rtl":"ltr"}`]}}function Ht(e,t){let{top:n,left:o,right:l,bottom:u,width:a,height:f}=e.getBoundingClientRect();return t!==void 0&&(n-=t[1],o-=t[0],u+=t[1],l+=t[0],a+=t[0],f+=t[1]),{top:n,bottom:u,height:f,left:o,right:l,width:a,middle:o+(l-o)/2,center:n+(u-n)/2}}function Pt(e,t,n){let{top:o,left:l}=e.getBoundingClientRect();return o+=t.top,l+=t.left,n!==void 0&&(o+=n[1],l+=n[0]),{top:o,bottom:o+1,height:1,left:l,right:l+1,width:1,middle:l,center:o}}function Bt(e,t){return{top:0,center:t/2,bottom:t,left:0,middle:e/2,right:e}}function ve(e,t,n,o){return{top:e[n.vertical]-t[o.vertical],left:e[n.horizontal]-t[o.horizontal]}}function pe(e,t=0){if(e.targetEl===null||e.anchorEl===null||t>5)return;if(e.targetEl.offsetHeight===0||e.targetEl.offsetWidth===0){setTimeout(()=>{pe(e,t+1)},10);return}const{targetEl:n,offset:o,anchorEl:l,anchorOrigin:u,selfOrigin:a,absoluteOffset:f,fit:v,cover:c,maxHeight:h,maxWidth:m}=e;if(Y.is.ios===!0&&window.visualViewport!==void 0){const W=document.body.style,{offsetLeft:y,offsetTop:S}=window.visualViewport;y!==ce&&(W.setProperty("--q-pe-left",y+"px"),ce=y),S!==de&&(W.setProperty("--q-pe-top",S+"px"),de=S)}const{scrollLeft:g,scrollTop:i}=n,d=f===void 0?Ht(l,c===!0?[0,0]:o):Pt(l,f,o);Object.assign(n.style,{top:0,left:0,minWidth:null,minHeight:null,maxWidth:m||"100vw",maxHeight:h||"100vh",visibility:"visible"});const{offsetWidth:B,offsetHeight:T}=n,{elWidth:M,elHeight:A}=v===!0||c===!0?{elWidth:Math.max(d.width,B),elHeight:c===!0?Math.max(d.height,T):T}:{elWidth:B,elHeight:T};let b={maxWidth:m,maxHeight:h};(v===!0||c===!0)&&(b.minWidth=d.width+"px",c===!0&&(b.minHeight=d.height+"px")),Object.assign(n.style,b);const s=Bt(M,A);let w=ve(d,s,u,a);if(f===void 0||o===void 0)G(w,d,s,u,a);else{const{top:W,left:y}=w;G(w,d,s,u,a);let S=!1;if(w.top!==W){S=!0;const k=2*o[1];d.center=d.top-=k,d.bottom-=k+2}if(w.left!==y){S=!0;const k=2*o[0];d.middle=d.left-=k,d.right-=k+2}S===!0&&(w=ve(d,s,u,a),G(w,d,s,u,a))}b={top:w.top+"px",left:w.left+"px"},w.maxHeight!==void 0&&(b.maxHeight=w.maxHeight+"px",d.height>w.maxHeight&&(b.minHeight=b.maxHeight)),w.maxWidth!==void 0&&(b.maxWidth=w.maxWidth+"px",d.width>w.maxWidth&&(b.minWidth=b.maxWidth)),Object.assign(n.style,b),n.scrollTop!==i&&(n.scrollTop=i),n.scrollLeft!==g&&(n.scrollLeft=g)}function G(e,t,n,o,l){const u=n.bottom,a=n.right,f=at(),v=window.innerHeight-f,c=document.body.clientWidth;if(e.top<0||e.top+u>v)if(l.vertical==="center")e.top=t[o.vertical]>v/2?Math.max(0,v-u):0,e.maxHeight=Math.min(u,v);else if(t[o.vertical]>v/2){const h=Math.min(v,o.vertical==="center"?t.center:o.vertical===l.vertical?t.bottom:t.top);e.maxHeight=Math.min(u,h),e.top=Math.max(0,h-u)}else e.top=Math.max(0,o.vertical==="center"?t.center:o.vertical===l.vertical?t.top:t.bottom),e.maxHeight=Math.min(u,v-e.top);if(e.left<0||e.left+a>c)if(e.maxWidth=Math.min(a,c),l.horizontal==="middle")e.left=t[o.horizontal]>c/2?Math.max(0,c-a):0;else if(t[o.horizontal]>c/2){const h=Math.min(c,o.horizontal==="middle"?t.middle:o.horizontal===l.horizontal?t.right:t.left);e.maxWidth=Math.min(a,h),e.left=Math.max(0,h-e.maxWidth)}else e.left=Math.max(0,o.horizontal==="middle"?t.middle:o.horizontal===l.horizontal?t.left:t.right),e.maxWidth=Math.min(a,c-e.left)}var Mt=X({name:"QMenu",inheritAttrs:!1,props:{...ht,...it,...dt,...Se,persistent:Boolean,autoClose:Boolean,separateClosePopup:Boolean,noRouteDismiss:Boolean,noRefocus:Boolean,noFocus:Boolean,fit:Boolean,cover:Boolean,square:Boolean,anchor:{type:String,validator:fe},self:{type:String,validator:fe},offset:{type:Array,validator:qt},scrollTarget:{default:void 0},touchPosition:Boolean,maxHeight:{type:String,default:null},maxWidth:{type:String,default:null}},emits:[...ut,"click","escapeKey"],setup(e,{slots:t,emit:n,attrs:o}){let l=null,u,a,f;const v=j(),{proxy:c}=v,{$q:h}=c,m=E(null),g=E(!1),i=x(()=>e.persistent!==!0&&e.noRouteDismiss!==!0),d=ft(e,h),{registerTick:B,removeTick:T}=xt(),{registerTimeout:M}=st(),{transitionProps:A,transitionStyle:b}=wt(e),{localScrollTarget:s,changeScrollEvent:w,unconfigureScrollTarget:W}=mt(e,oe),{anchorEl:y,canShow:S}=vt({showing:g}),{hide:k}=rt({showing:g,canShow:S,handleShow:Pe,handleHide:Be,hideOnRouteChange:i,processOnMount:!0}),{showPortal:J,hidePortal:Z,renderPortal:Ee}=bt(v,m,Ae,"menu"),z={anchorEl:y,innerRef:m,onClickOutside(r){if(e.persistent!==!0&&g.value===!0)return k(r),(r.type==="touchstart"||r.target.classList.contains("q-dialog__backdrop"))&&Ze(r),!0}},ee=x(()=>he(e.anchor||(e.cover===!0?"center middle":"bottom start"),h.lang.rtl)),Te=x(()=>e.cover===!0?ee.value:he(e.self||"top start",h.lang.rtl)),qe=x(()=>(e.square===!0?" q-menu--square":"")+(d.value===!0?" q-menu--dark q-dark":"")),He=x(()=>e.autoClose===!0?{onClick:Me}:{}),te=x(()=>g.value===!0&&e.persistent!==!0);p(te,r=>{r===!0?(kt(I),Tt(z)):(se(I),re(z))});function _(){Re(()=>{let r=m.value;r&&r.contains(document.activeElement)!==!0&&(r=r.querySelector("[autofocus][tabindex], [data-autofocus][tabindex]")||r.querySelector("[autofocus] [tabindex], [data-autofocus] [tabindex]")||r.querySelector("[autofocus], [data-autofocus]")||r,r.focus({preventScroll:!0}))})}function Pe(r){if(l=e.noRefocus===!1?document.activeElement:null,pt(le),J(),oe(),u=void 0,r!==void 0&&(e.touchPosition||e.contextMenu)){const V=Xe(r);if(V.left!==void 0){const{top:We,left:De}=y.value.getBoundingClientRect();u={left:V.left-De,top:V.top-We}}}a===void 0&&(a=p(()=>h.screen.width+"|"+h.screen.height+"|"+e.self+"|"+e.anchor+"|"+h.lang.rtl,L)),e.noFocus!==!0&&document.activeElement.blur(),B(()=>{L(),e.noFocus!==!0&&_()}),M(()=>{h.platform.is.ios===!0&&(f=e.autoClose,m.value.click()),L(),J(!0),n("show",r)},e.transitionDuration)}function Be(r){T(),Z(),ne(!0),l!==null&&(r===void 0||r.qClickOutside!==!0)&&(((r&&r.type.indexOf("key")===0?l.closest('[tabindex]:not([tabindex^="-"])'):void 0)||l).focus(),l=null),M(()=>{Z(!0),n("hide",r)},e.transitionDuration)}function ne(r){u=void 0,a!==void 0&&(a(),a=void 0),(r===!0||g.value===!0)&&(Et(le),W(),re(z),se(I)),r!==!0&&(l=null)}function oe(){(y.value!==null||e.scrollTarget!==void 0)&&(s.value=ct(y.value,e.scrollTarget),w(s.value,L))}function Me(r){f!==!0?(ye(c,r),n("click",r)):f=!1}function le(r){te.value===!0&&e.noFocus!==!0&&Je(m.value,r.target)!==!0&&_()}function I(r){n("escapeKey"),k(r)}function L(){pe({targetEl:m.value,offset:e.offset,anchorEl:y.value,anchorOrigin:ee.value,selfOrigin:Te.value,absoluteOffset:u,fit:e.fit,cover:e.cover,maxHeight:e.maxHeight,maxWidth:e.maxWidth})}function Ae(){return C(Ye,A.value,()=>g.value===!0?C("div",{role:"menu",...o,ref:m,tabindex:-1,class:["q-menu q-position-engine scroll"+qe.value,o.class],style:[o.style,b.value],...He.value},we(t.default)):null)}return R(ne),Object.assign(c,{focus:_,updatePosition:L}),Ee}});let At=!1;{const e=document.createElement("div");e.setAttribute("dir","rtl"),Object.assign(e.style,{width:"1px",height:"1px",overflow:"auto"});const t=document.createElement("div");Object.assign(t.style,{width:"1000px",height:"1px"}),document.body.appendChild(e),e.appendChild(t),e.scrollLeft=-1e3,At=e.scrollLeft>=0,e.remove()}const Wt=Object.keys(xe),Dt=e=>Wt.reduce((t,n)=>{const o=e[n];return o!==void 0&&(t[n]=o),t},{});var It=X({name:"QBtnDropdown",props:{...xe,...Se,modelValue:Boolean,split:Boolean,dropdownIcon:String,contentClass:[Array,String,Object],contentStyle:[Array,String,Object],cover:Boolean,persistent:Boolean,noRouteDismiss:Boolean,autoClose:Boolean,menuAnchor:{type:String,default:"bottom end"},menuSelf:{type:String,default:"top end"},menuOffset:Array,disableMainBtn:Boolean,disableDropdown:Boolean,noIconAnimation:Boolean,toggleAriaLabel:String},emits:["update:modelValue","click","beforeShow","show","beforeHide","hide"],setup(e,{slots:t,emit:n}){const{proxy:o}=j(),l=E(e.modelValue),u=E(null),a=je(),f=x(()=>{const s={"aria-expanded":l.value===!0?"true":"false","aria-haspopup":"true","aria-controls":a,"aria-label":e.toggleAriaLabel||o.$q.lang.label[l.value===!0?"collapse":"expand"](e.label)};return(e.disable===!0||e.split===!1&&e.disableMainBtn===!0||e.disableDropdown===!0)&&(s["aria-disabled"]="true"),s}),v=x(()=>"q-btn-dropdown__arrow"+(l.value===!0&&e.noIconAnimation===!1?" rotate-180":"")+(e.split===!1?" q-btn-dropdown__arrow-container":"")),c=x(()=>tt(e)),h=x(()=>Dt(e));p(()=>e.modelValue,s=>{u.value!==null&&u.value[s?"show":"hide"]()}),p(()=>e.split,b);function m(s){l.value=!0,n("beforeShow",s)}function g(s){n("show",s),n("update:modelValue",!0)}function i(s){l.value=!1,n("beforeHide",s)}function d(s){n("hide",s),n("update:modelValue",!1)}function B(s){n("click",s)}function T(s){nt(s),b(),n("click",s)}function M(s){u.value!==null&&u.value.toggle(s)}function A(s){u.value!==null&&u.value.show(s)}function b(s){u.value!==null&&u.value.hide(s)}return Object.assign(o,{show:A,hide:b,toggle:M}),be(()=>{e.modelValue===!0&&A()}),()=>{const s=[C(et,{class:v.value,name:e.dropdownIcon||o.$q.iconSet.arrow.dropdown})];return e.disableDropdown!==!0&&s.push(C(Mt,{ref:u,id:a,class:e.contentClass,style:e.contentStyle,cover:e.cover,fit:!0,persistent:e.persistent,noRouteDismiss:e.noRouteDismiss,autoClose:e.autoClose,anchor:e.menuAnchor,self:e.menuSelf,offset:e.menuOffset,separateClosePopup:!0,transitionShow:e.transitionShow,transitionHide:e.transitionHide,transitionDuration:e.transitionDuration,onBeforeShow:m,onShow:g,onBeforeHide:i,onHide:d},t.default)),e.split===!1?C(K,{class:"q-btn-dropdown q-btn-dropdown--simple",...h.value,...f.value,disable:e.disable===!0||e.disableMainBtn===!0,noWrap:!0,round:!1,onClick:B},{default:()=>we(t.label,[]).concat(s),loading:t.loading}):C(ot,{class:"q-btn-dropdown q-btn-dropdown--split no-wrap q-btn-item",rounded:e.rounded,square:e.square,...c.value,glossy:e.glossy,stretch:e.stretch},()=>[C(K,{class:"q-btn-dropdown--current",...h.value,disable:e.disable===!0||e.disableMainBtn===!0,noWrap:!0,round:!1,onClick:T},{default:t.label,loading:t.loading}),C(K,{class:"q-btn-dropdown__arrow-container q-anchor--skip",...f.value,...c.value,disable:e.disable===!0||e.disableDropdown===!0,rounded:e.rounded,color:e.color,textColor:e.textColor,dense:e.dense,size:e.size,padding:e.padding,ripple:e.ripple},()=>s)])}}});export{Mt as Q,xt as a,wt as b,bt as c,se as d,pt as e,kt as f,At as g,jt as h,zt as i,_t as j,It as k,ht as l,qt as m,mt as n,vt as o,re as p,he as q,Et as r,pe as s,Tt as t,Se as u,fe as v};
