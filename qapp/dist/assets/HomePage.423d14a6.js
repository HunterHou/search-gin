import{ai as z,r as P,O as N,Z as U,j as $,R as d,$ as v,aa as n,U as o,T as u,a0 as q,al as B,b0 as F,a1 as C,a2 as k,X as m,S as w,af as y,Y as p,a5 as h,ao as O,an as j}from"./index.115d9e13.js";import{Q as b,b as H,a as A}from"./index.994c09c1.js";import{Q as L}from"./QPagination.76d5ae6a.js";import{Q as E}from"./QPageSticky.28175de5.js";import{Q as _}from"./QChip.5c7846f9.js";import{u as J}from"./use-quasar.20b1dd35.js";import{S as X,R as Y}from"./searchAPI.6319d1bb.js";import{u as Z}from"./System.9115f6cd.js";import{u as G,a as W}from"./index.1ac191d9.js";import"./format.a33550d6.js";import"./axios.322abf71.js";const ee={class:"q-pa-md"},ae={class:"row justify-center q-gutter-sm"},le={class:"q-pa-lg flex flex-center"},oe={class:"row justify-center q-gutter-sm"},re={style:{padding:"0",margin:"0","background-color":"rgba(0, 0, 0, 0)",display:"flex","flex-direction":"row","justify-content":"space-between",width:"100%"}},te=["onClick"],se=["onClick"],ne=["onClick"],ue=["onClick"],ie={class:"text-subtitle2"},de={__name:"HomePage",setup(ce){const T=P("Hello"),{copy:V}=G({source:T}),Q=P<HTMLElement|null>null;W(Q);const g=Z(),M=J(),e=N({currentData:{},queryParam:{Keyword:"",MovieType:"",OnlyRepeat:!1,Page:1,PageSize:10,SortField:"MTime",SortType:"desc"},resultData:{},fullscreen:!1}),I=r=>{e.currentData=r,g.Playing=r,g.drawerRight=!0},D=r=>{console.log("view.queryParam.Page",r),t()},t=async()=>{g.syncSearchParam(e.queryParam),localStorage.setItem("queryParam",JSON.stringify(e.queryParam));const{data:r}=await X("/api/movieList",e.queryParam);console.log(r),e.resultData=r},f=P(!1),K=async()=>{f.value=!0;const{Code:r,Message:l}=await Y();r==="200"&&M.notify(l),f.value=!1},R=U();return $(()=>{const{Page:r,PageSize:l,MovieType:a,SortField:i,SortType:c,Keyword:s,showStyle:x}=R.query;if(r&&l)e.queryParam.Page=Number(r),e.queryParam.PageSize=Number(l),e.queryParam.MovieType=a,e.queryParam.SortField=i,e.queryParam.SortType=c,e.queryParam.Keyword=s,e.queryParam.Keyword=s,e.queryParam.showStyle=x;else{const S=JSON.parse(localStorage.getItem("queryParam"));S&&(e.queryParam=S)}t()}),(r,l)=>(d(),v("div",ee,[n("div",ae,[o(q,{loading:f.value,color:"red",onClick:K},{loading:u(()=>[m(" \u6267\u884C\u4E2D ")]),default:u(()=>[m(" \u626B\u63CF ")]),_:1},8,["loading"]),o(b,{modelValue:e.queryParam.SortField,"onUpdate:modelValue":[l[0]||(l[0]=a=>e.queryParam.SortField=a),t],"toggle-color":"primary",options:[{label:"\u65F6",value:"MTime"},{label:"\u5BB9",value:"Size"},{label:"\u540D",value:"Code"}]},null,8,["modelValue"]),o(b,{modelValue:e.queryParam.SortType,"onUpdate:modelValue":[l[1]||(l[1]=a=>e.queryParam.SortType=a),t],"toggle-color":"primary",options:[{label:"\u6B63",value:"asc"},{label:"\u5012",value:"desc"}]},null,8,["modelValue"]),o(b,{modelValue:e.queryParam.MovieType,"onUpdate:modelValue":[l[2]||(l[2]=a=>e.queryParam.MovieType=a),t],"toggle-color":"primary",options:[{label:"\u5168\u90E8",value:""},{label:"\u9A91\u5175",value:"\u9A91\u5175"},{label:"\u6B65\u5175",value:"\u6B65\u5175"},{label:"\u56FD\u4EA7",value:"\u56FD\u4EA7"},{label:"\u65AF\u5DF4\u8FBE",value:"\u65AF\u5DF4\u8FBE"},{label:"\u6F2B\u52A8",value:"\u6F2B\u52A8"},{label:"\u65E0",value:"\u65E0"}]},null,8,["modelValue"]),o(B,{modelValue:e.queryParam.Keyword,"onUpdate:modelValue":[l[3]||(l[3]=a=>e.queryParam.Keyword=a),t],dense:!0,filled:"",clearable:""},null,8,["modelValue"]),o(F,{modelValue:e.queryParam.OnlyRepeat,"onUpdate:modelValue":[l[4]||(l[4]=a=>e.queryParam.OnlyRepeat=a),t],label:"\u91CD"},null,8,["modelValue"])]),o(E,{position:"bottom",style:{"z-index":"9","background-color":"rgba(0, 0, 0, 0.6)"}},{default:u(()=>[n("div",le,[o(L,{modelValue:e.queryParam.Page,"onUpdate:modelValue":[l[5]||(l[5]=a=>e.queryParam.Page=a),D],color:"purple",ellipses:!1,max:e.resultData.TotalPage||0,"max-pages":6,"boundary-numbers":""},null,8,["modelValue","max"])])]),_:1}),n("div",oe,[(d(!0),v(C,null,k(e.resultData.Data,a=>(d(),w(j,{class:"q-ma-sm example-item",key:a.Id},{default:u(()=>[o(A,{fit:"cover",easier:"",draggable:"",src:h(H)(a.Id),class:"item-img",onClick:i=>I(a)},{default:u(()=>{var i,c;return[n("div",re,[n("div",{onClick:y(()=>{},["stop"]),style:{display:"flex","flex-direction":"column","justify-content":"flex-start",width:"fit-content"}},[(d(!0),v(C,null,k(a.Tags,s=>(d(),w(_,{square:"",color:"red","text-color":"white",key:s,style:{"margin-left":"0px",padding:"0 4px"}},{default:u(()=>[n("span",{onClick:x=>{e.queryParam.Keyword=s,t()}},p(s),9,se)]),_:2},1024))),128))],8,te),o(_,{onClick:y(()=>{},["stop"]),square:"",color:"green","text-color":"white",style:{width:"fit-content","margin-right":"0px",padding:"0 6px"}},{default:u(()=>[n("span",{onClick:s=>{e.queryParam.Keyword=a.MovieType,t()}},p(a.MovieType),9,ne)]),_:2},1032,["onClick"])]),n("div",{class:"absolute-bottom text-body1 text-center",style:{padding:"4px"},onClick:y(()=>{},["stop"])},[o(q,{flat:"",style:{color:"#59d89d"},label:(i=a.Actress)==null?void 0:i.substring(0,10),onClick:s=>{e.queryParam.Keyword=a.Actress,t()}},null,8,["label","onClick"]),o(q,{flat:"",style:{color:"goldenrod"},label:(c=a.Code)==null?void 0:c.substring(0,10),onClick:s=>h(V)(a.Code)},null,8,["label","onClick"])],8,ue)]}),_:2},1032,["src","onClick"]),o(O,null,{default:u(()=>[n("div",ie,[o(_,{onClick:y(()=>{},["stop"]),square:"",color:"green","text-color":"white",style:{padding:"0px 4px"}},{default:u(()=>[m(p(a.SizeStr),1)]),_:2},1032,["onClick"]),m(p(a.Title),1)])]),_:2},1024)]),_:2},1024))),128))])]))}};var Se=z(de,[["__scopeId","data-v-3ad0daa6"]]);export{Se as default};
