import{ac as z,r as P,O as N,aj as O,j as U,Q as d,R as v,Y as n,Z as o,a1 as u,ae as q,af as j,aO as B,a3 as k,a4 as w,V as m,aa as h,a7 as y,_ as p,U as V,ah as F,ag as $}from"./index.a99383f0.js";import{Q as b,a as H}from"./QPagination.52158908.js";import{Q as A}from"./QPageSticky.4c58a4b0.js";import{Q as _}from"./QChip.d7d9be6d.js";import{a as L,Q as E}from"./index.6a05b42c.js";import{u as J}from"./use-quasar.b0e80510.js";import"./axios.6cee7fb0.js";import{S as Y,R as Z}from"./searchAPI.cbac2bb4.js";import{u as G}from"./System.90c0dcfd.js";import{u as W,a as X,b as ee}from"./index.2a58940d.js";import"./QBtnGroup.c4595211.js";const ae={class:"q-pa-md"},le={class:"row justify-center q-gutter-sm"},oe={class:"q-pa-lg flex flex-center"},re={class:"row justify-center q-gutter-sm"},te={style:{padding:"0",margin:"0","background-color":"rgba(0, 0, 0, 0)",display:"flex","flex-direction":"row","justify-content":"space-between",width:"100%"}},se=["onClick"],ne=["onClick"],ue=["onClick"],ie=["onClick"],de={class:"text-subtitle2"},ce={__name:"HomePage",setup(me){const T=P("Hello"),{copy:Q}=W({source:T}),x=P<HTMLElement|null>null;X(x,{initialValue:{x:40,y:40}}),ee(x);const g=G(),M=J(),e=N({currentData:{},queryParam:{Keyword:"",MovieType:"",OnlyRepeat:!1,Page:1,PageSize:10,SortField:"MTime",SortType:"desc"},resultData:{},fullscreen:!1}),I=r=>{e.currentData=r,g.Playing=r,g.drawerRight=!0},D=r=>{console.log("view.queryParam.Page",r),t()},t=async()=>{g.syncSearchParam(e.queryParam),localStorage.setItem("queryParam",JSON.stringify(e.queryParam));const{data:r}=await Y("/api/movieList",e.queryParam);console.log(r),e.resultData=r},f=P(!1),K=async()=>{f.value=!0;const{Code:r,Message:l}=await Z();r==="200"&&M.notify(l),f.value=!1},R=O();return U(()=>{const{Page:r,PageSize:l,MovieType:a,SortField:i,SortType:c,Keyword:s,showStyle:S}=R.query;if(r&&l)e.queryParam.Page=Number(r),e.queryParam.PageSize=Number(l),e.queryParam.MovieType=a,e.queryParam.SortField=i,e.queryParam.SortType=c,e.queryParam.Keyword=s,e.queryParam.Keyword=s,e.queryParam.showStyle=S;else{const C=JSON.parse(localStorage.getItem("queryParam"));C&&(e.queryParam=C)}t()}),(r,l)=>(d(),v("div",ae,[n("div",le,[o(q,{loading:f.value,color:"red",onClick:K},{loading:u(()=>[m(" \u6267\u884C\u4E2D ")]),default:u(()=>[m(" \u626B\u63CF ")]),_:1},8,["loading"]),o(b,{modelValue:e.queryParam.SortField,"onUpdate:modelValue":[l[0]||(l[0]=a=>e.queryParam.SortField=a),t],"toggle-color":"primary",options:[{label:"\u65F6",value:"MTime"},{label:"\u5BB9",value:"Size"},{label:"\u540D",value:"Code"}]},null,8,["modelValue"]),o(b,{modelValue:e.queryParam.SortType,"onUpdate:modelValue":[l[1]||(l[1]=a=>e.queryParam.SortType=a),t],"toggle-color":"primary",options:[{label:"\u6B63",value:"asc"},{label:"\u5012",value:"desc"}]},null,8,["modelValue"]),o(b,{modelValue:e.queryParam.MovieType,"onUpdate:modelValue":[l[2]||(l[2]=a=>e.queryParam.MovieType=a),t],"toggle-color":"primary",options:[{label:"\u5168\u90E8",value:""},{label:"\u9A91\u5175",value:"\u9A91\u5175"},{label:"\u6B65\u5175",value:"\u6B65\u5175"},{label:"\u56FD\u4EA7",value:"\u56FD\u4EA7"},{label:"\u65AF\u5DF4\u8FBE",value:"\u65AF\u5DF4\u8FBE"},{label:"\u6F2B\u52A8",value:"\u6F2B\u52A8"},{label:"\u65E0",value:"\u65E0"}]},null,8,["modelValue"]),o(j,{modelValue:e.queryParam.Keyword,"onUpdate:modelValue":[l[3]||(l[3]=a=>e.queryParam.Keyword=a),t],dense:!0,filled:"",clearable:""},null,8,["modelValue"]),o(B,{modelValue:e.queryParam.OnlyRepeat,"onUpdate:modelValue":[l[4]||(l[4]=a=>e.queryParam.OnlyRepeat=a),t],label:"\u91CD"},null,8,["modelValue"])]),o(A,{position:"bottom",style:{"z-index":"9","background-color":"rgba(0, 0, 0, 0.6)"}},{default:u(()=>[n("div",oe,[o(H,{modelValue:e.queryParam.Page,"onUpdate:modelValue":[l[5]||(l[5]=a=>e.queryParam.Page=a),D],color:"purple",ellipses:!1,max:e.resultData.TotalPage||0,"max-pages":6,"boundary-numbers":""},null,8,["modelValue","max"])])]),_:1}),n("div",re,[(d(!0),v(k,null,w(e.resultData.Data,a=>(d(),h($,{class:"q-ma-sm example-item",key:a.Id},{default:u(()=>[o(E,{fit:"cover",easier:"",draggable:"",src:V(L)(a.Id),class:"item-img",onClick:i=>I(a)},{default:u(()=>{var i,c;return[n("div",te,[n("div",{onClick:y(()=>{},["stop"]),style:{display:"flex","flex-direction":"column","justify-content":"flex-start",width:"fit-content"}},[(d(!0),v(k,null,w(a.Tags,s=>(d(),h(_,{square:"",color:"red","text-color":"white",key:s,style:{"margin-left":"0px",padding:"0 4px"}},{default:u(()=>[n("span",{onClick:S=>{e.queryParam.Keyword=s,t()}},p(s),9,ne)]),_:2},1024))),128))],8,se),o(_,{onClick:y(()=>{},["stop"]),square:"",color:"green","text-color":"white",style:{width:"fit-content","margin-right":"0px",padding:"0 6px"}},{default:u(()=>[n("span",{onClick:s=>{e.queryParam.Keyword=a.MovieType,t()}},p(a.MovieType),9,ue)]),_:2},1032,["onClick"])]),n("div",{class:"absolute-bottom text-body1 text-center",style:{padding:"4px"},onClick:y(()=>{},["stop"])},[o(q,{flat:"",style:{color:"#59d89d"},label:(i=a.Actress)==null?void 0:i.substring(0,10),onClick:s=>{e.queryParam.Keyword=a.Actress,t()}},null,8,["label","onClick"]),o(q,{flat:"",style:{color:"goldenrod"},label:(c=a.Code)==null?void 0:c.substring(0,10),onClick:s=>V(Q)(a.Code)},null,8,["label","onClick"])],8,ie)]}),_:2},1032,["src","onClick"]),o(F,null,{default:u(()=>[n("div",de,[o(_,{onClick:y(()=>{},["stop"]),square:"",color:"green","text-color":"white",style:{padding:"0px 4px"}},{default:u(()=>[m(p(a.SizeStr),1)]),_:2},1032,["onClick"]),m(p(a.Title),1)])]),_:2},1024)]),_:2},1024))),128))])]))}};var Ce=z(ce,[["__scopeId","data-v-02a6967d"]]);export{Ce as default};
