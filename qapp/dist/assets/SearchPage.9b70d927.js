import{n as hl,r as N,a as z,w as Ie,t as wl,aV as Cl,v as Ht,x as Nt,o as Lt,H as re,h as B,g as Ge,c as Kt,aP as kl,aW as Qt,aX as xl,aY as Vl,aZ as _l,a_ as Et,a$ as De,b0 as ql,b1 as Pl,ar as st,ai as Il,b2 as Al,b3 as Fl,as as Pe,aE as Ut,b4 as Ml,av as fe,b5 as Ze,y as Ol,am as zl,b6 as El,b7 as Tl,K as Rl,j as pt,d as Dl,b8 as Bl,b9 as $l,ba as Hl,O as et,Q as Z,aa as se,a1 as F,U as X,Z as g,bb as Nl,af as He,ad as Ll,ae as G,T as Kl,ag as tt,Y as K,_ as ne,V as ve,R as Ae,a4 as Ne,z as vt,aO as jt,a3 as Fe,aA as Ql,ac as Ul,aj as jl,a7 as ct,a0 as Wl,a5 as Xl,a6 as Yl}from"./index.a99383f0.js";import{Q as dt,a as Jl}from"./QPagination.52158908.js";import{r as mt,Q as Gl,a as $e,b as Wt}from"./QBtnDropdown.d5e912d5.js";import{Q as gt}from"./QChip.d7d9be6d.js";import{a as Le,Q as Ye}from"./QItem.b69f9a83.js";import{Q as Je,a as yt}from"./QList.4c08310a.js";import{n as Tt,Q as Xt,c as Zl,a as eo}from"./index.6a05b42c.js";import{Q as to}from"./QPageSticky.4c58a4b0.js";import{u as St}from"./use-quasar.b0e80510.js";import{F as bt,a as Yt,R as Jt,S as Gt,b as Zt,P as lo,c as oo,d as ao}from"./searchAPI.cbac2bb4.js";import{u as no}from"./System.90c0dcfd.js";import{a as uo}from"./settingAPI.66e22ac0.js";import{u as io,o as Rt}from"./index.2a58940d.js";import"./QBtnGroup.c4595211.js";import"./selection.2b736806.js";import"./axios.6cee7fb0.js";const ue=1e3,ro=["start","center","end","start-force","center-force","end-force"],el=Array.prototype.filter,so=window.getComputedStyle(document.body).overflowAnchor===void 0?hl:function(e,r){e!==null&&(e._qOverflowAnimationFrame!==void 0&&cancelAnimationFrame(e._qOverflowAnimationFrame),e._qOverflowAnimationFrame=requestAnimationFrame(()=>{if(e===null)return;e._qOverflowAnimationFrame=void 0;const l=e.children||[];el.call(l,V=>V.dataset&&V.dataset.qVsAnchor!==void 0).forEach(V=>{delete V.dataset.qVsAnchor});const s=l[r];s&&s.dataset&&(s.dataset.qVsAnchor="")}))};function Me(e,r){return e+r}function ft(e,r,l,s,V,a,C,y){const o=e===window?document.scrollingElement||document.documentElement:e,T=V===!0?"offsetWidth":"offsetHeight",p={scrollStart:0,scrollViewSize:-C-y,scrollMaxSize:0,offsetStart:-C,offsetEnd:-y};if(V===!0?(e===window?(p.scrollStart=window.pageXOffset||window.scrollX||document.body.scrollLeft||0,p.scrollViewSize+=document.documentElement.clientWidth):(p.scrollStart=o.scrollLeft,p.scrollViewSize+=o.clientWidth),p.scrollMaxSize=o.scrollWidth,a===!0&&(p.scrollStart=(mt===!0?p.scrollMaxSize-p.scrollViewSize:0)-p.scrollStart)):(e===window?(p.scrollStart=window.pageYOffset||window.scrollY||document.body.scrollTop||0,p.scrollViewSize+=document.documentElement.clientHeight):(p.scrollStart=o.scrollTop,p.scrollViewSize+=o.clientHeight),p.scrollMaxSize=o.scrollHeight),l!==null)for(let b=l.previousElementSibling;b!==null;b=b.previousElementSibling)b.classList.contains("q-virtual-scroll--skip")===!1&&(p.offsetStart+=b[T]);if(s!==null)for(let b=s.nextElementSibling;b!==null;b=b.nextElementSibling)b.classList.contains("q-virtual-scroll--skip")===!1&&(p.offsetEnd+=b[T]);if(r!==e){const b=o.getBoundingClientRect(),k=r.getBoundingClientRect();V===!0?(p.offsetStart+=k.left-b.left,p.offsetEnd-=k.width):(p.offsetStart+=k.top-b.top,p.offsetEnd-=k.height),e!==window&&(p.offsetStart+=p.scrollStart),p.offsetEnd+=p.scrollMaxSize-p.offsetStart}return p}function Dt(e,r,l,s){r==="end"&&(r=(e===window?document.body:e)[l===!0?"scrollWidth":"scrollHeight"]),e===window?l===!0?(s===!0&&(r=(mt===!0?document.body.scrollWidth-document.documentElement.clientWidth:0)-r),window.scrollTo(r,window.pageYOffset||window.scrollY||document.body.scrollTop||0)):window.scrollTo(window.pageXOffset||window.scrollX||document.body.scrollLeft||0,r):l===!0?(s===!0&&(r=(mt===!0?e.scrollWidth-e.offsetWidth:0)-r),e.scrollLeft=r):e.scrollTop=r}function Be(e,r,l,s){if(l>=s)return 0;const V=r.length,a=Math.floor(l/ue),C=Math.floor((s-1)/ue)+1;let y=e.slice(a,C).reduce(Me,0);return l%ue!==0&&(y-=r.slice(a*ue,l).reduce(Me,0)),s%ue!==0&&s!==V&&(y-=r.slice(s,C*ue).reduce(Me,0)),y}const co={virtualScrollSliceSize:{type:[Number,String],default:null},virtualScrollSliceRatioBefore:{type:[Number,String],default:1},virtualScrollSliceRatioAfter:{type:[Number,String],default:1},virtualScrollItemSize:{type:[Number,String],default:24},virtualScrollStickySizeStart:{type:[Number,String],default:0},virtualScrollStickySizeEnd:{type:[Number,String],default:0},tableColspan:[Number,String]},fo={virtualScrollHorizontal:Boolean,onVirtualScroll:Function,...co};function vo({virtualScrollLength:e,getVirtualScrollTarget:r,getVirtualScrollEl:l,virtualScrollItemSizeComputed:s}){const V=Ge(),{props:a,emit:C,proxy:y}=V,{$q:o}=y;let T,p,b,k=[],u;const $=N(0),S=N(0),R=N({}),E=N(null),I=N(null),x=N(null),q=N({from:0,to:0}),v=z(()=>a.tableColspan!==void 0?a.tableColspan:100);s===void 0&&(s=z(()=>a.virtualScrollItemSize));const c=z(()=>s.value+";"+a.virtualScrollHorizontal),i=z(()=>c.value+";"+a.virtualScrollSliceRatioBefore+";"+a.virtualScrollSliceRatioAfter);Ie(i,()=>{de()}),Ie(c,U);function U(){ge(p,!0)}function O(f){ge(f===void 0?p:f)}function Y(f,h){const _=r();if(_==null||_.nodeType===8)return;const L=ft(_,l(),E.value,I.value,a.virtualScrollHorizontal,o.lang.rtl,a.virtualScrollStickySizeStart,a.virtualScrollStickySizeEnd);b!==L.scrollViewSize&&de(L.scrollViewSize),ce(_,L,Math.min(e.value-1,Math.max(0,parseInt(f,10)||0)),0,ro.indexOf(h)>-1?h:p>-1&&f>p?"end":"start")}function ae(){const f=r();if(f==null||f.nodeType===8)return;const h=ft(f,l(),E.value,I.value,a.virtualScrollHorizontal,o.lang.rtl,a.virtualScrollStickySizeStart,a.virtualScrollStickySizeEnd),_=e.value-1,L=h.scrollMaxSize-h.offsetStart-h.offsetEnd-S.value;if(T===h.scrollStart)return;if(h.scrollMaxSize<=0){ce(f,h,0,0);return}b!==h.scrollViewSize&&de(h.scrollViewSize),le(q.value.from);const j=Math.floor(h.scrollMaxSize-Math.max(h.scrollViewSize,h.offsetEnd)-Math.min(u[_],h.scrollViewSize/2));if(j>0&&Math.ceil(h.scrollStart)>=j){ce(f,h,_,h.scrollMaxSize-h.offsetEnd-k.reduce(Me,0));return}let M=0,P=h.scrollStart-h.offsetStart,W=P;if(P<=L&&P+h.scrollViewSize>=$.value)P-=$.value,M=q.value.from,W=P;else for(let A=0;P>=k[A]&&M<_;A++)P-=k[A],M+=ue;for(;P>0&&M<_;)P-=u[M],P>-h.scrollViewSize?(M++,W=P):W=u[M]+P;ce(f,h,M,W)}function ce(f,h,_,L,j){const M=typeof j=="string"&&j.indexOf("-force")>-1,P=M===!0?j.replace("-force",""):j,W=P!==void 0?P:"start";let A=Math.max(0,_-R.value[W]),ee=A+R.value.total;ee>e.value&&(ee=e.value,A=Math.max(0,ee-R.value.total)),T=h.scrollStart;const he=A!==q.value.from||ee!==q.value.to;if(he===!1&&P===void 0){ze(_);return}const{activeElement:Ee}=document,ie=x.value;he===!0&&ie!==null&&ie!==Ee&&ie.contains(Ee)===!0&&(ie.addEventListener("focusout",Oe),setTimeout(()=>{ie!==null&&ie.removeEventListener("focusout",Oe)})),so(ie,_-A);const Qe=P!==void 0?u.slice(A,_).reduce(Me,0):0;if(he===!0){const ye=ee>=q.value.from&&A<=q.value.to?q.value.to:ee;q.value={from:A,to:ye},$.value=Be(k,u,0,A),S.value=Be(k,u,ee,e.value),requestAnimationFrame(()=>{q.value.to!==ee&&T===h.scrollStart&&(q.value={from:q.value.from,to:ee},S.value=Be(k,u,ee,e.value))})}requestAnimationFrame(()=>{if(T!==h.scrollStart)return;he===!0&&le(A);const ye=u.slice(A,_).reduce(Me,0),we=ye+h.offsetStart+$.value,Ue=we+u[_];let Te=we+L;if(P!==void 0){const ot=ye-Qe,te=h.scrollStart+ot;Te=M!==!0&&te<we&&Ue<te+h.scrollViewSize?te:P==="end"?Ue-h.scrollViewSize:we-(P==="start"?0:Math.round((h.scrollViewSize-u[_])/2))}T=Te,Dt(f,Te,a.virtualScrollHorizontal,o.lang.rtl),ze(_)})}function le(f){const h=x.value;if(h){const _=el.call(h.children,A=>A.classList&&A.classList.contains("q-virtual-scroll--skip")===!1),L=_.length,j=a.virtualScrollHorizontal===!0?A=>A.getBoundingClientRect().width:A=>A.offsetHeight;let M=f,P,W;for(let A=0;A<L;){for(P=j(_[A]),A++;A<L&&_[A].classList.contains("q-virtual-scroll--with-prev")===!0;)P+=j(_[A]),A++;W=P-u[M],W!==0&&(u[M]+=W,k[Math.floor(M/ue)]+=W),M++}}}function Oe(){x.value!==null&&x.value!==void 0&&x.value.focus()}function ge(f,h){const _=1*s.value;(h===!0||Array.isArray(u)===!1)&&(u=[]);const L=u.length;u.length=e.value;for(let M=e.value-1;M>=L;M--)u[M]=_;const j=Math.floor((e.value-1)/ue);k=[];for(let M=0;M<=j;M++){let P=0;const W=Math.min((M+1)*ue,e.value);for(let A=M*ue;A<W;A++)P+=u[A];k.push(P)}p=-1,T=void 0,$.value=Be(k,u,0,q.value.from),S.value=Be(k,u,q.value.to,e.value),f>=0?(le(q.value.from),re(()=>{Y(f)})):be()}function de(f){if(f===void 0&&typeof window!="undefined"){const P=r();P!=null&&P.nodeType!==8&&(f=ft(P,l(),E.value,I.value,a.virtualScrollHorizontal,o.lang.rtl,a.virtualScrollStickySizeStart,a.virtualScrollStickySizeEnd).scrollViewSize)}b=f;const h=parseFloat(a.virtualScrollSliceRatioBefore)||0,_=parseFloat(a.virtualScrollSliceRatioAfter)||0,L=1+h+_,j=f===void 0||f<=0?1:Math.ceil(f/s.value),M=Math.max(1,j,Math.ceil((a.virtualScrollSliceSize>0?a.virtualScrollSliceSize:10)/L));R.value={total:Math.ceil(M*L),start:Math.ceil(M*h),center:Math.ceil(M*(.5+h)),end:Math.ceil(M*(1+h)),view:j}}function Ke(f,h){const _=a.virtualScrollHorizontal===!0?"width":"height",L={["--q-virtual-scroll-item-"+_]:s.value+"px"};return[f==="tbody"?B(f,{class:"q-virtual-scroll__padding",key:"before",ref:E},[B("tr",[B("td",{style:{[_]:`${$.value}px`,...L},colspan:v.value})])]):B(f,{class:"q-virtual-scroll__padding",key:"before",ref:E,style:{[_]:`${$.value}px`,...L}}),B(f,{class:"q-virtual-scroll__content",key:"content",ref:x,tabindex:-1},h.flat()),f==="tbody"?B(f,{class:"q-virtual-scroll__padding",key:"after",ref:I},[B("tr",[B("td",{style:{[_]:`${S.value}px`,...L},colspan:v.value})])]):B(f,{class:"q-virtual-scroll__padding",key:"after",ref:I,style:{[_]:`${S.value}px`,...L}})]}function ze(f){p!==f&&(a.onVirtualScroll!==void 0&&C("virtualScroll",{index:f,from:q.value.from,to:q.value.to-1,direction:f<p?"decrease":"increase",ref:y}),p=f)}de();const be=wl(ae,o.platform.is.ios===!0?120:35);Cl(()=>{de()});let m=!1;return Ht(()=>{m=!0}),Nt(()=>{if(m!==!0)return;const f=r();T!==void 0&&f!==void 0&&f!==null&&f.nodeType!==8?Dt(f,T,a.virtualScrollHorizontal,o.lang.rtl):Y(p)}),Lt(()=>{be.cancel()}),Object.assign(y,{scrollTo:Y,reset:U,refresh:O}),{virtualScrollSliceRange:q,virtualScrollSliceSizeComputed:R,setVirtualScrollSize:de,onVirtualScrollEvt:be,localResetVirtualScroll:ge,padVirtualScroll:Ke,scrollTo:Y,reset:U,refresh:O}}const Bt=e=>["add","add-unique","toggle"].includes(e),mo=".*+?^${}()|[]\\",go=Object.keys(Qt);var yo=Kt({name:"QSelect",inheritAttrs:!1,props:{...fo,...kl,...Qt,modelValue:{required:!0},multiple:Boolean,displayValue:[String,Number],displayValueHtml:Boolean,dropdownIcon:String,options:{type:Array,default:()=>[]},optionValue:[Function,String],optionLabel:[Function,String],optionDisable:[Function,String],hideSelected:Boolean,hideDropdownIcon:Boolean,fillInput:Boolean,maxValues:[Number,String],optionsDense:Boolean,optionsDark:{type:Boolean,default:null},optionsSelectedClass:String,optionsHtml:Boolean,optionsCover:Boolean,menuShrink:Boolean,menuAnchor:String,menuSelf:String,menuOffset:Array,popupContentClass:String,popupContentStyle:[String,Array,Object],useInput:Boolean,useChips:Boolean,newValueMode:{type:String,validator:Bt},mapOptions:Boolean,emitValue:Boolean,inputDebounce:{type:[Number,String],default:500},inputClass:[Array,String,Object],inputStyle:[Array,String,Object],tabindex:{type:[String,Number],default:0},autocomplete:String,transitionShow:String,transitionHide:String,transitionDuration:[String,Number],behavior:{type:String,validator:e=>["default","menu","dialog"].includes(e),default:"default"},virtualScrollItemSize:{type:[Number,String],default:void 0},onNewValue:Function,onFilter:Function},emits:[...xl,"add","remove","inputValue","newValue","keyup","keypress","keydown","filterAbort"],setup(e,{slots:r,emit:l}){const{proxy:s}=Ge(),{$q:V}=s,a=N(!1),C=N(!1),y=N(-1),o=N(""),T=N(!1),p=N(!1);let b=null,k,u,$,S=null,R,E,I,x;const q=N(null),v=N(null),c=N(null),i=N(null),U=N(null),O=Vl(e),Y=Fl(At),ae=z(()=>Array.isArray(e.options)?e.options.length:0),ce=z(()=>e.virtualScrollItemSize===void 0?e.optionsDense===!0?24:48:e.virtualScrollItemSize),{virtualScrollSliceRange:le,virtualScrollSliceSizeComputed:Oe,localResetVirtualScroll:ge,padVirtualScroll:de,onVirtualScrollEvt:Ke,scrollTo:ze,setVirtualScrollSize:be}=vo({virtualScrollLength:ae,getVirtualScrollTarget:il,getVirtualScrollEl:Pt,virtualScrollItemSizeComputed:ce}),m=_l(),f=z(()=>{const t=e.mapOptions===!0&&e.multiple!==!0,d=e.modelValue!==void 0&&(e.modelValue!==null||t===!0)?e.multiple===!0&&Array.isArray(e.modelValue)?e.modelValue:[e.modelValue]:[];if(e.mapOptions===!0&&Array.isArray(e.options)===!0){const n=e.mapOptions===!0&&k!==void 0?k:[],w=d.map(H=>ul(H,n));return e.modelValue===null&&t===!0?w.filter(H=>H!==null):w}return d}),h=z(()=>{const t={};return go.forEach(d=>{const n=e[d];n!==void 0&&(t[d]=n)}),t}),_=z(()=>e.optionsDark===null?m.isDark.value:e.optionsDark),L=z(()=>Et(f.value)),j=z(()=>{let t="q-field__input q-placeholder col";return e.hideSelected===!0||f.value.length===0?[t,e.inputClass]:(t+=" q-field__input--padding",e.inputClass===void 0?t:[t,e.inputClass])}),M=z(()=>(e.virtualScrollHorizontal===!0?"q-virtual-scroll--horizontal":"")+(e.popupContentClass?" "+e.popupContentClass:"")),P=z(()=>ae.value===0),W=z(()=>f.value.map(t=>oe.value(t)).join(", ")),A=z(()=>e.displayValue!==void 0?e.displayValue:W.value),ee=z(()=>e.optionsHtml===!0?()=>!0:t=>t!=null&&t.html===!0),he=z(()=>e.displayValueHtml===!0||e.displayValue===void 0&&(e.optionsHtml===!0||f.value.some(ee.value))),Ee=z(()=>m.focused.value===!0?e.tabindex:-1),ie=z(()=>{const t={tabindex:e.tabindex,role:"combobox","aria-label":e.label,"aria-readonly":e.readonly===!0?"true":"false","aria-autocomplete":e.useInput===!0?"list":"none","aria-expanded":a.value===!0?"true":"false","aria-controls":`${m.targetUid.value}_lb`};return y.value>=0&&(t["aria-activedescendant"]=`${m.targetUid.value}_${y.value}`),t}),Qe=z(()=>({id:`${m.targetUid.value}_lb`,role:"listbox","aria-multiselectable":e.multiple===!0?"true":"false"})),ye=z(()=>f.value.map((t,d)=>({index:d,opt:t,html:ee.value(t),selected:!0,removeAtIndex:nl,toggleOption:pe,tabindex:Ee.value}))),we=z(()=>{if(ae.value===0)return[];const{from:t,to:d}=le.value;return e.options.slice(t,d).map((n,w)=>{const H=Ce.value(n)===!0,D=t+w,Q={clickable:!0,active:!1,activeClass:ot.value,manualFocus:!0,focused:!1,disable:H,tabindex:-1,dense:e.optionsDense,dark:_.value,role:"option",id:`${m.targetUid.value}_${D}`,onClick:()=>{pe(n)}};return H!==!0&&(ut(n)===!0&&(Q.active=!0),y.value===D&&(Q.focused=!0),Q["aria-selected"]=Q.active===!0?"true":"false",V.platform.is.desktop===!0&&(Q.onMousemove=()=>{a.value===!0&&ke(D)})),{index:D,opt:n,html:ee.value(n),label:oe.value(n),selected:Q.active,focused:Q.focused,toggleOption:pe,setOptionIndex:ke,itemProps:Q}})}),Ue=z(()=>e.dropdownIcon!==void 0?e.dropdownIcon:V.iconSet.arrow.dropdown),Te=z(()=>e.optionsCover===!1&&e.outlined!==!0&&e.standout!==!0&&e.borderless!==!0&&e.rounded!==!0),ot=z(()=>e.optionsSelectedClass!==void 0?e.optionsSelectedClass:e.color!==void 0?`text-${e.color}`:""),te=z(()=>nt(e.optionValue,"value")),oe=z(()=>nt(e.optionLabel,"label")),Ce=z(()=>nt(e.optionDisable,"disable")),je=z(()=>f.value.map(t=>te.value(t))),al=z(()=>{const t={onInput:At,onChange:Y,onKeydown:qt,onKeyup:Vt,onKeypress:_t,onFocus:kt,onClick(d){u===!0&&Pe(d)}};return t.onCompositionstart=t.onCompositionupdate=t.onCompositionend=Y,t});Ie(f,t=>{k=t,e.useInput===!0&&e.fillInput===!0&&e.multiple!==!0&&m.innerLoading.value!==!0&&(C.value!==!0&&a.value!==!0||L.value!==!0)&&($!==!0&&qe(),(C.value===!0||a.value===!0)&&xe(""))},{immediate:!0}),Ie(()=>e.fillInput,qe),Ie(a,it),Ie(ae,bl);function wt(t){return e.emitValue===!0?te.value(t):t}function at(t){if(t>-1&&t<f.value.length)if(e.multiple===!0){const d=e.modelValue.slice();l("remove",{index:t,value:d.splice(t,1)[0]}),l("update:modelValue",d)}else l("update:modelValue",null)}function nl(t){at(t),m.focus()}function Ct(t,d){const n=wt(t);if(e.multiple!==!0){e.fillInput===!0&&Re(oe.value(t),!0,!0),l("update:modelValue",n);return}if(f.value.length===0){l("add",{index:0,value:n}),l("update:modelValue",e.multiple===!0?[n]:n);return}if(d===!0&&ut(t)===!0||e.maxValues!==void 0&&e.modelValue.length>=e.maxValues)return;const w=e.modelValue.slice();l("add",{index:w.length,value:n}),w.push(n),l("update:modelValue",w)}function pe(t,d){if(m.editable.value!==!0||t===void 0||Ce.value(t)===!0)return;const n=te.value(t);if(e.multiple!==!0){d!==!0&&(Re(e.fillInput===!0?oe.value(t):"",!0,!0),Se()),v.value!==null&&v.value.focus(),(f.value.length===0||De(te.value(f.value[0]),n)!==!0)&&l("update:modelValue",e.emitValue===!0?n:t);return}if((u!==!0||T.value===!0)&&m.focus(),kt(),f.value.length===0){const D=e.emitValue===!0?n:t;l("add",{index:0,value:D}),l("update:modelValue",e.multiple===!0?[D]:D);return}const w=e.modelValue.slice(),H=je.value.findIndex(D=>De(D,n));if(H>-1)l("remove",{index:H,value:w.splice(H,1)[0]});else{if(e.maxValues!==void 0&&w.length>=e.maxValues)return;const D=e.emitValue===!0?n:t;l("add",{index:w.length,value:D}),w.push(D)}l("update:modelValue",w)}function ke(t){if(V.platform.is.desktop!==!0)return;const d=t>-1&&t<ae.value?t:-1;y.value!==d&&(y.value=d)}function We(t=1,d){if(a.value===!0){let n=y.value;do n=Tt(n+t,-1,ae.value-1);while(n!==-1&&n!==y.value&&Ce.value(e.options[n])===!0);y.value!==n&&(ke(n),ze(n),d!==!0&&e.useInput===!0&&e.fillInput===!0&&Xe(n>=0?oe.value(e.options[n]):R))}}function ul(t,d){const n=w=>De(te.value(w),t);return e.options.find(n)||d.find(n)||t}function nt(t,d){const n=t!==void 0?t:d;return typeof n=="function"?n:w=>w!==null&&typeof w=="object"&&n in w?w[n]:w}function ut(t){const d=te.value(t);return je.value.find(n=>De(n,d))!==void 0}function kt(t){e.useInput===!0&&v.value!==null&&(t===void 0||v.value===t.target&&t.target.value===W.value)&&v.value.select()}function xt(t){Ut(t,27)===!0&&a.value===!0&&(Pe(t),Se(),qe()),l("keyup",t)}function Vt(t){const{value:d}=t.target;if(t.keyCode!==void 0){xt(t);return}if(t.target.value="",b!==null&&(clearTimeout(b),b=null),qe(),typeof d=="string"&&d.length!==0){const n=d.toLocaleLowerCase(),w=D=>{const Q=e.options.find(J=>D.value(J).toLocaleLowerCase()===n);return Q===void 0?!1:(f.value.indexOf(Q)===-1?pe(Q):Se(),!0)},H=D=>{w(te)!==!0&&(w(oe)===!0||D===!0||xe(d,!0,()=>H(!0)))};H()}else m.clearValue(t)}function _t(t){l("keypress",t)}function qt(t){if(l("keydown",t),Ml(t)===!0)return;const d=o.value.length!==0&&(e.newValueMode!==void 0||e.onNewValue!==void 0),n=t.shiftKey!==!0&&e.multiple!==!0&&(y.value>-1||d===!0);if(t.keyCode===27){st(t);return}if(t.keyCode===9&&n===!1){Ve();return}if(t.target===void 0||t.target.id!==m.targetUid.value||m.editable.value!==!0)return;if(t.keyCode===40&&m.innerLoading.value!==!0&&a.value===!1){fe(t),_e();return}if(t.keyCode===8&&e.hideSelected!==!0&&o.value.length===0){e.multiple===!0&&Array.isArray(e.modelValue)===!0?at(e.modelValue.length-1):e.multiple!==!0&&e.modelValue!==null&&l("update:modelValue",null);return}(t.keyCode===35||t.keyCode===36)&&(typeof o.value!="string"||o.value.length===0)&&(fe(t),y.value=-1,We(t.keyCode===36?1:-1,e.multiple)),(t.keyCode===33||t.keyCode===34)&&Oe.value!==void 0&&(fe(t),y.value=Math.max(-1,Math.min(ae.value,y.value+(t.keyCode===33?-1:1)*Oe.value.view)),We(t.keyCode===33?1:-1,e.multiple)),(t.keyCode===38||t.keyCode===40)&&(fe(t),We(t.keyCode===38?-1:1,e.multiple));const w=ae.value;if((I===void 0||x<Date.now())&&(I=""),w>0&&e.useInput!==!0&&t.key!==void 0&&t.key.length===1&&t.altKey===!1&&t.ctrlKey===!1&&t.metaKey===!1&&(t.keyCode!==32||I.length!==0)){a.value!==!0&&_e(t);const H=t.key.toLocaleLowerCase(),D=I.length===1&&I[0]===H;x=Date.now()+1500,D===!1&&(fe(t),I+=H);const Q=new RegExp("^"+I.split("").map(rt=>mo.indexOf(rt)>-1?"\\"+rt:rt).join(".*"),"i");let J=y.value;if(D===!0||J<0||Q.test(oe.value(e.options[J]))!==!0)do J=Tt(J+1,-1,w-1);while(J!==y.value&&(Ce.value(e.options[J])===!0||Q.test(oe.value(e.options[J]))!==!0));y.value!==J&&re(()=>{ke(J),ze(J),J>=0&&e.useInput===!0&&e.fillInput===!0&&Xe(oe.value(e.options[J]))});return}if(!(t.keyCode!==13&&(t.keyCode!==32||e.useInput===!0||I!=="")&&(t.keyCode!==9||n===!1))){if(t.keyCode!==9&&fe(t),y.value>-1&&y.value<w){pe(e.options[y.value]);return}if(d===!0){const H=(D,Q)=>{if(Q){if(Bt(Q)!==!0)return}else Q=e.newValueMode;if(Re("",e.multiple!==!0,!0),D==null)return;(Q==="toggle"?pe:Ct)(D,Q==="add-unique"),e.multiple!==!0&&(v.value!==null&&v.value.focus(),Se())};if(e.onNewValue!==void 0?l("newValue",o.value,H):H(o.value),e.multiple!==!0)return}a.value===!0?Ve():m.innerLoading.value!==!0&&_e()}}function Pt(){return u===!0?U.value:c.value!==null&&c.value.contentEl!==null?c.value.contentEl:void 0}function il(){return Pt()}function rl(){return e.hideSelected===!0?[]:r["selected-item"]!==void 0?ye.value.map(t=>r["selected-item"](t)).slice():r.selected!==void 0?[].concat(r.selected()):e.useChips===!0?ye.value.map((t,d)=>B(gt,{key:"option-"+d,removable:m.editable.value===!0&&Ce.value(t.opt)!==!0,dense:!0,textColor:e.color,tabindex:Ee.value,onRemove(){t.removeAtIndex(d)}},()=>B("span",{class:"ellipsis",[t.html===!0?"innerHTML":"textContent"]:oe.value(t.opt)}))):[B("span",{[he.value===!0?"innerHTML":"textContent"]:A.value})]}function It(){if(P.value===!0)return r["no-option"]!==void 0?r["no-option"]({inputValue:o.value}):void 0;const t=r.option!==void 0?r.option:n=>B(Ye,{key:n.index,...n.itemProps},()=>B(Le,()=>B(Je,()=>B("span",{[n.html===!0?"innerHTML":"textContent"]:n.label}))));let d=de("div",we.value.map(t));return r["before-options"]!==void 0&&(d=r["before-options"]().concat(d)),Ol(r["after-options"],d)}function sl(t,d){const n=d===!0?{...ie.value,...m.splitAttrs.attributes.value}:void 0,w={ref:d===!0?v:void 0,key:"i_t",class:j.value,style:e.inputStyle,value:o.value!==void 0?o.value:"",type:"search",...n,id:d===!0?m.targetUid.value:void 0,maxlength:e.maxlength,autocomplete:e.autocomplete,"data-autofocus":t===!0||e.autofocus===!0||void 0,disabled:e.disable===!0,readonly:e.readonly===!0,...al.value};return t!==!0&&u===!0&&(Array.isArray(w.class)===!0?w.class=[...w.class,"no-pointer-events"]:w.class+=" no-pointer-events"),B("input",w)}function At(t){b!==null&&(clearTimeout(b),b=null),!(t&&t.target&&t.target.qComposing===!0)&&(Xe(t.target.value||""),$=!0,R=o.value,m.focused.value!==!0&&(u!==!0||T.value===!0)&&m.focus(),e.onFilter!==void 0&&(b=setTimeout(()=>{b=null,xe(o.value)},e.inputDebounce)))}function Xe(t){o.value!==t&&(o.value=t,l("inputValue",t))}function Re(t,d,n){$=n!==!0,e.useInput===!0&&(Xe(t),(d===!0||n!==!0)&&(R=t),d!==!0&&xe(t))}function xe(t,d,n){if(e.onFilter===void 0||d!==!0&&m.focused.value!==!0)return;m.innerLoading.value===!0?l("filterAbort"):(m.innerLoading.value=!0,p.value=!0),t!==""&&e.multiple!==!0&&f.value.length!==0&&$!==!0&&t===oe.value(f.value[0])&&(t="");const w=setTimeout(()=>{a.value===!0&&(a.value=!1)},10);S!==null&&clearTimeout(S),S=w,l("filter",t,(H,D)=>{(d===!0||m.focused.value===!0)&&S===w&&(clearTimeout(S),typeof H=="function"&&H(),p.value=!1,re(()=>{m.innerLoading.value=!1,m.editable.value===!0&&(d===!0?a.value===!0&&Se():a.value===!0?it(!0):a.value=!0),typeof D=="function"&&re(()=>{D(s)}),typeof n=="function"&&re(()=>{n(s)})}))},()=>{m.focused.value===!0&&S===w&&(clearTimeout(S),m.innerLoading.value=!1,p.value=!1),a.value===!0&&(a.value=!1)})}function cl(){return B(Gl,{ref:c,class:M.value,style:e.popupContentStyle,modelValue:a.value,fit:e.menuShrink!==!0,cover:e.optionsCover===!0&&P.value!==!0&&e.useInput!==!0,anchor:e.menuAnchor,self:e.menuSelf,offset:e.menuOffset,dark:_.value,noParentEvent:!0,noRefocus:!0,noFocus:!0,square:Te.value,transitionShow:e.transitionShow,transitionHide:e.transitionHide,transitionDuration:e.transitionDuration,separateClosePopup:!0,...Qe.value,onScrollPassive:Ke,onBeforeShow:Mt,onBeforeHide:dl,onShow:fl},It)}function dl(t){Ot(t),Ve()}function fl(){be()}function vl(t){Pe(t),v.value!==null&&v.value.focus(),T.value=!0,window.scrollTo(window.pageXOffset||window.scrollX||document.body.scrollLeft||0,0)}function ml(t){Pe(t),re(()=>{T.value=!1})}function gl(){const t=[B($e,{class:`col-auto ${m.fieldClass.value}`,...h.value,for:m.targetUid.value,dark:_.value,square:!0,loading:p.value,itemAligned:!1,filled:!0,stackLabel:o.value.length!==0,...m.splitAttrs.listeners.value,onFocus:vl,onBlur:ml},{...r,rawControl:()=>m.getControl(!0),before:void 0,after:void 0})];return a.value===!0&&t.push(B("div",{ref:U,class:M.value+" scroll",style:e.popupContentStyle,...Qe.value,onClick:st,onScrollPassive:Ke},It())),B(Ze,{ref:i,modelValue:C.value,position:e.useInput===!0?"top":void 0,transitionShow:E,transitionHide:e.transitionHide,transitionDuration:e.transitionDuration,onBeforeShow:Mt,onBeforeHide:yl,onHide:pl,onShow:Sl},()=>B("div",{class:"q-select__dialog"+(_.value===!0?" q-select__dialog--dark q-dark":"")+(T.value===!0?" q-select__dialog--focused":"")},t))}function yl(t){Ot(t),i.value!==null&&i.value.__updateRefocusTarget(m.rootRef.value.querySelector(".q-field__native > [tabindex]:last-child")),m.focused.value=!1}function pl(t){Se(),m.focused.value===!1&&l("blur",t),qe()}function Sl(){const t=document.activeElement;(t===null||t.id!==m.targetUid.value)&&v.value!==null&&v.value!==t&&v.value.focus(),be()}function Ve(){C.value!==!0&&(y.value=-1,a.value===!0&&(a.value=!1),m.focused.value===!1&&(S!==null&&(clearTimeout(S),S=null),m.innerLoading.value===!0&&(l("filterAbort"),m.innerLoading.value=!1,p.value=!1)))}function _e(t){m.editable.value===!0&&(u===!0?(m.onControlFocusin(t),C.value=!0,re(()=>{m.focus()})):m.focus(),e.onFilter!==void 0?xe(o.value):(P.value!==!0||r["no-option"]!==void 0)&&(a.value=!0))}function Se(){C.value=!1,Ve()}function qe(){e.useInput===!0&&Re(e.multiple!==!0&&e.fillInput===!0&&f.value.length!==0&&oe.value(f.value[0])||"",!0,!0)}function it(t){let d=-1;if(t===!0){if(f.value.length!==0){const n=te.value(f.value[0]);d=e.options.findIndex(w=>De(te.value(w),n))}ge(d)}ke(d)}function bl(t,d){a.value===!0&&m.innerLoading.value===!1&&(ge(-1,!0),re(()=>{a.value===!0&&m.innerLoading.value===!1&&(t>d?ge():it(!0))}))}function Ft(){C.value===!1&&c.value!==null&&c.value.updatePosition()}function Mt(t){t!==void 0&&Pe(t),l("popupShow",t),m.hasPopupOpen=!0,m.onControlFocusin(t)}function Ot(t){t!==void 0&&Pe(t),l("popupHide",t),m.hasPopupOpen=!1,m.onControlFocusout(t)}function zt(){u=V.platform.is.mobile!==!0&&e.behavior!=="dialog"?!1:e.behavior!=="menu"&&(e.useInput===!0?r["no-option"]!==void 0||e.onFilter!==void 0||P.value===!1:!0),E=V.platform.is.ios===!0&&u===!0&&e.useInput===!0?"fade":e.transitionShow}return ql(zt),Pl(Ft),zt(),Lt(()=>{b!==null&&clearTimeout(b)}),Object.assign(s,{showPopup:_e,hidePopup:Se,removeAtIndex:at,add:Ct,toggleOption:pe,getOptionIndex:()=>y.value,setOptionIndex:ke,moveOptionSelection:We,filter:xe,updateMenuPosition:Ft,updateInputValue:Re,isOptionSelected:ut,getEmittingOptionValue:wt,isOptionDisabled:(...t)=>Ce.value.apply(null,t)===!0,getOptionValue:(...t)=>te.value.apply(null,t),getOptionLabel:(...t)=>oe.value.apply(null,t)}),Object.assign(m,{innerValue:f,fieldClass:z(()=>`q-select q-field--auto-height q-select--with${e.useInput!==!0?"out":""}-input q-select--with${e.useChips!==!0?"out":""}-chips q-select--${e.multiple===!0?"multiple":"single"}`),inputRef:q,targetRef:v,hasValue:L,showPopup:_e,floatingLabel:z(()=>e.hideSelected!==!0&&L.value===!0||typeof o.value=="number"||o.value.length!==0||Et(e.displayValue)),getControlChild:()=>{if(m.editable.value!==!1&&(C.value===!0||P.value!==!0||r["no-option"]!==void 0))return u===!0?gl():cl();m.hasPopupOpen===!0&&(m.hasPopupOpen=!1)},controlEvents:{onFocusin(t){m.onControlFocusin(t)},onFocusout(t){m.onControlFocusout(t,()=>{qe(),Ve()})},onClick(t){if(st(t),u!==!0&&a.value===!0){Ve(),v.value!==null&&v.value.focus();return}_e(t)}},getControl:t=>{const d=rl(),n=t===!0||C.value!==!0||u!==!0;if(e.useInput===!0)d.push(sl(t,n));else if(m.editable.value===!0){const H=n===!0?ie.value:void 0;d.push(B("input",{ref:n===!0?v:void 0,key:"d_t",class:"q-select__focus-target",id:n===!0?m.targetUid.value:void 0,value:A.value,readonly:!0,"data-autofocus":t===!0||e.autofocus===!0||void 0,...H,onKeydown:qt,onKeyup:xt,onKeypress:_t})),n===!0&&typeof e.autocomplete=="string"&&e.autocomplete.length!==0&&d.push(B("input",{class:"q-select__autocomplete-input",autocomplete:e.autocomplete,tabindex:-1,onKeyup:Vt}))}if(O.value!==void 0&&e.disable!==!0&&je.value.length!==0){const H=je.value.map(D=>B("option",{value:D,selected:!0}));d.push(B("select",{class:"hidden",name:O.value,multiple:e.multiple},H))}const w=e.useInput===!0||n!==!0?void 0:m.splitAttrs.attributes.value;return B("div",{class:"q-field__native row items-center",...w,...m.splitAttrs.listeners.value},d)},getInnerAppend:()=>e.loading!==!0&&p.value!==!0&&e.hideDropdownIcon!==!0?[B(Il,{class:"q-select__dropdown-icon"+(a.value===!0?" rotate-180":""),name:Ue.value})]:null}),Al(m)}});function $t(e){if(e===!1)return 0;if(e===!0||e===void 0)return 1;const r=parseInt(e,10);return isNaN(r)?0:r}var tl=zl({name:"close-popup",beforeMount(e,{value:r}){const l={depth:$t(r),handler(s){l.depth!==0&&setTimeout(()=>{const V=El(e);V!==void 0&&Tl(V,s,l.depth)})},handlerKey(s){Ut(s,13)===!0&&l.handler(s)}};e.__qclosepopup=l,e.addEventListener("click",l.handler),e.addEventListener("keyup",l.handlerKey)},updated(e,{value:r,oldValue:l}){r!==l&&(e.__qclosepopup.depth=$t(r))},beforeUnmount(e){const r=e.__qclosepopup;e.removeEventListener("click",r.handler),e.removeEventListener("keyup",r.handlerKey),delete e.__qclosepopup}});const po=e=>(e.indexOf("{{")>=0&&(e=e.split("{{")[1]),e.indexOf("}}")>=0&&(e=e.split("}}")[0]),e),So=e=>(e.indexOf("\u300A")>=0&&(e=e.split("\u300A")[1]),e.indexOf("\u300B")>=0&&(e=e.split("\u300B")[0]),e),ll=e=>e?e.indexOf("-")==0?e=e.substring(1):e.substring(0,10):"",ht=e=>(e.lastIndexOf("]")>=0&&(e=e.substring(e.lastIndexOf("]")+1)),e.indexOf("{{")>=0&&(e=e.replace(`{{${po(e)}}}`,"")),e.indexOf("\u300A")>=0&&(e=e.replace(`\u300A${So(e)}\u300B`,"")),e),lt=[{label:"\u9A91\u5175",value:"\u9A91\u5175"},{label:"\u6B65\u5175",value:"\u6B65\u5175"},{label:"\u56FD\u4EA7",value:"\u56FD\u4EA7"},{label:"\u65AF\u5DF4\u8FBE",value:"\u65AF\u5DF4\u8FBE"},{label:"\u6F2B\u52A8",value:"\u6F2B\u52A8"}],bo=[{label:"\u5168\u90E8",value:""},...lt,{label:"\u65E0",value:"\u65E0"}];var ho=Kt({name:"QForm",props:{autofocus:Boolean,noErrorFocus:Boolean,noResetFocus:Boolean,greedy:Boolean,onSubmit:Function},emits:["reset","validationSuccess","validationError"],setup(e,{slots:r,emit:l}){const s=Ge(),V=N(null);let a=0;const C=[];function y(u){const $=typeof u=="boolean"?u:e.noErrorFocus!==!0,S=++a,R=(x,q)=>{l("validation"+(x===!0?"Success":"Error"),q)},E=x=>{const q=x.validate();return typeof q.then=="function"?q.then(v=>({valid:v,comp:x}),v=>({valid:!1,comp:x,err:v})):Promise.resolve({valid:q,comp:x})};return(e.greedy===!0?Promise.all(C.map(E)).then(x=>x.filter(q=>q.valid!==!0)):C.reduce((x,q)=>x.then(()=>E(q).then(v=>{if(v.valid===!1)return Promise.reject(v)})),Promise.resolve()).catch(x=>[x])).then(x=>{if(x===void 0||x.length===0)return S===a&&R(!0),!0;if(S===a){const{comp:q,err:v}=x[0];if(v!==void 0&&console.error(v),R(!1,q),$===!0){const c=x.find(({comp:i})=>typeof i.focus=="function"&&Bl(i.$)===!1);c!==void 0&&c.comp.focus()}}return!1})}function o(){a++,C.forEach(u=>{typeof u.resetValidation=="function"&&u.resetValidation()})}function T(u){u!==void 0&&fe(u);const $=a+1;y().then(S=>{$===a&&S===!0&&(e.onSubmit!==void 0?l("submit",u):u!==void 0&&u.target!==void 0&&typeof u.target.submit=="function"&&u.target.submit())})}function p(u){u!==void 0&&fe(u),l("reset"),re(()=>{o(),e.autofocus===!0&&e.noResetFocus!==!0&&b()})}function b(){$l(()=>{if(V.value===null)return;const u=V.value.querySelector("[autofocus][tabindex], [data-autofocus][tabindex]")||V.value.querySelector("[autofocus] [tabindex], [data-autofocus] [tabindex]")||V.value.querySelector("[autofocus], [data-autofocus]")||Array.prototype.find.call(V.value.querySelectorAll("[tabindex]"),$=>$.tabIndex>-1);u!=null&&u.focus({preventScroll:!0})})}Rl(Hl,{bindComponent(u){C.push(u)},unbindComponent(u){const $=C.indexOf(u);$>-1&&C.splice($,1)}});let k=!1;return Ht(()=>{k=!0}),Nt(()=>{k===!0&&e.autofocus===!0&&b()}),pt(()=>{e.autofocus===!0&&b()}),Object.assign(s.proxy,{validate:y,resetValidation:o,submit:T,reset:p,focus:b,getValidationComponents:()=>C}),()=>B("form",{class:"q-form",ref:V,onSubmit:T,onReset:p},Dl(r.default))}});const wo=()=>!0;function Co(e){const r={};return e.forEach(l=>{r[l]=wo}),r}function me(){const{emit:e,proxy:r}=Ge(),l=N(null);function s(){l.value.show()}function V(){l.value.hide()}function a(y){e("ok",y),V()}function C(){e("hide")}return Object.assign(r,{show:s,hide:V}),{dialogRef:l,onDialogHide:C,onDialogOK:a,onDialogCancel:V}}const ol=["ok","hide"];me.emits=ol;me.emitsObject=Co(ol);const ko={__name:"FileEdit",emits:[...me.emits],setup(e,{expose:r}){const l=St(),s=et({item:{},callback:null}),V=(b,k)=>{s.item={},s.item={...b},s.item.Code=ll(b.Code),s.item.Name=ht(b.Name),s.callback=k,y.value.show()},a=async()=>{await C(!0)},C=async b=>{const{Id:k,Name:u,Code:$,Actress:S,FileType:R,MovieType:E}=s.item;let I=$.trim();I&&I.indexOf("-")<0&&(I="-"+I);let x="";S.length!=0&&(x+="["+S.trim()+"]"),I.length!=0&&(x+=" ["+I.trim()+"]"),E&&x.indexOf("{{")<0&&(x+=`{{${E}}}`);const q=u.trim().split("."),v=q.length;for(let U=0;U<v;U++){const O=q[U];if(U==v-1)x+="."+O;else if(U==0)x+=O.replace(O.charAt(0),O.charAt(0).toUpperCase());else{const Y=O.replace(O.charAt(0),O.charAt(0).toUpperCase());x+=" "+Y}}x.indexOf("."+R)<0&&(x+="."+R);const c={Id:k,Name:x,Code:I,Actress:S,MoveOut:b,Title:q[0],NoRefresh:!0},i=await bt(c);i.Code==200?(T(),s.callback&&s.callback()):l.notify({type:"negative",message:i.Message})},{dialogRef:y,onDialogHide:o,onDialogOK:T,onDialogCancel:p}=me();return r({open:V}),(b,k)=>(Z(),se(Ze,{ref_key:"dialogRef",ref:y,onHide:X(o)},{default:F(()=>[g(tt,{class:"q-dialog-plugin q-pa-md",style:Kl({width:"600px",backgroundImage:"linear-gradient(to left, rgba(255,255,255,0.1), rgba(255,255,255,0.1))"})},{default:F(()=>[g(ho,{class:"q-gutter-md"},{default:F(()=>[g(Nl,{modelValue:s.item.MovieType,"onUpdate:modelValue":k[0]||(k[0]=u=>s.item.MovieType=u),options:X(lt),color:"primary",inline:""},null,8,["modelValue","options"]),g(He,{label:"\u7F16\u7801",autogrow:"",modelValue:s.item.Code,"onUpdate:modelValue":k[1]||(k[1]=u=>s.item.Code=u),dense:!1},null,8,["modelValue"]),g(He,{label:"\u56FE\u9274",autogrow:"",modelValue:s.item.Actress,"onUpdate:modelValue":k[2]||(k[2]=u=>s.item.Actress=u),dense:!1},null,8,["modelValue"]),g(He,{label:"\u540D\u79F0",autogrow:"",modelValue:s.item.Name,"onUpdate:modelValue":k[3]||(k[3]=u=>s.item.Name=u),dense:!1},null,8,["modelValue"])]),_:1}),g(Ll,{align:"right"},{default:F(()=>[g(G,{color:"primary",label:"\u79FB\u52A8",onClick:a}),g(G,{color:"primary",label:"\u547D\u540D",onClick:C}),g(G,{color:"primary",label:"\u5173\u95ED",onClick:X(p)},null,8,["onClick"])]),_:1})]),_:1},8,["style"])]),_:1},8,["onHide"]))}},xo={class:"self-center full-width no-outline",tabindex:"0"},Vo={class:"self-center full-width no-outline",tabindex:"0"},_o={class:"self-center full-width no-outline",tabindex:"0"},qo={__name:"FileInfo",emits:[...me.emits],setup(e,{expose:r}){const l=et({item:{},settingInfo:{},callback:null}),s=(o,T)=>{l.item={},l.item={...o},l.callback=T,C.value.show()},V=async()=>{const o=await uo();l.settingInfo=o.data},a=()=>{window.open(`${l.settingInfo.BaseUrl}/${l.item.Code}`)},{dialogRef:C,onDialogHide:y}=me();return pt(()=>{V()}),r({open:s}),(o,T)=>(Z(),se(Ze,{ref_key:"dialogRef",ref:C,onHide:X(y)},{default:F(()=>[g(tt,{class:"q-dialog-plugin q-pa-md",style:{color:"white",width:"100%",height:"auto",padding:"20px",lineHeight:"32px"}},{default:F(()=>[g(Xt,{fit:"fit",easier:"",draggable:"",src:X(Zl)(l.item.Id),style:{"max-height":"40vh"}},null,8,["src"]),g($e,{label:"Code","stack-label":""},{control:F(()=>[K("div",{class:"self-center full-width no-outline",style:{color:"blue"},tabindex:"0",onClick:a},ne(l.item.Code),1)]),_:1}),g($e,{label:"Actress","stack-label":""},{control:F(()=>[K("div",xo,ne(l.item.Actress),1)]),_:1}),g($e,{label:"Name","stack-label":""},{control:F(()=>[K("div",Vo,ne(X(ht)(l.item.Name)),1)]),_:1}),g($e,{label:"Code","stack-label":""},{control:F(()=>[K("div",_o,ne(l.item.Path),1)]),_:1})]),_:1})]),_:1},8,["onHide"]))}},Po={class:"q-px-sm q-mt-sm"},Io={class:"q-gutter-sm"},Ao={style:{display:"flex","flex-direction":"row"}},Fo={__name:"ListEdit",emits:[...me.emits],setup(e,{expose:r}){const l=St(),s=et({resultData:{},queryParam:{},selector:[],callback:null}),V=async()=>{await Jt(),await a()},a=async()=>{const S=await Gt(s.queryParam);s.resultData=S},C=async S=>{const{Code:R,Message:E}=await S;console.log(R,E),R!=200?l.notify({message:`${E}`}):l.notify({message:`${E}`})},y=(S,R)=>{s.queryParam=S,s.callback=R,b.value.show(),a()},o=async()=>{s.callback&&await s.callback(),$(),u(),k()},T=S=>{l.dialog({title:S.Name,message:"\u786E\u5B9A\u5220\u9664\u5417?",cancel:!0,persistent:!0}).onOk(()=>{console.log(">>>> onOk"),C(Zt(S.Id))}).onCancel(()=>{console.log(">>>> Cancel")}).onDismiss(()=>{})},p=async S=>{const R=await bt({...S,NoRefresh:!0,MoveOut:!0});console.log(R),R.Code==200?l.notify({type:"negative",message:R.Message}):l.notify({type:"negative",message:R.Message})},{dialogRef:b,onDialogHide:k,onDialogOK:u,onDialogCancel:$}=me();return r({open:y}),(S,R)=>(Z(),se(Ze,{ref_key:"dialogRef",ref:b,onHide:o,width:"1200px"},{default:F(()=>[g(tt,{class:"q-dialog-plugin q-pa-md",square:"",style:{width:"1200px"}},{default:F(()=>[K("div",Po,[ve(" \u6279\u91CF\u64CD\u4F5C "),g(G,{class:"q-mr-sm",size:"sm",color:"secondary",icon:"refresh",onClick:V},{default:F(()=>[ve("\u5237\u65B0")]),_:1})]),K("div",Io,[g(yt,null,{default:F(()=>[(Z(!0),Ae(Fe,null,Ne(s.resultData.Data,E=>vt((Z(),se(Ye,{key:E.Id},{default:F(()=>[g(Le,{avatar:""},{default:F(()=>[g(jt,{modelValue:s.selector,"onUpdate:modelValue":R[0]||(R[0]=I=>s.selector=I),val:E.Id,color:"red"},null,8,["modelValue","val"])]),_:2},1024),g(Le,null,{default:F(()=>[K("div",Ao,[g(G,{round:"",size:"sm",color:"amber",glossy:"","text-color":"black",icon:"delete",onClick:I=>T(E)},null,8,["onClick"]),g(G,{round:"",size:"sm",color:"black",onClick:I=>p(E),icon:"near_me"},null,8,["onClick"]),g(Wt,{label:E.MovieType,type:"primary"},{default:F(()=>[g(yt,null,{default:F(()=>[(Z(!0),Ae(Fe,null,Ne(X(lt),I=>vt((Z(),se(Ye,{key:I.value,class:"movieTypeSelectItem"},{default:F(()=>[g(Le,null,{default:F(()=>[g(Je,{onClick:x=>{E.MovieType=I.value,C(X(Yt)(E.Id,I.value))}},{default:F(()=>[ve(ne(I.label),1)]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024)),[[tl]])),128))]),_:2},1024)]),_:2},1032,["label"])]),g(Je,null,{default:F(()=>[ve(ne(E.Name),1)]),_:2},1024)]),_:2},1024)]),_:2},1024)),[[Ql]])),128))]),_:1})])]),_:1})]),_:1},512))}};const Mo=e=>(Xl("data-v-ae076b8e"),e=e(),Yl(),e),Oo={class:"q-mg-md top",style:{"margin-bottom":"60px"}},zo={class:"row justify-center q-gutter-sm",ref:"top"},Eo={class:"q-pa-sm flex flex-center"},To={class:"row justify-center q-gutter-sm q-mr-sm q-mt-sm"},Ro={style:{padding:"0",margin:"0","background-color":"rgba(0, 0, 0, 0)",display:"flex","flex-direction":"row","justify-content":"space-between",width:"100%"}},Do=["onClick"],Bo=Mo(()=>K("span",null,"\u79CD\u8349",-1)),$o=["onClick"],Ho=["onClick"],No={style:{display:"flex","flex-direction":"row"}},Lo={class:"text-subtitles"},Ko=["onClick"],Qo=["onClick"],Uo=["onClick"],jo={__name:"SearchPage",setup(e){const r=N(null),l=N(null),s=N(null),V=N("Hello"),{copy:a}=io({source:V}),C=no(),y=St(),o=et({currentData:{},queryParam:{Keyword:"",MovieType:"",OnlyRepeat:!1,Page:1,PageSize:10,SortField:"MTime",SortType:"desc"},resultData:{},fullscreen:!1}),T=v=>{console.log(v),v.target.select()},p=v=>{y.dialog({title:v.Name,message:"\u786E\u5B9A\u5220\u9664\u5417?",cancel:!0,persistent:!0}).onOk(()=>{console.log(">>>> onOk"),b(Zt(v.Id))}).onCancel(()=>{console.log(">>>> Cancel")}).onDismiss(()=>{})},b=async v=>{const{Code:c,Message:i}=await v||{};console.log(c,i),c!=200&&y.notify({message:`${i}`})};Rt(["`"],()=>{I()}),Rt(["Enter"],()=>{queryList()});const k=async v=>{await a(v),y.notify({message:`${v}`})},u=v=>{o.currentData=v,C.Playing=v,C.drawerRight=!0},$=async v=>{console.log("view.queryParam.Page",v),await S()},S=async()=>{C.syncSearchParam(o.queryParam),localStorage.setItem("queryParam",JSON.stringify(o.queryParam));const v=await Gt(o.queryParam);o.resultData={},console.log(v),o.resultData=v},R=async v=>{const c=await bt({...v,NoRefresh:!0,MoveOut:!0});console.log(c),c.Code==200?y.notify({type:"negative",message:c.Message}):y.notify({type:"negative",message:c.Message})},E=N(!1),I=async()=>{E.value=!0;const{Code:v,Message:c}=await Jt("/api/refreshIndex");console.log(v,c),v=="200"&&(y.notify({type:"negative",message:c}),await S()),E.value=!1},x=async(v,c)=>{const{Code:i,Message:U}=await Yt(v,c);i==="200"?y.notify({type:"negative",message:U}):y.notify({type:"warning",message:U})},q=jl();return pt(()=>{const{Page:v,PageSize:c,MovieType:i,SortField:U,SortType:O,Keyword:Y,showStyle:ae,from:ce}=q.query;if(console.log(q.query),v&&c)o.queryParam.Page=Number(v),o.queryParam.PageSize=Number(c),o.queryParam.MovieType=i,o.queryParam.SortField=U,o.queryParam.SortType=O,o.queryParam.Keyword=Y,o.queryParam.showStyle=ae;else if(ce=="index"){const le=C.FileSearchParam;le&&(console.log("piniaParam",le),o.queryParam=le)}else{const le=JSON.parse(localStorage.getItem("queryParam"));le&&(console.log("storage",le),o.queryParam=le)}o.queryParam.Keyword=Y,S()}),(v,c)=>(Z(),Ae(Fe,null,[K("div",Oo,[K("div",zo,[g(G,{loading:E.value,color:"red",onClick:I},{loading:F(()=>[ve(" \u6267\u884C\u4E2D ")]),default:F(()=>[ve(" \u626B\u63CF\u3010~\u3011 ")]),_:1},8,["loading"]),g(dt,{modelValue:o.queryParam.SortField,"onUpdate:modelValue":[c[0]||(c[0]=i=>o.queryParam.SortField=i),c[1]||(c[1]=i=>S())],"toggle-color":"primary",options:[{label:"\u65F6",value:"MTime"},{label:"\u5BB9",value:"Size"},{label:"\u540D",value:"Code"}]},null,8,["modelValue"]),g(dt,{modelValue:o.queryParam.SortType,"onUpdate:modelValue":[c[2]||(c[2]=i=>o.queryParam.SortType=i),c[3]||(c[3]=i=>S())],"toggle-color":"primary",options:[{label:"\u6B63",value:"asc"},{label:"\u5012",value:"desc"}]},null,8,["modelValue"]),g(dt,{modelValue:o.queryParam.MovieType,"onUpdate:modelValue":[c[4]||(c[4]=i=>o.queryParam.MovieType=i),c[5]||(c[5]=i=>S())],"toggle-color":"primary",options:X(bo)},null,8,["modelValue","options"]),g(He,{label:"...",modelValue:o.queryParam.Keyword,"onUpdate:modelValue":[c[6]||(c[6]=i=>o.queryParam.Keyword=i),c[7]||(c[7]=i=>S())],dense:!0,filled:"",clearable:"",onFocus:c[8]||(c[8]=i=>T(i))},null,8,["modelValue"]),g(jt,{modelValue:o.queryParam.OnlyRepeat,"onUpdate:modelValue":[c[9]||(c[9]=i=>o.queryParam.OnlyRepeat=i),c[10]||(c[10]=i=>S())],label:"\u91CD"},null,8,["modelValue"]),g(G,{class:"q-mr-sm",size:"sm",color:"primary",icon:"apps",onClick:c[11]||(c[11]=i=>s.value.open(o.queryParam))})],512),g(to,{position:"bottom",style:{"z-index":"9","background-color":"rgba(0, 0, 0, 0.3)"}},{default:F(()=>[K("div",Eo,[g(yo,{color:"lime-11 q-mr-md","bg-color":"green",dense:"","onUpdate:modelValue":[c[12]||(c[12]=i=>{o.queryParam.PageSize=Number(i),S()}),c[13]||(c[13]=i=>o.queryParam.PageSize=i)],filled:"",modelValue:o.queryParam.PageSize,options:[10,20,30,50,200]},null,8,["modelValue"]),ve(),g(Jl,{modelValue:o.queryParam.Page,"onUpdate:modelValue":[c[14]||(c[14]=i=>o.queryParam.Page=i),$],color:"deep-orange",ellipses:!0,max:o.resultData.TotalPage||0,"max-pages":10,"boundary-numbers":""},null,8,["modelValue","max"]),g(He,{modelValue:o.queryParam.Page,"onUpdate:modelValue":[c[15]||(c[15]=i=>o.queryParam.Page=i),c[17]||(c[17]=i=>{o.queryParam.Page=Number(i),S()})],dense:!0,type:"search",style:{"background-color":"aliceblue",width:"60px","text-align":"center"},onFocus:c[16]||(c[16]=i=>T(i))},null,8,["modelValue"])])]),_:1}),K("div",To,[(Z(!0),Ae(Fe,null,Ne(o.resultData.Data,i=>(Z(),se(tt,{class:"q-ma-sm example-item",key:i.Id},{default:F(()=>{var U;return[g(Xt,{fit:"fit",easier:"",draggable:"",src:X(eo)(i.Id),class:"item-img",onClick:O=>u(i)},{default:F(()=>[K("div",Ro,[K("div",{onClick:ct(()=>{},["stop"]),style:{display:"flex","flex-direction":"column","justify-content":"flex-start",width:"fit-content"}},[g(gt,{square:"","text-color":"white",style:{"margin-left":"0px",padding:"0 4px","background-color":"rgba(236, 15, 15, 0.872)"}},{default:F(()=>[Bo]),_:1}),(Z(!0),Ae(Fe,null,Ne(i.Tags,O=>(Z(),se(gt,{square:"","text-color":"white",key:O,style:{"margin-left":"0px",padding:"0 4px","background-color":"rgba(188, 24, 24, 0.6)"}},{default:F(()=>[K("span",{onClick:Y=>{o.queryParam.Keyword=O,S()}},ne(O),9,$o)]),_:2},1024))),128))],8,Do),K("div",null,[g(Wt,{style:{"background-color":"rgba(0, 0, 0, 0.8)"},label:i.MovieType,onClick:ct(()=>{},["stop"])},{default:F(()=>[g(yt,{style:{"background-color":"rgba(0, 0, 0, 0.7)"}},{default:F(()=>[(Z(!0),Ae(Fe,null,Ne(X(lt),O=>vt((Z(),se(Ye,{key:O.value,class:"movieTypeSelectItem"},{default:F(()=>[g(Le,null,{default:F(()=>[g(Je,{onClick:Y=>x(i.Id,O.value)},{default:F(()=>[ve(ne(O.label),1)]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024)),[[tl]])),128))]),_:2},1024)]),_:2},1032,["label","onClick"])])]),K("div",{class:"absolute-bottom text-body1 text-center",style:{padding:"4px"},onClick:ct(()=>{},["stop"])},[K("div",No,[g(G,{round:"",class:"q-mr-sm",size:"sm",color:"primary",icon:"ondemand_video",onClick:O=>b(X(lo)(i.Id))},null,8,["onClick"]),g(G,{round:"",class:"q-mr-sm",size:"sm",color:"secondary",icon:"edit",onClick:()=>{r.value.open(i,I)}},null,8,["onClick"]),g(G,{round:"",class:"q-mr-sm",size:"sm",color:"secondary",icon:"open_in_new",onClick:O=>b(X(oo)(i.Id))},null,8,["onClick"]),i.MovieType?Wl("",!0):(Z(),se(G,{key:0,round:"",class:"q-mr-sm",size:"sm",color:"brown-5",icon:"wifi_protected_setup",onClick:O=>b(X(ao)(i.Id))},null,8,["onClick"])),g(G,{round:"",class:"q-mr-sm",size:"sm",color:"amber",glossy:"","text-color":"black",icon:"delete",onClick:O=>p(i)},null,8,["onClick"]),g(G,{round:"",class:"q-mr-sm",size:"sm",color:"black",onClick:O=>R(i),icon:"near_me"},null,8,["onClick"]),g(G,{round:"",class:"q-mr-sm",size:"sm",color:"secondary",icon:"info",onClick:()=>{l.value.open(i,I)}},null,8,["onClick"])])],8,Ho)]),_:2},1032,["src","onClick"]),K("div",Lo,[K("a",{flat:"",style:{color:"#59d89d"},class:"mr10",onClick:O=>{o.queryParam.Keyword=i.Actress,S()}},ne((U=i.Actress)==null?void 0:U.substring(0,6)),9,Ko),K("a",{flat:"",style:{color:"goldenrod"},class:"mr10",onClick:O=>k(i.Code)},ne(X(ll)(i.Code)),9,Qo),K("a",{flat:"",style:{color:"green"},class:"mr10",onClick:O=>k(i.Name)},ne(i.SizeStr),9,Uo),K("span",null,ne(X(ht)(i.Title)),1)])]}),_:2},1024))),128))])]),g(ko,{ref_key:"fileEditRef",ref:r},null,512),g(qo,{ref_key:"fileInfoRef",ref:l},null,512),g(Fo,{ref_key:"listEditRef",ref:s},null,512)],64))}};var ca=Ul(jo,[["__scopeId","data-v-ae076b8e"]]);export{ca as default};
