import{c as L,u as E,s as W,a as v,h,d as V,g as X,y as Y,r as g,w as F,I as J,H as Z,aG as ee,j as te,R as m,$ as M,U as u,T as l,a0 as C,a8 as n,a1 as j,a2 as P,S as k,X as w,Y as _,W as A,ak as O,aH as K,ah as U,aj as G}from"./index.5abe30a5.js";import{T as ae}from"./TouchPan.20d8c1c1.js";import{u as le}from"./use-quasar.42ceed9d.js";import{R as ne,O as oe,D as se}from"./searchAPI.41f21fc7.js";import{axios as R}from"./axios.6622d647.js";import{o as re}from"./index.06d6c03b.js";import{u as ie}from"./System.b8b890f6.js";import"./selection.1774ad65.js";var ue=L({name:"QBanner",props:{...E,inlineActions:Boolean,dense:Boolean,rounded:Boolean},setup(e,{slots:s}){const{proxy:{$q:c}}=X(),y=W(e,c),r=v(()=>"q-banner row items-center"+(e.dense===!0?" q-banner--dense":"")+(y.value===!0?" q-banner--dark q-dark":"")+(e.rounded===!0?" rounded-borders":"")),d=v(()=>`q-banner__actions row items-center justify-end col-${e.inlineActions===!0?"auto":"all"}`);return()=>{const b=[h("div",{class:"q-banner__avatar col-auto row items-center self-start"},V(s.avatar)),h("div",{class:"q-banner__content col text-body2"},V(s.default))],q=V(s.action);return q!==void 0&&b.push(h("div",{class:d.value},q)),h("div",{class:r.value+(e.inlineActions===!1&&q!==void 0?" q-banner--top-padding":""),role:"alert"},b)}}});const de=["top","middle","bottom"];var ce=L({name:"QBadge",props:{color:String,textColor:String,floating:Boolean,transparent:Boolean,multiLine:Boolean,outline:Boolean,rounded:Boolean,label:[Number,String],align:{type:String,validator:e=>de.includes(e)}},setup(e,{slots:s}){const c=v(()=>e.align!==void 0?{verticalAlign:e.align}:null),y=v(()=>{const r=e.outline===!0&&e.color||e.textColor;return`q-badge flex inline items-center no-wrap q-badge--${e.multiLine===!0?"multi":"single"}-line`+(e.outline===!0?" q-badge--outline":e.color!==void 0?` bg-${e.color}`:"")+(r!==void 0?` text-${r}`:"")+(e.floating===!0?" q-badge--floating":"")+(e.rounded===!0?" q-badge--rounded":"")+(e.transparent===!0?" q-badge--transparent":"")});return()=>h("div",{class:y.value,style:c.value,role:"status","aria-label":e.label},Y(s.default,e.label!==void 0?[e.label]:[]))}}),H=L({name:"QSplitter",props:{...E,modelValue:{type:Number,required:!0},reverse:Boolean,unit:{type:String,default:"%",validator:e=>["%","px"].includes(e)},limits:{type:Array,validator:e=>e.length!==2||typeof e[0]!="number"||typeof e[1]!="number"?!1:e[0]>=0&&e[0]<=e[1]},emitImmediately:Boolean,horizontal:Boolean,disable:Boolean,beforeClass:[Array,String,Object],afterClass:[Array,String,Object],separatorClass:[Array,String,Object],separatorStyle:[Array,String,Object]},emits:["update:modelValue"],setup(e,{slots:s,emit:c}){const{proxy:{$q:y}}=X(),r=W(e,y),d=g(null),b={before:g(null),after:g(null)},q=v(()=>`q-splitter no-wrap ${e.horizontal===!0?"q-splitter--horizontal column":"q-splitter--vertical row"} q-splitter--${e.disable===!0?"disabled":"workable"}`+(r.value===!0?" q-splitter--dark":"")),S=v(()=>e.horizontal===!0?"height":"width"),B=v(()=>e.reverse!==!0?"before":"after"),x=v(()=>e.limits!==void 0?e.limits:e.unit==="%"?[10,90]:[50,1/0]);function z(t){return(e.unit==="%"?t:Math.round(t))+e.unit}const T=v(()=>({[B.value]:{[S.value]:z(e.modelValue)}}));let $,p,D,N,f;function I(t){if(t.isFirst===!0){const Q=d.value.getBoundingClientRect()[S.value];$=e.horizontal===!0?"up":"left",p=e.unit==="%"?100:Q,D=Math.min(p,x.value[1],Math.max(x.value[0],e.modelValue)),N=(e.reverse!==!0?1:-1)*(e.horizontal===!0?1:y.lang.rtl===!0?-1:1)*(e.unit==="%"?Q===0?0:100/Q:1),d.value.classList.add("q-splitter--active");return}if(t.isFinal===!0){f!==e.modelValue&&c("update:modelValue",f),d.value.classList.remove("q-splitter--active");return}const i=D+N*(t.direction===$?-1:1)*t.distance[e.horizontal===!0?"y":"x"];f=Math.min(p,x.value[1],Math.max(x.value[0],i)),b[B.value].value.style[S.value]=z(f),e.emitImmediately===!0&&e.modelValue!==f&&c("update:modelValue",f)}const a=v(()=>[[ae,I,void 0,{[e.horizontal===!0?"vertical":"horizontal"]:!0,prevent:!0,stop:!0,mouse:!0,mouseAllDir:!0}]]);function o(t,i){t<i[0]?c("update:modelValue",i[0]):t>i[1]&&c("update:modelValue",i[1])}return F(()=>e.modelValue,t=>{o(t,x.value)}),F(()=>e.limits,()=>{Z(()=>{o(e.modelValue,x.value)})}),()=>{const t=[h("div",{ref:b.before,class:["q-splitter__panel q-splitter__before"+(e.reverse===!0?" col":""),e.beforeClass],style:T.value.before},V(s.before)),h("div",{class:["q-splitter__separator",e.separatorClass],style:e.separatorStyle,"aria-disabled":e.disable===!0?"true":void 0},[J("div",{class:"q-splitter__separator-area absolute-full"},V(s.separator),"sep",e.disable!==!0,()=>a.value)]),h("div",{ref:b.after,class:["q-splitter__panel q-splitter__after"+(e.reverse===!0?"":" col"),e.afterClass],style:T.value.after},V(s.after))];return h("div",{class:q.value,ref:d},Y(s.default,t))}}});const me=async()=>{const e=await R.get("/api/typeSizeMap");return e&&e.data},fe=async()=>{const e=await R.get("/api/tagSizeMap");return e&&e.data},ve=async()=>{const e=await R.get("/api/scanTime");return e&&e.data},ye=n("div",{class:"text-h5 q-pa-md"},"\u6587\u4EF6\u626B\u63CF\u5206\u6790",-1),_e={class:"q-pa-md"},ge=n("div",{class:"text-h5 q-mb-md"},"\u6807\u7B7E\u5206\u5E03",-1),he={class:"q-gutter-sm",style:{display:"flex","flex-direction":"row","flex-wrap":"wrap","justify-content":"flex-start"}},be={class:"q-pa-md"},qe=n("div",{class:"text-h5 q-mb-md"},"\u626B\u63CF\u5206\u6790",-1),xe={class:"row justify-center q-gutter-sm"},Ce={class:"text-h6"},we={class:"text-subtitle2"},Se={class:"text-subtitle2"},ke={class:"q-pa-md"},Ve=n("div",{class:"text-h5 q-mb-md"},"\u6587\u4EF6\u5206\u6790",-1),Be={class:"row justify-center q-gutter-sm"},ze={class:"text-h6"},pe={class:"text-subtitle2"},Me={class:"text-subtitle2"},Te={style:{display:"flex","flex-direction":"row","justify-content":"space-around"}},Le={__name:"IndexPage",setup(e){const s=g(50),c=g(50),{push:y}=ee(),r=ie();document.title="\u9996\u9875";const d=le(),b=g(!1),q=g([]),S=g([]),B=g([]);re(["`"],()=>{f()});const x=a=>{r.setPage(1),r.FileSearchParam.Keyword=a,r.setMovieType(""),y("/search?from=index")},z=a=>{const{IsDir:o,Name:t}=a,i=!o&&t!=="\u5168\u90E8"?t:"";r.setPage(1),o&&r.setKeyword(t),r.setMovieType(i),y("/search?from=index")},T=async()=>{const a=await me();a&&(q.value=a,$(),p())},$=async()=>{const a=await fe();a&&(S.value=a)},p=async()=>{const a=await ve();B.value=a};te(()=>{T()});const D=async a=>{const{Name:o}=a;(await oe({dirpath:o})).Code==200?d.notify({type:"positive",message:"\u6267\u884C\u6210\u529F"}):d.notify({type:"warning",message:"\u6267\u884C\u5931\u8D25"})},N=async a=>{const{Name:o}=a;(await se({dirpath:o})).Code==200?(d.notify({type:"positive",message:"\u6267\u884C\u6210\u529F"}),f()):d.notify({type:"warning",message:"\u6267\u884C\u5931\u8D25"})},f=async()=>{const{data:a}=await ne();console.log(a),a.Code==200?I():d.notify({type:"warning",message:a.Message})},I=()=>{window.location.reload()};return(a,o)=>(m(),M("div",null,[u(ue,{"inline-actions":"",rounded:"",class:"bg-blue text-white q-mt-sd",style:{position:"relative"}},{action:l(()=>[u(C,{style:{background:"#ff0080",color:"white"},label:"\u626B\u63CF",icon:"search",loading:b.value,size:"small",onClick:o[0]||(o[0]=t=>f())},null,8,["loading"]),u(C,{color:"green",class:"q-ml-md",label:"\u5237\u65B0",icon:"refresh",onClick:I})]),default:l(()=>[ye]),_:1}),u(H,{modelValue:s.value,"onUpdate:modelValue":o[2]||(o[2]=t=>s.value=t)},{before:l(()=>[n("div",_e,[ge,n("div",he,[(m(!0),M(j,null,P(S.value,t=>(m(),M("div",{key:t,style:{width:"auto"}},[t.Cnt>1?(m(),k(C,{key:0,color:"secondary",class:"btn-fixed-width",onClick:i=>x(t.Name)},{default:l(()=>[w(_(`${t.Name} (${t.Cnt})`)+" ",1),u(ce,{color:"orange",floating:""},{default:l(()=>[w(_(t.SizeStr),1)]),_:2},1024)]),_:2},1032,["onClick"])):A("",!0)]))),128))])])]),after:l(()=>[u(H,{modelValue:c.value,"onUpdate:modelValue":o[1]||(o[1]=t=>c.value=t),horizontal:""},{before:l(()=>[n("div",be,[qe,n("div",xe,[(m(!0),M(j,null,P(B.value,t=>(m(),k(G,{class:"my-card",key:t},{default:l(()=>[u(O,null,{default:l(()=>[n("div",Ce,_(t.Name),1),n("div",we,"\u65F6\u95F4\uFF1A"+_(t.Cnt),1),n("div",Se,"\u6587\u4EF6\u6570\uFF1A"+_(t.Size),1)]),_:2},1024),u(K),u(U,{vertical:""},{default:l(()=>[u(C,{flat:"",color:"blue",onClick:i=>z({...t,IsDir:!0})},{default:l(()=>[w("\u4F20\u9001")]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024))),128))])])]),after:l(()=>[n("div",ke,[Ve,w(" "+_()+" ",1),n("div",Be,[(m(!0),M(j,null,P(q.value,t=>(m(),k(G,{class:"my-card",key:t},{default:l(()=>[u(O,null,{default:l(()=>[n("div",ze,_(t.Name),1),n("div",pe,"\u6587\u4EF6\u6570\uFF1A"+_(t.Cnt),1),n("div",Me,"\u6587\u4EF6\u5927\u5C0F\uFF1A"+_(t.SizeStr),1)]),_:2},1024),u(K),u(U,{vertical:""},{default:l(()=>[n("div",Te,[t.IsDir?A("",!0):(m(),k(C,{key:0,color:"blue",flat:"",onClick:i=>z(t)},{default:l(()=>[w("\u4F20\u9001")]),_:2},1032,["onClick"])),t.IsDir?(m(),k(C,{key:1,color:"blue",flat:"",onClick:i=>D(t)},{default:l(()=>[w("\u6253\u5F00")]),_:2},1032,["onClick"])):A("",!0),t.IsDir?(m(),k(C,{key:2,color:"red",flat:"",onClick:i=>N(t)},{default:l(()=>[w("\u5220\u9664")]),_:2},1032,["onClick"])):A("",!0)])]),_:2},1024)]),_:2},1024))),128))])])]),_:1},8,["modelValue"])]),_:1},8,["modelValue"])]))}};export{Le as default};
