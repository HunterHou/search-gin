import{c as F,u as E,s as Y,a as f,h,d as V,g as Z,y as J,r as g,w as R,I as W,H as X,aG as ee,j as te,Q as c,R as D,Z as i,a1 as n,ae as C,Y as o,a3 as P,a4 as j,aa as k,V as w,_,a0 as A,ah as O,aH as K,ad as G,ag as H}from"./index.c4b700f0.js";import{T as ae}from"./TouchPan.05559d36.js";import{u as le}from"./use-quasar.ba7665bb.js";import{R as ne,O as oe,D as se}from"./searchAPI.dfe729fa.js";import{axios as L}from"./axios.cef50354.js";import{o as re}from"./index.e4e379a2.js";import{u as ie}from"./System.e8c05951.js";import"./selection.462e2502.js";var ue=F({name:"QBanner",props:{...E,inlineActions:Boolean,dense:Boolean,rounded:Boolean},setup(e,{slots:s}){const{proxy:{$q:d}}=Z(),v=Y(e,d),q=f(()=>"q-banner row items-center"+(e.dense===!0?" q-banner--dense":"")+(v.value===!0?" q-banner--dark q-dark":"")+(e.rounded===!0?" rounded-borders":"")),r=f(()=>`q-banner__actions row items-center justify-end col-${e.inlineActions===!0?"auto":"all"}`);return()=>{const u=[h("div",{class:"q-banner__avatar col-auto row items-center self-start"},V(s.avatar)),h("div",{class:"q-banner__content col text-body2"},V(s.default))],x=V(s.action);return x!==void 0&&u.push(h("div",{class:r.value},x)),h("div",{class:q.value+(e.inlineActions===!1&&x!==void 0?" q-banner--top-padding":""),role:"alert"},u)}}});const de=["top","middle","bottom"];var ce=F({name:"QBadge",props:{color:String,textColor:String,floating:Boolean,transparent:Boolean,multiLine:Boolean,outline:Boolean,rounded:Boolean,label:[Number,String],align:{type:String,validator:e=>de.includes(e)}},setup(e,{slots:s}){const d=f(()=>e.align!==void 0?{verticalAlign:e.align}:null),v=f(()=>{const q=e.outline===!0&&e.color||e.textColor;return`q-badge flex inline items-center no-wrap q-badge--${e.multiLine===!0?"multi":"single"}-line`+(e.outline===!0?" q-badge--outline":e.color!==void 0?` bg-${e.color}`:"")+(q!==void 0?` text-${q}`:"")+(e.floating===!0?" q-badge--floating":"")+(e.rounded===!0?" q-badge--rounded":"")+(e.transparent===!0?" q-badge--transparent":"")});return()=>h("div",{class:v.value,style:d.value,role:"status","aria-label":e.label},J(s.default,e.label!==void 0?[e.label]:[]))}}),U=F({name:"QSplitter",props:{...E,modelValue:{type:Number,required:!0},reverse:Boolean,unit:{type:String,default:"%",validator:e=>["%","px"].includes(e)},limits:{type:Array,validator:e=>e.length!==2||typeof e[0]!="number"||typeof e[1]!="number"?!1:e[0]>=0&&e[0]<=e[1]},emitImmediately:Boolean,horizontal:Boolean,disable:Boolean,beforeClass:[Array,String,Object],afterClass:[Array,String,Object],separatorClass:[Array,String,Object],separatorStyle:[Array,String,Object]},emits:["update:modelValue"],setup(e,{slots:s,emit:d}){const{proxy:{$q:v}}=Z(),q=Y(e,v),r=g(null),u={before:g(null),after:g(null)},x=f(()=>`q-splitter no-wrap ${e.horizontal===!0?"q-splitter--horizontal column":"q-splitter--vertical row"} q-splitter--${e.disable===!0?"disabled":"workable"}`+(q.value===!0?" q-splitter--dark":"")),S=f(()=>e.horizontal===!0?"height":"width"),B=f(()=>e.reverse!==!0?"before":"after"),y=f(()=>e.limits!==void 0?e.limits:e.unit==="%"?[10,90]:[50,1/0]);function T(a){return(e.unit==="%"?a:Math.round(a))+e.unit}const z=f(()=>({[B.value]:{[S.value]:T(e.modelValue)}}));let $,p,N,I,b;function M(a){if(a.isFirst===!0){const m=r.value.getBoundingClientRect()[S.value];$=e.horizontal===!0?"up":"left",p=e.unit==="%"?100:m,N=Math.min(p,y.value[1],Math.max(y.value[0],e.modelValue)),I=(e.reverse!==!0?1:-1)*(e.horizontal===!0?1:v.lang.rtl===!0?-1:1)*(e.unit==="%"?m===0?0:100/m:1),r.value.classList.add("q-splitter--active");return}if(a.isFinal===!0){b!==e.modelValue&&d("update:modelValue",b),r.value.classList.remove("q-splitter--active");return}const t=N+I*(a.direction===$?-1:1)*a.distance[e.horizontal===!0?"y":"x"];b=Math.min(p,y.value[1],Math.max(y.value[0],t)),u[B.value].value.style[S.value]=T(b),e.emitImmediately===!0&&e.modelValue!==b&&d("update:modelValue",b)}const Q=f(()=>[[ae,M,void 0,{[e.horizontal===!0?"vertical":"horizontal"]:!0,prevent:!0,stop:!0,mouse:!0,mouseAllDir:!0}]]);function l(a,t){a<t[0]?d("update:modelValue",t[0]):a>t[1]&&d("update:modelValue",t[1])}return R(()=>e.modelValue,a=>{l(a,y.value)}),R(()=>e.limits,()=>{X(()=>{l(e.modelValue,y.value)})}),()=>{const a=[h("div",{ref:u.before,class:["q-splitter__panel q-splitter__before"+(e.reverse===!0?" col":""),e.beforeClass],style:z.value.before},V(s.before)),h("div",{class:["q-splitter__separator",e.separatorClass],style:e.separatorStyle,"aria-disabled":e.disable===!0?"true":void 0},[W("div",{class:"q-splitter__separator-area absolute-full"},V(s.separator),"sep",e.disable!==!0,()=>Q.value)]),h("div",{ref:u.after,class:["q-splitter__panel q-splitter__after"+(e.reverse===!0?"":" col"),e.afterClass],style:z.value.after},V(s.after))];return h("div",{class:x.value,ref:r},J(s.default,a))}}});const me=async()=>{const e=await L.get("/api/typeSizeMap");return e&&e.data},fe=async()=>{const e=await L.get("/api/tagSizeMap");return e&&e.data},ve=async()=>{const e=await L.get("/api/scanTime");return e&&e.data},ye=o("div",{class:"text-h5 q-pa-md"},"\u6587\u4EF6\u626B\u63CF\u5206\u6790",-1),_e={class:"q-pa-md"},ge=o("div",{class:"text-h5 q-mb-md"},"\u6807\u7B7E\u5206\u5E03",-1),he={class:"q-gutter-sm",style:{display:"flex","flex-direction":"row","flex-wrap":"wrap","justify-content":"flex-start"}},be={class:"q-pa-md"},qe=o("div",{class:"text-h5 q-mb-md"},"\u626B\u63CF\u5206\u6790",-1),xe={class:"row justify-center q-gutter-sm"},Ce={class:"text-h6"},we={class:"text-subtitle2"},Se={class:"text-subtitle2"},ke={class:"q-pa-md"},Ve=o("div",{class:"text-h5 q-mb-md"},"\u6587\u4EF6\u5206\u6790",-1),Be={class:"row justify-center q-gutter-sm"},ze={class:"text-h6"},pe={class:"text-subtitle2"},Me={class:"text-subtitle2"},De={style:{display:"flex","flex-direction":"row","justify-content":"space-around"}},Fe={__name:"IndexPage",setup(e){const s=g(50),d=g(50),{push:v,go:q}=ee(),r=ie();document.title="\u9996\u9875";const u=le(),x=g(!1),S=g([]),B=g([]),y=g([]);re(["`"],l=>{M()});const T=l=>{r.setPage(1),r.FileSearchParam.Keyword=l,r.setMovieType(""),v("/search?from=index")},z=l=>{const{IsDir:a,Name:t}=l,m=!a&&t!=="\u5168\u90E8"?t:"";r.setPage(1),a&&r.setKeyword(t),r.setMovieType(m),v("/search?from=index")},$=async()=>{const l=await me();l&&(S.value=l,p(),N())},p=async()=>{const l=await fe();l&&(B.value=l)},N=async()=>{const l=await ve();y.value=l};te(()=>{$()});const I=async l=>{const{Name:a}=l;(await oe({dirpath:a})).Code==200?u.notify({type:"positive",message:"\u6267\u884C\u6210\u529F"}):u.notify({type:"warning",message:"\u6267\u884C\u5931\u8D25"})},b=async l=>{const{Name:a}=l;(await se({dirpath:a})).Code==200?(u.notify({type:"positive",message:"\u6267\u884C\u6210\u529F"}),M()):u.notify({type:"warning",message:"\u6267\u884C\u5931\u8D25"})},M=async()=>{const{data:l}=await ne();console.log(l),l.Code==200?Q():u.notify({type:"warning",message:l.Message})},Q=()=>{window.location.reload()};return(l,a)=>(c(),D("div",null,[i(ue,{"inline-actions":"",rounded:"",class:"bg-blue text-white q-mt-sd",style:{position:"relative"}},{action:n(()=>[i(C,{style:{background:"#FF0080",color:"white"},label:"\u626B\u63CF",icon:"search",loading:x.value,size:"small",onClick:a[0]||(a[0]=t=>M())},null,8,["loading"]),i(C,{color:"green",class:"q-ml-md",label:"\u5237\u65B0",icon:"refresh",onClick:Q})]),default:n(()=>[ye]),_:1}),i(U,{modelValue:s.value,"onUpdate:modelValue":a[2]||(a[2]=t=>s.value=t)},{before:n(()=>[o("div",_e,[ge,o("div",he,[(c(!0),D(P,null,j(B.value,t=>(c(),D("div",{key:t,style:{width:"auto"}},[t.Cnt>1?(c(),k(C,{key:0,color:"secondary",class:"btn-fixed-width",onClick:m=>T(t.Name)},{default:n(()=>[w(_(`${t.Name} (${t.Cnt})`)+" ",1),i(ce,{color:"orange",floating:""},{default:n(()=>[w(_(t.SizeStr),1)]),_:2},1024)]),_:2},1032,["onClick"])):A("",!0)]))),128))])])]),after:n(()=>[i(U,{modelValue:d.value,"onUpdate:modelValue":a[1]||(a[1]=t=>d.value=t),horizontal:""},{before:n(()=>[o("div",be,[qe,o("div",xe,[(c(!0),D(P,null,j(y.value,t=>(c(),k(H,{class:"my-card",key:t},{default:n(()=>[i(O,null,{default:n(()=>[o("div",Ce,_(t.Name),1),o("div",we,"\u65F6\u95F4\uFF1A"+_(t.Cnt),1),o("div",Se,"\u6587\u4EF6\u6570\uFF1A"+_(t.Size),1)]),_:2},1024),i(K),i(G,{vertical:""},{default:n(()=>[i(C,{flat:"",color:"blue",onClick:m=>z({...t,IsDir:!0})},{default:n(()=>[w("\u4F20\u9001")]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024))),128))])])]),after:n(()=>[o("div",ke,[Ve,w(" "+_()+" ",1),o("div",Be,[(c(!0),D(P,null,j(S.value,t=>(c(),k(H,{class:"my-card",key:t},{default:n(()=>[i(O,null,{default:n(()=>[o("div",ze,_(t.Name),1),o("div",pe,"\u6587\u4EF6\u6570\uFF1A"+_(t.Cnt),1),o("div",Me,"\u6587\u4EF6\u5927\u5C0F\uFF1A"+_(t.SizeStr),1)]),_:2},1024),i(K),i(G,{vertical:""},{default:n(()=>[o("div",De,[t.IsDir?A("",!0):(c(),k(C,{key:0,color:"blue",flat:"",onClick:m=>z(t)},{default:n(()=>[w("\u4F20\u9001")]),_:2},1032,["onClick"])),t.IsDir?(c(),k(C,{key:1,color:"blue",flat:"",onClick:m=>I(t)},{default:n(()=>[w("\u6253\u5F00")]),_:2},1032,["onClick"])):A("",!0),t.IsDir?(c(),k(C,{key:2,color:"red",flat:"",onClick:m=>b(t)},{default:n(()=>[w("\u5220\u9664")]),_:2},1032,["onClick"])):A("",!0)])]),_:2},1024)]),_:2},1024))),128))])])]),_:1},8,["modelValue"])]),_:1},8,["modelValue"])]))}};export{Fe as default};
