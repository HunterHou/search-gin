import{n as El,r as G,a as $,w as ke,t as Bl,b4 as Ll,v as ll,x as ol,o as rt,H as xe,h as z,g as Ze,c as st,aT as Rl,b5 as nl,b6 as Hl,b7 as Nl,b8 as Ql,b9 as Wt,ba as Ue,bb as Kl,bc as Ul,az as ht,V as We,bd as jl,be as Wl,aA as Re,aG as al,bf as Yl,aD as Ie,a7 as ct,y as Gl,au as Xl,bg as Jl,bh as Zl,K as eo,k as Mt,d as il,bi as to,aQ as lo,bj as oo,O as Ye,R,S as le,T as C,a5 as X,U as o,bk as no,al as ye,ak as ao,a0 as N,a9 as io,an as Ge,aa as K,W as ge,Y as ee,$ as re,a1 as pe,a2 as Se,ac as uo,bl as ro,aE as ul,C as so,u as co,D as fo,e as vo,bm as Yt,F as mo,a$ as qt,z as Xe,a3 as go,X as fe,b0 as Vt,ao as yo,am as rl,ai as po,Z as bo,af as at,ad as So,ae as ho}from"./index.9995c1ab.js";import{Q as wt}from"./QPageSticky.fae9b2a8.js";import{a as _t,c as wo,d as ko,Q as kt,b as Co}from"./index.3d27c1a5.js";import{Q as Ae,a as it,b as Gt}from"./QPopupProxy.41499184.js";import{c as xo,a as Ce,Q as Je}from"./QMenu.5fe58312.js";import{r as Pt,Q as Me,a as Io,b as Ct,c as qo,d as xt,e as sl,f as Vo}from"./Setting.b4d9c33c.js";import{Q as Tt}from"./QChip.3c8ab8b7.js";import{n as Xt}from"./format.a33550d6.js";import{Q as _o}from"./QPagination.c323b825.js";import{u as dt,a as Po,o as Jt}from"./index.38ff2747.js";import{F as ft,Q as To,P as cl,a as dl,b as At,c as fl,d as zt,e as vl,T as Mo,f as Ao,C as zo,R as ml,S as gl,g as Oo,A as $o}from"./searchAPI.935457d1.js";import{a as yl,P as Fo}from"./settingAPI.0f4f2f3b.js";import{F as Do,u as pl}from"./System.0d4e2bb8.js";import"./selection.4ff27254.js";import"./QResizeObserver.2a2b7117.js";import"./touch.3df10340.js";import"./axios.68af7fa3.js";const he=1e3,Eo=["start","center","end","start-force","center-force","end-force"],bl=Array.prototype.filter,Bo=window.getComputedStyle(document.body).overflowAnchor===void 0?El:function(e,s){e!==null&&(e._qOverflowAnimationFrame!==void 0&&cancelAnimationFrame(e._qOverflowAnimationFrame),e._qOverflowAnimationFrame=requestAnimationFrame(()=>{if(e===null)return;e._qOverflowAnimationFrame=void 0;const i=e.children||[];bl.call(i,V=>V.dataset&&V.dataset.qVsAnchor!==void 0).forEach(V=>{delete V.dataset.qVsAnchor});const c=i[s];c&&c.dataset&&(c.dataset.qVsAnchor="")}))};function He(e,s){return e+s}function It(e,s,i,c,V,a,n,f){const w=e===window?document.scrollingElement||document.documentElement:e,k=V===!0?"offsetWidth":"offsetHeight",h={scrollStart:0,scrollViewSize:-n-f,scrollMaxSize:0,offsetStart:-n,offsetEnd:-f};if(V===!0?(e===window?(h.scrollStart=window.pageXOffset||window.scrollX||document.body.scrollLeft||0,h.scrollViewSize+=document.documentElement.clientWidth):(h.scrollStart=w.scrollLeft,h.scrollViewSize+=w.clientWidth),h.scrollMaxSize=w.scrollWidth,a===!0&&(h.scrollStart=(Pt===!0?h.scrollMaxSize-h.scrollViewSize:0)-h.scrollStart)):(e===window?(h.scrollStart=window.pageYOffset||window.scrollY||document.body.scrollTop||0,h.scrollViewSize+=document.documentElement.clientHeight):(h.scrollStart=w.scrollTop,h.scrollViewSize+=w.clientHeight),h.scrollMaxSize=w.scrollHeight),i!==null)for(let S=i.previousElementSibling;S!==null;S=S.previousElementSibling)S.classList.contains("q-virtual-scroll--skip")===!1&&(h.offsetStart+=S[k]);if(c!==null)for(let S=c.nextElementSibling;S!==null;S=S.nextElementSibling)S.classList.contains("q-virtual-scroll--skip")===!1&&(h.offsetEnd+=S[k]);if(s!==e){const S=w.getBoundingClientRect(),q=s.getBoundingClientRect();V===!0?(h.offsetStart+=q.left-S.left,h.offsetEnd-=q.width):(h.offsetStart+=q.top-S.top,h.offsetEnd-=q.height),e!==window&&(h.offsetStart+=h.scrollStart),h.offsetEnd+=h.scrollMaxSize-h.offsetStart}return h}function Zt(e,s,i,c){s==="end"&&(s=(e===window?document.body:e)[i===!0?"scrollWidth":"scrollHeight"]),e===window?i===!0?(c===!0&&(s=(Pt===!0?document.body.scrollWidth-document.documentElement.clientWidth:0)-s),window.scrollTo(s,window.pageYOffset||window.scrollY||document.body.scrollTop||0)):window.scrollTo(window.pageXOffset||window.scrollX||document.body.scrollLeft||0,s):i===!0?(c===!0&&(s=(Pt===!0?e.scrollWidth-e.offsetWidth:0)-s),e.scrollLeft=s):e.scrollTop=s}function je(e,s,i,c){if(i>=c)return 0;const V=s.length,a=Math.floor(i/he),n=Math.floor((c-1)/he)+1;let f=e.slice(a,n).reduce(He,0);return i%he!==0&&(f-=s.slice(a*he,i).reduce(He,0)),c%he!==0&&c!==V&&(f-=s.slice(c,n*he).reduce(He,0)),f}const Lo={virtualScrollSliceSize:{type:[Number,String],default:null},virtualScrollSliceRatioBefore:{type:[Number,String],default:1},virtualScrollSliceRatioAfter:{type:[Number,String],default:1},virtualScrollItemSize:{type:[Number,String],default:24},virtualScrollStickySizeStart:{type:[Number,String],default:0},virtualScrollStickySizeEnd:{type:[Number,String],default:0},tableColspan:[Number,String]},Ro={virtualScrollHorizontal:Boolean,onVirtualScroll:Function,...Lo};function Ho({virtualScrollLength:e,getVirtualScrollTarget:s,getVirtualScrollEl:i,virtualScrollItemSizeComputed:c}){const V=Ze(),{props:a,emit:n,proxy:f}=V,{$q:w}=f;let k,h,S,q=[],l;const U=G(0),u=G(0),x=G({}),_=G(null),B=G(null),F=G(null),D=G({from:0,to:0}),E=$(()=>a.tableColspan!==void 0?a.tableColspan:100);c===void 0&&(c=$(()=>a.virtualScrollItemSize));const W=$(()=>c.value+";"+a.virtualScrollHorizontal),ae=$(()=>W.value+";"+a.virtualScrollSliceRatioBefore+";"+a.virtualScrollSliceRatioAfter);ke(ae,()=>{oe()}),ke(W,M);function M(){r(h,!0)}function I(d){r(d===void 0?h:d)}function b(d,A){const L=s();if(L==null||L.nodeType===8)return;const Z=It(L,i(),_.value,B.value,a.virtualScrollHorizontal,w.lang.rtl,a.virtualScrollStickySizeStart,a.virtualScrollStickySizeEnd);S!==Z.scrollViewSize&&oe(Z.scrollViewSize),be(L,Z,Math.min(e.value-1,Math.max(0,parseInt(d,10)||0)),0,Eo.indexOf(A)>-1?A:h>-1&&d>h?"end":"start")}function P(){const d=s();if(d==null||d.nodeType===8)return;const A=It(d,i(),_.value,B.value,a.virtualScrollHorizontal,w.lang.rtl,a.virtualScrollStickySizeStart,a.virtualScrollStickySizeEnd),L=e.value-1,Z=A.scrollMaxSize-A.offsetStart-A.offsetEnd-u.value;if(k===A.scrollStart)return;if(A.scrollMaxSize<=0){be(d,A,0,0);return}S!==A.scrollViewSize&&oe(A.scrollViewSize),T(D.value.from);const ie=Math.floor(A.scrollMaxSize-Math.max(A.scrollViewSize,A.offsetEnd)-Math.min(l[L],A.scrollViewSize/2));if(ie>0&&Math.ceil(A.scrollStart)>=ie){be(d,A,L,A.scrollMaxSize-A.offsetEnd-q.reduce(He,0));return}let j=0,H=A.scrollStart-A.offsetStart,ue=H;if(H<=Z&&H+A.scrollViewSize>=U.value)H-=U.value,j=D.value.from,ue=H;else for(let Q=0;H>=q[Q]&&j<L;Q++)H-=q[Q],j+=he;for(;H>0&&j<L;)H-=l[j],H>-A.scrollViewSize?(j++,ue=H):ue=l[j]+H;be(d,A,j,ue)}function be(d,A,L,Z,ie){const j=typeof ie=="string"&&ie.indexOf("-force")>-1,H=j===!0?ie.replace("-force",""):ie,ue=H!==void 0?H:"start";let Q=Math.max(0,L-x.value[ue]),ce=Q+x.value.total;ce>e.value&&(ce=e.value,Q=Math.max(0,ce-x.value.total)),k=A.scrollStart;const ze=Q!==D.value.from||ce!==D.value.to;if(ze===!1&&H===void 0){te(L);return}const{activeElement:Ne}=document,we=F.value;ze===!0&&we!==null&&we!==Ne&&we.contains(Ne)===!0&&(we.addEventListener("focusout",g),setTimeout(()=>{we!==null&&we.removeEventListener("focusout",g)})),Bo(we,L-Q);const et=H!==void 0?l.slice(Q,L).reduce(He,0):0;if(ze===!0){const Ve=ce>=D.value.from&&Q<=D.value.to?D.value.to:ce;D.value={from:Q,to:Ve},U.value=je(q,l,0,Q),u.value=je(q,l,ce,e.value),requestAnimationFrame(()=>{D.value.to!==ce&&k===A.scrollStart&&(D.value={from:D.value.from,to:ce},u.value=je(q,l,ce,e.value))})}requestAnimationFrame(()=>{if(k!==A.scrollStart)return;ze===!0&&T(Q);const Ve=l.slice(Q,L).reduce(He,0),Oe=Ve+A.offsetStart+U.value,tt=Oe+l[L];let Qe=Oe+Z;if(H!==void 0){const mt=Ve-et,de=A.scrollStart+mt;Qe=j!==!0&&de<Oe&&tt<de+A.scrollViewSize?de:H==="end"?tt-A.scrollViewSize:Oe-(H==="start"?0:Math.round((A.scrollViewSize-l[L])/2))}k=Qe,Zt(d,Qe,a.virtualScrollHorizontal,w.lang.rtl),te(L)})}function T(d){const A=F.value;if(A){const L=bl.call(A.children,Q=>Q.classList&&Q.classList.contains("q-virtual-scroll--skip")===!1),Z=L.length,ie=a.virtualScrollHorizontal===!0?Q=>Q.getBoundingClientRect().width:Q=>Q.offsetHeight;let j=d,H,ue;for(let Q=0;Q<Z;){for(H=ie(L[Q]),Q++;Q<Z&&L[Q].classList.contains("q-virtual-scroll--with-prev")===!0;)H+=ie(L[Q]),Q++;ue=H-l[j],ue!==0&&(l[j]+=ue,q[Math.floor(j/he)]+=ue),j++}}}function g(){F.value!==null&&F.value!==void 0&&F.value.focus()}function r(d,A){const L=1*c.value;(A===!0||Array.isArray(l)===!1)&&(l=[]);const Z=l.length;l.length=e.value;for(let j=e.value-1;j>=Z;j--)l[j]=L;const ie=Math.floor((e.value-1)/he);q=[];for(let j=0;j<=ie;j++){let H=0;const ue=Math.min((j+1)*he,e.value);for(let Q=j*he;Q<ue;Q++)H+=l[Q];q.push(H)}h=-1,k=void 0,U.value=je(q,l,0,D.value.from),u.value=je(q,l,D.value.to,e.value),d>=0?(T(D.value.from),xe(()=>{b(d)})):ve()}function oe(d){if(d===void 0&&typeof window!="undefined"){const H=s();H!=null&&H.nodeType!==8&&(d=It(H,i(),_.value,B.value,a.virtualScrollHorizontal,w.lang.rtl,a.virtualScrollStickySizeStart,a.virtualScrollStickySizeEnd).scrollViewSize)}S=d;const A=parseFloat(a.virtualScrollSliceRatioBefore)||0,L=parseFloat(a.virtualScrollSliceRatioAfter)||0,Z=1+A+L,ie=d===void 0||d<=0?1:Math.ceil(d/c.value),j=Math.max(1,ie,Math.ceil((a.virtualScrollSliceSize>0?a.virtualScrollSliceSize:10)/Z));x.value={total:Math.ceil(j*Z),start:Math.ceil(j*A),center:Math.ceil(j*(.5+A)),end:Math.ceil(j*(1+A)),view:ie}}function v(d,A){const L=a.virtualScrollHorizontal===!0?"width":"height",Z={["--q-virtual-scroll-item-"+L]:c.value+"px"};return[d==="tbody"?z(d,{class:"q-virtual-scroll__padding",key:"before",ref:_},[z("tr",[z("td",{style:{[L]:`${U.value}px`,...Z},colspan:E.value})])]):z(d,{class:"q-virtual-scroll__padding",key:"before",ref:_,style:{[L]:`${U.value}px`,...Z}}),z(d,{class:"q-virtual-scroll__content",key:"content",ref:F,tabindex:-1},A.flat()),d==="tbody"?z(d,{class:"q-virtual-scroll__padding",key:"after",ref:B},[z("tr",[z("td",{style:{[L]:`${u.value}px`,...Z},colspan:E.value})])]):z(d,{class:"q-virtual-scroll__padding",key:"after",ref:B,style:{[L]:`${u.value}px`,...Z}})]}function te(d){h!==d&&(a.onVirtualScroll!==void 0&&n("virtualScroll",{index:d,from:D.value.from,to:D.value.to-1,direction:d<h?"decrease":"increase",ref:f}),h=d)}oe();const ve=Bl(P,w.platform.is.ios===!0?120:35);Ll(()=>{oe()});let y=!1;return ll(()=>{y=!0}),ol(()=>{if(y!==!0)return;const d=s();k!==void 0&&d!==void 0&&d!==null&&d.nodeType!==8?Zt(d,k,a.virtualScrollHorizontal,w.lang.rtl):b(h)}),rt(()=>{ve.cancel()}),Object.assign(f,{scrollTo:b,reset:M,refresh:I}),{virtualScrollSliceRange:D,virtualScrollSliceSizeComputed:x,setVirtualScrollSize:oe,onVirtualScrollEvt:ve,localResetVirtualScroll:r,padVirtualScroll:v,scrollTo:b,reset:M,refresh:I}}const el=e=>["add","add-unique","toggle"].includes(e),No=".*+?^${}()|[]\\",Qo=Object.keys(nl);var Ko=st({name:"QSelect",inheritAttrs:!1,props:{...Ro,...Rl,...nl,modelValue:{required:!0},multiple:Boolean,displayValue:[String,Number],displayValueHtml:Boolean,dropdownIcon:String,options:{type:Array,default:()=>[]},optionValue:[Function,String],optionLabel:[Function,String],optionDisable:[Function,String],hideSelected:Boolean,hideDropdownIcon:Boolean,fillInput:Boolean,maxValues:[Number,String],optionsDense:Boolean,optionsDark:{type:Boolean,default:null},optionsSelectedClass:String,optionsHtml:Boolean,optionsCover:Boolean,menuShrink:Boolean,menuAnchor:String,menuSelf:String,menuOffset:Array,popupContentClass:String,popupContentStyle:[String,Array,Object],useInput:Boolean,useChips:Boolean,newValueMode:{type:String,validator:el},mapOptions:Boolean,emitValue:Boolean,inputDebounce:{type:[Number,String],default:500},inputClass:[Array,String,Object],inputStyle:[Array,String,Object],tabindex:{type:[String,Number],default:0},autocomplete:String,transitionShow:String,transitionHide:String,transitionDuration:[String,Number],behavior:{type:String,validator:e=>["default","menu","dialog"].includes(e),default:"default"},virtualScrollItemSize:{type:[Number,String],default:void 0},onNewValue:Function,onFilter:Function},emits:[...Hl,"add","remove","inputValue","newValue","keyup","keypress","keydown","filterAbort"],setup(e,{slots:s,emit:i}){const{proxy:c}=Ze(),{$q:V}=c,a=G(!1),n=G(!1),f=G(-1),w=G(""),k=G(!1),h=G(!1);let S=null,q,l,U,u=null,x,_,B,F;const D=G(null),E=G(null),W=G(null),ae=G(null),M=G(null),I=Nl(e),b=Wl(Nt),P=$(()=>Array.isArray(e.options)?e.options.length:0),be=$(()=>e.virtualScrollItemSize===void 0?e.optionsDense===!0?24:48:e.virtualScrollItemSize),{virtualScrollSliceRange:T,virtualScrollSliceSizeComputed:g,localResetVirtualScroll:r,padVirtualScroll:oe,onVirtualScrollEvt:v,scrollTo:te,setVirtualScrollSize:ve}=Ho({virtualScrollLength:P,getVirtualScrollTarget:Il,getVirtualScrollEl:Rt,virtualScrollItemSizeComputed:be}),y=Ql(),d=$(()=>{const t=e.mapOptions===!0&&e.multiple!==!0,p=e.modelValue!==void 0&&(e.modelValue!==null||t===!0)?e.multiple===!0&&Array.isArray(e.modelValue)?e.modelValue:[e.modelValue]:[];if(e.mapOptions===!0&&Array.isArray(e.options)===!0){const m=e.mapOptions===!0&&q!==void 0?q:[],O=p.map(J=>xl(J,m));return e.modelValue===null&&t===!0?O.filter(J=>J!==null):O}return p}),A=$(()=>{const t={};return Qo.forEach(p=>{const m=e[p];m!==void 0&&(t[p]=m)}),t}),L=$(()=>e.optionsDark===null?y.isDark.value:e.optionsDark),Z=$(()=>Wt(d.value)),ie=$(()=>{let t="q-field__input q-placeholder col";return e.hideSelected===!0||d.value.length===0?[t,e.inputClass]:(t+=" q-field__input--padding",e.inputClass===void 0?t:[t,e.inputClass])}),j=$(()=>(e.virtualScrollHorizontal===!0?"q-virtual-scroll--horizontal":"")+(e.popupContentClass?" "+e.popupContentClass:"")),H=$(()=>P.value===0),ue=$(()=>d.value.map(t=>me.value(t)).join(", ")),Q=$(()=>e.displayValue!==void 0?e.displayValue:ue.value),ce=$(()=>e.optionsHtml===!0?()=>!0:t=>t!=null&&t.html===!0),ze=$(()=>e.displayValueHtml===!0||e.displayValue===void 0&&(e.optionsHtml===!0||d.value.some(ce.value))),Ne=$(()=>y.focused.value===!0?e.tabindex:-1),we=$(()=>{const t={tabindex:e.tabindex,role:"combobox","aria-label":e.label,"aria-readonly":e.readonly===!0?"true":"false","aria-autocomplete":e.useInput===!0?"list":"none","aria-expanded":a.value===!0?"true":"false","aria-controls":`${y.targetUid.value}_lb`};return f.value>=0&&(t["aria-activedescendant"]=`${y.targetUid.value}_${f.value}`),t}),et=$(()=>({id:`${y.targetUid.value}_lb`,role:"listbox","aria-multiselectable":e.multiple===!0?"true":"false"})),Ve=$(()=>d.value.map((t,p)=>({index:p,opt:t,html:ce.value(t),selected:!0,removeAtIndex:Cl,toggleOption:_e,tabindex:Ne.value}))),Oe=$(()=>{if(P.value===0)return[];const{from:t,to:p}=T.value;return e.options.slice(t,p).map((m,O)=>{const J=$e.value(m)===!0,Y=t+O,ne={clickable:!0,active:!1,activeClass:mt.value,manualFocus:!0,focused:!1,disable:J,tabindex:-1,dense:e.optionsDense,dark:L.value,role:"option",id:`${y.targetUid.value}_${Y}`,onClick:()=>{_e(m)}};return J!==!0&&(pt(m)===!0&&(ne.active=!0),f.value===Y&&(ne.focused=!0),ne["aria-selected"]=ne.active===!0?"true":"false",V.platform.is.desktop===!0&&(ne.onMousemove=()=>{a.value===!0&&Fe(Y)})),{index:Y,opt:m,html:ce.value(m),label:me.value(m),selected:ne.active,focused:ne.focused,toggleOption:_e,setOptionIndex:Fe,itemProps:ne}})}),tt=$(()=>e.dropdownIcon!==void 0?e.dropdownIcon:V.iconSet.arrow.dropdown),Qe=$(()=>e.optionsCover===!1&&e.outlined!==!0&&e.standout!==!0&&e.borderless!==!0&&e.rounded!==!0),mt=$(()=>e.optionsSelectedClass!==void 0?e.optionsSelectedClass:e.color!==void 0?`text-${e.color}`:""),de=$(()=>yt(e.optionValue,"value")),me=$(()=>yt(e.optionLabel,"label")),$e=$(()=>yt(e.optionDisable,"disable")),lt=$(()=>d.value.map(t=>de.value(t))),kl=$(()=>{const t={onInput:Nt,onChange:b,onKeydown:Lt,onKeyup:Et,onKeypress:Bt,onFocus:Ft,onClick(p){l===!0&&Re(p)}};return t.onCompositionstart=t.onCompositionupdate=t.onCompositionend=b,t});ke(d,t=>{q=t,e.useInput===!0&&e.fillInput===!0&&e.multiple!==!0&&y.innerLoading.value!==!0&&(n.value!==!0&&a.value!==!0||Z.value!==!0)&&(U!==!0&&Le(),(n.value===!0||a.value===!0)&&De(""))},{immediate:!0}),ke(()=>e.fillInput,Le),ke(a,bt),ke(P,Dl);function Ot(t){return e.emitValue===!0?de.value(t):t}function gt(t){if(t>-1&&t<d.value.length)if(e.multiple===!0){const p=e.modelValue.slice();i("remove",{index:t,value:p.splice(t,1)[0]}),i("update:modelValue",p)}else i("update:modelValue",null)}function Cl(t){gt(t),y.focus()}function $t(t,p){const m=Ot(t);if(e.multiple!==!0){e.fillInput===!0&&Ke(me.value(t),!0,!0),i("update:modelValue",m);return}if(d.value.length===0){i("add",{index:0,value:m}),i("update:modelValue",e.multiple===!0?[m]:m);return}if(p===!0&&pt(t)===!0||e.maxValues!==void 0&&e.modelValue.length>=e.maxValues)return;const O=e.modelValue.slice();i("add",{index:O.length,value:m}),O.push(m),i("update:modelValue",O)}function _e(t,p){if(y.editable.value!==!0||t===void 0||$e.value(t)===!0)return;const m=de.value(t);if(e.multiple!==!0){p!==!0&&(Ke(e.fillInput===!0?me.value(t):"",!0,!0),Pe()),E.value!==null&&E.value.focus(),(d.value.length===0||Ue(de.value(d.value[0]),m)!==!0)&&i("update:modelValue",e.emitValue===!0?m:t);return}if((l!==!0||k.value===!0)&&y.focus(),Ft(),d.value.length===0){const Y=e.emitValue===!0?m:t;i("add",{index:0,value:Y}),i("update:modelValue",e.multiple===!0?[Y]:Y);return}const O=e.modelValue.slice(),J=lt.value.findIndex(Y=>Ue(Y,m));if(J>-1)i("remove",{index:J,value:O.splice(J,1)[0]});else{if(e.maxValues!==void 0&&O.length>=e.maxValues)return;const Y=e.emitValue===!0?m:t;i("add",{index:O.length,value:Y}),O.push(Y)}i("update:modelValue",O)}function Fe(t){if(V.platform.is.desktop!==!0)return;const p=t>-1&&t<P.value?t:-1;f.value!==p&&(f.value=p)}function ot(t=1,p){if(a.value===!0){let m=f.value;do m=Xt(m+t,-1,P.value-1);while(m!==-1&&m!==f.value&&$e.value(e.options[m])===!0);f.value!==m&&(Fe(m),te(m),p!==!0&&e.useInput===!0&&e.fillInput===!0&&nt(m>=0?me.value(e.options[m]):x))}}function xl(t,p){const m=O=>Ue(de.value(O),t);return e.options.find(m)||p.find(m)||t}function yt(t,p){const m=t!==void 0?t:p;return typeof m=="function"?m:O=>O!==null&&typeof O=="object"&&m in O?O[m]:O}function pt(t){const p=de.value(t);return lt.value.find(m=>Ue(m,p))!==void 0}function Ft(t){e.useInput===!0&&E.value!==null&&(t===void 0||E.value===t.target&&t.target.value===ue.value)&&E.value.select()}function Dt(t){al(t,27)===!0&&a.value===!0&&(Re(t),Pe(),Le()),i("keyup",t)}function Et(t){const{value:p}=t.target;if(t.keyCode!==void 0){Dt(t);return}if(t.target.value="",S!==null&&(clearTimeout(S),S=null),Le(),typeof p=="string"&&p.length!==0){const m=p.toLocaleLowerCase(),O=Y=>{const ne=e.options.find(se=>Y.value(se).toLocaleLowerCase()===m);return ne===void 0?!1:(d.value.indexOf(ne)===-1?_e(ne):Pe(),!0)},J=Y=>{O(de)!==!0&&(O(me)===!0||Y===!0||De(p,!0,()=>J(!0)))};J()}else y.clearValue(t)}function Bt(t){i("keypress",t)}function Lt(t){if(i("keydown",t),Yl(t)===!0)return;const p=w.value.length!==0&&(e.newValueMode!==void 0||e.onNewValue!==void 0),m=t.shiftKey!==!0&&e.multiple!==!0&&(f.value>-1||p===!0);if(t.keyCode===27){ht(t);return}if(t.keyCode===9&&m===!1){Ee();return}if(t.target===void 0||t.target.id!==y.targetUid.value||y.editable.value!==!0)return;if(t.keyCode===40&&y.innerLoading.value!==!0&&a.value===!1){Ie(t),Be();return}if(t.keyCode===8&&e.hideSelected!==!0&&w.value.length===0){e.multiple===!0&&Array.isArray(e.modelValue)===!0?gt(e.modelValue.length-1):e.multiple!==!0&&e.modelValue!==null&&i("update:modelValue",null);return}(t.keyCode===35||t.keyCode===36)&&(typeof w.value!="string"||w.value.length===0)&&(Ie(t),f.value=-1,ot(t.keyCode===36?1:-1,e.multiple)),(t.keyCode===33||t.keyCode===34)&&g.value!==void 0&&(Ie(t),f.value=Math.max(-1,Math.min(P.value,f.value+(t.keyCode===33?-1:1)*g.value.view)),ot(t.keyCode===33?1:-1,e.multiple)),(t.keyCode===38||t.keyCode===40)&&(Ie(t),ot(t.keyCode===38?-1:1,e.multiple));const O=P.value;if((B===void 0||F<Date.now())&&(B=""),O>0&&e.useInput!==!0&&t.key!==void 0&&t.key.length===1&&t.altKey===!1&&t.ctrlKey===!1&&t.metaKey===!1&&(t.keyCode!==32||B.length!==0)){a.value!==!0&&Be(t);const J=t.key.toLocaleLowerCase(),Y=B.length===1&&B[0]===J;F=Date.now()+1500,Y===!1&&(Ie(t),B+=J);const ne=new RegExp("^"+B.split("").map(St=>No.indexOf(St)>-1?"\\"+St:St).join(".*"),"i");let se=f.value;if(Y===!0||se<0||ne.test(me.value(e.options[se]))!==!0)do se=Xt(se+1,-1,O-1);while(se!==f.value&&($e.value(e.options[se])===!0||ne.test(me.value(e.options[se]))!==!0));f.value!==se&&xe(()=>{Fe(se),te(se),se>=0&&e.useInput===!0&&e.fillInput===!0&&nt(me.value(e.options[se]))});return}if(!(t.keyCode!==13&&(t.keyCode!==32||e.useInput===!0||B!=="")&&(t.keyCode!==9||m===!1))){if(t.keyCode!==9&&Ie(t),f.value>-1&&f.value<O){_e(e.options[f.value]);return}if(p===!0){const J=(Y,ne)=>{if(ne){if(el(ne)!==!0)return}else ne=e.newValueMode;if(Ke("",e.multiple!==!0,!0),Y==null)return;(ne==="toggle"?_e:$t)(Y,ne==="add-unique"),e.multiple!==!0&&(E.value!==null&&E.value.focus(),Pe())};if(e.onNewValue!==void 0?i("newValue",w.value,J):J(w.value),e.multiple!==!0)return}a.value===!0?Ee():y.innerLoading.value!==!0&&Be()}}function Rt(){return l===!0?M.value:W.value!==null&&W.value.contentEl!==null?W.value.contentEl:void 0}function Il(){return Rt()}function ql(){return e.hideSelected===!0?[]:s["selected-item"]!==void 0?Ve.value.map(t=>s["selected-item"](t)).slice():s.selected!==void 0?[].concat(s.selected()):e.useChips===!0?Ve.value.map((t,p)=>z(Tt,{key:"option-"+p,removable:y.editable.value===!0&&$e.value(t.opt)!==!0,dense:!0,textColor:e.color,tabindex:Ne.value,onRemove(){t.removeAtIndex(p)}},()=>z("span",{class:"ellipsis",[t.html===!0?"innerHTML":"textContent"]:me.value(t.opt)}))):[z("span",{[ze.value===!0?"innerHTML":"textContent"]:Q.value})]}function Ht(){if(H.value===!0)return s["no-option"]!==void 0?s["no-option"]({inputValue:w.value}):void 0;const t=s.option!==void 0?s.option:m=>z(Je,{key:m.index,...m.itemProps},()=>z(Ce,()=>z(Ae,()=>z("span",{[m.html===!0?"innerHTML":"textContent"]:m.label}))));let p=oe("div",Oe.value.map(t));return s["before-options"]!==void 0&&(p=s["before-options"]().concat(p)),Gl(s["after-options"],p)}function Vl(t,p){const m=p===!0?{...we.value,...y.splitAttrs.attributes.value}:void 0,O={ref:p===!0?E:void 0,key:"i_t",class:ie.value,style:e.inputStyle,value:w.value!==void 0?w.value:"",type:"search",...m,id:p===!0?y.targetUid.value:void 0,maxlength:e.maxlength,autocomplete:e.autocomplete,"data-autofocus":t===!0||e.autofocus===!0||void 0,disabled:e.disable===!0,readonly:e.readonly===!0,...kl.value};return t!==!0&&l===!0&&(Array.isArray(O.class)===!0?O.class=[...O.class,"no-pointer-events"]:O.class+=" no-pointer-events"),z("input",O)}function Nt(t){S!==null&&(clearTimeout(S),S=null),!(t&&t.target&&t.target.qComposing===!0)&&(nt(t.target.value||""),U=!0,x=w.value,y.focused.value!==!0&&(l!==!0||k.value===!0)&&y.focus(),e.onFilter!==void 0&&(S=setTimeout(()=>{S=null,De(w.value)},e.inputDebounce)))}function nt(t){w.value!==t&&(w.value=t,i("inputValue",t))}function Ke(t,p,m){U=m!==!0,e.useInput===!0&&(nt(t),(p===!0||m!==!0)&&(x=t),p!==!0&&De(t))}function De(t,p,m){if(e.onFilter===void 0||p!==!0&&y.focused.value!==!0)return;y.innerLoading.value===!0?i("filterAbort"):(y.innerLoading.value=!0,h.value=!0),t!==""&&e.multiple!==!0&&d.value.length!==0&&U!==!0&&t===me.value(d.value[0])&&(t="");const O=setTimeout(()=>{a.value===!0&&(a.value=!1)},10);u!==null&&clearTimeout(u),u=O,i("filter",t,(J,Y)=>{(p===!0||y.focused.value===!0)&&u===O&&(clearTimeout(u),typeof J=="function"&&J(),h.value=!1,xe(()=>{y.innerLoading.value=!1,y.editable.value===!0&&(p===!0?a.value===!0&&Pe():a.value===!0?bt(!0):a.value=!0),typeof Y=="function"&&xe(()=>{Y(c)}),typeof m=="function"&&xe(()=>{m(c)})}))},()=>{y.focused.value===!0&&u===O&&(clearTimeout(u),y.innerLoading.value=!1,h.value=!1),a.value===!0&&(a.value=!1)})}function _l(){return z(xo,{ref:W,class:j.value,style:e.popupContentStyle,modelValue:a.value,fit:e.menuShrink!==!0,cover:e.optionsCover===!0&&H.value!==!0&&e.useInput!==!0,anchor:e.menuAnchor,self:e.menuSelf,offset:e.menuOffset,dark:L.value,noParentEvent:!0,noRefocus:!0,noFocus:!0,square:Qe.value,transitionShow:e.transitionShow,transitionHide:e.transitionHide,transitionDuration:e.transitionDuration,separateClosePopup:!0,...et.value,onScrollPassive:v,onBeforeShow:Kt,onBeforeHide:Pl,onShow:Tl},Ht)}function Pl(t){Ut(t),Ee()}function Tl(){ve()}function Ml(t){Re(t),E.value!==null&&E.value.focus(),k.value=!0,window.scrollTo(window.pageXOffset||window.scrollX||document.body.scrollLeft||0,0)}function Al(t){Re(t),xe(()=>{k.value=!1})}function zl(){const t=[z(Me,{class:`col-auto ${y.fieldClass.value}`,...A.value,for:y.targetUid.value,dark:L.value,square:!0,loading:h.value,itemAligned:!1,filled:!0,stackLabel:w.value.length!==0,...y.splitAttrs.listeners.value,onFocus:Ml,onBlur:Al},{...s,rawControl:()=>y.getControl(!0),before:void 0,after:void 0})];return a.value===!0&&t.push(z("div",{ref:M,class:j.value+" scroll",style:e.popupContentStyle,...et.value,onClick:ht,onScrollPassive:v},Ht())),z(ct,{ref:ae,modelValue:n.value,position:e.useInput===!0?"top":void 0,transitionShow:_,transitionHide:e.transitionHide,transitionDuration:e.transitionDuration,onBeforeShow:Kt,onBeforeHide:Ol,onHide:$l,onShow:Fl},()=>z("div",{class:"q-select__dialog"+(L.value===!0?" q-select__dialog--dark q-dark":"")+(k.value===!0?" q-select__dialog--focused":"")},t))}function Ol(t){Ut(t),ae.value!==null&&ae.value.__updateRefocusTarget(y.rootRef.value.querySelector(".q-field__native > [tabindex]:last-child")),y.focused.value=!1}function $l(t){Pe(),y.focused.value===!1&&i("blur",t),Le()}function Fl(){const t=document.activeElement;(t===null||t.id!==y.targetUid.value)&&E.value!==null&&E.value!==t&&E.value.focus(),ve()}function Ee(){n.value!==!0&&(f.value=-1,a.value===!0&&(a.value=!1),y.focused.value===!1&&(u!==null&&(clearTimeout(u),u=null),y.innerLoading.value===!0&&(i("filterAbort"),y.innerLoading.value=!1,h.value=!1)))}function Be(t){y.editable.value===!0&&(l===!0?(y.onControlFocusin(t),n.value=!0,xe(()=>{y.focus()})):y.focus(),e.onFilter!==void 0?De(w.value):(H.value!==!0||s["no-option"]!==void 0)&&(a.value=!0))}function Pe(){n.value=!1,Ee()}function Le(){e.useInput===!0&&Ke(e.multiple!==!0&&e.fillInput===!0&&d.value.length!==0&&me.value(d.value[0])||"",!0,!0)}function bt(t){let p=-1;if(t===!0){if(d.value.length!==0){const m=de.value(d.value[0]);p=e.options.findIndex(O=>Ue(de.value(O),m))}r(p)}Fe(p)}function Dl(t,p){a.value===!0&&y.innerLoading.value===!1&&(r(-1,!0),xe(()=>{a.value===!0&&y.innerLoading.value===!1&&(t>p?r():bt(!0))}))}function Qt(){n.value===!1&&W.value!==null&&W.value.updatePosition()}function Kt(t){t!==void 0&&Re(t),i("popupShow",t),y.hasPopupOpen=!0,y.onControlFocusin(t)}function Ut(t){t!==void 0&&Re(t),i("popupHide",t),y.hasPopupOpen=!1,y.onControlFocusout(t)}function jt(){l=V.platform.is.mobile!==!0&&e.behavior!=="dialog"?!1:e.behavior!=="menu"&&(e.useInput===!0?s["no-option"]!==void 0||e.onFilter!==void 0||H.value===!1:!0),_=V.platform.is.ios===!0&&l===!0&&e.useInput===!0?"fade":e.transitionShow}return Kl(jt),Ul(Qt),jt(),rt(()=>{S!==null&&clearTimeout(S)}),Object.assign(c,{showPopup:Be,hidePopup:Pe,removeAtIndex:gt,add:$t,toggleOption:_e,getOptionIndex:()=>f.value,setOptionIndex:Fe,moveOptionSelection:ot,filter:De,updateMenuPosition:Qt,updateInputValue:Ke,isOptionSelected:pt,getEmittingOptionValue:Ot,isOptionDisabled:(...t)=>$e.value.apply(null,t)===!0,getOptionValue:(...t)=>de.value.apply(null,t),getOptionLabel:(...t)=>me.value.apply(null,t)}),Object.assign(y,{innerValue:d,fieldClass:$(()=>`q-select q-field--auto-height q-select--with${e.useInput!==!0?"out":""}-input q-select--with${e.useChips!==!0?"out":""}-chips q-select--${e.multiple===!0?"multiple":"single"}`),inputRef:D,targetRef:E,hasValue:Z,showPopup:Be,floatingLabel:$(()=>e.hideSelected!==!0&&Z.value===!0||typeof w.value=="number"||w.value.length!==0||Wt(e.displayValue)),getControlChild:()=>{if(y.editable.value!==!1&&(n.value===!0||H.value!==!0||s["no-option"]!==void 0))return l===!0?zl():_l();y.hasPopupOpen===!0&&(y.hasPopupOpen=!1)},controlEvents:{onFocusin(t){y.onControlFocusin(t)},onFocusout(t){y.onControlFocusout(t,()=>{Le(),Ee()})},onClick(t){if(ht(t),l!==!0&&a.value===!0){Ee(),E.value!==null&&E.value.focus();return}Be(t)}},getControl:t=>{const p=ql(),m=t===!0||n.value!==!0||l!==!0;if(e.useInput===!0)p.push(Vl(t,m));else if(y.editable.value===!0){const J=m===!0?we.value:void 0;p.push(z("input",{ref:m===!0?E:void 0,key:"d_t",class:"q-select__focus-target",id:m===!0?y.targetUid.value:void 0,value:Q.value,readonly:!0,"data-autofocus":t===!0||e.autofocus===!0||void 0,...J,onKeydown:Lt,onKeyup:Dt,onKeypress:Bt})),m===!0&&typeof e.autocomplete=="string"&&e.autocomplete.length!==0&&p.push(z("input",{class:"q-select__autocomplete-input",autocomplete:e.autocomplete,tabindex:-1,onKeyup:Et}))}if(I.value!==void 0&&e.disable!==!0&&lt.value.length!==0){const J=lt.value.map(Y=>z("option",{value:Y,selected:!0}));p.push(z("select",{class:"hidden",name:I.value,multiple:e.multiple},J))}const O=e.useInput===!0||m!==!0?void 0:y.splitAttrs.attributes.value;return z("div",{class:"q-field__native row items-center",...O,...y.splitAttrs.listeners.value},p)},getInnerAppend:()=>e.loading!==!0&&h.value!==!0&&e.hideDropdownIcon!==!0?[z(We,{class:"q-select__dropdown-icon"+(a.value===!0?" rotate-180":""),name:tt.value})]:null}),jl(y)}});function tl(e){if(e===!1)return 0;if(e===!0||e===void 0)return 1;const s=parseInt(e,10);return isNaN(s)?0:s}var Sl=Xl({name:"close-popup",beforeMount(e,{value:s}){const i={depth:tl(s),handler(c){i.depth!==0&&setTimeout(()=>{const V=Jl(e);V!==void 0&&Zl(V,c,i.depth)})},handlerKey(c){al(c,13)===!0&&i.handler(c)}};e.__qclosepopup=i,e.addEventListener("click",i.handler),e.addEventListener("keyup",i.handlerKey)},updated(e,{value:s,oldValue:i}){s!==i&&(e.__qclosepopup.depth=tl(s))},beforeUnmount(e){const s=e.__qclosepopup;e.removeEventListener("click",s.handler),e.removeEventListener("keyup",s.handlerKey),delete e.__qclosepopup}});const Uo=e=>(e.indexOf("{{")>=0&&(e=e.split("{{")[1]),e.indexOf("}}")>=0&&(e=e.split("}}")[0]),e),jo=e=>(e.indexOf("\u300A")>=0&&(e=e.split("\u300A")[1]),e.indexOf("\u300B")>=0&&(e=e.split("\u300B")[0]),e),hl=e=>e?e.indexOf("-")==0?e=e.substring(1):e.substring(0,10):"",ut=e=>e?(e.lastIndexOf("]")>=0&&(e=e.substring(e.lastIndexOf("]")+1)),e.indexOf("{{")>=0&&(e=e.replace(`{{${Uo(e)}}}`,"")),e.indexOf("\u300A")>=0&&(e=e.replace(`\u300A${jo(e)}\u300B`,"")),e):"",vt=[{label:"\u9A91\u5175",value:"\u9A91\u5175"},{label:"\u6B65\u5175",value:"\u6B65\u5175"},{label:"\u56FD\u4EA7",value:"\u56FD\u4EA7"},{label:"\u65AF\u5DF4\u8FBE",value:"\u65AF\u5DF4\u8FBE"},{label:"\u6F2B\u52A8",value:"\u6F2B\u52A8"}],Wo=[{label:"\u5168\u90E8",value:""},...vt,{label:"\u65E0",value:"\u65E0"}];var Yo=st({name:"QForm",props:{autofocus:Boolean,noErrorFocus:Boolean,noResetFocus:Boolean,greedy:Boolean,onSubmit:Function},emits:["reset","validationSuccess","validationError"],setup(e,{slots:s,emit:i}){const c=Ze(),V=G(null);let a=0;const n=[];function f(l){const U=typeof l=="boolean"?l:e.noErrorFocus!==!0,u=++a,x=(F,D)=>{i("validation"+(F===!0?"Success":"Error"),D)},_=F=>{const D=F.validate();return typeof D.then=="function"?D.then(E=>({valid:E,comp:F}),E=>({valid:!1,comp:F,err:E})):Promise.resolve({valid:D,comp:F})};return(e.greedy===!0?Promise.all(n.map(_)).then(F=>F.filter(D=>D.valid!==!0)):n.reduce((F,D)=>F.then(()=>_(D).then(E=>{if(E.valid===!1)return Promise.reject(E)})),Promise.resolve()).catch(F=>[F])).then(F=>{if(F===void 0||F.length===0)return u===a&&x(!0),!0;if(u===a){const{comp:D,err:E}=F[0];if(E!==void 0&&console.error(E),x(!1,D),U===!0){const W=F.find(({comp:ae})=>typeof ae.focus=="function"&&to(ae.$)===!1);W!==void 0&&W.comp.focus()}}return!1})}function w(){a++,n.forEach(l=>{typeof l.resetValidation=="function"&&l.resetValidation()})}function k(l){l!==void 0&&Ie(l);const U=a+1;f().then(u=>{U===a&&u===!0&&(e.onSubmit!==void 0?i("submit",l):l!==void 0&&l.target!==void 0&&typeof l.target.submit=="function"&&l.target.submit())})}function h(l){l!==void 0&&Ie(l),i("reset"),xe(()=>{w(),e.autofocus===!0&&e.noResetFocus!==!0&&S()})}function S(){lo(()=>{if(V.value===null)return;const l=V.value.querySelector("[autofocus][tabindex], [data-autofocus][tabindex]")||V.value.querySelector("[autofocus] [tabindex], [data-autofocus] [tabindex]")||V.value.querySelector("[autofocus], [data-autofocus]")||Array.prototype.find.call(V.value.querySelectorAll("[tabindex]"),U=>U.tabIndex>-1);l!=null&&l.focus({preventScroll:!0})})}eo(oo,{bindComponent(l){n.push(l)},unbindComponent(l){const U=n.indexOf(l);U>-1&&n.splice(U,1)}});let q=!1;return ll(()=>{q=!0}),ol(()=>{q===!0&&e.autofocus===!0&&S()}),Mt(()=>{e.autofocus===!0&&S()}),Object.assign(c.proxy,{validate:f,resetValidation:w,submit:k,reset:h,focus:S,getValidationComponents:()=>n}),()=>z("form",{class:"q-form",ref:V,onSubmit:k,onReset:h},il(s.default))}});const Go=()=>!0;function Xo(e){const s={};return e.forEach(i=>{s[i]=Go}),s}function qe(){const{emit:e,proxy:s}=Ze(),i=G(null);function c(){i.value.show()}function V(){i.value.hide()}function a(f){e("ok",f),V()}function n(){e("hide")}return Object.assign(s,{show:c,hide:V}),{dialogRef:i,onDialogHide:n,onDialogOK:a,onDialogCancel:V}}const wl=["ok","hide"];qe.emits=wl;qe.emitsObject=Xo(wl);const Jo={__name:"FileEdit",emits:[...qe.emits],setup(e,{expose:s}){const i=dt(),c=Ye({item:null,callback:null}),V=(S,q)=>{c.item=new Do().fromObject(S),c.item.Code=hl(S.Code),c.item.Title=ut(S.Title),c.callback=q,f.value.show()},a=async()=>{await n(!0)},n=async S=>{const{Id:q,Title:l,Code:U,Actress:u,FileType:x,MovieType:_}=c.item;let B=U.trim();B&&B.indexOf("-")<0&&(B="-"+B);let F="";u.length!=0&&(F+="["+u.trim()+"]"),B.length!=0&&(F+=" ["+B.trim()+"]"),_&&_!="\u65E0"&&F.indexOf("{{")<0&&(F+=`{{${_}}}`);const D=l.trim().split("."),E=D.length;for(let M=0;M<E;M++){const I=D[M];F+=I.replace(I.charAt(0),I.charAt(0).toUpperCase())}F.indexOf("."+x)<0&&(F+="."+x);const ae=await ft({Id:q,Name:F,Code:B,Actress:u,MoveOut:S,NoRefresh:!0});ae.Code==200?(k(),c.callback&&c.callback()):i.notify({type:"negative",message:ae.Message})},{dialogRef:f,onDialogHide:w,onDialogOK:k,onDialogCancel:h}=qe();return s({open:V}),(S,q)=>(R(),le(ct,{ref_key:"dialogRef",ref:f,onHide:X(w)},{default:C(()=>[o(Ge,{class:"q-dialog-plugin q-pa-md",style:io({width:"600px",backgroundImage:"linear-gradient(to left, rgba(255,255,255,0.1), rgba(255,255,255,0.1))"})},{default:C(()=>[o(Yo,{class:"q-gutter-md"},{default:C(()=>[o(no,{modelValue:c.item.MovieType,"onUpdate:modelValue":q[0]||(q[0]=l=>c.item.MovieType=l),options:X(vt),color:"primary",inline:""},null,8,["modelValue","options"]),o(ye,{label:"\u7F16\u7801",autogrow:"",modelValue:c.item.Code,"onUpdate:modelValue":q[1]||(q[1]=l=>c.item.Code=l),dense:!1},null,8,["modelValue"]),o(ye,{label:"\u56FE\u9274",autogrow:"",modelValue:c.item.Actress,"onUpdate:modelValue":q[2]||(q[2]=l=>c.item.Actress=l),dense:!1},null,8,["modelValue"]),o(ye,{label:"\u540D\u79F0",autogrow:"",modelValue:c.item.Title,"onUpdate:modelValue":q[3]||(q[3]=l=>c.item.Title=l),dense:!1},null,8,["modelValue"])]),_:1}),o(ao,{align:"right"},{default:C(()=>[o(N,{color:"primary",label:"\u79FB\u52A8",onClick:a}),o(N,{color:"primary",label:"\u547D\u540D",onClick:q[4]||(q[4]=()=>{n(!1)})}),o(N,{color:"primary",label:"\u5173\u95ED",onClick:X(h)},null,8,["onClick"])]),_:1})]),_:1},8,["style"])]),_:1},8,["onHide"]))}},Zo={style:{"max-width":"80vw !important"}},en={class:"self-center full-width no-outline",tabindex:"0"},tn={class:"self-center full-width no-outline",tabindex:"0"},ln={class:"self-center full-width no-outline",tabindex:"0"},on={class:"self-center full-width no-outline",tabindex:"0"},nn={key:0},an={__name:"FileInfo",emits:[...qe.emits],setup(e,{expose:s}){const i=dt(),c=pl(),V=async u=>{const{Code:x,Message:_}=await u||{};console.log(x,_),x!=200&&i.notify({message:`${_}`})},a=u=>{window.open(`/playing/${u.Id}`)},n=async u=>{const x=await ft({...u,NoRefresh:!0,MoveOut:!0});console.log(x),x.Code==200?i.notify({type:"negative",message:x.Message}):i.notify({type:"negative",message:x.Message})},f=u=>{i.dialog({title:u.Name,message:"\u786E\u5B9A\u5220\u9664\u5417?",cancel:!0,persistent:!0}).onOk(()=>{V(zt(u.Id))}).onCancel(()=>{console.log(">>>> Cancel")}).onDismiss(()=>{})},w=u=>{k.currentData=u,c.Playing=u,c.drawerRight=!0},k=Ye({item:{},settingInfo:{},callback:null,prewiewImages:[]}),h=(u,x)=>{k.prewiewImages=[],k.item={...u},k.callback=x,l.value.show(),setTimeout(()=>{To(u.Id).then(_=>{console.log(_.data),k.prewiewImages=_.data})},500)},S=async()=>{const u=await yl();k.settingInfo=u.data},q=()=>{window.open(`${k.settingInfo.BaseUrl}/${k.item.Code}`)},{dialogRef:l,onDialogHide:U}=qe();return Mt(()=>{S()}),s({open:h}),(u,x)=>(R(),le(ct,{ref_key:"dialogRef",ref:l,onHide:X(U),style:{width:"80vw !important"}},{default:C(()=>[K("div",Zo,[o(Ge,{class:"q-dialog-plugin q-pa-md",style:{color:"white",width:"100%",maxHeight:"90vh",padding:"20px",lineHeight:"32px"}},{default:C(()=>[o(N,{round:"",class:"q-mr-sm",size:"sm",ripple:"",color:"green",icon:"ti-fullscreen",onClick:x[0]||(x[0]=_=>a(k.item))}),o(N,{round:"",class:"q-mr-sm",size:"sm",ripple:"",color:"green-7",icon:"ti-blackboard",onClick:x[1]||(x[1]=_=>w(k.item))}),o(N,{round:"",class:"q-mr-sm",size:"sm",color:"primary",icon:"ti-control-eject",onClick:x[2]||(x[2]=_=>V(X(cl)(k.item.Id)))}),o(N,{round:"",class:"q-mr-sm",size:"sm",color:"primary",icon:"open_in_new",onClick:x[3]||(x[3]=_=>V(X(dl)(k.item.Id)))}),!k.item.MovieType||k.item.MovieType=="\u65E0"?(R(),le(N,{key:0,round:"",class:"q-mr-sm",size:"sm",color:"brown-5",icon:"wifi_protected_setup",onClick:x[4]||(x[4]=_=>V(X(At)(k.item.Id),!0))})):ge("",!0),o(N,{round:"",class:"q-mr-sm",size:"sm",color:"secondary",icon:"ti-import",onClick:x[5]||(x[5]=_=>V(X(fl)(k.item.Id)))}),o(N,{round:"",class:"q-mr-sm",size:"sm",color:"amber",glossy:"","text-color":"black",icon:"ti-trash",onClick:x[6]||(x[6]=_=>f(k.item))}),o(N,{round:"",class:"q-mr-sm",size:"sm",color:"black",onClick:x[7]||(x[7]=_=>n(k.item)),icon:"ti-control-shuffle"}),o(_t,{fit:"fit",easier:"",draggable:"",src:X(wo)(k.item.Id),style:{"min-width":"600px","max-height":"50vh"}},null,8,["src"]),o(Me,{label:"Code","stack-label":""},{control:C(()=>[K("div",{class:"self-center full-width no-outline",style:{color:"blue"},tabindex:"0",onClick:q},ee(k.item.Code),1)]),_:1}),o(Me,{label:"Actress","stack-label":""},{control:C(()=>[K("div",en,ee(k.item.Actress),1)]),_:1}),o(Me,{label:"Name","stack-label":""},{control:C(()=>[K("div",tn,ee(X(ut)(k.item.Name)),1)]),_:1}),o(Me,{label:"Time","stack-label":""},{control:C(()=>[K("div",ln,ee(X(ut)(k.item.MTime)),1)]),_:1}),o(Me,{label:"Code","stack-label":""},{control:C(()=>[K("div",on,ee(k.item.Path),1)]),_:1})]),_:1}),k.prewiewImages?(R(),re("div",nn,[(R(!0),re(pe,null,Se(k.prewiewImages,_=>(R(),le(_t,{fit:"fit",key:_.Id,src:X(ko)(_.Id),style:{width:"100%",height:"auto"}},null,8,["src"]))),128))])):ge("",!0)])]),_:1},8,["onHide"]))}};var un=st({name:"QSlideTransition",props:{appear:Boolean,duration:{type:Number,default:300}},emits:["show","hide"],setup(e,{slots:s,emit:i}){let c=!1,V,a,n=null,f=null,w,k;function h(){V&&V(),V=null,c=!1,n!==null&&(clearTimeout(n),n=null),f!==null&&(clearTimeout(f),f=null),a!==void 0&&a.removeEventListener("transitionend",w),w=null}function S(u,x,_){x!==void 0&&(u.style.height=`${x}px`),u.style.transition=`height ${e.duration}ms cubic-bezier(.25, .8, .50, 1)`,c=!0,V=_}function q(u,x){u.style.overflowY=null,u.style.height=null,u.style.transition=null,h(),x!==k&&i(x)}function l(u,x){let _=0;a=u,c===!0?(h(),_=u.offsetHeight===u.scrollHeight?0:void 0):(k="hide",u.style.overflowY="hidden"),S(u,_,x),n=setTimeout(()=>{n=null,u.style.height=`${u.scrollHeight}px`,w=B=>{f=null,(Object(B)!==B||B.target===u)&&q(u,"show")},u.addEventListener("transitionend",w),f=setTimeout(w,e.duration*1.1)},100)}function U(u,x){let _;a=u,c===!0?h():(k="show",u.style.overflowY="hidden",_=u.scrollHeight),S(u,_,x),n=setTimeout(()=>{n=null,u.style.height=0,w=B=>{f=null,(Object(B)!==B||B.target===u)&&q(u,"hide")},u.addEventListener("transitionend",w),f=setTimeout(w,e.duration*1.1)},100)}return rt(()=>{c===!0&&h()}),()=>z(uo,{css:!1,appear:e.appear,onEnter:l,onLeave:U},s.default)}});const Te=ro({}),rn=Object.keys(ul);var sn=st({name:"QExpansionItem",props:{...ul,...so,...co,icon:String,label:String,labelLines:[Number,String],caption:String,captionLines:[Number,String],dense:Boolean,toggleAriaLabel:String,expandIcon:String,expandedIcon:String,expandIconClass:[Array,String,Object],duration:Number,headerInsetLevel:Number,contentInsetLevel:Number,expandSeparator:Boolean,defaultOpened:Boolean,hideExpandIcon:Boolean,expandIconToggle:Boolean,switchToggleSide:Boolean,denseToggle:Boolean,group:String,popup:Boolean,headerStyle:[Array,String,Object],headerClass:[Array,String,Object]},emits:[...fo,"click","afterShow","afterHide"],setup(e,{slots:s,emit:i}){const{proxy:{$q:c}}=Ze(),V=vo(e,c),a=G(e.modelValue!==null?e.modelValue:e.defaultOpened),n=G(null),f=Yt(),{show:w,hide:k,toggle:h}=mo({showing:a});let S,q;const l=$(()=>`q-expansion-item q-item-type q-expansion-item--${a.value===!0?"expanded":"collapsed"} q-expansion-item--${e.popup===!0?"popup":"standard"}`),U=$(()=>{if(e.contentInsetLevel===void 0)return null;const v=c.lang.rtl===!0?"Right":"Left";return{["padding"+v]:e.contentInsetLevel*56+"px"}}),u=$(()=>e.disable!==!0&&(e.href!==void 0||e.to!==void 0&&e.to!==null&&e.to!=="")),x=$(()=>{const v={};return rn.forEach(te=>{v[te]=e[te]}),v}),_=$(()=>u.value===!0||e.expandIconToggle!==!0),B=$(()=>e.expandedIcon!==void 0&&a.value===!0?e.expandedIcon:e.expandIcon||c.iconSet.expansionItem[e.denseToggle===!0?"denseIcon":"icon"]),F=$(()=>e.disable!==!0&&(u.value===!0||e.expandIconToggle===!0)),D=$(()=>({expanded:a.value===!0,detailsId:e.targetUid,toggle:h,show:w,hide:k})),E=$(()=>{const v=e.toggleAriaLabel!==void 0?e.toggleAriaLabel:c.lang.label[a.value===!0?"collapse":"expand"](e.label);return{role:"button","aria-expanded":a.value===!0?"true":"false","aria-controls":f,"aria-label":v}});ke(()=>e.group,v=>{q!==void 0&&q(),v!==void 0&&P()});function W(v){u.value!==!0&&h(v),i("click",v)}function ae(v){v.keyCode===13&&M(v,!0)}function M(v,te){te!==!0&&n.value!==null&&n.value.focus(),h(v),Ie(v)}function I(){i("afterShow")}function b(){i("afterHide")}function P(){S===void 0&&(S=Yt()),a.value===!0&&(Te[e.group]=S);const v=ke(a,ve=>{ve===!0?Te[e.group]=S:Te[e.group]===S&&delete Te[e.group]}),te=ke(()=>Te[e.group],(ve,y)=>{y===S&&ve!==void 0&&ve!==S&&k()});q=()=>{v(),te(),Te[e.group]===S&&delete Te[e.group],q=void 0}}function be(){const v={class:[`q-focusable relative-position cursor-pointer${e.denseToggle===!0&&e.switchToggleSide===!0?" items-end":""}`,e.expandIconClass],side:e.switchToggleSide!==!0,avatar:e.switchToggleSide},te=[z(We,{class:"q-expansion-item__toggle-icon"+(e.expandedIcon===void 0&&a.value===!0?" q-expansion-item__toggle-icon--rotated":""),name:B.value})];return F.value===!0&&(Object.assign(v,{tabindex:0,...E.value,onClick:M,onKeyup:ae}),te.unshift(z("div",{ref:n,class:"q-expansion-item__toggle-focus q-icon q-focus-helper q-focus-helper--rounded",tabindex:-1}))),z(Ce,v,()=>te)}function T(){let v;return s.header!==void 0?v=[].concat(s.header(D.value)):(v=[z(Ce,()=>[z(Ae,{lines:e.labelLines},()=>e.label||""),e.caption?z(Ae,{lines:e.captionLines,caption:!0},()=>e.caption):null])],e.icon&&v[e.switchToggleSide===!0?"push":"unshift"](z(Ce,{side:e.switchToggleSide===!0,avatar:e.switchToggleSide!==!0},()=>z(We,{name:e.icon})))),e.disable!==!0&&e.hideExpandIcon!==!0&&v[e.switchToggleSide===!0?"unshift":"push"](be()),v}function g(){const v={ref:"item",style:e.headerStyle,class:e.headerClass,dark:V.value,disable:e.disable,dense:e.dense,insetLevel:e.headerInsetLevel};return _.value===!0&&(v.clickable=!0,v.onClick=W,Object.assign(v,u.value===!0?x.value:E.value)),z(Je,v,T)}function r(){return Xe(z("div",{key:"e-content",class:"q-expansion-item__content relative-position",style:U.value,id:f},il(s.default)),[[go,a.value]])}function oe(){const v=[g(),z(un,{duration:e.duration,onShow:I,onHide:b},r)];return e.expandSeparator===!0&&v.push(z(qt,{class:"q-expansion-item__border q-expansion-item__border--top absolute-top",dark:V.value}),z(qt,{class:"q-expansion-item__border q-expansion-item__border--bottom absolute-bottom",dark:V.value})),v}return e.group!==void 0&&P(),rt(()=>{q!==void 0&&q()}),()=>z("div",{class:l.value},[z("div",{class:"q-expansion-item__container relative-position"},oe())])}});const cn={class:"q-px-sm row justify-left"},dn={class:"q-gutter-sm q-mt-sm"},fn={style:{display:"flex","flex-direction":"column"}},vn={key:0,style:{color:"red"}},mn={style:{display:"flex","flex-direction":"row"}},gn={key:0,style:{display:"flex","flex-direction":"row","align-items":"center","background-color":"antiquewhite","border-radius":"12px",padding:"4px"}},yn={style:{"max-height":"20vh",overflow:"auto"}},pn={__name:"ListEdit",emits:[...qe.emits],setup(e,{expose:s}){const i=dt(),c=G("filelist");let V;ke(()=>c.value,M=>{console.log(M),M==="tasking"?(a(),V=setInterval(a,2e3)):clearInterval(V)});const a=async()=>{const M=await Mo();n.tasking=M.Data},n=Ye({selectAll:!1,settingInfo:{},resultData:{},queryParam:{},selector:[],callback:null,cutListIds:[],tasking:{}}),f=Ye({sH:"00",sM:"00",sS:"00",eH:"99",eM:"00",eS:"00"}),w=M=>{n.cutListIds.indexOf(M.Id)<0&&n.cutListIds.push(M.Id),l(Ao(M.Id))},k=M=>{n.cutListIds.indexOf(M.Id)<0&&n.cutListIds.push(M.Id),l(zo(M.Id,[f.sH,f.sM,f.sS].join(":"),[f.eH,f.eM,f.eS].join(":")))},h=()=>{n.selectAll=!n.selectAll,n.selectAll?n.selector=n.resultData.Data.map(M=>M.Id):n.selector=[]},S=async()=>{await ml(),await q()},q=async()=>{const M=await gl(n.queryParam);n.resultData=M},l=async M=>{const{Code:I,Message:b}=await M;console.log(I,b),I!=200?i.notify({message:`${b}`}):i.notify({message:`${b}`})},U=M=>{const{queryParam:I,settingInfo:b,cb:P}=M;n.queryParam=I,n.settingInfo=b,n.callback=P,B.value.show(),q()},u=async()=>{n.callback&&n.callback({settingInfo:n.settingInfo}),E(),D(),F(),console.log("dialogHide")},x=M=>{i.dialog({title:M.Name,message:"\u786E\u5B9A\u5220\u9664\u5417?",cancel:!0,persistent:!0}).onOk(()=>{console.log(">>>> onOk"),l(zt(M.Id)).then(()=>{for(let I=0;I<n.resultData.Data.length;I++)n.resultData.Data[I].Id==M.Id&&n.resultData.Data.splice(I,1)})}).onCancel(()=>{console.log(">>>> Cancel")}).onDismiss(()=>{})},_=async M=>{const I=await ft({...M,NoRefresh:!0,MoveOut:!0});if(console.log(I),I.Code==200){for(let b=0;b<n.resultData.Data.length;b++)n.resultData.Data[b].Id==M.Id&&n.resultData.Data.splice(b,1);i.notify({type:"negative",message:I.Message})}else i.notify({type:"negative",message:I.Message})},{dialogRef:B,onDialogHide:F,onDialogOK:D,onDialogCancel:E}=qe(),W=()=>{n.callback&&(Fo(n.settingInfo),n.callback({settingInfo:n.settingInfo}))},ae=()=>{console.log("beforeShow")};return s({open:U}),(M,I)=>(R(),le(ct,{ref_key:"dialogRef",ref:B,onHide:u,style:{width:"1000px"},onBeforeShow:ae},{default:C(()=>[o(Ge,{style:{display:"flex","flex-direction":"column",height:"60vh",width:"80vw"}},{default:C(()=>[o(Io,{modelValue:c.value,"onUpdate:modelValue":I[0]||(I[0]=b=>c.value=b),class:"bg-purple text-white",style:{},align:"justify","narrow-indicator":""},{default:C(()=>[o(Ct,{name:"filelist",label:"\u6279\u91CF\u64CD\u4F5C"}),o(Ct,{name:"setting",label:"\u8BBE\u7F6E"}),o(Ct,{name:"tasking",label:"\u4EFB\u52A1\u6267\u884C"})]),_:1},8,["modelValue"]),o(qt),o(qo,{modelValue:c.value,"onUpdate:modelValue":I[11]||(I[11]=b=>c.value=b),animated:"",class:"bg-purple-1",style:{height:"100%",overflow:"auto"}},{default:C(()=>[o(xt,{name:"filelist"},{default:C(()=>[K("div",cn,[o(N,{class:"q-mr-sm",color:"amber",size:"sm",glossy:"","text-color":"black",onClick:h},{default:C(()=>[fe(ee(n.selectAll?"\u4E0D\u9009":"\u5168\u9009"),1)]),_:1}),o(N,{class:"q-mr-sm",size:"sm",color:"secondary",icon:"refresh",onClick:S},{default:C(()=>[fe("\u5237\u65B0")]),_:1}),o(ye,{label:"...",modelValue:n.queryParam.Keyword,"onUpdate:modelValue":[I[1]||(I[1]=b=>n.queryParam.Keyword=b),I[2]||(I[2]=b=>q())],dense:!0,filled:"",clearable:""},null,8,["modelValue"])]),K("div",dn,[(R(!0),re(pe,null,Se(n.resultData.Data,b=>Xe((R(),re("div",{key:b.Id,style:{border:"2px dotted purple",padding:"4px","border-radius":"10px","background-color":"burlywood"}},[K("div",fn,[o(Ae,null,{default:C(()=>[n.cutListIds.indexOf(b.Id)>=0?(R(),re("span",vn,"\u526A\u5207\u4E2D\uFF1A\uFF1A")):ge("",!0),fe(ee(b.Title)+"\u3010"+ee(b.SizeStr)+"\u3011 ",1)]),_:2},1024),K("div",mn,[o(Vt,{size:"sm",modelValue:n.selector,"onUpdate:modelValue":I[3]||(I[3]=P=>n.selector=P),val:b.Id,color:"red"},null,8,["modelValue","val"]),o(sl,{class:"q-mr-sm",size:"sm",label:b.MovieType,type:"primary",color:"teal"},{default:C(()=>[o(it,null,{default:C(()=>[(R(!0),re(pe,null,Se(X(vt),P=>Xe((R(),le(Je,{key:P.value,class:"movieTypeSelectItem"},{default:C(()=>[o(Ce,null,{default:C(()=>[o(Ae,{onClick:be=>{b.MovieType=P.value,l(X(vl)(b.Id,P.value))}},{default:C(()=>[fe(ee(P.label),1)]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024)),[[Sl]])),128))]),_:2},1024)]),_:2},1032,["label"]),o(N,{size:"sm",class:"q-mr-sm",color:"amber",glossy:"","text-color":"black",icon:"delete",onClick:P=>x(b)},null,8,["onClick"]),o(N,{size:"sm",class:"q-mr-sm",color:"black-1",onClick:P=>_(b),icon:"near_me"},null,8,["onClick"]),o(N,{class:"q-mr-sm",size:"sm",color:"secondary",icon:"open_in_new",onClick:P=>l(M.OpenFileFolder(b.Id))},null,8,["onClick"]),o(N,{size:"sm",class:"q-mr-sm",color:"black",icon:"ti-pencil-alt2",onClick:P=>b.showCut=!0},null,8,["onClick"]),o(N,{size:"sm",class:"q-mr-sm",color:"green",onClick:P=>w(b)},{default:C(()=>[fe("toMp4")]),_:2},1032,["onClick"]),!b.MovieType||b.MovieType=="\u65E0"?(R(),le(N,{key:0,class:"q-mr-sm",size:"sm",color:"brown-5",icon:"wifi_protected_setup",onClick:P=>l(X(At)(b.Id))},null,8,["onClick"])):ge("",!0)]),b.showCut?(R(),re("div",gn,[fe(" \u5F00\u59CB\uFF1A "),o(ye,{style:{width:"40px"},"model-value":f.sH,"onUpdate:modelValue":I[4]||(I[4]=P=>f.sH=P)},null,8,["model-value"]),o(ye,{style:{width:"40px"},"model-value":f.sM,"onUpdate:modelValue":I[5]||(I[5]=P=>f.sM=P)},null,8,["model-value"]),o(ye,{style:{width:"40px"},"model-value":f.sS,"onUpdate:modelValue":I[6]||(I[6]=P=>f.sS=P)},null,8,["model-value"]),fe(" \u7ED3\u675F\uFF1A "),o(ye,{style:{width:"40px"},"model-value":f.eH,"onUpdate:modelValue":I[7]||(I[7]=P=>f.eH=P)},null,8,["model-value"]),o(ye,{style:{width:"40px"},"model-value":f.eM,"onUpdate:modelValue":I[8]||(I[8]=P=>f.eM=P)},null,8,["model-value"]),o(ye,{style:{width:"40px"},"model-value":f.eS,"onUpdate:modelValue":I[9]||(I[9]=P=>f.eS=P)},null,8,["model-value"]),o(N,{size:"sm",color:"black",type:"primary",onClick:P=>{k(b),b.showCut=!1},label:"\u786E\u8BA4"},null,8,["onClick"]),o(N,{size:"sm",color:"blue",onClick:P=>b.showCut=!1,label:"\u53D6\u6D88"},null,8,["onClick"])])):ge("",!0)])])),[[rl]])),128))])]),_:1}),o(xt,{name:"setting",class:"bg-purple-2"},{default:C(()=>[o(Me,{color:"purple-12",label:"Buttons\uFF08\u6700\u4F735\uFF09","stack-label":""},{prepend:C(()=>[o(We,{name:"event"})]),control:C(()=>[(R(!0),re(pe,null,Se(X(Vo),b=>(R(),le(Vt,{modelValue:n.settingInfo.Buttons,"onUpdate:modelValue":[I[10]||(I[10]=P=>n.settingInfo.Buttons=P),W],key:b,val:b,label:b,color:"teal"},null,8,["modelValue","val","label"]))),128))]),_:1})]),_:1}),o(xt,{name:"tasking"},{default:C(()=>[o(it,{bordered:"",separator:""},{default:C(()=>[(R(!0),re(pe,null,Se(n.tasking,(b,P)=>(R(),le(sn,{key:P},{header:C(()=>[o(Ce,{avatar:""},{default:C(()=>[o(N,{color:"blue",class:"q-mr-sm"},{default:C(()=>[fe(ee(b.Type),1)]),_:2},1024),fe(" "+ee(` \u683C\u5F0F\uFF1A${b.To} `),1)]),_:2},1024),o(Ce,null,{default:C(()=>[K("div",null,ee(b.Name),1),K("div",null,ee(`\u5F00\u59CB\u65F6\u95F4\uFF1A${b.Start} `)+" "+ee(` \u7ED3\u675F\u65F6\u95F4\uFF1A${b.End} `),1),K("div",null,ee(`\u8017\u65F6\uFF1A${(new Date(b.FinishTime).getTime()-new Date(b.CreateTime).getTime())/1e3}`),1)]),_:2},1024),o(Ce,{side:""},{default:C(()=>[o(N,{class:"q-mr-sm",color:b.Status=="\u6210\u529F"?"green":"black"},{default:C(()=>[fe(ee(b.Status),1)]),_:2},1032,["color"])]),_:2},1024)]),default:C(()=>[o(Ge,null,{default:C(()=>[o(yo,null,{default:C(()=>[K("div",yn,ee(b.Log),1)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1},512))}};const bn=e=>(So("data-v-36a8aa62"),e=e(),ho(),e),Sn={class:"q-mg-md top",style:{"margin-bottom":"60px"}},hn={class:"row justify-center q-gutter-sm",ref:"top"},wn={style:{width:"200px","max-height":"50vh"}},kn={class:"q-pa-sm flex flex-center"},Cn={class:"row justify-center q-gutter-sm q-mr-sm q-mt-sm mainlist"},xn={style:{padding:"0",margin:"0","background-color":"rgba(0, 0, 0, 0)",display:"flex",height:"2rem","flex-direction":"row","justify-content":"space-between",width:"100%"}},In=["onClick"],qn={class:"tag-popup"},Vn=bn(()=>K("span",null,"\u79CD\u8349",-1)),_n=["onClick"],Pn=["onClick"],Tn=["onClick"],Mn={style:{display:"flex","flex-direction":"row"}},An={class:"text-subtitles"},zn=["onClick"],On=["onClick"],$n=["onClick"],Fn={__name:"SearchPage",setup(e){const s=G(null),i=G(null),c=G(null),V=G("Hello"),{copy:a}=Po({source:V}),n=pl(),f=$(()=>n.getSuggestions),w=dt(),k=$(()=>l.settingInfo.Buttons),h=T=>{const{settingInfo:g}=T;g&&(l.settingInfo=g)},S=T=>!k.value||k.value.length==0?!0:k.value.indexOf(T)>=0,q=T=>{console.log(w.platform);const g=`/playing/${T.Id}`;window.electron.createWindow({router:g,width:1280,height:1e3})},l=Ye({currentData:{},settingInfo:{},queryParam:{Keyword:"",MovieType:"",OnlyRepeat:!1,Page:1,PageSize:20,PageSize:20,SortField:"MTime",SortType:"desc"},resultData:{},fullscreen:!1}),U=T=>{console.log(T),T.target.select()},u=T=>{w.dialog({title:T.Name,message:"\u786E\u5B9A\u5220\u9664\u5417?",cancel:!0,persistent:!0}).onOk(()=>{console.log(">>>> onOk"),_(zt(T.Id),!0)}).onCancel(()=>{console.log(">>>> Cancel")}).onDismiss(()=>{})},x=async()=>{const T=await yl();l.settingInfo=T.data,n.SettingInfo=T.data},_=async(T,g)=>{const{Code:r,Message:oe}=await T||{};console.log(r,oe),r!=200?w.notify({message:`${oe}`}):g&&I()};Jt(["`"],()=>{I()}),Jt(["Enter"],()=>{W()});const B=async T=>{await a(T),w.notify({message:`${T}`})},F=T=>{l.currentData=T,n.Playing=T,n.drawerRight=!0},D=async T=>{console.log("view.queryParam.Page",T),await W();const g=document.querySelector(".scroll");console.log(g),g&&g.scrollTo(0,0)},E=T=>{l.queryParam.Page=l.queryParam.Page+T,D()},W=async()=>{P();const T=await gl(l.queryParam);l.resultData={},console.log(T),l.resultData=T},ae=async T=>{const g=await ft({...T,NoRefresh:!0,MoveOut:!0});console.log(g),g.Code==200?w.notify({type:"negative",message:g.Message}):w.notify({type:"negative",message:g.Message})},M=G(!1),I=async()=>{M.value=!0;const{Code:T,Message:g}=await ml("/api/refreshIndex");console.log(T,g),T=="200"&&(w.notify({type:"negative",message:g}),await W()),M.value=!1},b=async(T,g)=>{const{Code:r,Message:oe}=await vl(T,g);r==="200"?w.notify({type:"negative",message:oe}):w.notify({type:"warning",message:oe})},P=()=>{n.syncSearchParam(l.queryParam),localStorage.setItem("queryParam",JSON.stringify(l.queryParam))},be=bo();return Mt(async()=>{const{Page:T,PageSize:g,MovieType:r,SortField:oe,SortType:v,Keyword:te,showStyle:ve,from:y}=be.query;if(await x(),te&&(l.queryParam.Keyword=te),T&&g)l.queryParam.Page=Number(T),l.queryParam.PageSize=Number(g),l.queryParam.MovieType=r,l.queryParam.SortField=oe,l.queryParam.SortType=v,l.queryParam.Keyword=te,l.queryParam.showStyle=ve;else if(y=="index"){const d=n.FileSearchParam;d&&(console.log("piniaParam",d),l.queryParam=d)}else{const d=JSON.parse(localStorage.getItem("queryParam"));d&&(console.log("storage",d),l.queryParam=d)}W()}),(T,g)=>(R(),re(pe,null,[K("div",Sn,[o(wt,{style:{"z-index":"9"},position:"left",offset:[0,0]},{default:C(()=>[l.queryParam.Page>1?(R(),le(N,{key:0,round:"",class:"page-sticky",color:"amber","text-color":"black",icon:"keyboard_arrow_left",onClick:g[0]||(g[0]=r=>E(-1))})):ge("",!0)]),_:1}),o(wt,{style:{"z-index":"9"},position:"right",offset:[10,10]},{default:C(()=>[o(N,{round:"",class:"page-sticky",color:"secondary","text-color":"black",icon:"keyboard_arrow_right",onClick:g[1]||(g[1]=r=>E(1))})]),_:1}),K("div",hn,[o(N,{loading:M.value,color:"red",onClick:I},{loading:C(()=>[fe(" \u6267\u884C\u4E2D ")]),default:C(()=>[fe(" \u626B\u63CF\u3010~\u3011 ")]),_:1},8,["loading"]),o(kt,{modelValue:l.queryParam.SortField,"onUpdate:modelValue":[g[2]||(g[2]=r=>l.queryParam.SortField=r),g[3]||(g[3]=r=>W())],"toggle-color":"primary",options:[{label:"\u65F6",value:"MTime"},{label:"\u5BB9",value:"Size"},{label:"\u540D",value:"Code"}]},null,8,["modelValue"]),o(kt,{modelValue:l.queryParam.SortType,"onUpdate:modelValue":[g[4]||(g[4]=r=>l.queryParam.SortType=r),g[5]||(g[5]=r=>W())],"toggle-color":"primary",options:[{label:"\u6B63",value:"asc"},{label:"\u5012",value:"desc"}]},null,8,["modelValue"]),o(kt,{modelValue:l.queryParam.MovieType,"onUpdate:modelValue":[g[6]||(g[6]=r=>l.queryParam.MovieType=r),g[7]||(g[7]=r=>W())],"toggle-color":"primary",options:X(Wo)},null,8,["modelValue","options"]),o(ye,{id:"searchBtn",label:"...",modelValue:l.queryParam.Keyword,"onUpdate:modelValue":[g[8]||(g[8]=r=>l.queryParam.Keyword=r),g[9]||(g[9]=r=>W())],dense:!0,filled:"",clearable:""},{prepend:C(()=>[o(We,{name:"ti-list",class:"cursor-pointer"},{default:C(()=>[o(Gt,null,{default:C(()=>[K("div",wn,[o(it,null,{default:C(()=>[(R(!0),re(pe,null,Se(f.value,r=>Xe((R(),le(Je,{clickable:"",key:r,onClick:oe=>{l.queryParam.Keyword=r,W()}},{default:C(()=>[o(Ce,null,{default:C(()=>[o(Ae,null,{default:C(()=>[fe(ee(r),1)]),_:2},1024)]),_:2},1024)]),_:2},1032,["onClick"])),[[rl]])),128))]),_:1})])]),_:1})]),_:1})]),_:1},8,["modelValue"]),o(Vt,{modelValue:l.queryParam.OnlyRepeat,"onUpdate:modelValue":[g[10]||(g[10]=r=>l.queryParam.OnlyRepeat=r),W],label:"\u91CD"},null,8,["modelValue"]),o(N,{class:"q-mr-sm",size:"sm",color:"primary",icon:"apps",onClick:g[11]||(g[11]=r=>c.value.open({queryParam:l.queryParam,settingInfo:l.settingInfo,cb:h}))})],512),o(wt,{position:"bottom",style:{"z-index":"9","background-color":"rgba(0, 0, 0, 0.3)"}},{default:C(()=>[K("div",kn,[o(Ko,{color:"lime-11 q-mr-md","bg-color":"green",dense:"","onUpdate:modelValue":[g[12]||(g[12]=r=>{l.queryParam.PageSize=Number(r),W()}),g[13]||(g[13]=r=>l.queryParam.PageSize=r)],filled:"",modelValue:l.queryParam.PageSize,options:[10,20,30,50,200]},null,8,["modelValue"]),o(_o,{modelValue:l.queryParam.Page,"onUpdate:modelValue":[g[14]||(g[14]=r=>l.queryParam.Page=r),D],color:"deep-orange",ellipses:!0,max:l.resultData.TotalPage||0,"max-pages":10,"boundary-numbers":""},null,8,["modelValue","max"]),o(ye,{modelValue:l.queryParam.Page,"onUpdate:modelValue":[g[15]||(g[15]=r=>l.queryParam.Page=r),g[17]||(g[17]=r=>{l.queryParam.Page=Number(r),W()})],dense:!0,type:"search",style:{"background-color":"aliceblue",width:"60px","text-align":"center"},onFocus:g[16]||(g[16]=r=>U(r))},null,8,["modelValue"])])]),_:1}),K("div",Cn,[(R(!0),re(pe,null,Se(l.resultData.Data,r=>(R(),le(Ge,{class:"q-ma-sm example-item",key:r.Id},{default:C(()=>{var oe;return[o(_t,{fit:"fit",easier:"",draggable:"",src:X(Co)(r.Id),class:"item-img",onClick:()=>{i.value.open(r,I)}},{default:C(()=>[K("div",xn,[K("div",{onClick:at(()=>{},["stop"]),style:{display:"flex","flex-direction":"column","justify-content":"flex-start",width:"fit-content"}},[o(Tt,{square:"","text-color":"white",style:{"margin-left":"0px",padding:"0 4px","background-color":"rgba(236, 15, 15, 0.872)"}},{default:C(()=>[o(Gt,{"context-menu":""},{default:C(()=>[K("div",qn,[K("div",null,[(R(!0),re(pe,null,Se(r.Tags,v=>(R(),le(N,{size:"sm",icon:"ti-minus",square:"","text-color":"white",color:"green",class:"tag-item",key:v,label:v,onClick:te=>_(X(Oo)(r.Id,v),!0)},null,8,["label","onClick"]))),128))]),K("div",null,[(R(!0),re(pe,null,Se(l.settingInfo.Tags,v=>(R(),le(N,{size:"sm",icon:"ti-plus",square:"","text-color":"white",color:"red",class:"tag-item",key:v,label:v,onClick:te=>_(X($o)(r.Id,v),!0)},null,8,["label","onClick"]))),128))])])]),_:2},1024),Vn]),_:2},1024),(R(!0),re(pe,null,Se(r.Tags,v=>(R(),le(Tt,{square:"","text-color":"white",key:v,style:{"margin-left":"0px",padding:"0 4px","background-color":"rgba(188, 24, 24, 0.6)"}},{default:C(()=>[K("span",{onClick:te=>{l.queryParam.Keyword=v,W()}},ee(v==null?void 0:v.substring(0,4)),9,_n)]),_:2},1024))),128))],8,In),K("div",{class:"row",onClick:at(()=>{},["stop"])},[o(N,{round:"",class:"mr10",size:"sm",ripple:"",color:"orange",icon:"ti-fullscreen",onClick:v=>q(r)},null,8,["onClick"]),o(N,{round:"",size:"sm",ripple:"",color:"orange-4",icon:"ti-blackboard",onClick:v=>F(r)},null,8,["onClick"])],8,Pn),o(sl,{style:{"background-color":"rgba(0, 0, 0, 0.8)",width:"74px"},label:r.MovieType,onClick:at(()=>{},["stop"])},{default:C(()=>[o(it,{style:{"background-color":"rgba(0, 0, 0, 0.7)"}},{default:C(()=>[(R(!0),re(pe,null,Se(X(vt),v=>Xe((R(),le(Je,{key:v.value,class:"movieTypeSelectItem"},{default:C(()=>[o(Ce,null,{default:C(()=>[o(Ae,{onClick:te=>b(r.Id,v.value)},{default:C(()=>[fe(ee(v.label),1)]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024)),[[Sl]])),128))]),_:2},1024)]),_:2},1032,["label","onClick"])]),K("div",{class:"absolute-bottom text-body1 text-center",style:{padding:"4px"},onClick:at(()=>{},["stop"])},[K("div",Mn,[S("\u64AD\u653E")?(R(),le(N,{key:0,round:"",class:"q-mr-sm",size:"sm",color:"primary",icon:"ti-control-eject",onClick:v=>_(X(cl)(r.Id))},null,8,["onClick"])):ge("",!0),S("\u7F16\u8F91")?(R(),le(N,{key:1,round:"",class:"q-mr-sm",size:"sm",color:"primary",icon:"ti-slice",onClick:()=>{s.value.open(r,I)}},null,8,["onClick"])):ge("",!0),S("\u6587\u4EF6\u5939")?(R(),le(N,{key:2,round:"",class:"q-mr-sm",size:"sm",color:"primary",icon:"open_in_new",onClick:v=>_(X(dl)(r.Id))},null,8,["onClick"])):ge("",!0),!r.MovieType||r.MovieType=="\u65E0"?(R(),le(N,{key:3,round:"",class:"q-mr-sm",size:"sm",color:"brown-5",icon:"wifi_protected_setup",onClick:v=>_(X(At)(r.Id),!0)},null,8,["onClick"])):ge("",!0),S("\u522E\u56FE")?(R(),le(N,{key:4,round:"",class:"q-mr-sm",size:"sm",color:"secondary",icon:"ti-import",onClick:v=>_(X(fl)(r.Id))},null,8,["onClick"])):ge("",!0),S("\u5220\u9664")?(R(),le(N,{key:5,round:"",class:"q-mr-sm",size:"sm",color:"amber",glossy:"","text-color":"black",icon:"ti-trash",onClick:v=>u(r)},null,8,["onClick"])):ge("",!0),S("\u79FB\u52A8")?(R(),le(N,{key:6,round:"",class:"q-mr-sm",size:"sm",color:"black",onClick:v=>ae(r),icon:"ti-control-shuffle"},null,8,["onClick"])):ge("",!0)])],8,Tn)]),_:2},1032,["src","onClick"]),K("div",An,[K("a",{flat:"",style:{color:"#59d89d"},class:"mr10",onClick:v=>{l.queryParam.Keyword=r.Actress,W()}},ee((oe=r.Actress)==null?void 0:oe.substring(0,6)),9,zn),K("a",{flat:"",style:{color:"goldenrod"},class:"mr10",onClick:v=>B(r.Code)},ee(X(hl)(r.Code)),9,On),K("a",{flat:"",style:{color:"green"},class:"mr10",onClick:v=>B(r.Title)},ee(r.SizeStr),9,$n),K("span",null,ee(X(ut)(r.Title)),1)])]}),_:2},1024))),128))])]),o(Jo,{ref_key:"fileEditRef",ref:s},null,512),o(an,{ref_key:"fileInfoRef",ref:i},null,512),o(pn,{ref_key:"listEditRef",ref:c},null,512)],64))}};var ea=po(Fn,[["__scopeId","data-v-36a8aa62"]]);export{ea as default};
