import{n as El,r as X,a as $,w as ke,t as Bl,b4 as Ll,v as ll,x as ol,o as rt,H as Ce,h as z,g as Ze,c as st,aQ as Rl,b5 as nl,b6 as Hl,b7 as Nl,b8 as Ql,b9 as Wt,ba as Ke,bb as jl,bc as Kl,aw as ht,V as We,bd as Ul,be as Wl,ax as Re,aD as al,bf as Yl,aA as Ie,a7 as ct,y as Xl,ar as Gl,bg as Jl,bh as Zl,K as eo,j as Mt,d as il,bi as to,aN as lo,bj as oo,O as Ye,R,S as le,T as x,a5 as G,U as o,bk as no,al as ye,ak as ao,a0 as N,a9 as io,an as Xe,aa as j,W as ge,Y as ee,$ as re,a1 as pe,a2 as Se,ac as uo,bl as ro,aB as ul,C as so,u as co,D as fo,s as vo,bm as Yt,F as mo,aY as qt,z as Ge,a3 as go,X as fe,b0 as Vt,ao as yo,am as rl,ai as po,Z as bo,af as at,ad as So,ae as ho}from"./index.79d560a9.js";import{Q as wt}from"./QPageSticky.c04b60a5.js";import{a as _t,c as wo,d as ko,Q as kt,b as xo}from"./index.17a0b805.js";import{Q as Ae,a as it,b as Xt}from"./QPopupProxy.470f3230.js";import{c as Co,a as xe,Q as Je}from"./QMenu.6b8f2fbd.js";import{r as Pt,Q as Me,a as Io,b as xt,c as qo,d as Ct,e as sl,f as Vo}from"./Setting.4c3c4ece.js";import{Q as Tt}from"./QChip.268a288f.js";import{n as Gt}from"./format.a33550d6.js";import{Q as _o}from"./QPagination.4ba34d89.js";import{u as dt}from"./use-quasar.c46293eb.js";import{F as ft,Q as Po,P as cl,a as dl,b as At,c as fl,d as zt,e as vl,T as To,f as Mo,C as Ao,R as ml,S as gl,g as zo,A as Oo}from"./searchAPI.c84948a3.js";import{a as yl,P as $o}from"./settingAPI.be9c4268.js";import{F as Fo,u as pl}from"./System.f4119ada.js";import{u as Do,o as Jt}from"./index.acdca2eb.js";import"./selection.16de1f5e.js";import"./QResizeObserver.9e4d3f72.js";import"./touch.3df10340.js";import"./axios.a5ed1f91.js";const he=1e3,Eo=["start","center","end","start-force","center-force","end-force"],bl=Array.prototype.filter,Bo=window.getComputedStyle(document.body).overflowAnchor===void 0?El:function(e,s){e!==null&&(e._qOverflowAnimationFrame!==void 0&&cancelAnimationFrame(e._qOverflowAnimationFrame),e._qOverflowAnimationFrame=requestAnimationFrame(()=>{if(e===null)return;e._qOverflowAnimationFrame=void 0;const i=e.children||[];bl.call(i,V=>V.dataset&&V.dataset.qVsAnchor!==void 0).forEach(V=>{delete V.dataset.qVsAnchor});const c=i[s];c&&c.dataset&&(c.dataset.qVsAnchor="")}))};function He(e,s){return e+s}function It(e,s,i,c,V,a,n,f){const k=e===window?document.scrollingElement||document.documentElement:e,w=V===!0?"offsetWidth":"offsetHeight",h={scrollStart:0,scrollViewSize:-n-f,scrollMaxSize:0,offsetStart:-n,offsetEnd:-f};if(V===!0?(e===window?(h.scrollStart=window.pageXOffset||window.scrollX||document.body.scrollLeft||0,h.scrollViewSize+=document.documentElement.clientWidth):(h.scrollStart=k.scrollLeft,h.scrollViewSize+=k.clientWidth),h.scrollMaxSize=k.scrollWidth,a===!0&&(h.scrollStart=(Pt===!0?h.scrollMaxSize-h.scrollViewSize:0)-h.scrollStart)):(e===window?(h.scrollStart=window.pageYOffset||window.scrollY||document.body.scrollTop||0,h.scrollViewSize+=document.documentElement.clientHeight):(h.scrollStart=k.scrollTop,h.scrollViewSize+=k.clientHeight),h.scrollMaxSize=k.scrollHeight),i!==null)for(let S=i.previousElementSibling;S!==null;S=S.previousElementSibling)S.classList.contains("q-virtual-scroll--skip")===!1&&(h.offsetStart+=S[w]);if(c!==null)for(let S=c.nextElementSibling;S!==null;S=S.nextElementSibling)S.classList.contains("q-virtual-scroll--skip")===!1&&(h.offsetEnd+=S[w]);if(s!==e){const S=k.getBoundingClientRect(),q=s.getBoundingClientRect();V===!0?(h.offsetStart+=q.left-S.left,h.offsetEnd-=q.width):(h.offsetStart+=q.top-S.top,h.offsetEnd-=q.height),e!==window&&(h.offsetStart+=h.scrollStart),h.offsetEnd+=h.scrollMaxSize-h.offsetStart}return h}function Zt(e,s,i,c){s==="end"&&(s=(e===window?document.body:e)[i===!0?"scrollWidth":"scrollHeight"]),e===window?i===!0?(c===!0&&(s=(Pt===!0?document.body.scrollWidth-document.documentElement.clientWidth:0)-s),window.scrollTo(s,window.pageYOffset||window.scrollY||document.body.scrollTop||0)):window.scrollTo(window.pageXOffset||window.scrollX||document.body.scrollLeft||0,s):i===!0?(c===!0&&(s=(Pt===!0?e.scrollWidth-e.offsetWidth:0)-s),e.scrollLeft=s):e.scrollTop=s}function Ue(e,s,i,c){if(i>=c)return 0;const V=s.length,a=Math.floor(i/he),n=Math.floor((c-1)/he)+1;let f=e.slice(a,n).reduce(He,0);return i%he!==0&&(f-=s.slice(a*he,i).reduce(He,0)),c%he!==0&&c!==V&&(f-=s.slice(c,n*he).reduce(He,0)),f}const Lo={virtualScrollSliceSize:{type:[Number,String],default:null},virtualScrollSliceRatioBefore:{type:[Number,String],default:1},virtualScrollSliceRatioAfter:{type:[Number,String],default:1},virtualScrollItemSize:{type:[Number,String],default:24},virtualScrollStickySizeStart:{type:[Number,String],default:0},virtualScrollStickySizeEnd:{type:[Number,String],default:0},tableColspan:[Number,String]},Ro={virtualScrollHorizontal:Boolean,onVirtualScroll:Function,...Lo};function Ho({virtualScrollLength:e,getVirtualScrollTarget:s,getVirtualScrollEl:i,virtualScrollItemSizeComputed:c}){const V=Ze(),{props:a,emit:n,proxy:f}=V,{$q:k}=f;let w,h,S,q=[],l;const K=X(0),u=X(0),C=X({}),_=X(null),B=X(null),F=X(null),D=X({from:0,to:0}),E=$(()=>a.tableColspan!==void 0?a.tableColspan:100);c===void 0&&(c=$(()=>a.virtualScrollItemSize));const W=$(()=>c.value+";"+a.virtualScrollHorizontal),ae=$(()=>W.value+";"+a.virtualScrollSliceRatioBefore+";"+a.virtualScrollSliceRatioAfter);ke(ae,()=>{oe()}),ke(W,M);function M(){r(h,!0)}function I(d){r(d===void 0?h:d)}function p(d,A){const L=s();if(L==null||L.nodeType===8)return;const Z=It(L,i(),_.value,B.value,a.virtualScrollHorizontal,k.lang.rtl,a.virtualScrollStickySizeStart,a.virtualScrollStickySizeEnd);S!==Z.scrollViewSize&&oe(Z.scrollViewSize),be(L,Z,Math.min(e.value-1,Math.max(0,parseInt(d,10)||0)),0,Eo.indexOf(A)>-1?A:h>-1&&d>h?"end":"start")}function P(){const d=s();if(d==null||d.nodeType===8)return;const A=It(d,i(),_.value,B.value,a.virtualScrollHorizontal,k.lang.rtl,a.virtualScrollStickySizeStart,a.virtualScrollStickySizeEnd),L=e.value-1,Z=A.scrollMaxSize-A.offsetStart-A.offsetEnd-u.value;if(w===A.scrollStart)return;if(A.scrollMaxSize<=0){be(d,A,0,0);return}S!==A.scrollViewSize&&oe(A.scrollViewSize),T(D.value.from);const ie=Math.floor(A.scrollMaxSize-Math.max(A.scrollViewSize,A.offsetEnd)-Math.min(l[L],A.scrollViewSize/2));if(ie>0&&Math.ceil(A.scrollStart)>=ie){be(d,A,L,A.scrollMaxSize-A.offsetEnd-q.reduce(He,0));return}let U=0,H=A.scrollStart-A.offsetStart,ue=H;if(H<=Z&&H+A.scrollViewSize>=K.value)H-=K.value,U=D.value.from,ue=H;else for(let Q=0;H>=q[Q]&&U<L;Q++)H-=q[Q],U+=he;for(;H>0&&U<L;)H-=l[U],H>-A.scrollViewSize?(U++,ue=H):ue=l[U]+H;be(d,A,U,ue)}function be(d,A,L,Z,ie){const U=typeof ie=="string"&&ie.indexOf("-force")>-1,H=U===!0?ie.replace("-force",""):ie,ue=H!==void 0?H:"start";let Q=Math.max(0,L-C.value[ue]),ce=Q+C.value.total;ce>e.value&&(ce=e.value,Q=Math.max(0,ce-C.value.total)),w=A.scrollStart;const ze=Q!==D.value.from||ce!==D.value.to;if(ze===!1&&H===void 0){te(L);return}const{activeElement:Ne}=document,we=F.value;ze===!0&&we!==null&&we!==Ne&&we.contains(Ne)===!0&&(we.addEventListener("focusout",b),setTimeout(()=>{we!==null&&we.removeEventListener("focusout",b)})),Bo(we,L-Q);const et=H!==void 0?l.slice(Q,L).reduce(He,0):0;if(ze===!0){const Ve=ce>=D.value.from&&Q<=D.value.to?D.value.to:ce;D.value={from:Q,to:Ve},K.value=Ue(q,l,0,Q),u.value=Ue(q,l,ce,e.value),requestAnimationFrame(()=>{D.value.to!==ce&&w===A.scrollStart&&(D.value={from:D.value.from,to:ce},u.value=Ue(q,l,ce,e.value))})}requestAnimationFrame(()=>{if(w!==A.scrollStart)return;ze===!0&&T(Q);const Ve=l.slice(Q,L).reduce(He,0),Oe=Ve+A.offsetStart+K.value,tt=Oe+l[L];let Qe=Oe+Z;if(H!==void 0){const mt=Ve-et,de=A.scrollStart+mt;Qe=U!==!0&&de<Oe&&tt<de+A.scrollViewSize?de:H==="end"?tt-A.scrollViewSize:Oe-(H==="start"?0:Math.round((A.scrollViewSize-l[L])/2))}w=Qe,Zt(d,Qe,a.virtualScrollHorizontal,k.lang.rtl),te(L)})}function T(d){const A=F.value;if(A){const L=bl.call(A.children,Q=>Q.classList&&Q.classList.contains("q-virtual-scroll--skip")===!1),Z=L.length,ie=a.virtualScrollHorizontal===!0?Q=>Q.getBoundingClientRect().width:Q=>Q.offsetHeight;let U=d,H,ue;for(let Q=0;Q<Z;){for(H=ie(L[Q]),Q++;Q<Z&&L[Q].classList.contains("q-virtual-scroll--with-prev")===!0;)H+=ie(L[Q]),Q++;ue=H-l[U],ue!==0&&(l[U]+=ue,q[Math.floor(U/he)]+=ue),U++}}}function b(){F.value!==null&&F.value!==void 0&&F.value.focus()}function r(d,A){const L=1*c.value;(A===!0||Array.isArray(l)===!1)&&(l=[]);const Z=l.length;l.length=e.value;for(let U=e.value-1;U>=Z;U--)l[U]=L;const ie=Math.floor((e.value-1)/he);q=[];for(let U=0;U<=ie;U++){let H=0;const ue=Math.min((U+1)*he,e.value);for(let Q=U*he;Q<ue;Q++)H+=l[Q];q.push(H)}h=-1,w=void 0,K.value=Ue(q,l,0,D.value.from),u.value=Ue(q,l,D.value.to,e.value),d>=0?(T(D.value.from),Ce(()=>{p(d)})):ve()}function oe(d){if(d===void 0&&typeof window!="undefined"){const H=s();H!=null&&H.nodeType!==8&&(d=It(H,i(),_.value,B.value,a.virtualScrollHorizontal,k.lang.rtl,a.virtualScrollStickySizeStart,a.virtualScrollStickySizeEnd).scrollViewSize)}S=d;const A=parseFloat(a.virtualScrollSliceRatioBefore)||0,L=parseFloat(a.virtualScrollSliceRatioAfter)||0,Z=1+A+L,ie=d===void 0||d<=0?1:Math.ceil(d/c.value),U=Math.max(1,ie,Math.ceil((a.virtualScrollSliceSize>0?a.virtualScrollSliceSize:10)/Z));C.value={total:Math.ceil(U*Z),start:Math.ceil(U*A),center:Math.ceil(U*(.5+A)),end:Math.ceil(U*(1+A)),view:ie}}function m(d,A){const L=a.virtualScrollHorizontal===!0?"width":"height",Z={["--q-virtual-scroll-item-"+L]:c.value+"px"};return[d==="tbody"?z(d,{class:"q-virtual-scroll__padding",key:"before",ref:_},[z("tr",[z("td",{style:{[L]:`${K.value}px`,...Z},colspan:E.value})])]):z(d,{class:"q-virtual-scroll__padding",key:"before",ref:_,style:{[L]:`${K.value}px`,...Z}}),z(d,{class:"q-virtual-scroll__content",key:"content",ref:F,tabindex:-1},A.flat()),d==="tbody"?z(d,{class:"q-virtual-scroll__padding",key:"after",ref:B},[z("tr",[z("td",{style:{[L]:`${u.value}px`,...Z},colspan:E.value})])]):z(d,{class:"q-virtual-scroll__padding",key:"after",ref:B,style:{[L]:`${u.value}px`,...Z}})]}function te(d){h!==d&&(a.onVirtualScroll!==void 0&&n("virtualScroll",{index:d,from:D.value.from,to:D.value.to-1,direction:d<h?"decrease":"increase",ref:f}),h=d)}oe();const ve=Bl(P,k.platform.is.ios===!0?120:35);Ll(()=>{oe()});let g=!1;return ll(()=>{g=!0}),ol(()=>{if(g!==!0)return;const d=s();w!==void 0&&d!==void 0&&d!==null&&d.nodeType!==8?Zt(d,w,a.virtualScrollHorizontal,k.lang.rtl):p(h)}),rt(()=>{ve.cancel()}),Object.assign(f,{scrollTo:p,reset:M,refresh:I}),{virtualScrollSliceRange:D,virtualScrollSliceSizeComputed:C,setVirtualScrollSize:oe,onVirtualScrollEvt:ve,localResetVirtualScroll:r,padVirtualScroll:m,scrollTo:p,reset:M,refresh:I}}const el=e=>["add","add-unique","toggle"].includes(e),No=".*+?^${}()|[]\\",Qo=Object.keys(nl);var jo=st({name:"QSelect",inheritAttrs:!1,props:{...Ro,...Rl,...nl,modelValue:{required:!0},multiple:Boolean,displayValue:[String,Number],displayValueHtml:Boolean,dropdownIcon:String,options:{type:Array,default:()=>[]},optionValue:[Function,String],optionLabel:[Function,String],optionDisable:[Function,String],hideSelected:Boolean,hideDropdownIcon:Boolean,fillInput:Boolean,maxValues:[Number,String],optionsDense:Boolean,optionsDark:{type:Boolean,default:null},optionsSelectedClass:String,optionsHtml:Boolean,optionsCover:Boolean,menuShrink:Boolean,menuAnchor:String,menuSelf:String,menuOffset:Array,popupContentClass:String,popupContentStyle:[String,Array,Object],useInput:Boolean,useChips:Boolean,newValueMode:{type:String,validator:el},mapOptions:Boolean,emitValue:Boolean,inputDebounce:{type:[Number,String],default:500},inputClass:[Array,String,Object],inputStyle:[Array,String,Object],tabindex:{type:[String,Number],default:0},autocomplete:String,transitionShow:String,transitionHide:String,transitionDuration:[String,Number],behavior:{type:String,validator:e=>["default","menu","dialog"].includes(e),default:"default"},virtualScrollItemSize:{type:[Number,String],default:void 0},onNewValue:Function,onFilter:Function},emits:[...Hl,"add","remove","inputValue","newValue","keyup","keypress","keydown","filterAbort"],setup(e,{slots:s,emit:i}){const{proxy:c}=Ze(),{$q:V}=c,a=X(!1),n=X(!1),f=X(-1),k=X(""),w=X(!1),h=X(!1);let S=null,q,l,K,u=null,C,_,B,F;const D=X(null),E=X(null),W=X(null),ae=X(null),M=X(null),I=Nl(e),p=Wl(Nt),P=$(()=>Array.isArray(e.options)?e.options.length:0),be=$(()=>e.virtualScrollItemSize===void 0?e.optionsDense===!0?24:48:e.virtualScrollItemSize),{virtualScrollSliceRange:T,virtualScrollSliceSizeComputed:b,localResetVirtualScroll:r,padVirtualScroll:oe,onVirtualScrollEvt:m,scrollTo:te,setVirtualScrollSize:ve}=Ho({virtualScrollLength:P,getVirtualScrollTarget:Il,getVirtualScrollEl:Rt,virtualScrollItemSizeComputed:be}),g=Ql(),d=$(()=>{const t=e.mapOptions===!0&&e.multiple!==!0,y=e.modelValue!==void 0&&(e.modelValue!==null||t===!0)?e.multiple===!0&&Array.isArray(e.modelValue)?e.modelValue:[e.modelValue]:[];if(e.mapOptions===!0&&Array.isArray(e.options)===!0){const v=e.mapOptions===!0&&q!==void 0?q:[],O=y.map(J=>Cl(J,v));return e.modelValue===null&&t===!0?O.filter(J=>J!==null):O}return y}),A=$(()=>{const t={};return Qo.forEach(y=>{const v=e[y];v!==void 0&&(t[y]=v)}),t}),L=$(()=>e.optionsDark===null?g.isDark.value:e.optionsDark),Z=$(()=>Wt(d.value)),ie=$(()=>{let t="q-field__input q-placeholder col";return e.hideSelected===!0||d.value.length===0?[t,e.inputClass]:(t+=" q-field__input--padding",e.inputClass===void 0?t:[t,e.inputClass])}),U=$(()=>(e.virtualScrollHorizontal===!0?"q-virtual-scroll--horizontal":"")+(e.popupContentClass?" "+e.popupContentClass:"")),H=$(()=>P.value===0),ue=$(()=>d.value.map(t=>me.value(t)).join(", ")),Q=$(()=>e.displayValue!==void 0?e.displayValue:ue.value),ce=$(()=>e.optionsHtml===!0?()=>!0:t=>t!=null&&t.html===!0),ze=$(()=>e.displayValueHtml===!0||e.displayValue===void 0&&(e.optionsHtml===!0||d.value.some(ce.value))),Ne=$(()=>g.focused.value===!0?e.tabindex:-1),we=$(()=>{const t={tabindex:e.tabindex,role:"combobox","aria-label":e.label,"aria-readonly":e.readonly===!0?"true":"false","aria-autocomplete":e.useInput===!0?"list":"none","aria-expanded":a.value===!0?"true":"false","aria-controls":`${g.targetUid.value}_lb`};return f.value>=0&&(t["aria-activedescendant"]=`${g.targetUid.value}_${f.value}`),t}),et=$(()=>({id:`${g.targetUid.value}_lb`,role:"listbox","aria-multiselectable":e.multiple===!0?"true":"false"})),Ve=$(()=>d.value.map((t,y)=>({index:y,opt:t,html:ce.value(t),selected:!0,removeAtIndex:xl,toggleOption:_e,tabindex:Ne.value}))),Oe=$(()=>{if(P.value===0)return[];const{from:t,to:y}=T.value;return e.options.slice(t,y).map((v,O)=>{const J=$e.value(v)===!0,Y=t+O,ne={clickable:!0,active:!1,activeClass:mt.value,manualFocus:!0,focused:!1,disable:J,tabindex:-1,dense:e.optionsDense,dark:L.value,role:"option",id:`${g.targetUid.value}_${Y}`,onClick:()=>{_e(v)}};return J!==!0&&(pt(v)===!0&&(ne.active=!0),f.value===Y&&(ne.focused=!0),ne["aria-selected"]=ne.active===!0?"true":"false",V.platform.is.desktop===!0&&(ne.onMousemove=()=>{a.value===!0&&Fe(Y)})),{index:Y,opt:v,html:ce.value(v),label:me.value(v),selected:ne.active,focused:ne.focused,toggleOption:_e,setOptionIndex:Fe,itemProps:ne}})}),tt=$(()=>e.dropdownIcon!==void 0?e.dropdownIcon:V.iconSet.arrow.dropdown),Qe=$(()=>e.optionsCover===!1&&e.outlined!==!0&&e.standout!==!0&&e.borderless!==!0&&e.rounded!==!0),mt=$(()=>e.optionsSelectedClass!==void 0?e.optionsSelectedClass:e.color!==void 0?`text-${e.color}`:""),de=$(()=>yt(e.optionValue,"value")),me=$(()=>yt(e.optionLabel,"label")),$e=$(()=>yt(e.optionDisable,"disable")),lt=$(()=>d.value.map(t=>de.value(t))),kl=$(()=>{const t={onInput:Nt,onChange:p,onKeydown:Lt,onKeyup:Et,onKeypress:Bt,onFocus:Ft,onClick(y){l===!0&&Re(y)}};return t.onCompositionstart=t.onCompositionupdate=t.onCompositionend=p,t});ke(d,t=>{q=t,e.useInput===!0&&e.fillInput===!0&&e.multiple!==!0&&g.innerLoading.value!==!0&&(n.value!==!0&&a.value!==!0||Z.value!==!0)&&(K!==!0&&Le(),(n.value===!0||a.value===!0)&&De(""))},{immediate:!0}),ke(()=>e.fillInput,Le),ke(a,bt),ke(P,Dl);function Ot(t){return e.emitValue===!0?de.value(t):t}function gt(t){if(t>-1&&t<d.value.length)if(e.multiple===!0){const y=e.modelValue.slice();i("remove",{index:t,value:y.splice(t,1)[0]}),i("update:modelValue",y)}else i("update:modelValue",null)}function xl(t){gt(t),g.focus()}function $t(t,y){const v=Ot(t);if(e.multiple!==!0){e.fillInput===!0&&je(me.value(t),!0,!0),i("update:modelValue",v);return}if(d.value.length===0){i("add",{index:0,value:v}),i("update:modelValue",e.multiple===!0?[v]:v);return}if(y===!0&&pt(t)===!0||e.maxValues!==void 0&&e.modelValue.length>=e.maxValues)return;const O=e.modelValue.slice();i("add",{index:O.length,value:v}),O.push(v),i("update:modelValue",O)}function _e(t,y){if(g.editable.value!==!0||t===void 0||$e.value(t)===!0)return;const v=de.value(t);if(e.multiple!==!0){y!==!0&&(je(e.fillInput===!0?me.value(t):"",!0,!0),Pe()),E.value!==null&&E.value.focus(),(d.value.length===0||Ke(de.value(d.value[0]),v)!==!0)&&i("update:modelValue",e.emitValue===!0?v:t);return}if((l!==!0||w.value===!0)&&g.focus(),Ft(),d.value.length===0){const Y=e.emitValue===!0?v:t;i("add",{index:0,value:Y}),i("update:modelValue",e.multiple===!0?[Y]:Y);return}const O=e.modelValue.slice(),J=lt.value.findIndex(Y=>Ke(Y,v));if(J>-1)i("remove",{index:J,value:O.splice(J,1)[0]});else{if(e.maxValues!==void 0&&O.length>=e.maxValues)return;const Y=e.emitValue===!0?v:t;i("add",{index:O.length,value:Y}),O.push(Y)}i("update:modelValue",O)}function Fe(t){if(V.platform.is.desktop!==!0)return;const y=t>-1&&t<P.value?t:-1;f.value!==y&&(f.value=y)}function ot(t=1,y){if(a.value===!0){let v=f.value;do v=Gt(v+t,-1,P.value-1);while(v!==-1&&v!==f.value&&$e.value(e.options[v])===!0);f.value!==v&&(Fe(v),te(v),y!==!0&&e.useInput===!0&&e.fillInput===!0&&nt(v>=0?me.value(e.options[v]):C))}}function Cl(t,y){const v=O=>Ke(de.value(O),t);return e.options.find(v)||y.find(v)||t}function yt(t,y){const v=t!==void 0?t:y;return typeof v=="function"?v:O=>O!==null&&typeof O=="object"&&v in O?O[v]:O}function pt(t){const y=de.value(t);return lt.value.find(v=>Ke(v,y))!==void 0}function Ft(t){e.useInput===!0&&E.value!==null&&(t===void 0||E.value===t.target&&t.target.value===ue.value)&&E.value.select()}function Dt(t){al(t,27)===!0&&a.value===!0&&(Re(t),Pe(),Le()),i("keyup",t)}function Et(t){const{value:y}=t.target;if(t.keyCode!==void 0){Dt(t);return}if(t.target.value="",S!==null&&(clearTimeout(S),S=null),Le(),typeof y=="string"&&y.length!==0){const v=y.toLocaleLowerCase(),O=Y=>{const ne=e.options.find(se=>Y.value(se).toLocaleLowerCase()===v);return ne===void 0?!1:(d.value.indexOf(ne)===-1?_e(ne):Pe(),!0)},J=Y=>{O(de)!==!0&&(O(me)===!0||Y===!0||De(y,!0,()=>J(!0)))};J()}else g.clearValue(t)}function Bt(t){i("keypress",t)}function Lt(t){if(i("keydown",t),Yl(t)===!0)return;const y=k.value.length!==0&&(e.newValueMode!==void 0||e.onNewValue!==void 0),v=t.shiftKey!==!0&&e.multiple!==!0&&(f.value>-1||y===!0);if(t.keyCode===27){ht(t);return}if(t.keyCode===9&&v===!1){Ee();return}if(t.target===void 0||t.target.id!==g.targetUid.value||g.editable.value!==!0)return;if(t.keyCode===40&&g.innerLoading.value!==!0&&a.value===!1){Ie(t),Be();return}if(t.keyCode===8&&e.hideSelected!==!0&&k.value.length===0){e.multiple===!0&&Array.isArray(e.modelValue)===!0?gt(e.modelValue.length-1):e.multiple!==!0&&e.modelValue!==null&&i("update:modelValue",null);return}(t.keyCode===35||t.keyCode===36)&&(typeof k.value!="string"||k.value.length===0)&&(Ie(t),f.value=-1,ot(t.keyCode===36?1:-1,e.multiple)),(t.keyCode===33||t.keyCode===34)&&b.value!==void 0&&(Ie(t),f.value=Math.max(-1,Math.min(P.value,f.value+(t.keyCode===33?-1:1)*b.value.view)),ot(t.keyCode===33?1:-1,e.multiple)),(t.keyCode===38||t.keyCode===40)&&(Ie(t),ot(t.keyCode===38?-1:1,e.multiple));const O=P.value;if((B===void 0||F<Date.now())&&(B=""),O>0&&e.useInput!==!0&&t.key!==void 0&&t.key.length===1&&t.altKey===!1&&t.ctrlKey===!1&&t.metaKey===!1&&(t.keyCode!==32||B.length!==0)){a.value!==!0&&Be(t);const J=t.key.toLocaleLowerCase(),Y=B.length===1&&B[0]===J;F=Date.now()+1500,Y===!1&&(Ie(t),B+=J);const ne=new RegExp("^"+B.split("").map(St=>No.indexOf(St)>-1?"\\"+St:St).join(".*"),"i");let se=f.value;if(Y===!0||se<0||ne.test(me.value(e.options[se]))!==!0)do se=Gt(se+1,-1,O-1);while(se!==f.value&&($e.value(e.options[se])===!0||ne.test(me.value(e.options[se]))!==!0));f.value!==se&&Ce(()=>{Fe(se),te(se),se>=0&&e.useInput===!0&&e.fillInput===!0&&nt(me.value(e.options[se]))});return}if(!(t.keyCode!==13&&(t.keyCode!==32||e.useInput===!0||B!=="")&&(t.keyCode!==9||v===!1))){if(t.keyCode!==9&&Ie(t),f.value>-1&&f.value<O){_e(e.options[f.value]);return}if(y===!0){const J=(Y,ne)=>{if(ne){if(el(ne)!==!0)return}else ne=e.newValueMode;if(je("",e.multiple!==!0,!0),Y==null)return;(ne==="toggle"?_e:$t)(Y,ne==="add-unique"),e.multiple!==!0&&(E.value!==null&&E.value.focus(),Pe())};if(e.onNewValue!==void 0?i("newValue",k.value,J):J(k.value),e.multiple!==!0)return}a.value===!0?Ee():g.innerLoading.value!==!0&&Be()}}function Rt(){return l===!0?M.value:W.value!==null&&W.value.contentEl!==null?W.value.contentEl:void 0}function Il(){return Rt()}function ql(){return e.hideSelected===!0?[]:s["selected-item"]!==void 0?Ve.value.map(t=>s["selected-item"](t)).slice():s.selected!==void 0?[].concat(s.selected()):e.useChips===!0?Ve.value.map((t,y)=>z(Tt,{key:"option-"+y,removable:g.editable.value===!0&&$e.value(t.opt)!==!0,dense:!0,textColor:e.color,tabindex:Ne.value,onRemove(){t.removeAtIndex(y)}},()=>z("span",{class:"ellipsis",[t.html===!0?"innerHTML":"textContent"]:me.value(t.opt)}))):[z("span",{[ze.value===!0?"innerHTML":"textContent"]:Q.value})]}function Ht(){if(H.value===!0)return s["no-option"]!==void 0?s["no-option"]({inputValue:k.value}):void 0;const t=s.option!==void 0?s.option:v=>z(Je,{key:v.index,...v.itemProps},()=>z(xe,()=>z(Ae,()=>z("span",{[v.html===!0?"innerHTML":"textContent"]:v.label}))));let y=oe("div",Oe.value.map(t));return s["before-options"]!==void 0&&(y=s["before-options"]().concat(y)),Xl(s["after-options"],y)}function Vl(t,y){const v=y===!0?{...we.value,...g.splitAttrs.attributes.value}:void 0,O={ref:y===!0?E:void 0,key:"i_t",class:ie.value,style:e.inputStyle,value:k.value!==void 0?k.value:"",type:"search",...v,id:y===!0?g.targetUid.value:void 0,maxlength:e.maxlength,autocomplete:e.autocomplete,"data-autofocus":t===!0||e.autofocus===!0||void 0,disabled:e.disable===!0,readonly:e.readonly===!0,...kl.value};return t!==!0&&l===!0&&(Array.isArray(O.class)===!0?O.class=[...O.class,"no-pointer-events"]:O.class+=" no-pointer-events"),z("input",O)}function Nt(t){S!==null&&(clearTimeout(S),S=null),!(t&&t.target&&t.target.qComposing===!0)&&(nt(t.target.value||""),K=!0,C=k.value,g.focused.value!==!0&&(l!==!0||w.value===!0)&&g.focus(),e.onFilter!==void 0&&(S=setTimeout(()=>{S=null,De(k.value)},e.inputDebounce)))}function nt(t){k.value!==t&&(k.value=t,i("inputValue",t))}function je(t,y,v){K=v!==!0,e.useInput===!0&&(nt(t),(y===!0||v!==!0)&&(C=t),y!==!0&&De(t))}function De(t,y,v){if(e.onFilter===void 0||y!==!0&&g.focused.value!==!0)return;g.innerLoading.value===!0?i("filterAbort"):(g.innerLoading.value=!0,h.value=!0),t!==""&&e.multiple!==!0&&d.value.length!==0&&K!==!0&&t===me.value(d.value[0])&&(t="");const O=setTimeout(()=>{a.value===!0&&(a.value=!1)},10);u!==null&&clearTimeout(u),u=O,i("filter",t,(J,Y)=>{(y===!0||g.focused.value===!0)&&u===O&&(clearTimeout(u),typeof J=="function"&&J(),h.value=!1,Ce(()=>{g.innerLoading.value=!1,g.editable.value===!0&&(y===!0?a.value===!0&&Pe():a.value===!0?bt(!0):a.value=!0),typeof Y=="function"&&Ce(()=>{Y(c)}),typeof v=="function"&&Ce(()=>{v(c)})}))},()=>{g.focused.value===!0&&u===O&&(clearTimeout(u),g.innerLoading.value=!1,h.value=!1),a.value===!0&&(a.value=!1)})}function _l(){return z(Co,{ref:W,class:U.value,style:e.popupContentStyle,modelValue:a.value,fit:e.menuShrink!==!0,cover:e.optionsCover===!0&&H.value!==!0&&e.useInput!==!0,anchor:e.menuAnchor,self:e.menuSelf,offset:e.menuOffset,dark:L.value,noParentEvent:!0,noRefocus:!0,noFocus:!0,square:Qe.value,transitionShow:e.transitionShow,transitionHide:e.transitionHide,transitionDuration:e.transitionDuration,separateClosePopup:!0,...et.value,onScrollPassive:m,onBeforeShow:jt,onBeforeHide:Pl,onShow:Tl},Ht)}function Pl(t){Kt(t),Ee()}function Tl(){ve()}function Ml(t){Re(t),E.value!==null&&E.value.focus(),w.value=!0,window.scrollTo(window.pageXOffset||window.scrollX||document.body.scrollLeft||0,0)}function Al(t){Re(t),Ce(()=>{w.value=!1})}function zl(){const t=[z(Me,{class:`col-auto ${g.fieldClass.value}`,...A.value,for:g.targetUid.value,dark:L.value,square:!0,loading:h.value,itemAligned:!1,filled:!0,stackLabel:k.value.length!==0,...g.splitAttrs.listeners.value,onFocus:Ml,onBlur:Al},{...s,rawControl:()=>g.getControl(!0),before:void 0,after:void 0})];return a.value===!0&&t.push(z("div",{ref:M,class:U.value+" scroll",style:e.popupContentStyle,...et.value,onClick:ht,onScrollPassive:m},Ht())),z(ct,{ref:ae,modelValue:n.value,position:e.useInput===!0?"top":void 0,transitionShow:_,transitionHide:e.transitionHide,transitionDuration:e.transitionDuration,onBeforeShow:jt,onBeforeHide:Ol,onHide:$l,onShow:Fl},()=>z("div",{class:"q-select__dialog"+(L.value===!0?" q-select__dialog--dark q-dark":"")+(w.value===!0?" q-select__dialog--focused":"")},t))}function Ol(t){Kt(t),ae.value!==null&&ae.value.__updateRefocusTarget(g.rootRef.value.querySelector(".q-field__native > [tabindex]:last-child")),g.focused.value=!1}function $l(t){Pe(),g.focused.value===!1&&i("blur",t),Le()}function Fl(){const t=document.activeElement;(t===null||t.id!==g.targetUid.value)&&E.value!==null&&E.value!==t&&E.value.focus(),ve()}function Ee(){n.value!==!0&&(f.value=-1,a.value===!0&&(a.value=!1),g.focused.value===!1&&(u!==null&&(clearTimeout(u),u=null),g.innerLoading.value===!0&&(i("filterAbort"),g.innerLoading.value=!1,h.value=!1)))}function Be(t){g.editable.value===!0&&(l===!0?(g.onControlFocusin(t),n.value=!0,Ce(()=>{g.focus()})):g.focus(),e.onFilter!==void 0?De(k.value):(H.value!==!0||s["no-option"]!==void 0)&&(a.value=!0))}function Pe(){n.value=!1,Ee()}function Le(){e.useInput===!0&&je(e.multiple!==!0&&e.fillInput===!0&&d.value.length!==0&&me.value(d.value[0])||"",!0,!0)}function bt(t){let y=-1;if(t===!0){if(d.value.length!==0){const v=de.value(d.value[0]);y=e.options.findIndex(O=>Ke(de.value(O),v))}r(y)}Fe(y)}function Dl(t,y){a.value===!0&&g.innerLoading.value===!1&&(r(-1,!0),Ce(()=>{a.value===!0&&g.innerLoading.value===!1&&(t>y?r():bt(!0))}))}function Qt(){n.value===!1&&W.value!==null&&W.value.updatePosition()}function jt(t){t!==void 0&&Re(t),i("popupShow",t),g.hasPopupOpen=!0,g.onControlFocusin(t)}function Kt(t){t!==void 0&&Re(t),i("popupHide",t),g.hasPopupOpen=!1,g.onControlFocusout(t)}function Ut(){l=V.platform.is.mobile!==!0&&e.behavior!=="dialog"?!1:e.behavior!=="menu"&&(e.useInput===!0?s["no-option"]!==void 0||e.onFilter!==void 0||H.value===!1:!0),_=V.platform.is.ios===!0&&l===!0&&e.useInput===!0?"fade":e.transitionShow}return jl(Ut),Kl(Qt),Ut(),rt(()=>{S!==null&&clearTimeout(S)}),Object.assign(c,{showPopup:Be,hidePopup:Pe,removeAtIndex:gt,add:$t,toggleOption:_e,getOptionIndex:()=>f.value,setOptionIndex:Fe,moveOptionSelection:ot,filter:De,updateMenuPosition:Qt,updateInputValue:je,isOptionSelected:pt,getEmittingOptionValue:Ot,isOptionDisabled:(...t)=>$e.value.apply(null,t)===!0,getOptionValue:(...t)=>de.value.apply(null,t),getOptionLabel:(...t)=>me.value.apply(null,t)}),Object.assign(g,{innerValue:d,fieldClass:$(()=>`q-select q-field--auto-height q-select--with${e.useInput!==!0?"out":""}-input q-select--with${e.useChips!==!0?"out":""}-chips q-select--${e.multiple===!0?"multiple":"single"}`),inputRef:D,targetRef:E,hasValue:Z,showPopup:Be,floatingLabel:$(()=>e.hideSelected!==!0&&Z.value===!0||typeof k.value=="number"||k.value.length!==0||Wt(e.displayValue)),getControlChild:()=>{if(g.editable.value!==!1&&(n.value===!0||H.value!==!0||s["no-option"]!==void 0))return l===!0?zl():_l();g.hasPopupOpen===!0&&(g.hasPopupOpen=!1)},controlEvents:{onFocusin(t){g.onControlFocusin(t)},onFocusout(t){g.onControlFocusout(t,()=>{Le(),Ee()})},onClick(t){if(ht(t),l!==!0&&a.value===!0){Ee(),E.value!==null&&E.value.focus();return}Be(t)}},getControl:t=>{const y=ql(),v=t===!0||n.value!==!0||l!==!0;if(e.useInput===!0)y.push(Vl(t,v));else if(g.editable.value===!0){const J=v===!0?we.value:void 0;y.push(z("input",{ref:v===!0?E:void 0,key:"d_t",class:"q-select__focus-target",id:v===!0?g.targetUid.value:void 0,value:Q.value,readonly:!0,"data-autofocus":t===!0||e.autofocus===!0||void 0,...J,onKeydown:Lt,onKeyup:Dt,onKeypress:Bt})),v===!0&&typeof e.autocomplete=="string"&&e.autocomplete.length!==0&&y.push(z("input",{class:"q-select__autocomplete-input",autocomplete:e.autocomplete,tabindex:-1,onKeyup:Et}))}if(I.value!==void 0&&e.disable!==!0&&lt.value.length!==0){const J=lt.value.map(Y=>z("option",{value:Y,selected:!0}));y.push(z("select",{class:"hidden",name:I.value,multiple:e.multiple},J))}const O=e.useInput===!0||v!==!0?void 0:g.splitAttrs.attributes.value;return z("div",{class:"q-field__native row items-center",...O,...g.splitAttrs.listeners.value},y)},getInnerAppend:()=>e.loading!==!0&&h.value!==!0&&e.hideDropdownIcon!==!0?[z(We,{class:"q-select__dropdown-icon"+(a.value===!0?" rotate-180":""),name:tt.value})]:null}),Ul(g)}});function tl(e){if(e===!1)return 0;if(e===!0||e===void 0)return 1;const s=parseInt(e,10);return isNaN(s)?0:s}var Sl=Gl({name:"close-popup",beforeMount(e,{value:s}){const i={depth:tl(s),handler(c){i.depth!==0&&setTimeout(()=>{const V=Jl(e);V!==void 0&&Zl(V,c,i.depth)})},handlerKey(c){al(c,13)===!0&&i.handler(c)}};e.__qclosepopup=i,e.addEventListener("click",i.handler),e.addEventListener("keyup",i.handlerKey)},updated(e,{value:s,oldValue:i}){s!==i&&(e.__qclosepopup.depth=tl(s))},beforeUnmount(e){const s=e.__qclosepopup;e.removeEventListener("click",s.handler),e.removeEventListener("keyup",s.handlerKey),delete e.__qclosepopup}});const Ko=e=>(e.indexOf("{{")>=0&&(e=e.split("{{")[1]),e.indexOf("}}")>=0&&(e=e.split("}}")[0]),e),Uo=e=>(e.indexOf("\u300A")>=0&&(e=e.split("\u300A")[1]),e.indexOf("\u300B")>=0&&(e=e.split("\u300B")[0]),e),hl=e=>e?e.indexOf("-")==0?e=e.substring(1):e.substring(0,10):"",ut=e=>e?(e.lastIndexOf("]")>=0&&(e=e.substring(e.lastIndexOf("]")+1)),e.indexOf("{{")>=0&&(e=e.replace(`{{${Ko(e)}}}`,"")),e.indexOf("\u300A")>=0&&(e=e.replace(`\u300A${Uo(e)}\u300B`,"")),e):"",vt=[{label:"\u9A91\u5175",value:"\u9A91\u5175"},{label:"\u6B65\u5175",value:"\u6B65\u5175"},{label:"\u56FD\u4EA7",value:"\u56FD\u4EA7"},{label:"\u65AF\u5DF4\u8FBE",value:"\u65AF\u5DF4\u8FBE"},{label:"\u6F2B\u52A8",value:"\u6F2B\u52A8"}],Wo=[{label:"\u5168\u90E8",value:""},...vt,{label:"\u65E0",value:"\u65E0"}];var Yo=st({name:"QForm",props:{autofocus:Boolean,noErrorFocus:Boolean,noResetFocus:Boolean,greedy:Boolean,onSubmit:Function},emits:["reset","validationSuccess","validationError"],setup(e,{slots:s,emit:i}){const c=Ze(),V=X(null);let a=0;const n=[];function f(l){const K=typeof l=="boolean"?l:e.noErrorFocus!==!0,u=++a,C=(F,D)=>{i("validation"+(F===!0?"Success":"Error"),D)},_=F=>{const D=F.validate();return typeof D.then=="function"?D.then(E=>({valid:E,comp:F}),E=>({valid:!1,comp:F,err:E})):Promise.resolve({valid:D,comp:F})};return(e.greedy===!0?Promise.all(n.map(_)).then(F=>F.filter(D=>D.valid!==!0)):n.reduce((F,D)=>F.then(()=>_(D).then(E=>{if(E.valid===!1)return Promise.reject(E)})),Promise.resolve()).catch(F=>[F])).then(F=>{if(F===void 0||F.length===0)return u===a&&C(!0),!0;if(u===a){const{comp:D,err:E}=F[0];if(E!==void 0&&console.error(E),C(!1,D),K===!0){const W=F.find(({comp:ae})=>typeof ae.focus=="function"&&to(ae.$)===!1);W!==void 0&&W.comp.focus()}}return!1})}function k(){a++,n.forEach(l=>{typeof l.resetValidation=="function"&&l.resetValidation()})}function w(l){l!==void 0&&Ie(l);const K=a+1;f().then(u=>{K===a&&u===!0&&(e.onSubmit!==void 0?i("submit",l):l!==void 0&&l.target!==void 0&&typeof l.target.submit=="function"&&l.target.submit())})}function h(l){l!==void 0&&Ie(l),i("reset"),Ce(()=>{k(),e.autofocus===!0&&e.noResetFocus!==!0&&S()})}function S(){lo(()=>{if(V.value===null)return;const l=V.value.querySelector("[autofocus][tabindex], [data-autofocus][tabindex]")||V.value.querySelector("[autofocus] [tabindex], [data-autofocus] [tabindex]")||V.value.querySelector("[autofocus], [data-autofocus]")||Array.prototype.find.call(V.value.querySelectorAll("[tabindex]"),K=>K.tabIndex>-1);l!=null&&l.focus({preventScroll:!0})})}eo(oo,{bindComponent(l){n.push(l)},unbindComponent(l){const K=n.indexOf(l);K>-1&&n.splice(K,1)}});let q=!1;return ll(()=>{q=!0}),ol(()=>{q===!0&&e.autofocus===!0&&S()}),Mt(()=>{e.autofocus===!0&&S()}),Object.assign(c.proxy,{validate:f,resetValidation:k,submit:w,reset:h,focus:S,getValidationComponents:()=>n}),()=>z("form",{class:"q-form",ref:V,onSubmit:w,onReset:h},il(s.default))}});const Xo=()=>!0;function Go(e){const s={};return e.forEach(i=>{s[i]=Xo}),s}function qe(){const{emit:e,proxy:s}=Ze(),i=X(null);function c(){i.value.show()}function V(){i.value.hide()}function a(f){e("ok",f),V()}function n(){e("hide")}return Object.assign(s,{show:c,hide:V}),{dialogRef:i,onDialogHide:n,onDialogOK:a,onDialogCancel:V}}const wl=["ok","hide"];qe.emits=wl;qe.emitsObject=Go(wl);const Jo={__name:"FileEdit",emits:[...qe.emits],setup(e,{expose:s}){const i=dt(),c=Ye({item:null,callback:null}),V=(S,q)=>{c.item=new Fo().fromObject(S),c.item.Code=hl(S.Code),c.item.Title=ut(S.Title),c.callback=q,f.value.show()},a=async()=>{await n(!0)},n=async S=>{const{Id:q,Title:l,Code:K,Actress:u,FileType:C,MovieType:_}=c.item;let B=K.trim();B&&B.indexOf("-")<0&&(B="-"+B);let F="";u.length!=0&&(F+="["+u.trim()+"]"),B.length!=0&&(F+=" ["+B.trim()+"]"),_&&_!="\u65E0"&&F.indexOf("{{")<0&&(F+=`{{${_}}}`);const D=l.trim().split("."),E=D.length;for(let M=0;M<E;M++){const I=D[M];F+=I.replace(I.charAt(0),I.charAt(0).toUpperCase())}F.indexOf("."+C)<0&&(F+="."+C);const ae=await ft({Id:q,Name:F,Code:B,Actress:u,MoveOut:S,NoRefresh:!0});ae.Code==200?(w(),c.callback&&c.callback()):i.notify({type:"negative",message:ae.Message})},{dialogRef:f,onDialogHide:k,onDialogOK:w,onDialogCancel:h}=qe();return s({open:V}),(S,q)=>(R(),le(ct,{ref_key:"dialogRef",ref:f,onHide:G(k)},{default:x(()=>[o(Xe,{class:"q-dialog-plugin q-pa-md",style:io({width:"600px",backgroundImage:"linear-gradient(to left, rgba(255,255,255,0.1), rgba(255,255,255,0.1))"})},{default:x(()=>[o(Yo,{class:"q-gutter-md"},{default:x(()=>[o(no,{modelValue:c.item.MovieType,"onUpdate:modelValue":q[0]||(q[0]=l=>c.item.MovieType=l),options:G(vt),color:"primary",inline:""},null,8,["modelValue","options"]),o(ye,{label:"\u7F16\u7801",autogrow:"",modelValue:c.item.Code,"onUpdate:modelValue":q[1]||(q[1]=l=>c.item.Code=l),dense:!1},null,8,["modelValue"]),o(ye,{label:"\u56FE\u9274",autogrow:"",modelValue:c.item.Actress,"onUpdate:modelValue":q[2]||(q[2]=l=>c.item.Actress=l),dense:!1},null,8,["modelValue"]),o(ye,{label:"\u540D\u79F0",autogrow:"",modelValue:c.item.Title,"onUpdate:modelValue":q[3]||(q[3]=l=>c.item.Title=l),dense:!1},null,8,["modelValue"])]),_:1}),o(ao,{align:"right"},{default:x(()=>[o(N,{color:"primary",label:"\u79FB\u52A8",onClick:a}),o(N,{color:"primary",label:"\u547D\u540D",onClick:q[4]||(q[4]=()=>{n(!1)})}),o(N,{color:"primary",label:"\u5173\u95ED",onClick:G(h)},null,8,["onClick"])]),_:1})]),_:1},8,["style"])]),_:1},8,["onHide"]))}},Zo={style:{"max-width":"80vw !important"}},en={class:"self-center full-width no-outline",tabindex:"0"},tn={class:"self-center full-width no-outline",tabindex:"0"},ln={class:"self-center full-width no-outline",tabindex:"0"},on={class:"self-center full-width no-outline",tabindex:"0"},nn={key:0},an={__name:"FileInfo",emits:[...qe.emits],setup(e,{expose:s}){const i=dt(),c=pl(),V=async u=>{const{Code:C,Message:_}=await u||{};console.log(C,_),C!=200&&i.notify({message:`${_}`})},a=u=>{window.open(`/playing/${u.Id}`)},n=async u=>{const C=await ft({...u,NoRefresh:!0,MoveOut:!0});console.log(C),C.Code==200?i.notify({type:"negative",message:C.Message}):i.notify({type:"negative",message:C.Message})},f=u=>{i.dialog({title:u.Name,message:"\u786E\u5B9A\u5220\u9664\u5417?",cancel:!0,persistent:!0}).onOk(()=>{V(zt(u.Id))}).onCancel(()=>{console.log(">>>> Cancel")}).onDismiss(()=>{})},k=u=>{w.currentData=u,c.Playing=u,c.drawerRight=!0},w=Ye({item:{},settingInfo:{},callback:null,prewiewImages:[]}),h=(u,C)=>{w.prewiewImages=[],w.item={...u},w.callback=C,l.value.show(),setTimeout(()=>{Po(u.Id).then(_=>{console.log(_.data),w.prewiewImages=_.data})},500)},S=async()=>{const u=await yl();w.settingInfo=u.data},q=()=>{window.open(`${w.settingInfo.BaseUrl}/${w.item.Code}`)},{dialogRef:l,onDialogHide:K}=qe();return Mt(()=>{S()}),s({open:h}),(u,C)=>(R(),le(ct,{ref_key:"dialogRef",ref:l,onHide:G(K),style:{width:"80vw !important"}},{default:x(()=>[j("div",Zo,[o(Xe,{class:"q-dialog-plugin q-pa-md",style:{color:"white",width:"100%",maxHeight:"90vh",padding:"20px",lineHeight:"32px"}},{default:x(()=>[o(N,{round:"",class:"q-mr-sm",size:"sm",ripple:"",color:"green",icon:"ti-fullscreen",onClick:C[0]||(C[0]=_=>a(w.item))}),o(N,{round:"",class:"q-mr-sm",size:"sm",ripple:"",color:"green-7",icon:"ti-blackboard",onClick:C[1]||(C[1]=_=>k(w.item))}),o(N,{round:"",class:"q-mr-sm",size:"sm",color:"primary",icon:"ti-control-eject",onClick:C[2]||(C[2]=_=>V(G(cl)(w.item.Id)))}),o(N,{round:"",class:"q-mr-sm",size:"sm",color:"primary",icon:"open_in_new",onClick:C[3]||(C[3]=_=>V(G(dl)(w.item.Id)))}),!w.item.MovieType||w.item.MovieType=="\u65E0"?(R(),le(N,{key:0,round:"",class:"q-mr-sm",size:"sm",color:"brown-5",icon:"wifi_protected_setup",onClick:C[4]||(C[4]=_=>V(G(At)(w.item.Id),!0))})):ge("",!0),o(N,{round:"",class:"q-mr-sm",size:"sm",color:"secondary",icon:"ti-import",onClick:C[5]||(C[5]=_=>V(G(fl)(w.item.Id)))}),o(N,{round:"",class:"q-mr-sm",size:"sm",color:"amber",glossy:"","text-color":"black",icon:"ti-trash",onClick:C[6]||(C[6]=_=>f(w.item))}),o(N,{round:"",class:"q-mr-sm",size:"sm",color:"black",onClick:C[7]||(C[7]=_=>n(w.item)),icon:"ti-control-shuffle"}),o(_t,{fit:"fit",easier:"",draggable:"",src:G(wo)(w.item.Id),style:{"min-width":"600px","max-height":"50vh"}},null,8,["src"]),o(Me,{label:"Code","stack-label":""},{control:x(()=>[j("div",{class:"self-center full-width no-outline",style:{color:"blue"},tabindex:"0",onClick:q},ee(w.item.Code),1)]),_:1}),o(Me,{label:"Actress","stack-label":""},{control:x(()=>[j("div",en,ee(w.item.Actress),1)]),_:1}),o(Me,{label:"Name","stack-label":""},{control:x(()=>[j("div",tn,ee(G(ut)(w.item.Name)),1)]),_:1}),o(Me,{label:"Time","stack-label":""},{control:x(()=>[j("div",ln,ee(G(ut)(w.item.MTime)),1)]),_:1}),o(Me,{label:"Code","stack-label":""},{control:x(()=>[j("div",on,ee(w.item.Path),1)]),_:1})]),_:1}),w.prewiewImages?(R(),re("div",nn,[(R(!0),re(pe,null,Se(w.prewiewImages,_=>(R(),le(_t,{fit:"fit",key:_.Id,src:G(ko)(_.Id),style:{width:"100%",height:"auto"}},null,8,["src"]))),128))])):ge("",!0)])]),_:1},8,["onHide"]))}};var un=st({name:"QSlideTransition",props:{appear:Boolean,duration:{type:Number,default:300}},emits:["show","hide"],setup(e,{slots:s,emit:i}){let c=!1,V,a,n=null,f=null,k,w;function h(){V&&V(),V=null,c=!1,n!==null&&(clearTimeout(n),n=null),f!==null&&(clearTimeout(f),f=null),a!==void 0&&a.removeEventListener("transitionend",k),k=null}function S(u,C,_){C!==void 0&&(u.style.height=`${C}px`),u.style.transition=`height ${e.duration}ms cubic-bezier(.25, .8, .50, 1)`,c=!0,V=_}function q(u,C){u.style.overflowY=null,u.style.height=null,u.style.transition=null,h(),C!==w&&i(C)}function l(u,C){let _=0;a=u,c===!0?(h(),_=u.offsetHeight===u.scrollHeight?0:void 0):(w="hide",u.style.overflowY="hidden"),S(u,_,C),n=setTimeout(()=>{n=null,u.style.height=`${u.scrollHeight}px`,k=B=>{f=null,(Object(B)!==B||B.target===u)&&q(u,"show")},u.addEventListener("transitionend",k),f=setTimeout(k,e.duration*1.1)},100)}function K(u,C){let _;a=u,c===!0?h():(w="show",u.style.overflowY="hidden",_=u.scrollHeight),S(u,_,C),n=setTimeout(()=>{n=null,u.style.height=0,k=B=>{f=null,(Object(B)!==B||B.target===u)&&q(u,"hide")},u.addEventListener("transitionend",k),f=setTimeout(k,e.duration*1.1)},100)}return rt(()=>{c===!0&&h()}),()=>z(uo,{css:!1,appear:e.appear,onEnter:l,onLeave:K},s.default)}});const Te=ro({}),rn=Object.keys(ul);var sn=st({name:"QExpansionItem",props:{...ul,...so,...co,icon:String,label:String,labelLines:[Number,String],caption:String,captionLines:[Number,String],dense:Boolean,toggleAriaLabel:String,expandIcon:String,expandedIcon:String,expandIconClass:[Array,String,Object],duration:Number,headerInsetLevel:Number,contentInsetLevel:Number,expandSeparator:Boolean,defaultOpened:Boolean,hideExpandIcon:Boolean,expandIconToggle:Boolean,switchToggleSide:Boolean,denseToggle:Boolean,group:String,popup:Boolean,headerStyle:[Array,String,Object],headerClass:[Array,String,Object]},emits:[...fo,"click","afterShow","afterHide"],setup(e,{slots:s,emit:i}){const{proxy:{$q:c}}=Ze(),V=vo(e,c),a=X(e.modelValue!==null?e.modelValue:e.defaultOpened),n=X(null),f=Yt(),{show:k,hide:w,toggle:h}=mo({showing:a});let S,q;const l=$(()=>`q-expansion-item q-item-type q-expansion-item--${a.value===!0?"expanded":"collapsed"} q-expansion-item--${e.popup===!0?"popup":"standard"}`),K=$(()=>{if(e.contentInsetLevel===void 0)return null;const m=c.lang.rtl===!0?"Right":"Left";return{["padding"+m]:e.contentInsetLevel*56+"px"}}),u=$(()=>e.disable!==!0&&(e.href!==void 0||e.to!==void 0&&e.to!==null&&e.to!=="")),C=$(()=>{const m={};return rn.forEach(te=>{m[te]=e[te]}),m}),_=$(()=>u.value===!0||e.expandIconToggle!==!0),B=$(()=>e.expandedIcon!==void 0&&a.value===!0?e.expandedIcon:e.expandIcon||c.iconSet.expansionItem[e.denseToggle===!0?"denseIcon":"icon"]),F=$(()=>e.disable!==!0&&(u.value===!0||e.expandIconToggle===!0)),D=$(()=>({expanded:a.value===!0,detailsId:e.targetUid,toggle:h,show:k,hide:w})),E=$(()=>{const m=e.toggleAriaLabel!==void 0?e.toggleAriaLabel:c.lang.label[a.value===!0?"collapse":"expand"](e.label);return{role:"button","aria-expanded":a.value===!0?"true":"false","aria-controls":f,"aria-label":m}});ke(()=>e.group,m=>{q!==void 0&&q(),m!==void 0&&P()});function W(m){u.value!==!0&&h(m),i("click",m)}function ae(m){m.keyCode===13&&M(m,!0)}function M(m,te){te!==!0&&n.value!==null&&n.value.focus(),h(m),Ie(m)}function I(){i("afterShow")}function p(){i("afterHide")}function P(){S===void 0&&(S=Yt()),a.value===!0&&(Te[e.group]=S);const m=ke(a,ve=>{ve===!0?Te[e.group]=S:Te[e.group]===S&&delete Te[e.group]}),te=ke(()=>Te[e.group],(ve,g)=>{g===S&&ve!==void 0&&ve!==S&&w()});q=()=>{m(),te(),Te[e.group]===S&&delete Te[e.group],q=void 0}}function be(){const m={class:[`q-focusable relative-position cursor-pointer${e.denseToggle===!0&&e.switchToggleSide===!0?" items-end":""}`,e.expandIconClass],side:e.switchToggleSide!==!0,avatar:e.switchToggleSide},te=[z(We,{class:"q-expansion-item__toggle-icon"+(e.expandedIcon===void 0&&a.value===!0?" q-expansion-item__toggle-icon--rotated":""),name:B.value})];return F.value===!0&&(Object.assign(m,{tabindex:0,...E.value,onClick:M,onKeyup:ae}),te.unshift(z("div",{ref:n,class:"q-expansion-item__toggle-focus q-icon q-focus-helper q-focus-helper--rounded",tabindex:-1}))),z(xe,m,()=>te)}function T(){let m;return s.header!==void 0?m=[].concat(s.header(D.value)):(m=[z(xe,()=>[z(Ae,{lines:e.labelLines},()=>e.label||""),e.caption?z(Ae,{lines:e.captionLines,caption:!0},()=>e.caption):null])],e.icon&&m[e.switchToggleSide===!0?"push":"unshift"](z(xe,{side:e.switchToggleSide===!0,avatar:e.switchToggleSide!==!0},()=>z(We,{name:e.icon})))),e.disable!==!0&&e.hideExpandIcon!==!0&&m[e.switchToggleSide===!0?"unshift":"push"](be()),m}function b(){const m={ref:"item",style:e.headerStyle,class:e.headerClass,dark:V.value,disable:e.disable,dense:e.dense,insetLevel:e.headerInsetLevel};return _.value===!0&&(m.clickable=!0,m.onClick=W,Object.assign(m,u.value===!0?C.value:E.value)),z(Je,m,T)}function r(){return Ge(z("div",{key:"e-content",class:"q-expansion-item__content relative-position",style:K.value,id:f},il(s.default)),[[go,a.value]])}function oe(){const m=[b(),z(un,{duration:e.duration,onShow:I,onHide:p},r)];return e.expandSeparator===!0&&m.push(z(qt,{class:"q-expansion-item__border q-expansion-item__border--top absolute-top",dark:V.value}),z(qt,{class:"q-expansion-item__border q-expansion-item__border--bottom absolute-bottom",dark:V.value})),m}return e.group!==void 0&&P(),rt(()=>{q!==void 0&&q()}),()=>z("div",{class:l.value},[z("div",{class:"q-expansion-item__container relative-position"},oe())])}});const cn={class:"q-px-sm row justify-left"},dn={class:"q-gutter-sm q-mt-sm"},fn={style:{display:"flex","flex-direction":"column"}},vn={key:0,style:{color:"red"}},mn={style:{display:"flex","flex-direction":"row"}},gn={key:0,style:{display:"flex","flex-direction":"row","align-items":"center","background-color":"antiquewhite","border-radius":"12px",padding:"4px"}},yn={style:{"max-height":"20vh",overflow:"auto"}},pn={__name:"ListEdit",emits:[...qe.emits],setup(e,{expose:s}){const i=dt(),c=X("filelist");let V;ke(()=>c.value,M=>{console.log(M),M==="tasking"?(a(),V=setInterval(a,2e3)):clearInterval(V)});const a=async()=>{const M=await To();n.tasking=M.Data},n=Ye({selectAll:!1,settingInfo:{},resultData:{},queryParam:{},selector:[],callback:null,cutListIds:[],tasking:{}}),f=Ye({sH:"00",sM:"00",sS:"00",eH:"99",eM:"00",eS:"00"}),k=M=>{n.cutListIds.indexOf(M.Id)<0&&n.cutListIds.push(M.Id),l(Mo(M.Id))},w=M=>{n.cutListIds.indexOf(M.Id)<0&&n.cutListIds.push(M.Id),l(Ao(M.Id,[f.sH,f.sM,f.sS].join(":"),[f.eH,f.eM,f.eS].join(":")))},h=()=>{n.selectAll=!n.selectAll,n.selectAll?n.selector=n.resultData.Data.map(M=>M.Id):n.selector=[]},S=async()=>{await ml(),await q()},q=async()=>{const M=await gl(n.queryParam);n.resultData=M},l=async M=>{const{Code:I,Message:p}=await M;console.log(I,p),I!=200?i.notify({message:`${p}`}):i.notify({message:`${p}`})},K=M=>{const{queryParam:I,settingInfo:p,cb:P}=M;n.queryParam=I,n.settingInfo=p,n.callback=P,B.value.show(),q()},u=async()=>{n.callback&&n.callback({settingInfo:n.settingInfo}),E(),D(),F(),console.log("dialogHide")},C=M=>{i.dialog({title:M.Name,message:"\u786E\u5B9A\u5220\u9664\u5417?",cancel:!0,persistent:!0}).onOk(()=>{console.log(">>>> onOk"),l(zt(M.Id)).then(()=>{for(let I=0;I<n.resultData.Data.length;I++)n.resultData.Data[I].Id==M.Id&&n.resultData.Data.splice(I,1)})}).onCancel(()=>{console.log(">>>> Cancel")}).onDismiss(()=>{})},_=async M=>{const I=await ft({...M,NoRefresh:!0,MoveOut:!0});if(console.log(I),I.Code==200){for(let p=0;p<n.resultData.Data.length;p++)n.resultData.Data[p].Id==M.Id&&n.resultData.Data.splice(p,1);i.notify({type:"negative",message:I.Message})}else i.notify({type:"negative",message:I.Message})},{dialogRef:B,onDialogHide:F,onDialogOK:D,onDialogCancel:E}=qe(),W=()=>{n.callback&&($o(n.settingInfo),n.callback({settingInfo:n.settingInfo}))},ae=()=>{console.log("beforeShow")};return s({open:K}),(M,I)=>(R(),le(ct,{ref_key:"dialogRef",ref:B,onHide:u,style:{width:"1000px"},onBeforeShow:ae},{default:x(()=>[o(Xe,{style:{display:"flex","flex-direction":"column",height:"60vh",width:"80vw"}},{default:x(()=>[o(Io,{modelValue:c.value,"onUpdate:modelValue":I[0]||(I[0]=p=>c.value=p),class:"bg-purple text-white",style:{},align:"justify","narrow-indicator":""},{default:x(()=>[o(xt,{name:"filelist",label:"\u6279\u91CF\u64CD\u4F5C"}),o(xt,{name:"setting",label:"\u8BBE\u7F6E"}),o(xt,{name:"tasking",label:"\u4EFB\u52A1\u6267\u884C"})]),_:1},8,["modelValue"]),o(qt),o(qo,{modelValue:c.value,"onUpdate:modelValue":I[11]||(I[11]=p=>c.value=p),animated:"",class:"bg-purple-1",style:{height:"100%",overflow:"auto"}},{default:x(()=>[o(Ct,{name:"filelist"},{default:x(()=>[j("div",cn,[o(N,{class:"q-mr-sm",color:"amber",size:"sm",glossy:"","text-color":"black",onClick:h},{default:x(()=>[fe(ee(n.selectAll?"\u4E0D\u9009":"\u5168\u9009"),1)]),_:1}),o(N,{class:"q-mr-sm",size:"sm",color:"secondary",icon:"refresh",onClick:S},{default:x(()=>[fe("\u5237\u65B0")]),_:1}),o(ye,{label:"...",modelValue:n.queryParam.Keyword,"onUpdate:modelValue":[I[1]||(I[1]=p=>n.queryParam.Keyword=p),I[2]||(I[2]=p=>q())],dense:!0,filled:"",clearable:""},null,8,["modelValue"])]),j("div",dn,[(R(!0),re(pe,null,Se(n.resultData.Data,p=>Ge((R(),re("div",{key:p.Id,style:{border:"2px dotted purple",padding:"4px","border-radius":"10px","background-color":"burlywood"}},[j("div",fn,[o(Ae,null,{default:x(()=>[n.cutListIds.indexOf(p.Id)>=0?(R(),re("span",vn,"\u526A\u5207\u4E2D\uFF1A\uFF1A")):ge("",!0),fe(ee(p.Title)+"\u3010"+ee(p.SizeStr)+"\u3011 ",1)]),_:2},1024),j("div",mn,[o(Vt,{size:"sm",modelValue:n.selector,"onUpdate:modelValue":I[3]||(I[3]=P=>n.selector=P),val:p.Id,color:"red"},null,8,["modelValue","val"]),o(sl,{class:"q-mr-sm",size:"sm",label:p.MovieType,type:"primary",color:"teal"},{default:x(()=>[o(it,null,{default:x(()=>[(R(!0),re(pe,null,Se(G(vt),P=>Ge((R(),le(Je,{key:P.value,class:"movieTypeSelectItem"},{default:x(()=>[o(xe,null,{default:x(()=>[o(Ae,{onClick:be=>{p.MovieType=P.value,l(G(vl)(p.Id,P.value))}},{default:x(()=>[fe(ee(P.label),1)]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024)),[[Sl]])),128))]),_:2},1024)]),_:2},1032,["label"]),o(N,{size:"sm",class:"q-mr-sm",color:"amber",glossy:"","text-color":"black",icon:"delete",onClick:P=>C(p)},null,8,["onClick"]),o(N,{size:"sm",class:"q-mr-sm",color:"black-1",onClick:P=>_(p),icon:"near_me"},null,8,["onClick"]),o(N,{class:"q-mr-sm",size:"sm",color:"secondary",icon:"open_in_new",onClick:P=>l(M.OpenFileFolder(p.Id))},null,8,["onClick"]),o(N,{size:"sm",class:"q-mr-sm",color:"black",icon:"ti-pencil-alt2",onClick:P=>p.showCut=!0},null,8,["onClick"]),o(N,{size:"sm",class:"q-mr-sm",color:"green",onClick:P=>k(p)},{default:x(()=>[fe("toMp4")]),_:2},1032,["onClick"]),!p.MovieType||p.MovieType=="\u65E0"?(R(),le(N,{key:0,class:"q-mr-sm",size:"sm",color:"brown-5",icon:"wifi_protected_setup",onClick:P=>l(G(At)(p.Id))},null,8,["onClick"])):ge("",!0)]),p.showCut?(R(),re("div",gn,[fe(" \u5F00\u59CB\uFF1A "),o(ye,{style:{width:"40px"},"model-value":f.sH,"onUpdate:modelValue":I[4]||(I[4]=P=>f.sH=P)},null,8,["model-value"]),o(ye,{style:{width:"40px"},"model-value":f.sM,"onUpdate:modelValue":I[5]||(I[5]=P=>f.sM=P)},null,8,["model-value"]),o(ye,{style:{width:"40px"},"model-value":f.sS,"onUpdate:modelValue":I[6]||(I[6]=P=>f.sS=P)},null,8,["model-value"]),fe(" \u7ED3\u675F\uFF1A "),o(ye,{style:{width:"40px"},"model-value":f.eH,"onUpdate:modelValue":I[7]||(I[7]=P=>f.eH=P)},null,8,["model-value"]),o(ye,{style:{width:"40px"},"model-value":f.eM,"onUpdate:modelValue":I[8]||(I[8]=P=>f.eM=P)},null,8,["model-value"]),o(ye,{style:{width:"40px"},"model-value":f.eS,"onUpdate:modelValue":I[9]||(I[9]=P=>f.eS=P)},null,8,["model-value"]),o(N,{size:"sm",color:"black",type:"primary",onClick:P=>{w(p),p.showCut=!1},label:"\u786E\u8BA4"},null,8,["onClick"]),o(N,{size:"sm",color:"blue",onClick:P=>p.showCut=!1,label:"\u53D6\u6D88"},null,8,["onClick"])])):ge("",!0)])])),[[rl]])),128))])]),_:1}),o(Ct,{name:"setting",class:"bg-purple-2"},{default:x(()=>[o(Me,{color:"purple-12",label:"Buttons\uFF08\u6700\u4F735\uFF09","stack-label":""},{prepend:x(()=>[o(We,{name:"event"})]),control:x(()=>[(R(!0),re(pe,null,Se(G(Vo),p=>(R(),le(Vt,{modelValue:n.settingInfo.Buttons,"onUpdate:modelValue":[I[10]||(I[10]=P=>n.settingInfo.Buttons=P),W],key:p,val:p,label:p,color:"teal"},null,8,["modelValue","val","label"]))),128))]),_:1})]),_:1}),o(Ct,{name:"tasking"},{default:x(()=>[o(it,{bordered:"",separator:""},{default:x(()=>[(R(!0),re(pe,null,Se(n.tasking,(p,P)=>(R(),le(sn,{key:P},{header:x(()=>[o(xe,{avatar:""},{default:x(()=>[o(N,{color:"blue",class:"q-mr-sm"},{default:x(()=>[fe(ee(p.Type),1)]),_:2},1024),fe(" "+ee(` \u683C\u5F0F\uFF1A${p.To} `),1)]),_:2},1024),o(xe,null,{default:x(()=>[j("div",null,ee(p.Name),1),j("div",null,ee(`\u5F00\u59CB\u65F6\u95F4\uFF1A${p.Start} `)+" "+ee(` \u7ED3\u675F\u65F6\u95F4\uFF1A${p.End} `),1),j("div",null,ee(`\u8017\u65F6\uFF1A${(new Date(p.FinishTime).getTime()-new Date(p.CreateTime).getTime())/1e3}`),1)]),_:2},1024),o(xe,{side:""},{default:x(()=>[o(N,{class:"q-mr-sm",color:p.Status=="\u6210\u529F"?"green":"black"},{default:x(()=>[fe(ee(p.Status),1)]),_:2},1032,["color"])]),_:2},1024)]),default:x(()=>[o(Xe,null,{default:x(()=>[o(yo,null,{default:x(()=>[j("div",yn,ee(p.Log),1)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1},512))}};const bn=e=>(So("data-v-700ba7e6"),e=e(),ho(),e),Sn={class:"q-mg-md top",style:{"margin-bottom":"60px"}},hn={class:"row justify-center q-gutter-sm",ref:"top"},wn={style:{width:"200px","max-height":"50vh"}},kn={class:"q-pa-sm flex flex-center"},xn={class:"row justify-center q-gutter-sm q-mr-sm q-mt-sm mainlist"},Cn={style:{padding:"0",margin:"0","background-color":"rgba(0, 0, 0, 0)",display:"flex",height:"2rem","flex-direction":"row","justify-content":"space-between",width:"100%"}},In=["onClick"],qn={class:"tag-popup"},Vn=bn(()=>j("span",null,"\u79CD\u8349",-1)),_n=["onClick"],Pn=["onClick"],Tn=["onClick"],Mn={style:{display:"flex","flex-direction":"row"}},An={class:"text-subtitles"},zn=["onClick"],On=["onClick"],$n=["onClick"],Fn={__name:"SearchPage",setup(e){const s=X(null),i=X(null),c=X(null),V=X("Hello"),{copy:a}=Do({source:V}),n=pl(),f=$(()=>n.getSuggestions),k=dt(),w=$(()=>l.settingInfo.Buttons),h=T=>{const{settingInfo:b}=T;b&&(l.settingInfo=b)},S=T=>!w.value||w.value.length==0?!0:w.value.indexOf(T)>=0,q=T=>{window.open(`/playing/${T.Id}`)},l=Ye({currentData:{},settingInfo:{},queryParam:{Keyword:"",MovieType:"",OnlyRepeat:!1,Page:1,PageSize:20,SortField:"MTime",SortType:"desc"},resultData:{},fullscreen:!1}),K=T=>{console.log(T),T.target.select()},u=T=>{k.dialog({title:T.Name,message:"\u786E\u5B9A\u5220\u9664\u5417?",cancel:!0,persistent:!0}).onOk(()=>{console.log(">>>> onOk"),_(zt(T.Id),!0)}).onCancel(()=>{console.log(">>>> Cancel")}).onDismiss(()=>{})},C=async()=>{const T=await yl();l.settingInfo=T.data,n.SettingInfo=T.data},_=async(T,b)=>{const{Code:r,Message:oe}=await T||{};console.log(r,oe),r!=200?k.notify({message:`${oe}`}):b&&I()};Jt(["`"],()=>{I()}),Jt(["Enter"],()=>{W()});const B=async T=>{await a(T),k.notify({message:`${T}`})},F=T=>{l.currentData=T,n.Playing=T,n.drawerRight=!0},D=async T=>{console.log("view.queryParam.Page",T),await W();const b=document.querySelector(".scroll");console.log(b),b&&b.scrollTo(0,0)},E=T=>{l.queryParam.Page=l.queryParam.Page+T,D()},W=async()=>{P();const T=await gl(l.queryParam);console.log(T),l.resultData={...T}},ae=async T=>{const b=await ft({...T,NoRefresh:!0,MoveOut:!0});console.log(b),b.Code==200?k.notify({type:"negative",message:b.Message}):k.notify({type:"negative",message:b.Message})},M=X(!1),I=async()=>{M.value=!0;const{Code:T,Message:b}=await ml("/api/refreshIndex");console.log(T,b),T=="200"&&(k.notify({type:"negative",message:b}),await W()),M.value=!1},p=async(T,b)=>{const{Code:r,Message:oe}=await vl(T,b);r==="200"?k.notify({type:"negative",message:oe}):k.notify({type:"warning",message:oe})},P=()=>{n.syncSearchParam(l.queryParam),localStorage.setItem("queryParam",JSON.stringify(l.queryParam))},be=bo();return Mt(async()=>{const{Page:T,PageSize:b,MovieType:r,SortField:oe,SortType:m,Keyword:te,showStyle:ve,from:g}=be.query;if(await C(),te&&(l.queryParam.Keyword=te),T&&b)l.queryParam.Page=Number(T),l.queryParam.PageSize=Number(b),l.queryParam.MovieType=r,l.queryParam.SortField=oe,l.queryParam.SortType=m,l.queryParam.Keyword=te,l.queryParam.showStyle=ve;else if(g=="index"){const d=n.FileSearchParam;d&&(console.log("piniaParam",d),l.queryParam=d)}else{const d=JSON.parse(localStorage.getItem("queryParam"));d&&(console.log("storage",d),l.queryParam=d)}W()}),(T,b)=>(R(),re(pe,null,[j("div",Sn,[o(wt,{style:{"z-index":"9"},position:"left",offset:[0,0]},{default:x(()=>[l.queryParam.Page>1?(R(),le(N,{key:0,round:"",class:"page-sticky",color:"amber","text-color":"black",icon:"keyboard_arrow_left",onClick:b[0]||(b[0]=r=>E(-1))})):ge("",!0)]),_:1}),o(wt,{style:{"z-index":"9"},position:"right",offset:[10,10]},{default:x(()=>[o(N,{round:"",class:"page-sticky",color:"secondary","text-color":"black",icon:"keyboard_arrow_right",onClick:b[1]||(b[1]=r=>E(1))})]),_:1}),j("div",hn,[o(N,{loading:M.value,color:"red",onClick:I},{loading:x(()=>[fe(" \u6267\u884C\u4E2D ")]),default:x(()=>[fe(" \u626B\u63CF\u3010~\u3011 ")]),_:1},8,["loading"]),o(kt,{modelValue:l.queryParam.SortField,"onUpdate:modelValue":[b[2]||(b[2]=r=>l.queryParam.SortField=r),b[3]||(b[3]=r=>W())],"toggle-color":"primary",options:[{label:"\u65F6",value:"MTime"},{label:"\u5BB9",value:"Size"},{label:"\u540D",value:"Code"}]},null,8,["modelValue"]),o(kt,{modelValue:l.queryParam.SortType,"onUpdate:modelValue":[b[4]||(b[4]=r=>l.queryParam.SortType=r),b[5]||(b[5]=r=>W())],"toggle-color":"primary",options:[{label:"\u6B63",value:"asc"},{label:"\u5012",value:"desc"}]},null,8,["modelValue"]),o(kt,{modelValue:l.queryParam.MovieType,"onUpdate:modelValue":[b[6]||(b[6]=r=>l.queryParam.MovieType=r),b[7]||(b[7]=r=>W())],"toggle-color":"primary",options:G(Wo)},null,8,["modelValue","options"]),o(ye,{id:"searchBtn",label:"...",modelValue:l.queryParam.Keyword,"onUpdate:modelValue":[b[8]||(b[8]=r=>l.queryParam.Keyword=r),b[9]||(b[9]=r=>W())],dense:!0,filled:"",clearable:""},{prepend:x(()=>[o(We,{name:"ti-list",class:"cursor-pointer"},{default:x(()=>[o(Xt,null,{default:x(()=>[j("div",wn,[o(it,null,{default:x(()=>[(R(!0),re(pe,null,Se(f.value,r=>Ge((R(),le(Je,{clickable:"",key:r,onClick:oe=>{l.queryParam.Keyword=r,W()}},{default:x(()=>[o(xe,null,{default:x(()=>[o(Ae,null,{default:x(()=>[fe(ee(r),1)]),_:2},1024)]),_:2},1024)]),_:2},1032,["onClick"])),[[rl]])),128))]),_:1})])]),_:1})]),_:1})]),_:1},8,["modelValue"]),o(Vt,{modelValue:l.queryParam.OnlyRepeat,"onUpdate:modelValue":[b[10]||(b[10]=r=>l.queryParam.OnlyRepeat=r),W],label:"\u91CD"},null,8,["modelValue"]),o(N,{class:"q-mr-sm",size:"sm",color:"primary",icon:"apps",onClick:b[11]||(b[11]=r=>c.value.open({queryParam:l.queryParam,settingInfo:l.settingInfo,cb:h}))})],512),o(wt,{position:"bottom",style:{"z-index":"9","background-color":"rgba(0, 0, 0, 0.3)"}},{default:x(()=>[j("div",kn,[o(jo,{color:"lime-11 q-mr-md","bg-color":"green",dense:"","onUpdate:modelValue":[b[12]||(b[12]=r=>{l.queryParam.PageSize=Number(r),W()}),b[13]||(b[13]=r=>l.queryParam.PageSize=r)],filled:"",modelValue:l.queryParam.PageSize,options:[10,20,30,50,200]},null,8,["modelValue"]),o(_o,{modelValue:l.queryParam.Page,"onUpdate:modelValue":[b[14]||(b[14]=r=>l.queryParam.Page=r),D],color:"deep-orange",ellipses:!0,max:l.resultData.TotalPage||0,"max-pages":10,"boundary-numbers":""},null,8,["modelValue","max"]),o(ye,{modelValue:l.queryParam.Page,"onUpdate:modelValue":[b[15]||(b[15]=r=>l.queryParam.Page=r),b[17]||(b[17]=r=>{l.queryParam.Page=Number(r),W()})],dense:!0,type:"search",style:{"background-color":"aliceblue",width:"60px","text-align":"center"},onFocus:b[16]||(b[16]=r=>K(r))},null,8,["modelValue"])])]),_:1}),j("div",xn,[(R(!0),re(pe,null,Se(l.resultData.Data,r=>(R(),le(Xe,{class:"q-ma-sm example-item",key:r.Id},{default:x(()=>{var oe;return[o(_t,{fit:"fit",easier:"",draggable:"",src:G(xo)(r.Id),class:"item-img",onClick:()=>{i.value.open(r,I)}},{default:x(()=>[j("div",Cn,[j("div",{onClick:at(()=>{},["stop"]),style:{display:"flex","flex-direction":"column","justify-content":"flex-start",width:"fit-content"}},[o(Tt,{square:"","text-color":"white",style:{"margin-left":"0px",padding:"0 4px","background-color":"rgba(236, 15, 15, 0.872)"}},{default:x(()=>[o(Xt,{"context-menu":""},{default:x(()=>[j("div",qn,[j("div",null,[(R(!0),re(pe,null,Se(r.Tags,m=>(R(),le(N,{size:"sm",icon:"ti-minus",square:"","text-color":"white",color:"green",class:"tag-item",key:m,label:m,onClick:te=>_(G(zo)(r.Id,m),!0)},null,8,["label","onClick"]))),128))]),j("div",null,[(R(!0),re(pe,null,Se(l.settingInfo.Tags,m=>(R(),le(N,{size:"sm",icon:"ti-plus",square:"","text-color":"white",color:"red",class:"tag-item",key:m,label:m,onClick:te=>_(G(Oo)(r.Id,m),!0)},null,8,["label","onClick"]))),128))])])]),_:2},1024),Vn]),_:2},1024),(R(!0),re(pe,null,Se(r.Tags,m=>(R(),le(Tt,{square:"","text-color":"white",key:m,style:{"margin-left":"0px",padding:"0 4px","background-color":"rgba(188, 24, 24, 0.6)"}},{default:x(()=>[j("span",{onClick:te=>{l.queryParam.Keyword=m,W()}},ee(m),9,_n)]),_:2},1024))),128))],8,In),j("div",{class:"row",onClick:at(()=>{},["stop"])},[o(N,{round:"",class:"q-mr-sm",size:"sm",ripple:"",color:"green",icon:"ti-fullscreen",onClick:m=>q(r)},null,8,["onClick"]),o(N,{round:"",class:"q-mr-sm",size:"sm",ripple:"",color:"green-7",icon:"ti-blackboard",onClick:m=>F(r)},null,8,["onClick"])],8,Pn),j("div",null,[o(sl,{style:{"background-color":"rgba(0, 0, 0, 0.8)",width:"85px"},label:r.MovieType,onClick:at(()=>{},["stop"])},{default:x(()=>[o(it,{style:{"background-color":"rgba(0, 0, 0, 0.7)"}},{default:x(()=>[(R(!0),re(pe,null,Se(G(vt),m=>Ge((R(),le(Je,{key:m.value,class:"movieTypeSelectItem"},{default:x(()=>[o(xe,null,{default:x(()=>[o(Ae,{onClick:te=>p(r.Id,m.value)},{default:x(()=>[fe(ee(m.label),1)]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024)),[[Sl]])),128))]),_:2},1024)]),_:2},1032,["label","onClick"])])]),j("div",{class:"absolute-bottom text-body1 text-center",style:{padding:"4px"},onClick:at(()=>{},["stop"])},[j("div",Mn,[S("\u64AD\u653E")?(R(),le(N,{key:0,round:"",class:"q-mr-sm",size:"sm",color:"primary",icon:"ti-control-eject",onClick:m=>_(G(cl)(r.Id))},null,8,["onClick"])):ge("",!0),S("\u7F16\u8F91")?(R(),le(N,{key:1,round:"",class:"q-mr-sm",size:"sm",color:"primary",icon:"ti-slice",onClick:()=>{s.value.open(r,I)}},null,8,["onClick"])):ge("",!0),S("\u6587\u4EF6\u5939")?(R(),le(N,{key:2,round:"",class:"q-mr-sm",size:"sm",color:"primary",icon:"open_in_new",onClick:m=>_(G(dl)(r.Id))},null,8,["onClick"])):ge("",!0),!r.MovieType||r.MovieType=="\u65E0"?(R(),le(N,{key:3,round:"",class:"q-mr-sm",size:"sm",color:"brown-5",icon:"wifi_protected_setup",onClick:m=>_(G(At)(r),!0)},null,8,["onClick"])):ge("",!0),S("\u522E\u56FE")?(R(),le(N,{key:4,round:"",class:"q-mr-sm",size:"sm",color:"secondary",icon:"ti-import",onClick:m=>_(G(fl)(r.Id))},null,8,["onClick"])):ge("",!0),S("\u5220\u9664")?(R(),le(N,{key:5,round:"",class:"q-mr-sm",size:"sm",color:"amber",glossy:"","text-color":"black",icon:"ti-trash",onClick:m=>u(r)},null,8,["onClick"])):ge("",!0),S("\u79FB\u52A8")?(R(),le(N,{key:6,round:"",class:"q-mr-sm",size:"sm",color:"black",onClick:m=>ae(r),icon:"ti-control-shuffle"},null,8,["onClick"])):ge("",!0)])],8,Tn)]),_:2},1032,["src","onClick"]),j("div",An,[j("a",{flat:"",style:{color:"#59d89d"},class:"mr10",onClick:m=>{l.queryParam.Keyword=r.Actress,W()}},ee((oe=r.Actress)==null?void 0:oe.substring(0,6)),9,zn),j("a",{flat:"",style:{color:"goldenrod"},class:"mr10",onClick:m=>B(r.Code)},ee(G(hl)(r.Code)),9,On),j("a",{flat:"",style:{color:"green"},class:"mr10",onClick:m=>B(r.Title)},ee(r.SizeStr),9,$n),j("span",null,ee(G(ut)(r.Title)),1)])]}),_:2},1024))),128))])]),o(Jo,{ref_key:"fileEditRef",ref:s},null,512),o(an,{ref_key:"fileInfoRef",ref:i},null,512),o(pn,{ref_key:"listEditRef",ref:c},null,512)],64))}};var ta=po(Fn,[["__scopeId","data-v-700ba7e6"]]);export{ta as default};
