import{S as xl,r as Q,c as F,z as De,X as _l,bm as Pl,Y as Gt,Z as Yt,K as Zt,a6 as Se,H,M as wt,G as el,ai as ql,bi as tl,bj as Il,bn as zl,bl as Tl,bo as Ht,be as Ue,bp as Ml,bq as Fl,aP as dt,Q as pt,bk as Al,br as $l,b6 as $e,aG as Ol,bd as Bl,am as he,x as kt,_ as Rl,a9 as El,R as Ct,I as Dl,bs as Hl,b1 as Ll,bt as Ql,h as Vt,o as _,a as K,w as g,E as C,e as c,bu as Nl,n as He,p as Kl,u as X,ao as ll,v as xt,j as D,t as ee,m as te,B as fe,F as se,g as be,f as G,av as Ul,y as jl,aw as Wl,bv as Jl,s as je,an as Lt,ax as Xl,aq as Gl,ar as Yl}from"./index.9319c570.js";import{Q as ft}from"./QPageSticky.907b9427.js";import{n as Qt,a as St,e as Zl,f as eo,Q as vt,c as to}from"./index.213ad274.js";import{Q as Oe,d as lo,e as Nt,c as oo,P as ao,j as no,h as We,k as Kt,l as uo}from"./PlayingVideo.3e429941.js";import{d as io,a as Be,Q as Re,e as ro}from"./QMenu.b0ac91b0.js";import{r as bt,e as Ee,Q as so,a as co,d as tt}from"./Setting.415cd06c.js";import{Q as ht}from"./use-page-sticky.02c04e76.js";import{Q as fo}from"./QPagination.7056d780.js";import{f as ol,a as ot,M as al,_ as vo,b as mt,F as Ut,g as gt,D as jt,C as lt}from"./ListEdit.bbf4c5a0.js";import{u as _t,i as j}from"./axios.bad6ef18.js";import{F as nl,Q as mo,S as go,R as yo,C as po,A as So,g as bo,P as ho,h as wo,D as ko,a as Co}from"./searchAPI.054836f6.js";import{a as ul}from"./settingAPI.6ce74979.js";import{F as Vo,u as xo}from"./System.8916f787.js";import{u as at}from"./use-dialog-plugin-component.48cb1180.js";import{u as _o,o as Wt}from"./index.72de99b7.js";const ve=1e3,Po=["start","center","end","start-force","center-force","end-force"],il=Array.prototype.filter,qo=window.getComputedStyle(document.body).overflowAnchor===void 0?xl:function(e,S){e!==null&&(e._qOverflowAnimationFrame!==void 0&&cancelAnimationFrame(e._qOverflowAnimationFrame),e._qOverflowAnimationFrame=requestAnimationFrame(()=>{if(e===null)return;e._qOverflowAnimationFrame=void 0;const v=e.children||[];il.call(v,O=>O.dataset&&O.dataset.qVsAnchor!==void 0).forEach(O=>{delete O.dataset.qVsAnchor});const y=v[S];y&&y.dataset&&(y.dataset.qVsAnchor="")}))};function Le(e,S){return e+S}function yt(e,S,v,y,O,i,P,b){const s=e===window?document.scrollingElement||document.documentElement:e,L=O===!0?"offsetWidth":"offsetHeight",p={scrollStart:0,scrollViewSize:-P-b,scrollMaxSize:0,offsetStart:-P,offsetEnd:-b};if(O===!0?(e===window?(p.scrollStart=window.pageXOffset||window.scrollX||document.body.scrollLeft||0,p.scrollViewSize+=document.documentElement.clientWidth):(p.scrollStart=s.scrollLeft,p.scrollViewSize+=s.clientWidth),p.scrollMaxSize=s.scrollWidth,i===!0&&(p.scrollStart=(bt===!0?p.scrollMaxSize-p.scrollViewSize:0)-p.scrollStart)):(e===window?(p.scrollStart=window.pageYOffset||window.scrollY||document.body.scrollTop||0,p.scrollViewSize+=document.documentElement.clientHeight):(p.scrollStart=s.scrollTop,p.scrollViewSize+=s.clientHeight),p.scrollMaxSize=s.scrollHeight),v!==null)for(let V=v.previousElementSibling;V!==null;V=V.previousElementSibling)V.classList.contains("q-virtual-scroll--skip")===!1&&(p.offsetStart+=V[L]);if(y!==null)for(let V=y.nextElementSibling;V!==null;V=V.nextElementSibling)V.classList.contains("q-virtual-scroll--skip")===!1&&(p.offsetEnd+=V[L]);if(S!==e){const V=s.getBoundingClientRect(),h=S.getBoundingClientRect();O===!0?(p.offsetStart+=h.left-V.left,p.offsetEnd-=h.width):(p.offsetStart+=h.top-V.top,p.offsetEnd-=h.height),e!==window&&(p.offsetStart+=p.scrollStart),p.offsetEnd+=p.scrollMaxSize-p.offsetStart}return p}function Jt(e,S,v,y){S==="end"&&(S=(e===window?document.body:e)[v===!0?"scrollWidth":"scrollHeight"]),e===window?v===!0?(y===!0&&(S=(bt===!0?document.body.scrollWidth-document.documentElement.clientWidth:0)-S),window.scrollTo(S,window.pageYOffset||window.scrollY||document.body.scrollTop||0)):window.scrollTo(window.pageXOffset||window.scrollX||document.body.scrollLeft||0,S):v===!0?(y===!0&&(S=(bt===!0?e.scrollWidth-e.offsetWidth:0)-S),e.scrollLeft=S):e.scrollTop=S}function Je(e,S,v,y){if(v>=y)return 0;const O=S.length,i=Math.floor(v/ve),P=Math.floor((y-1)/ve)+1;let b=e.slice(i,P).reduce(Le,0);return v%ve!==0&&(b-=S.slice(i*ve,v).reduce(Le,0)),y%ve!==0&&y!==O&&(b-=S.slice(y,P*ve).reduce(Le,0)),b}const Io={virtualScrollSliceSize:{type:[Number,String],default:null},virtualScrollSliceRatioBefore:{type:[Number,String],default:1},virtualScrollSliceRatioAfter:{type:[Number,String],default:1},virtualScrollItemSize:{type:[Number,String],default:24},virtualScrollStickySizeStart:{type:[Number,String],default:0},virtualScrollStickySizeEnd:{type:[Number,String],default:0},tableColspan:[Number,String]},zo={virtualScrollHorizontal:Boolean,onVirtualScroll:Function,...Io};function To({virtualScrollLength:e,getVirtualScrollTarget:S,getVirtualScrollEl:v,virtualScrollItemSizeComputed:y}){const O=wt(),{props:i,emit:P,proxy:b}=O,{$q:s}=b;let L,p,V,h=[],u;const a=Q(0),A=Q(0),U=Q({}),B=Q(null),$=Q(null),q=Q(null),w=Q({from:0,to:0}),I=F(()=>i.tableColspan!==void 0?i.tableColspan:100);y===void 0&&(y=F(()=>i.virtualScrollItemSize));const Y=F(()=>y.value+";"+i.virtualScrollHorizontal),ce=F(()=>Y.value+";"+i.virtualScrollSliceRatioBefore+";"+i.virtualScrollSliceRatioAfter);De(ce,()=>{ge()}),De(Y,ie);function ie(){pe(p,!0)}function re(l){pe(l===void 0?p:l)}function R(l,d){const n=S();if(n==null||n.nodeType===8)return;const z=yt(n,v(),B.value,$.value,i.virtualScrollHorizontal,s.lang.rtl,i.virtualScrollStickySizeStart,i.virtualScrollStickySizeEnd);V!==z.scrollViewSize&&ge(z.scrollViewSize),me(n,z,Math.min(e.value-1,Math.max(0,parseInt(l,10)||0)),0,Po.indexOf(d)>-1?d:p>-1&&l>p?"end":"start")}function ne(){const l=S();if(l==null||l.nodeType===8)return;const d=yt(l,v(),B.value,$.value,i.virtualScrollHorizontal,s.lang.rtl,i.virtualScrollStickySizeStart,i.virtualScrollStickySizeEnd),n=e.value-1,z=d.scrollMaxSize-d.offsetStart-d.offsetEnd-A.value;if(L===d.scrollStart)return;if(d.scrollMaxSize<=0){me(l,d,0,0);return}V!==d.scrollViewSize&&ge(d.scrollViewSize),de(w.value.from);const W=Math.floor(d.scrollMaxSize-Math.max(d.scrollViewSize,d.offsetEnd)-Math.min(u[n],d.scrollViewSize/2));if(W>0&&Math.ceil(d.scrollStart)>=W){me(l,d,n,d.scrollMaxSize-d.offsetEnd-h.reduce(Le,0));return}let M=0,k=d.scrollStart-d.offsetStart,Z=k;if(k<=z&&k+d.scrollViewSize>=a.value)k-=a.value,M=w.value.from,Z=k;else for(let T=0;k>=h[T]&&M<n;T++)k-=h[T],M+=ve;for(;k>0&&M<n;)k-=u[M],k>-d.scrollViewSize?(M++,Z=k):Z=u[M]+k;me(l,d,M,Z)}function me(l,d,n,z,W){const M=typeof W=="string"&&W.indexOf("-force")>-1,k=M===!0?W.replace("-force",""):W,Z=k!==void 0?k:"start";let T=Math.max(0,n-U.value[Z]),oe=T+U.value.total;oe>e.value&&(oe=e.value,T=Math.max(0,oe-U.value.total)),L=d.scrollStart;const Pe=T!==w.value.from||oe!==w.value.to;if(Pe===!1&&k===void 0){ke(n);return}const{activeElement:Qe}=document,ye=q.value;Pe===!0&&ye!==null&&ye!==Qe&&ye.contains(Qe)===!0&&(ye.addEventListener("focusout",we),setTimeout(()=>{ye!==null&&ye.removeEventListener("focusout",we)})),qo(ye,n-T);const Xe=k!==void 0?u.slice(T,n).reduce(Le,0):0;if(Pe===!0){const Ce=oe>=w.value.from&&T<=w.value.to?w.value.to:oe;w.value={from:T,to:Ce},a.value=Je(h,u,0,T),A.value=Je(h,u,oe,e.value),requestAnimationFrame(()=>{w.value.to!==oe&&L===d.scrollStart&&(w.value={from:w.value.from,to:oe},A.value=Je(h,u,oe,e.value))})}requestAnimationFrame(()=>{if(L!==d.scrollStart)return;Pe===!0&&de(T);const Ce=u.slice(T,n).reduce(Le,0),qe=Ce+d.offsetStart+a.value,Ge=qe+u[n];let Ne=qe+z;if(k!==void 0){const nt=Ce-Xe,ae=d.scrollStart+nt;Ne=M!==!0&&ae<qe&&Ge<ae+d.scrollViewSize?ae:k==="end"?Ge-d.scrollViewSize:qe-(k==="start"?0:Math.round((d.scrollViewSize-u[n])/2))}L=Ne,Jt(l,Ne,i.virtualScrollHorizontal,s.lang.rtl),ke(n)})}function de(l){const d=q.value;if(d){const n=il.call(d.children,T=>T.classList&&T.classList.contains("q-virtual-scroll--skip")===!1),z=n.length,W=i.virtualScrollHorizontal===!0?T=>T.getBoundingClientRect().width:T=>T.offsetHeight;let M=l,k,Z;for(let T=0;T<z;){for(k=W(n[T]),T++;T<z&&n[T].classList.contains("q-virtual-scroll--with-prev")===!0;)k+=W(n[T]),T++;Z=k-u[M],Z!==0&&(u[M]+=Z,h[Math.floor(M/ve)]+=Z),M++}}}function we(){q.value!==null&&q.value!==void 0&&q.value.focus()}function pe(l,d){const n=1*y.value;(d===!0||Array.isArray(u)===!1)&&(u=[]);const z=u.length;u.length=e.value;for(let M=e.value-1;M>=z;M--)u[M]=n;const W=Math.floor((e.value-1)/ve);h=[];for(let M=0;M<=W;M++){let k=0;const Z=Math.min((M+1)*ve,e.value);for(let T=M*ve;T<Z;T++)k+=u[T];h.push(k)}p=-1,L=void 0,a.value=Je(h,u,0,w.value.from),A.value=Je(h,u,w.value.to,e.value),l>=0?(de(w.value.from),Se(()=>{R(l)})):m()}function ge(l){if(l===void 0&&typeof window!="undefined"){const k=S();k!=null&&k.nodeType!==8&&(l=yt(k,v(),B.value,$.value,i.virtualScrollHorizontal,s.lang.rtl,i.virtualScrollStickySizeStart,i.virtualScrollStickySizeEnd).scrollViewSize)}V=l;const d=parseFloat(i.virtualScrollSliceRatioBefore)||0,n=parseFloat(i.virtualScrollSliceRatioAfter)||0,z=1+d+n,W=l===void 0||l<=0?1:Math.ceil(l/y.value),M=Math.max(1,W,Math.ceil((i.virtualScrollSliceSize>0?i.virtualScrollSliceSize:10)/z));U.value={total:Math.ceil(M*z),start:Math.ceil(M*d),center:Math.ceil(M*(.5+d)),end:Math.ceil(M*(1+d)),view:W}}function _e(l,d){const n=i.virtualScrollHorizontal===!0?"width":"height",z={["--q-virtual-scroll-item-"+n]:y.value+"px"};return[l==="tbody"?H(l,{class:"q-virtual-scroll__padding",key:"before",ref:B},[H("tr",[H("td",{style:{[n]:`${a.value}px`,...z},colspan:I.value})])]):H(l,{class:"q-virtual-scroll__padding",key:"before",ref:B,style:{[n]:`${a.value}px`,...z}}),H(l,{class:"q-virtual-scroll__content",key:"content",ref:q,tabindex:-1},d.flat()),l==="tbody"?H(l,{class:"q-virtual-scroll__padding",key:"after",ref:$},[H("tr",[H("td",{style:{[n]:`${A.value}px`,...z},colspan:I.value})])]):H(l,{class:"q-virtual-scroll__padding",key:"after",ref:$,style:{[n]:`${A.value}px`,...z}})]}function ke(l){p!==l&&(i.onVirtualScroll!==void 0&&P("virtualScroll",{index:l,from:w.value.from,to:w.value.to-1,direction:l<p?"decrease":"increase",ref:b}),p=l)}ge();const m=_l(ne,s.platform.is.ios===!0?120:35);Pl(()=>{ge()});let o=!1;return Gt(()=>{o=!0}),Yt(()=>{if(o!==!0)return;const l=S();L!==void 0&&l!==void 0&&l!==null&&l.nodeType!==8?Jt(l,L,i.virtualScrollHorizontal,s.lang.rtl):R(p)}),Zt(()=>{m.cancel()}),Object.assign(b,{scrollTo:R,reset:ie,refresh:re}),{virtualScrollSliceRange:w,virtualScrollSliceSizeComputed:U,setVirtualScrollSize:ge,onVirtualScrollEvt:m,localResetVirtualScroll:pe,padVirtualScroll:_e,scrollTo:R,reset:ie,refresh:re}}const Xt=e=>["add","add-unique","toggle"].includes(e),Mo=".*+?^${}()|[]\\",Fo=Object.keys(tl);var Ao=el({name:"QSelect",inheritAttrs:!1,props:{...zo,...ql,...tl,modelValue:{required:!0},multiple:Boolean,displayValue:[String,Number],displayValueHtml:Boolean,dropdownIcon:String,options:{type:Array,default:()=>[]},optionValue:[Function,String],optionLabel:[Function,String],optionDisable:[Function,String],hideSelected:Boolean,hideDropdownIcon:Boolean,fillInput:Boolean,maxValues:[Number,String],optionsDense:Boolean,optionsDark:{type:Boolean,default:null},optionsSelectedClass:String,optionsHtml:Boolean,optionsCover:Boolean,menuShrink:Boolean,menuAnchor:String,menuSelf:String,menuOffset:Array,popupContentClass:String,popupContentStyle:[String,Array,Object],useInput:Boolean,useChips:Boolean,newValueMode:{type:String,validator:Xt},mapOptions:Boolean,emitValue:Boolean,inputDebounce:{type:[Number,String],default:500},inputClass:[Array,String,Object],inputStyle:[Array,String,Object],tabindex:{type:[String,Number],default:0},autocomplete:String,transitionShow:String,transitionHide:String,transitionDuration:[String,Number],behavior:{type:String,validator:e=>["default","menu","dialog"].includes(e),default:"default"},virtualScrollItemSize:{type:[Number,String],default:void 0},onNewValue:Function,onFilter:Function},emits:[...Il,"add","remove","inputValue","newValue","keyup","keypress","keydown","filterAbort"],setup(e,{slots:S,emit:v}){const{proxy:y}=wt(),{$q:O}=y,i=Q(!1),P=Q(!1),b=Q(-1),s=Q(""),L=Q(!1),p=Q(!1);let V=null,h,u,a,A=null,U,B,$,q;const w=Q(null),I=Q(null),Y=Q(null),ce=Q(null),ie=Q(null),re=zl(e),R=$l(Ot),ne=F(()=>Array.isArray(e.options)?e.options.length:0),me=F(()=>e.virtualScrollItemSize===void 0?e.optionsDense===!0?24:48:e.virtualScrollItemSize),{virtualScrollSliceRange:de,virtualScrollSliceSizeComputed:we,localResetVirtualScroll:pe,padVirtualScroll:ge,onVirtualScrollEvt:_e,scrollTo:ke,setVirtualScrollSize:m}=To({virtualScrollLength:ne,getVirtualScrollTarget:fl,getVirtualScrollEl:At,virtualScrollItemSizeComputed:me}),o=Tl(),l=F(()=>{const t=e.mapOptions===!0&&e.multiple!==!0,f=e.modelValue!==void 0&&(e.modelValue!==null||t===!0)?e.multiple===!0&&Array.isArray(e.modelValue)?e.modelValue:[e.modelValue]:[];if(e.mapOptions===!0&&Array.isArray(e.options)===!0){const r=e.mapOptions===!0&&h!==void 0?h:[],x=f.map(N=>dl(N,r));return e.modelValue===null&&t===!0?x.filter(N=>N!==null):x}return f}),d=F(()=>{const t={};return Fo.forEach(f=>{const r=e[f];r!==void 0&&(t[f]=r)}),t}),n=F(()=>e.optionsDark===null?o.isDark.value:e.optionsDark),z=F(()=>Ht(l.value)),W=F(()=>{let t="q-field__input q-placeholder col";return e.hideSelected===!0||l.value.length===0?[t,e.inputClass]:(t+=" q-field__input--padding",e.inputClass===void 0?t:[t,e.inputClass])}),M=F(()=>(e.virtualScrollHorizontal===!0?"q-virtual-scroll--horizontal":"")+(e.popupContentClass?" "+e.popupContentClass:"")),k=F(()=>ne.value===0),Z=F(()=>l.value.map(t=>ue.value(t)).join(", ")),T=F(()=>e.displayValue!==void 0?e.displayValue:Z.value),oe=F(()=>e.optionsHtml===!0?()=>!0:t=>t!=null&&t.html===!0),Pe=F(()=>e.displayValueHtml===!0||e.displayValue===void 0&&(e.optionsHtml===!0||l.value.some(oe.value))),Qe=F(()=>o.focused.value===!0?e.tabindex:-1),ye=F(()=>{const t={tabindex:e.tabindex,role:"combobox","aria-label":e.label,"aria-readonly":e.readonly===!0?"true":"false","aria-autocomplete":e.useInput===!0?"list":"none","aria-expanded":i.value===!0?"true":"false","aria-controls":`${o.targetUid.value}_lb`};return b.value>=0&&(t["aria-activedescendant"]=`${o.targetUid.value}_${b.value}`),t}),Xe=F(()=>({id:`${o.targetUid.value}_lb`,role:"listbox","aria-multiselectable":e.multiple===!0?"true":"false"})),Ce=F(()=>l.value.map((t,f)=>({index:f,opt:t,html:oe.value(t),selected:!0,removeAtIndex:cl,toggleOption:Ve,tabindex:Qe.value}))),qe=F(()=>{if(ne.value===0)return[];const{from:t,to:f}=de.value;return e.options.slice(t,f).map((r,x)=>{const N=Ie.value(r)===!0,E=t+x,J={clickable:!0,active:!1,activeClass:nt.value,manualFocus:!0,focused:!1,disable:N,tabindex:-1,dense:e.optionsDense,dark:n.value,role:"option",id:`${o.targetUid.value}_${E}`,onClick:()=>{Ve(r)}};return N!==!0&&(rt(r)===!0&&(J.active=!0),b.value===E&&(J.focused=!0),J["aria-selected"]=J.active===!0?"true":"false",O.platform.is.desktop===!0&&(J.onMousemove=()=>{i.value===!0&&ze(E)})),{index:E,opt:r,html:oe.value(r),label:ue.value(r),selected:J.active,focused:J.focused,toggleOption:Ve,setOptionIndex:ze,itemProps:J}})}),Ge=F(()=>e.dropdownIcon!==void 0?e.dropdownIcon:O.iconSet.arrow.dropdown),Ne=F(()=>e.optionsCover===!1&&e.outlined!==!0&&e.standout!==!0&&e.borderless!==!0&&e.rounded!==!0),nt=F(()=>e.optionsSelectedClass!==void 0?e.optionsSelectedClass:e.color!==void 0?`text-${e.color}`:""),ae=F(()=>it(e.optionValue,"value")),ue=F(()=>it(e.optionLabel,"label")),Ie=F(()=>it(e.optionDisable,"disable")),Ye=F(()=>l.value.map(t=>ae.value(t))),sl=F(()=>{const t={onInput:Ot,onChange:R,onKeydown:Ft,onKeyup:Tt,onKeypress:Mt,onFocus:It,onClick(f){u===!0&&$e(f)}};return t.onCompositionstart=t.onCompositionupdate=t.onCompositionend=R,t});De(l,t=>{h=t,e.useInput===!0&&e.fillInput===!0&&e.multiple!==!0&&o.innerLoading.value!==!0&&(P.value!==!0&&i.value!==!0||z.value!==!0)&&(a!==!0&&Ae(),(P.value===!0||i.value===!0)&&Te(""))},{immediate:!0}),De(()=>e.fillInput,Ae),De(i,st),De(ne,Vl);function Pt(t){return e.emitValue===!0?ae.value(t):t}function ut(t){if(t>-1&&t<l.value.length)if(e.multiple===!0){const f=e.modelValue.slice();v("remove",{index:t,value:f.splice(t,1)[0]}),v("update:modelValue",f)}else v("update:modelValue",null)}function cl(t){ut(t),o.focus()}function qt(t,f){const r=Pt(t);if(e.multiple!==!0){e.fillInput===!0&&Ke(ue.value(t),!0,!0),v("update:modelValue",r);return}if(l.value.length===0){v("add",{index:0,value:r}),v("update:modelValue",e.multiple===!0?[r]:r);return}if(f===!0&&rt(t)===!0||e.maxValues!==void 0&&e.modelValue.length>=e.maxValues)return;const x=e.modelValue.slice();v("add",{index:x.length,value:r}),x.push(r),v("update:modelValue",x)}function Ve(t,f){if(o.editable.value!==!0||t===void 0||Ie.value(t)===!0)return;const r=ae.value(t);if(e.multiple!==!0){f!==!0&&(Ke(e.fillInput===!0?ue.value(t):"",!0,!0),xe()),I.value!==null&&I.value.focus(),(l.value.length===0||Ue(ae.value(l.value[0]),r)!==!0)&&v("update:modelValue",e.emitValue===!0?r:t);return}if((u!==!0||L.value===!0)&&o.focus(),It(),l.value.length===0){const E=e.emitValue===!0?r:t;v("add",{index:0,value:E}),v("update:modelValue",e.multiple===!0?[E]:E);return}const x=e.modelValue.slice(),N=Ye.value.findIndex(E=>Ue(E,r));if(N>-1)v("remove",{index:N,value:x.splice(N,1)[0]});else{if(e.maxValues!==void 0&&x.length>=e.maxValues)return;const E=e.emitValue===!0?r:t;v("add",{index:x.length,value:E}),x.push(E)}v("update:modelValue",x)}function ze(t){if(O.platform.is.desktop!==!0)return;const f=t>-1&&t<ne.value?t:-1;b.value!==f&&(b.value=f)}function Ze(t=1,f){if(i.value===!0){let r=b.value;do r=Qt(r+t,-1,ne.value-1);while(r!==-1&&r!==b.value&&Ie.value(e.options[r])===!0);b.value!==r&&(ze(r),ke(r),f!==!0&&e.useInput===!0&&e.fillInput===!0&&et(r>=0?ue.value(e.options[r]):U))}}function dl(t,f){const r=x=>Ue(ae.value(x),t);return e.options.find(r)||f.find(r)||t}function it(t,f){const r=t!==void 0?t:f;return typeof r=="function"?r:x=>x!==null&&typeof x=="object"&&r in x?x[r]:x}function rt(t){const f=ae.value(t);return Ye.value.find(r=>Ue(r,f))!==void 0}function It(t){e.useInput===!0&&I.value!==null&&(t===void 0||I.value===t.target&&t.target.value===Z.value)&&I.value.select()}function zt(t){Ol(t,27)===!0&&i.value===!0&&($e(t),xe(),Ae()),v("keyup",t)}function Tt(t){const{value:f}=t.target;if(t.keyCode!==void 0){zt(t);return}if(t.target.value="",V!==null&&(clearTimeout(V),V=null),Ae(),typeof f=="string"&&f.length!==0){const r=f.toLocaleLowerCase(),x=E=>{const J=e.options.find(le=>E.value(le).toLocaleLowerCase()===r);return J===void 0?!1:(l.value.indexOf(J)===-1?Ve(J):xe(),!0)},N=E=>{x(ae)!==!0&&(x(ue)===!0||E===!0||Te(f,!0,()=>N(!0)))};N()}else o.clearValue(t)}function Mt(t){v("keypress",t)}function Ft(t){if(v("keydown",t),Bl(t)===!0)return;const f=s.value.length!==0&&(e.newValueMode!==void 0||e.onNewValue!==void 0),r=t.shiftKey!==!0&&e.multiple!==!0&&(b.value>-1||f===!0);if(t.keyCode===27){dt(t);return}if(t.keyCode===9&&r===!1){Me();return}if(t.target===void 0||t.target.id!==o.targetUid.value||o.editable.value!==!0)return;if(t.keyCode===40&&o.innerLoading.value!==!0&&i.value===!1){he(t),Fe();return}if(t.keyCode===8&&e.hideSelected!==!0&&s.value.length===0){e.multiple===!0&&Array.isArray(e.modelValue)===!0?ut(e.modelValue.length-1):e.multiple!==!0&&e.modelValue!==null&&v("update:modelValue",null);return}(t.keyCode===35||t.keyCode===36)&&(typeof s.value!="string"||s.value.length===0)&&(he(t),b.value=-1,Ze(t.keyCode===36?1:-1,e.multiple)),(t.keyCode===33||t.keyCode===34)&&we.value!==void 0&&(he(t),b.value=Math.max(-1,Math.min(ne.value,b.value+(t.keyCode===33?-1:1)*we.value.view)),Ze(t.keyCode===33?1:-1,e.multiple)),(t.keyCode===38||t.keyCode===40)&&(he(t),Ze(t.keyCode===38?-1:1,e.multiple));const x=ne.value;if(($===void 0||q<Date.now())&&($=""),x>0&&e.useInput!==!0&&t.key!==void 0&&t.key.length===1&&t.altKey===!1&&t.ctrlKey===!1&&t.metaKey===!1&&(t.keyCode!==32||$.length!==0)){i.value!==!0&&Fe(t);const N=t.key.toLocaleLowerCase(),E=$.length===1&&$[0]===N;q=Date.now()+1500,E===!1&&(he(t),$+=N);const J=new RegExp("^"+$.split("").map(ct=>Mo.indexOf(ct)>-1?"\\"+ct:ct).join(".*"),"i");let le=b.value;if(E===!0||le<0||J.test(ue.value(e.options[le]))!==!0)do le=Qt(le+1,-1,x-1);while(le!==b.value&&(Ie.value(e.options[le])===!0||J.test(ue.value(e.options[le]))!==!0));b.value!==le&&Se(()=>{ze(le),ke(le),le>=0&&e.useInput===!0&&e.fillInput===!0&&et(ue.value(e.options[le]))});return}if(!(t.keyCode!==13&&(t.keyCode!==32||e.useInput===!0||$!=="")&&(t.keyCode!==9||r===!1))){if(t.keyCode!==9&&he(t),b.value>-1&&b.value<x){Ve(e.options[b.value]);return}if(f===!0){const N=(E,J)=>{if(J){if(Xt(J)!==!0)return}else J=e.newValueMode;if(Ke("",e.multiple!==!0,!0),E==null)return;(J==="toggle"?Ve:qt)(E,J==="add-unique"),e.multiple!==!0&&(I.value!==null&&I.value.focus(),xe())};if(e.onNewValue!==void 0?v("newValue",s.value,N):N(s.value),e.multiple!==!0)return}i.value===!0?Me():o.innerLoading.value!==!0&&Fe()}}function At(){return u===!0?ie.value:Y.value!==null&&Y.value.contentEl!==null?Y.value.contentEl:void 0}function fl(){return At()}function vl(){return e.hideSelected===!0?[]:S["selected-item"]!==void 0?Ce.value.map(t=>S["selected-item"](t)).slice():S.selected!==void 0?[].concat(S.selected()):e.useChips===!0?Ce.value.map((t,f)=>H(ht,{key:"option-"+f,removable:o.editable.value===!0&&Ie.value(t.opt)!==!0,dense:!0,textColor:e.color,tabindex:Qe.value,onRemove(){t.removeAtIndex(f)}},()=>H("span",{class:"ellipsis",[t.html===!0?"innerHTML":"textContent"]:ue.value(t.opt)}))):[H("span",{[Pe.value===!0?"innerHTML":"textContent"]:T.value})]}function $t(){if(k.value===!0)return S["no-option"]!==void 0?S["no-option"]({inputValue:s.value}):void 0;const t=S.option!==void 0?S.option:r=>H(Re,{key:r.index,...r.itemProps},()=>H(Be,()=>H(Oe,()=>H("span",{[r.html===!0?"innerHTML":"textContent"]:r.label}))));let f=ge("div",qe.value.map(t));return S["before-options"]!==void 0&&(f=S["before-options"]().concat(f)),Rl(S["after-options"],f)}function ml(t,f){const r=f===!0?{...ye.value,...o.splitAttrs.attributes.value}:void 0,x={ref:f===!0?I:void 0,key:"i_t",class:W.value,style:e.inputStyle,value:s.value!==void 0?s.value:"",type:"search",...r,id:f===!0?o.targetUid.value:void 0,maxlength:e.maxlength,autocomplete:e.autocomplete,"data-autofocus":t===!0||e.autofocus===!0||void 0,disabled:e.disable===!0,readonly:e.readonly===!0,...sl.value};return t!==!0&&u===!0&&(Array.isArray(x.class)===!0?x.class=[...x.class,"no-pointer-events"]:x.class+=" no-pointer-events"),H("input",x)}function Ot(t){V!==null&&(clearTimeout(V),V=null),!(t&&t.target&&t.target.qComposing===!0)&&(et(t.target.value||""),a=!0,U=s.value,o.focused.value!==!0&&(u!==!0||L.value===!0)&&o.focus(),e.onFilter!==void 0&&(V=setTimeout(()=>{V=null,Te(s.value)},e.inputDebounce)))}function et(t){s.value!==t&&(s.value=t,v("inputValue",t))}function Ke(t,f,r){a=r!==!0,e.useInput===!0&&(et(t),(f===!0||r!==!0)&&(U=t),f!==!0&&Te(t))}function Te(t,f,r){if(e.onFilter===void 0||f!==!0&&o.focused.value!==!0)return;o.innerLoading.value===!0?v("filterAbort"):(o.innerLoading.value=!0,p.value=!0),t!==""&&e.multiple!==!0&&l.value.length!==0&&a!==!0&&t===ue.value(l.value[0])&&(t="");const x=setTimeout(()=>{i.value===!0&&(i.value=!1)},10);A!==null&&clearTimeout(A),A=x,v("filter",t,(N,E)=>{(f===!0||o.focused.value===!0)&&A===x&&(clearTimeout(A),typeof N=="function"&&N(),p.value=!1,Se(()=>{o.innerLoading.value=!1,o.editable.value===!0&&(f===!0?i.value===!0&&xe():i.value===!0?st(!0):i.value=!0),typeof E=="function"&&Se(()=>{E(y)}),typeof r=="function"&&Se(()=>{r(y)})}))},()=>{o.focused.value===!0&&A===x&&(clearTimeout(A),o.innerLoading.value=!1,p.value=!1),i.value===!0&&(i.value=!1)})}function gl(){return H(io,{ref:Y,class:M.value,style:e.popupContentStyle,modelValue:i.value,fit:e.menuShrink!==!0,cover:e.optionsCover===!0&&k.value!==!0&&e.useInput!==!0,anchor:e.menuAnchor,self:e.menuSelf,offset:e.menuOffset,dark:n.value,noParentEvent:!0,noRefocus:!0,noFocus:!0,square:Ne.value,transitionShow:e.transitionShow,transitionHide:e.transitionHide,transitionDuration:e.transitionDuration,separateClosePopup:!0,...Xe.value,onScrollPassive:_e,onBeforeShow:Rt,onBeforeHide:yl,onShow:pl},$t)}function yl(t){Et(t),Me()}function pl(){m()}function Sl(t){$e(t),I.value!==null&&I.value.focus(),L.value=!0,window.scrollTo(window.pageXOffset||window.scrollX||document.body.scrollLeft||0,0)}function bl(t){$e(t),Se(()=>{L.value=!1})}function hl(){const t=[H(Ee,{class:`col-auto ${o.fieldClass.value}`,...d.value,for:o.targetUid.value,dark:n.value,square:!0,loading:p.value,itemAligned:!1,filled:!0,stackLabel:s.value.length!==0,...o.splitAttrs.listeners.value,onFocus:Sl,onBlur:bl},{...S,rawControl:()=>o.getControl(!0),before:void 0,after:void 0})];return i.value===!0&&t.push(H("div",{ref:ie,class:M.value+" scroll",style:e.popupContentStyle,...Xe.value,onClick:dt,onScrollPassive:_e},$t())),H(kt,{ref:ce,modelValue:P.value,position:e.useInput===!0?"top":void 0,transitionShow:B,transitionHide:e.transitionHide,transitionDuration:e.transitionDuration,onBeforeShow:Rt,onBeforeHide:wl,onHide:kl,onShow:Cl},()=>H("div",{class:"q-select__dialog"+(n.value===!0?" q-select__dialog--dark q-dark":"")+(L.value===!0?" q-select__dialog--focused":"")},t))}function wl(t){Et(t),ce.value!==null&&ce.value.__updateRefocusTarget(o.rootRef.value.querySelector(".q-field__native > [tabindex]:last-child")),o.focused.value=!1}function kl(t){xe(),o.focused.value===!1&&v("blur",t),Ae()}function Cl(){const t=document.activeElement;(t===null||t.id!==o.targetUid.value)&&I.value!==null&&I.value!==t&&I.value.focus(),m()}function Me(){P.value!==!0&&(b.value=-1,i.value===!0&&(i.value=!1),o.focused.value===!1&&(A!==null&&(clearTimeout(A),A=null),o.innerLoading.value===!0&&(v("filterAbort"),o.innerLoading.value=!1,p.value=!1)))}function Fe(t){o.editable.value===!0&&(u===!0?(o.onControlFocusin(t),P.value=!0,Se(()=>{o.focus()})):o.focus(),e.onFilter!==void 0?Te(s.value):(k.value!==!0||S["no-option"]!==void 0)&&(i.value=!0))}function xe(){P.value=!1,Me()}function Ae(){e.useInput===!0&&Ke(e.multiple!==!0&&e.fillInput===!0&&l.value.length!==0&&ue.value(l.value[0])||"",!0,!0)}function st(t){let f=-1;if(t===!0){if(l.value.length!==0){const r=ae.value(l.value[0]);f=e.options.findIndex(x=>Ue(ae.value(x),r))}pe(f)}ze(f)}function Vl(t,f){i.value===!0&&o.innerLoading.value===!1&&(pe(-1,!0),Se(()=>{i.value===!0&&o.innerLoading.value===!1&&(t>f?pe():st(!0))}))}function Bt(){P.value===!1&&Y.value!==null&&Y.value.updatePosition()}function Rt(t){t!==void 0&&$e(t),v("popupShow",t),o.hasPopupOpen=!0,o.onControlFocusin(t)}function Et(t){t!==void 0&&$e(t),v("popupHide",t),o.hasPopupOpen=!1,o.onControlFocusout(t)}function Dt(){u=O.platform.is.mobile!==!0&&e.behavior!=="dialog"?!1:e.behavior!=="menu"&&(e.useInput===!0?S["no-option"]!==void 0||e.onFilter!==void 0||k.value===!1:!0),B=O.platform.is.ios===!0&&u===!0&&e.useInput===!0?"fade":e.transitionShow}return Ml(Dt),Fl(Bt),Dt(),Zt(()=>{V!==null&&clearTimeout(V)}),Object.assign(y,{showPopup:Fe,hidePopup:xe,removeAtIndex:ut,add:qt,toggleOption:Ve,getOptionIndex:()=>b.value,setOptionIndex:ze,moveOptionSelection:Ze,filter:Te,updateMenuPosition:Bt,updateInputValue:Ke,isOptionSelected:rt,getEmittingOptionValue:Pt,isOptionDisabled:(...t)=>Ie.value.apply(null,t)===!0,getOptionValue:(...t)=>ae.value.apply(null,t),getOptionLabel:(...t)=>ue.value.apply(null,t)}),Object.assign(o,{innerValue:l,fieldClass:F(()=>`q-select q-field--auto-height q-select--with${e.useInput!==!0?"out":""}-input q-select--with${e.useChips!==!0?"out":""}-chips q-select--${e.multiple===!0?"multiple":"single"}`),inputRef:w,targetRef:I,hasValue:z,showPopup:Fe,floatingLabel:F(()=>e.hideSelected!==!0&&z.value===!0||typeof s.value=="number"||s.value.length!==0||Ht(e.displayValue)),getControlChild:()=>{if(o.editable.value!==!1&&(P.value===!0||k.value!==!0||S["no-option"]!==void 0))return u===!0?hl():gl();o.hasPopupOpen===!0&&(o.hasPopupOpen=!1)},controlEvents:{onFocusin(t){o.onControlFocusin(t)},onFocusout(t){o.onControlFocusout(t,()=>{Ae(),Me()})},onClick(t){if(dt(t),u!==!0&&i.value===!0){Me(),I.value!==null&&I.value.focus();return}Fe(t)}},getControl:t=>{const f=vl(),r=t===!0||P.value!==!0||u!==!0;if(e.useInput===!0)f.push(ml(t,r));else if(o.editable.value===!0){const N=r===!0?ye.value:void 0;f.push(H("input",{ref:r===!0?I:void 0,key:"d_t",class:"q-select__focus-target",id:r===!0?o.targetUid.value:void 0,value:T.value,readonly:!0,"data-autofocus":t===!0||e.autofocus===!0||void 0,...N,onKeydown:Ft,onKeyup:zt,onKeypress:Mt})),r===!0&&typeof e.autocomplete=="string"&&e.autocomplete.length!==0&&f.push(H("input",{class:"q-select__autocomplete-input",autocomplete:e.autocomplete,tabindex:-1,onKeyup:Tt}))}if(re.value!==void 0&&e.disable!==!0&&Ye.value.length!==0){const N=Ye.value.map(E=>H("option",{value:E,selected:!0}));f.push(H("select",{class:"hidden",name:re.value,multiple:e.multiple},N))}const x=e.useInput===!0||r!==!0?void 0:o.splitAttrs.attributes.value;return H("div",{class:"q-field__native row items-center",...x,...o.splitAttrs.listeners.value},f)},getInnerAppend:()=>e.loading!==!0&&p.value!==!0&&e.hideDropdownIcon!==!0?[H(pt,{class:"q-select__dropdown-icon"+(i.value===!0?" rotate-180":""),name:Ge.value})]:null}),Al(o)}}),$o=el({name:"QForm",props:{autofocus:Boolean,noErrorFocus:Boolean,noResetFocus:Boolean,greedy:Boolean,onSubmit:Function},emits:["reset","validationSuccess","validationError"],setup(e,{slots:S,emit:v}){const y=wt(),O=Q(null);let i=0;const P=[];function b(u){const a=typeof u=="boolean"?u:e.noErrorFocus!==!0,A=++i,U=(q,w)=>{v("validation"+(q===!0?"Success":"Error"),w)},B=q=>{const w=q.validate();return typeof w.then=="function"?w.then(I=>({valid:I,comp:q}),I=>({valid:!1,comp:q,err:I})):Promise.resolve({valid:w,comp:q})};return(e.greedy===!0?Promise.all(P.map(B)).then(q=>q.filter(w=>w.valid!==!0)):P.reduce((q,w)=>q.then(()=>B(w).then(I=>{if(I.valid===!1)return Promise.reject(I)})),Promise.resolve()).catch(q=>[q])).then(q=>{if(q===void 0||q.length===0)return A===i&&U(!0),!0;if(A===i){const{comp:w,err:I}=q[0];if(I!==void 0&&console.error(I),U(!1,w),a===!0){const Y=q.find(({comp:ce})=>typeof ce.focus=="function"&&Hl(ce.$)===!1);Y!==void 0&&Y.comp.focus()}}return!1})}function s(){i++,P.forEach(u=>{typeof u.resetValidation=="function"&&u.resetValidation()})}function L(u){u!==void 0&&he(u);const a=i+1;b().then(A=>{a===i&&A===!0&&(e.onSubmit!==void 0?v("submit",u):u!==void 0&&u.target!==void 0&&typeof u.target.submit=="function"&&u.target.submit())})}function p(u){u!==void 0&&he(u),v("reset"),Se(()=>{s(),e.autofocus===!0&&e.noResetFocus!==!0&&V()})}function V(){Ll(()=>{if(O.value===null)return;const u=O.value.querySelector("[autofocus][tabindex], [data-autofocus][tabindex]")||O.value.querySelector("[autofocus] [tabindex], [data-autofocus] [tabindex]")||O.value.querySelector("[autofocus], [data-autofocus]")||Array.prototype.find.call(O.value.querySelectorAll("[tabindex]"),a=>a.tabIndex>-1);u!=null&&u.focus({preventScroll:!0})})}El(Ql,{bindComponent(u){P.push(u)},unbindComponent(u){const a=P.indexOf(u);a>-1&&P.splice(a,1)}});let h=!1;return Gt(()=>{h=!0}),Yt(()=>{h===!0&&e.autofocus===!0&&V()}),Ct(()=>{e.autofocus===!0&&V()}),Object.assign(y.proxy,{validate:b,resetValidation:s,submit:L,reset:p,focus:V,getValidationComponents:()=>P}),()=>H("form",{class:"q-form",ref:O,onSubmit:L,onReset:p},Dl(S.default))}});const Oo={__name:"FileEdit",emits:[...at.emits],setup(e,{expose:S}){const v=_t(),y=Vt({item:null,callback:null}),O=(V,h)=>{y.item=new Vo().fromObject(V),y.item.Jpg=null,y.item.Code=ol(V.Code),y.item.Title=ot(V.Title),y.callback=h,b.value.show()},i=async()=>{await P(!0)},P=async V=>{const{Id:h,Title:u,Code:a,Actress:A,FileType:U,MovieType:B,Jpg:$}=y.item;let q=a.trim();q&&q.indexOf("-")<0&&(q="-"+q);let w="";A.length!=0&&(w+="["+A.trim()+"]"),q.length!=0&&(w+=" ["+q.trim()+"]"),B&&B!="\u65E0"&&w.indexOf("{{")<0&&(w+=`{{${B}}}`);const I=u.trim().split("."),Y=I.length;for(let re=0;re<Y;re++){const R=I[re];w+=R.replace(R.charAt(0),R.charAt(0).toUpperCase())}w.indexOf("."+U)<0&&(w+="."+U);const ie=await nl({Id:h,Name:w,Code:q,Title:u,Actress:A,MoveOut:V,Jpg:$,NoRefresh:!0});ie.Code==200?(L(),y.callback&&y.callback()):v.notify({type:"negative",message:ie.Message})},{dialogRef:b,onDialogHide:s,onDialogOK:L,onDialogCancel:p}=at();return S({open:O}),(V,h)=>(_(),K(kt,{ref_key:"dialogRef",ref:b,onHide:C(s)},{default:g(()=>[c(xt,{class:"q-dialog-plugin q-pa-md",style:ll({width:"600px",backgroundImage:"linear-gradient(to left, rgba(255,255,255,0.1), rgba(255,255,255,0.1))"})},{default:g(()=>[c($o,{class:"q-gutter-md"},{default:g(()=>[c(Nl,{modelValue:y.item.MovieType,"onUpdate:modelValue":h[0]||(h[0]=u=>y.item.MovieType=u),options:C(al),color:"primary",inline:""},null,8,["modelValue","options"]),c(He,{label:"\u7F16\u7801",autogrow:"",modelValue:y.item.Code,"onUpdate:modelValue":h[1]||(h[1]=u=>y.item.Code=u),dense:!1},null,8,["modelValue"]),c(He,{label:"\u56FE\u9274",autogrow:"",modelValue:y.item.Actress,"onUpdate:modelValue":h[2]||(h[2]=u=>y.item.Actress=u),dense:!1},null,8,["modelValue"]),c(He,{label:"\u540D\u79F0",autogrow:"",modelValue:y.item.Title,"onUpdate:modelValue":h[3]||(h[3]=u=>y.item.Title=u),dense:!1},null,8,["modelValue"]),c(He,{label:"\u56FE\u7247\u5730\u5740",autogrow:"",modelValue:y.item.Jpg,"onUpdate:modelValue":h[4]||(h[4]=u=>y.item.Jpg=u),dense:!1},null,8,["modelValue"])]),_:1}),c(Kl,{align:"right"},{default:g(()=>[c(X,{color:"primary",label:"\u79FB\u52A8",onClick:i}),c(X,{color:"primary",label:"\u547D\u540D",onClick:h[5]||(h[5]=()=>{P(!1)})}),c(X,{color:"primary",label:"\u5173\u95ED",onClick:C(p)},null,8,["onClick"])]),_:1})]),_:1},8,["style"])]),_:1},8,["onHide"]))}},Bo={style:{"max-width":"50vw",height:"1.5rem",overflow:"hidden"}},Ro={key:0,style:{overflow:"auto"}},Eo=["src"],Do={key:1},Ho={key:2},Lo={class:"self-center full-width no-outline",tabindex:"0"},Qo={class:"self-center full-width no-outline",tabindex:"0"},No={class:"self-center full-width no-outline",tabindex:"0"},Ko={class:"self-center full-width no-outline",tabindex:"0"},Uo={key:3},jo={__name:"FileInfo",emits:[...at.emits],setup(e,{expose:S}){const v=_t(),y=F(()=>v.platform.is.mobile),O=[{label:"\u64AD\u653E",value:"movie"},{label:"\u8BE6\u60C5",value:"detail"},{label:"\u56FE\u5C42",value:"image"},{label:"JavBus",value:"web"}],i=Q(null),P=Q(!1),b=Q("detail"),s=Vt({item:{},settingInfo:{},callback:null,prewiewImages:[]}),L=()=>{b.value="movie",setTimeout(()=>{i.value.open(s.item)},100)},p=U=>{const{item:B,cb:$,playing:q}=U;s.prewiewImages=[],s.item={...B},s.callback=$,u.value.show(),q&&L(),setTimeout(()=>{mo(B.Id).then(w=>{s.prewiewImages=w.data})},500)},V=async()=>{const U=await ul();s.settingInfo=U.data},h=U=>{const B=`${s.settingInfo.BaseUrl}/${U.Code}`;console.log(B),v.platform.is.electron?window.electron.createWindow({router:B,width:1280,height:1e3,titleBarStyle:""}):window.open(B)},{dialogRef:u,onDialogHide:a}=at(),A=()=>{i.value&&i.value.stop(),b.value="detail",P.value=!1,a()};return Ct(()=>{V()}),S({open:p}),(U,B)=>(_(),K(kt,{ref_key:"dialogRef",ref:u,onEscapeKey:A,onBeforeHide:A,onHide:A,"model-value":P.value,"onUpdate:modelValue":B[2]||(B[2]=$=>P.value=$),maximized:y.value,"full-width":""},{default:g(()=>[c(oo,{class:"bg-black text-white shadow-2 rounded-borders"},{default:g(()=>[c(lo,{shrink:""},{default:g(()=>[D("div",Bo,ee(s.item.Name),1)]),_:1}),c(Nt),c(so,{modelValue:b.value,"onUpdate:modelValue":B[0]||(B[0]=$=>b.value=$),shrink:""},{default:g(()=>[(_(),te(se,null,fe(O,$=>c(co,{key:$.value,name:$.value,label:$.label,onClick:q=>b.value=$.value},null,8,["name","label","onClick"])),64))]),_:1},8,["modelValue"]),c(Nt),c(X,{dense:"",flat:"",icon:"close",onClick:A},{default:g(()=>[c(ro,{class:"bg-white text-primary"},{default:g(()=>[be("\u5173\u95ED")]),_:1})]),_:1})]),_:1}),c(xt,{style:{"max-width":"1400px!important",height:"96vh!important"}},{default:g(()=>[b.value=="web"?(_(),te("div",Ro,[D("iframe",{frameborder:0,allowfullscreen:!0,width:"100%",height:"900px",src:`${s.settingInfo.BaseUrl}${s.item.Code}`},null,8,Eo)])):G("",!0),b.value=="movie"?(_(),te("div",Do,[c(ao,{ref_key:"vue3VideoPlayRef",ref:i,mode:y.value?"drawer":"window",onClose:A},null,8,["mode"])])):G("",!0),b.value=="detail"?(_(),te("div",Ho,[c(St,{fit:"fit",easier:"",draggable:"",src:C(Zl)(s.item.Id),style:{"max-height":"60vh"}},null,8,["src"]),c(Ee,{label:"Code","stack-label":""},{control:g(()=>[D("div",{class:"self-center full-width no-outline cursor-pointer",style:{color:"blue"},tabindex:"0",onClick:B[1]||(B[1]=$=>h(s.item))},ee(s.item.Code),1)]),_:1}),c(Ee,{label:"Actress","stack-label":""},{control:g(()=>[D("div",Lo,ee(s.item.Actress),1)]),_:1}),c(Ee,{label:"Name","stack-label":""},{control:g(()=>[D("div",Qo,ee(C(ot)(s.item.Name)),1)]),_:1}),c(Ee,{label:"Time","stack-label":""},{control:g(()=>[D("div",No,ee(C(ot)(s.item.MTime)),1)]),_:1}),c(Ee,{label:"Path","stack-label":""},{control:g(()=>[D("div",Ko,ee(s.item.Path),1)]),_:1})])):G("",!0),b.value=="image"?(_(),te("div",Uo,[(_(!0),te(se,null,fe(s.prewiewImages,$=>(_(),K(St,{fit:"fit",key:$.Id,src:C(eo)($.Id),style:{width:"100%",height:"auto"}},null,8,["src"]))),128))])):G("",!0)]),_:1})]),_:1},8,["model-value","maximized"]))}};const rl=e=>(Gl("data-v-35ac8b03"),e=e(),Yl(),e),Wo={class:"q-mg-md top",style:{"margin-bottom":"40px"}},Jo={class:"row justify-center q-gutter-sm",ref:"top"},Xo={style:{width:"200px","max-height":"50vh"}},Go={class:"q-pa-sm flex flex-center"},Yo={class:"row justify-center q-mt-sm mainlist"},Zo={class:"float-head absolute-top"},ea={style:{display:"flex","flex-direction":"column","justify-content":"flex-start",width:"fit-content"}},ta={class:"tag-popup"},la=rl(()=>D("span",null,"\u79CD\u8349",-1)),oa=["onClick"],aa=rl(()=>D("div",{class:"text-subtitle1 text-white"}," Loading... ",-1)),na={style:{"background-color":"rgba(0, 0, 0, 0.2)"}},ua={style:{display:"flex","flex-direction":"row"}},ia={style:{display:"flex","flex-direction":"row"}},ra={style:{height:"4rem",overflow:"hidden"}},sa=["onClick"],ca=["onClick"],da=["onClick"],fa={__name:"SearchPage",setup(e){const S=Q(null),v=Q(null),y=Q(null),O=Q("Hello"),{copy:i}=_o({source:O}),P=xo(),b=F(()=>P.getSuggestions),s=_t(),L=F(()=>a.settingInfo.Buttons),p=m=>{if(s.platform.is.electron){const{Path:o}=m;window.electron.openBySystem({Path:o})}else w(ho(m.Id))},V=m=>{const{settingInfo:o}=m;o&&(a.settingInfo=o)},h=m=>!L.value||L.value.length==0?!0:L.value.indexOf(m)>=0,u=m=>{const o=`#/playing/${m.Id}`;s.platform.is.electron?window.electron.createWindow({router:o}):window.open(o)},a=Vt({currentData:{},settingInfo:{},queryParam:{Keyword:"",MovieType:"",OnlyRepeat:!1,fullscreen:!1,Page:1,PageSize:20,SortField:"MTime",SortType:"desc"},resultData:{},fullscreen:!1}),A=m=>{const o=`${a.settingInfo.BaseUrl}${m.Code}`;console.log(o),s.platform.is.electron?window.electron.createWindow({router:o,width:1280,height:1e3,titleBarStyle:""}):window.open(o)},U=m=>{console.log(m),m.target.select()},B=m=>{s.platform.is.electron?window.electron.showInFolder(m.Path):w(wo(m.Id))},$=m=>{s.dialog({title:m.Name,message:"\u786E\u5B9A\u5220\u9664\u5417?",cancel:!0,persistent:!0}).onOk(()=>{console.log(">>>> onOk"),w(ko(m.Id),!0)}).onCancel(()=>{console.log(">>>> Cancel")}).onDismiss(()=>{})},q=async()=>{const m=await ul();a.settingInfo=m.data,P.SettingInfo=m.data},w=async(m,o)=>{const{Code:l,Message:d}=await m||{};console.log(l,d),l!=200?s.notify({message:`${d}`}):o&&de()};Wt(["`"],()=>{de()}),Wt(["Enter"],()=>{R()});const I=async m=>{await i(m),s.notify({message:`${m}`})},Y=m=>{if(!P.goActressNewWidow)a.queryParam.Keyword=m,R();else{const{Page:o,PageSize:l,MovieType:d,SortField:n,SortType:z}=a.queryParam,W=ke({path:"/search",query:{Page:o,PageSize:l,MovieType:d,SortField:n,SortType:z,Keyword:m}});window.open(W.href,"_blank")}},ce=m=>{a.currentData=m,P.Playing=m,P.drawerRight=!0},ie=async m=>{console.log("view.queryParam.Page",m),await R();const o=document.querySelector(".scroll");console.log(o),o&&o.scrollTo(0,0)},re=m=>{a.queryParam.Page=a.queryParam.Page+m,ie()},R=async m=>{pe();const{Keyword:o}=a.queryParam,l=await go(a.queryParam);console.log(l),a.resultData={...l};const{ResultSize:d,ResultCnt:n}=l;document.title=`\u641C\u7D22 ${o||""} : ${d} {${n}}`},ne=async m=>{const o=await nl({...m,NoRefresh:!0,MoveOut:!0});console.log(o),o.Code==200?s.notify({type:"negative",message:o.Message}):s.notify({type:"negative",message:o.Message})},me=Q(!1),de=async()=>{me.value=!0;const{Code:m,Message:o}=await yo("/api/refreshIndex");console.log(m,o),m=="200"&&(s.notify({type:"negative",message:o}),await R()),me.value=!1},we=async(m,o)=>{const{Code:l,Message:d}=await Co(m,o);l==="200"?s.notify({type:"negative",message:d}):s.notify({type:"warning",message:d})},pe=()=>{P.syncSearchParam(a.queryParam),localStorage.setItem("queryParam",JSON.stringify(a.queryParam));const{Page:m,PageSize:o,MovieType:l,SortField:d,SortType:n,Keyword:z}=a.queryParam;_e({path:"/search",query:{Page:m,PageSize:o,MovieType:l,SortField:d,SortType:n,Keyword:z}})},ge=jl(),{push:_e,resolve:ke}=Wl();return Ct(async()=>{document.title="\u641C\u7D22";const{Page:m,PageSize:o,MovieType:l,SortField:d,SortType:n,Keyword:z,showStyle:W,from:M}=ge.query;if(await q(),z&&(a.queryParam.Keyword=z),m&&o)a.queryParam.Page=Number(m),a.queryParam.PageSize=Number(o),a.queryParam.MovieType=l,a.queryParam.SortField=d,a.queryParam.SortType=n,a.queryParam.Keyword=z,a.queryParam.showStyle=W;else if(M=="index"){const k=P.FileSearchParam;k&&(console.log("piniaParam",k),a.queryParam=k)}else{const k=JSON.parse(localStorage.getItem("queryParam"));k&&(console.log("storage",k),a.queryParam=k)}R()}),(m,o)=>(_(),te(se,null,[D("div",Wo,[c(ft,{style:{"z-index":"9"},position:"bottom-left",offset:[6,C(j)?180:160]},{default:g(()=>[a.queryParam.Page>1?(_(),K(X,{key:0,round:"",class:"page-sticky",color:"amber","text-color":"black",icon:"keyboard_arrow_left",onClick:o[0]||(o[0]=l=>re(-1))})):G("",!0)]),_:1},8,["offset"]),c(ft,{style:{"z-index":"9"},position:"bottom-right",offset:[10,C(j)?180:160]},{default:g(()=>[c(X,{round:"",class:"page-sticky",color:"secondary","text-color":"black",icon:"keyboard_arrow_right",onClick:o[1]||(o[1]=l=>re(1))})]),_:1},8,["offset"]),D("div",Jo,[c(X,{loading:me.value,outline:C(j),color:"red",onClick:de},{loading:g(()=>[be(" \u6267\u884C\u4E2D")]),default:g(()=>[be(" \u7D22\u5370~ ")]),_:1},8,["loading","outline"]),C(j)?G("",!0):(_(),K(vt,{key:0,size:"md",modelValue:a.queryParam.SortField,"onUpdate:modelValue":[o[2]||(o[2]=l=>a.queryParam.SortField=l),o[3]||(o[3]=l=>R())],"toggle-color":"primary",options:[{label:"\u65F6",value:"MTime"},{label:"\u5BB9",value:"Size"},{label:"\u540D",value:"Code"}]},null,8,["modelValue"])),C(j)?G("",!0):(_(),K(vt,{key:1,modelValue:a.queryParam.SortType,"onUpdate:modelValue":[o[4]||(o[4]=l=>a.queryParam.SortType=l),o[5]||(o[5]=l=>R())],"toggle-color":"primary",options:[{label:"\u6B63",value:"asc"},{label:"\u5012",value:"desc"}]},null,8,["modelValue"])),C(j)?G("",!0):(_(),K(vt,{key:2,modelValue:a.queryParam.MovieType,"onUpdate:modelValue":[o[6]||(o[6]=l=>a.queryParam.MovieType=l),o[7]||(o[7]=l=>R())],"toggle-color":"primary",options:C(mt)},null,8,["modelValue","options"])),C(j)?(_(),K(tt,{key:3,outline:"",color:"primary",label:C(gt)(a.queryParam.SortField,C(Ut))},{default:g(()=>[c(We,null,{default:g(()=>[(_(!0),te(se,null,fe(C(Ut),l=>je((_(),K(Re,{key:l.label,clickable:"",onClick:d=>{a.queryParam.SortField=l.value,R()}},{default:g(()=>[c(Be,null,{default:g(()=>[c(Oe,null,{default:g(()=>[be(ee(l.label),1)]),_:2},1024)]),_:2},1024)]),_:2},1032,["onClick"])),[[lt]])),128))]),_:1})]),_:1},8,["label"])):G("",!0),C(j)?(_(),K(tt,{key:4,outline:"",color:"primary",label:C(gt)(a.queryParam.SortType,C(jt))},{default:g(()=>[c(We,null,{default:g(()=>[(_(!0),te(se,null,fe(C(jt),l=>je((_(),K(Re,{key:l.label,clickable:"",onClick:d=>{a.queryParam.SortType=l.value,R()}},{default:g(()=>[c(Be,null,{default:g(()=>[c(Oe,null,{default:g(()=>[be(ee(l.label),1)]),_:2},1024)]),_:2},1024)]),_:2},1032,["onClick"])),[[lt]])),128))]),_:1})]),_:1},8,["label"])):G("",!0),C(j)?(_(),K(tt,{key:5,outline:"",color:"primary",label:C(gt)(a.queryParam.MovieType,C(mt))},{default:g(()=>[c(We,null,{default:g(()=>[(_(!0),te(se,null,fe(C(mt),l=>je((_(),K(Re,{key:l.label,clickable:"",onClick:d=>{a.queryParam.MovieType=l.value,R()}},{default:g(()=>[c(Be,null,{default:g(()=>[c(Oe,null,{default:g(()=>[be(ee(l.label),1)]),_:2},1024)]),_:2},1024)]),_:2},1032,["onClick"])),[[lt]])),128))]),_:1})]),_:1},8,["label"])):G("",!0),c(He,{id:"searchBtn",label:"...",modelValue:a.queryParam.Keyword,"onUpdate:modelValue":[o[8]||(o[8]=l=>a.queryParam.Keyword=l),o[9]||(o[9]=l=>R())],dense:!0,filled:"",clearable:""},{prepend:g(()=>[c(pt,{name:"ti-list",class:"cursor-pointer"},{default:g(()=>[c(Kt,null,{default:g(()=>[D("div",Xo,[c(We,null,{default:g(()=>[(_(!0),te(se,null,fe(b.value,l=>je((_(),K(Re,{clickable:"",key:l,onClick:d=>{a.queryParam.Keyword=l,R()}},{default:g(()=>[c(Be,null,{default:g(()=>[c(Oe,null,{default:g(()=>[be(ee(l),1)]),_:2},1024)]),_:2},1024)]),_:2},1032,["onClick"])),[[Xl]])),128))]),_:1})])]),_:1})]),_:1})]),append:g(()=>[c(pt,{name:"ti-search",title:"\u641C",class:"cursor-pointer",onClick:R})]),_:1},8,["modelValue"]),c(X,{class:"q-mr-sm",flat:"",size:"sm",color:"primary",icon:"ti-settings",onClick:o[10]||(o[10]=l=>y.value.open({queryParam:a.queryParam,settingInfo:a.settingInfo,cb:V}))}),C(j)?G("",!0):(_(),K(Jl,{key:6,modelValue:a.queryParam.OnlyRepeat,"onUpdate:modelValue":[o[11]||(o[11]=l=>a.queryParam.OnlyRepeat=l),R],flat:"",label:"\u91CD"},null,8,["modelValue"]))],512),c(ft,{position:"bottom",style:{"z-index":"9","background-color":"rgba(0, 0, 0, 0.6)"}},{default:g(()=>[D("div",Go,[c(Ao,{color:"lime-11 q-mr-md","bg-color":"black",dense:"","onUpdate:modelValue":[o[12]||(o[12]=l=>{a.queryParam.PageSize=Number(l),R()}),o[13]||(o[13]=l=>a.queryParam.PageSize=l)],filled:"",dark:"",modelValue:a.queryParam.PageSize,options:[10,20,30,50,200]},null,8,["modelValue"]),c(fo,{modelValue:a.queryParam.Page,"onUpdate:modelValue":[o[14]||(o[14]=l=>a.queryParam.Page=l),ie],color:"deep-orange",ellipses:!0,max:a.resultData.TotalPage||0,"max-pages":C(j)?5:10,"boundary-numbers":"","direction-links":""},null,8,["modelValue","max","max-pages"]),c(He,{modelValue:a.queryParam.Page,"onUpdate:modelValue":[o[15]||(o[15]=l=>a.queryParam.Page=l),o[17]||(o[17]=l=>{a.queryParam.Page=Number(l),R()})],dense:!0,type:"search",style:{"background-color":"aliceblue",width:"40px","text-align":"center"},onFocus:o[16]||(o[16]=l=>U(l))},null,8,["modelValue"])])]),_:1}),c(no,null,{default:g(()=>[D("div",Yo,[(_(!0),te(se,null,fe(a.resultData.Data,l=>(_(),K(xt,{class:Lt(["q-ma-sm",{"example-item":!C(j),"mobile-item":C(j)}]),key:l.Id},{default:g(()=>{var d;return[D("div",Zo,[D("div",ea,[c(ht,{square:"","text-color":"white",style:{"margin-left":"0px",padding:"0 4px","background-color":"rgba(236, 15, 15, 0.8)"}},{default:g(()=>[c(Kt,{"context-menu":""},{default:g(()=>[D("div",ta,[D("div",null,[(_(!0),te(se,null,fe(l.Tags,n=>(_(),K(X,{size:"sm",icon:"ti-minus",square:"","text-color":"white",color:"green",class:"tag-item",key:n,label:n,onClick:z=>w(C(po)(l.Id,n),!0)},null,8,["label","onClick"]))),128))]),D("div",null,[(_(!0),te(se,null,fe(a.settingInfo.Tags,n=>(_(),K(X,{size:"sm",icon:"ti-plus",square:"","text-color":"white",color:"red",class:"tag-item",key:n,label:n,onClick:z=>w(C(So)(l.Id,n),!0)},null,8,["label","onClick"]))),128))])])]),_:2},1024),la]),_:2},1024),(_(!0),te(se,null,fe(l.Tags,n=>(_(),K(ht,{square:"","text-color":"white",key:n,style:{"margin-left":"0px",padding:"0 4px","background-color":"rgba(188, 24, 24, 0.6)"}},{default:g(()=>[D("span",{onClick:z=>{a.queryParam.Keyword=n,R()}},ee(n==null?void 0:n.substring(0,4)),9,oa)]),_:2},1024))),128))]),c(tt,{style:{"background-color":"rgba(0, 0, 0, 0.8)",width:"85px",height:"1rem",color:"antiquewhite"},label:l.MovieType},{default:g(()=>[c(We,{style:{"background-color":"rgba(0, 0, 0, 0.7)"}},{default:g(()=>[(_(!0),te(se,null,fe(C(al),n=>je((_(),K(Re,{key:n.value,class:"movieTypeSelectItem"},{default:g(()=>[c(Be,null,{default:g(()=>[c(Oe,{onClick:z=>we(l.Id,n.value)},{default:g(()=>[be(ee(n.label),1)]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024)),[[lt]])),128))]),_:2},1024)]),_:2},1032,["label"])]),c(St,{fit:"fit",easier:"",draggable:"",class:Lt({"img-self":!C(j),"img-self-moblie":C(j)}),src:C(to)(l.Id),onClick:()=>{v.value.open({item:l,cb:de})}},{loading:g(()=>[aa]),_:2},1032,["class","src","onClick"]),D("div",{class:"absolute-bottom float-btn",style:ll({height:C(j)?"6rem":"8.5rem"})},[D("div",na,[D("div",ua,[h("\u64AD\u653E")&&!C(j)?(_(),K(X,{key:0,round:"",class:"q-mr-sm",size:C(j)?"sm":"md",ripple:"",color:"primary",icon:"ti-control-eject",onClick:n=>p(l),title:"\u64AD\u653E"},null,8,["size","onClick"])):G("",!0),c(X,{round:"",class:"q-mr-sm",size:C(j)?"sm":"md",ripple:"",color:"red",icon:"ti-fullscreen",title:"\u5355\u9875\u64AD\u653E",onClick:n=>u(l)},null,8,["size","onClick"]),c(X,{round:"",class:"q-mr-sm",size:C(j)?"sm":"md",ripple:"",color:"orange",icon:"ti-arrow-right",onClick:n=>ce(l),title:"\u5C0F\u64AD\u653E"},null,8,["size","onClick"]),c(X,{round:"",class:"q-mr-sm",size:C(j)?"sm":"md",ripple:"",color:"orange",icon:"ti-blackboard",onClick:n=>v.value.open({item:l,playing:!0}),title:"\u5C0F\u64AD\u653E"},null,8,["size","onClick"])]),D("div",ia,[h("\u7F16\u8F91")?(_(),K(X,{key:0,round:"",class:"q-mr-sm",size:"sm",color:"primary",icon:"ti-slice",onClick:n=>S.value.open(l,de),title:"\u7F16\u8F91"},null,8,["onClick"])):G("",!0),h("\u6587\u4EF6\u5939")&&!C(j)?(_(),K(X,{key:1,round:"",class:"q-mr-sm",size:"sm",color:"primary",icon:"open_in_new",onClick:n=>B(l),title:"\u6587\u4EF6\u5939"},null,8,["onClick"])):G("",!0),c(X,{round:"",class:"q-mr-sm",size:"sm",color:"brown-5",icon:"ti-search",title:"\u7F51\u641C",onClick:n=>A(l)},null,8,["onClick"]),h("\u522E\u56FE")?(_(),K(X,{key:2,round:"",class:"q-mr-sm",size:"sm",color:"secondary",icon:"ti-import",onClick:n=>w(C(bo)(l.Id)),title:"\u522E\u56FE"},null,8,["onClick"])):G("",!0),h("\u5220\u9664")?(_(),K(X,{key:3,round:"",class:"q-mr-sm",size:"sm",color:"amber",glossy:"","text-color":"black",icon:"ti-trash",onClick:n=>$(l),title:"\u5220\u9664"},null,8,["onClick"])):G("",!0),h("\u79FB\u52A8")?(_(),K(X,{key:4,round:"",class:"q-mr-sm",size:"sm",color:"black",onClick:n=>ne(l),icon:"ti-location-arrow",title:"\u79FB\u52A8"},null,8,["onClick"])):G("",!0)])]),D("div",ra,[D("a",{style:{color:"#9e089e","background-color":"rgba(0, 0, 0, 0.1)"},class:"mr10 cursor-pointer",target:"_blank",onClick:n=>Y(l.Actress)},ee((d=l.Actress)==null?void 0:d.substring(0,6)),9,sa),D("a",{style:{color:"rgb(239, 30, 30)","background-color":"rgba(0, 0, 0, 0.1)"},class:"mr10 cursor-pointer",onClick:n=>I(l.Code)},ee(C(ol)(l.Code)),9,ca),D("a",{style:{color:"rgb(22, 26, 227)","background-color":"rgba(0, 0, 0, 0.1)"},class:"mr10 cursor-pointer",onClick:n=>I(l.Title)},ee(l.SizeStr),9,da),D("span",null,ee(C(ot)(l.Title)),1)])],4)]}),_:2},1032,["class"]))),128))]),c(uo,{position:"bottom-right","scroll-offset":150,offset:[18,100]},{default:g(()=>[c(X,{fab:"",icon:"keyboard_arrow_up",color:"accent"})]),_:1})]),_:1})]),c(Oo,{ref_key:"fileEditRef",ref:S},null,512),c(jo,{ref_key:"fileInfoRef",ref:v},null,512),c(vo,{ref_key:"listEditRef",ref:y},null,512)],64))}};var qa=Ul(fa,[["__scopeId","data-v-35ac8b03"]]);export{qa as default};
