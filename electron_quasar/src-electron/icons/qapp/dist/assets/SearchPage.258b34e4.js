import{bh as Vl,r as L,u as T,v as Ee,br as xl,bs as _l,bc as Xt,bd as Gt,K as Yt,_ as ye,G as E,N as ht,E as Zt,ab as Pl,bn as el,bo as ql,bt as Il,bq as zl,bu as Dt,bb as Ke,bv as Tl,bw as Ml,aM as ct,Q as yt,bp as Fl,bx as Al,bf as Ae,by as Ht,aF as $l,ba as Ol,af as he,s as wt,a6 as Bl,a1 as Rl,Z as kt,H as El,bz as Dl,b1 as Hl,bA as Ll,g as Ct,o as V,c as N,w as y,C as j,a as d,bB as Ql,l as De,m as Nl,p as J,ah as tl,q as Vt,h as R,t as Y,k as Z,z as ce,F as ue,f as be,e as X,ap as Kl,x as Ul,aq as jl,bC as Wl,n as Ue,ag as Lt,as as Jl,ar as Xl,ak as Gl,al as Yl}from"./index.8936b246.js";import{Q as dt}from"./QPageSticky.10e41446.js";import{a as pt,c as Zl,d as eo,Q as ft,b as to}from"./index.7a81fcec.js";import{Q as $e,d as lo,e as Qt,c as oo,P as ao,i as no,g as je,j as Nt}from"./PlayingVideo.89506df5.js";import{c as uo,a as Oe,Q as Be,d as io}from"./QMenu.6b878021.js";import{r as St,e as Re,Q as ro,a as so,d as et}from"./Setting.9fd0a06c.js";import{Q as bt}from"./QChip.7badd2cc.js";import{Q as co}from"./QPagination.94bb077f.js";import{f as ll,a as lt,M as ol,_ as fo,b as vt,F as Kt,g as mt,D as Ut,C as tt}from"./ListEdit.fed6fd77.js";import{u as xt,a as vo,o as jt}from"./index.aed9a47a.js";import{F as al,Q as mo,S as go,R as yo,C as po,A as So,f as bo,P as ho,g as wo,D as ko,a as Co}from"./searchAPI.dedeae16.js";import{a as nl}from"./settingAPI.ca326534.js";import{F as Vo,u as xo}from"./System.00672990.js";import{u as ot}from"./use-dialog-plugin-component.bb0df393.js";import"./axios.f4fdd895.js";const de=1e3,_o=["start","center","end","start-force","center-force","end-force"],ul=Array.prototype.filter,Po=window.getComputedStyle(document.body).overflowAnchor===void 0?Vl:function(e,S){e!==null&&(e._qOverflowAnimationFrame!==void 0&&cancelAnimationFrame(e._qOverflowAnimationFrame),e._qOverflowAnimationFrame=requestAnimationFrame(()=>{if(e===null)return;e._qOverflowAnimationFrame=void 0;const g=e.children||[];ul.call(g,F=>F.dataset&&F.dataset.qVsAnchor!==void 0).forEach(F=>{delete F.dataset.qVsAnchor});const p=g[S];p&&p.dataset&&(p.dataset.qVsAnchor="")}))};function He(e,S){return e+S}function gt(e,S,g,p,F,r,q,b){const c=e===window?document.scrollingElement||document.documentElement:e,D=F===!0?"offsetWidth":"offsetHeight",i={scrollStart:0,scrollViewSize:-q-b,scrollMaxSize:0,offsetStart:-q,offsetEnd:-b};if(F===!0?(e===window?(i.scrollStart=window.pageXOffset||window.scrollX||document.body.scrollLeft||0,i.scrollViewSize+=document.documentElement.clientWidth):(i.scrollStart=c.scrollLeft,i.scrollViewSize+=c.clientWidth),i.scrollMaxSize=c.scrollWidth,r===!0&&(i.scrollStart=(St===!0?i.scrollMaxSize-i.scrollViewSize:0)-i.scrollStart)):(e===window?(i.scrollStart=window.pageYOffset||window.scrollY||document.body.scrollTop||0,i.scrollViewSize+=document.documentElement.clientHeight):(i.scrollStart=c.scrollTop,i.scrollViewSize+=c.clientHeight),i.scrollMaxSize=c.scrollHeight),g!==null)for(let h=g.previousElementSibling;h!==null;h=h.previousElementSibling)h.classList.contains("q-virtual-scroll--skip")===!1&&(i.offsetStart+=h[D]);if(p!==null)for(let h=p.nextElementSibling;h!==null;h=h.nextElementSibling)h.classList.contains("q-virtual-scroll--skip")===!1&&(i.offsetEnd+=h[D]);if(S!==e){const h=c.getBoundingClientRect(),w=S.getBoundingClientRect();F===!0?(i.offsetStart+=w.left-h.left,i.offsetEnd-=w.width):(i.offsetStart+=w.top-h.top,i.offsetEnd-=w.height),e!==window&&(i.offsetStart+=i.scrollStart),i.offsetEnd+=i.scrollMaxSize-i.offsetStart}return i}function Wt(e,S,g,p){S==="end"&&(S=(e===window?document.body:e)[g===!0?"scrollWidth":"scrollHeight"]),e===window?g===!0?(p===!0&&(S=(St===!0?document.body.scrollWidth-document.documentElement.clientWidth:0)-S),window.scrollTo(S,window.pageYOffset||window.scrollY||document.body.scrollTop||0)):window.scrollTo(window.pageXOffset||window.scrollX||document.body.scrollLeft||0,S):g===!0?(p===!0&&(S=(St===!0?e.scrollWidth-e.offsetWidth:0)-S),e.scrollLeft=S):e.scrollTop=S}function We(e,S,g,p){if(g>=p)return 0;const F=S.length,r=Math.floor(g/de),q=Math.floor((p-1)/de)+1;let b=e.slice(r,q).reduce(He,0);return g%de!==0&&(b-=S.slice(r*de,g).reduce(He,0)),p%de!==0&&p!==F&&(b-=S.slice(p,q*de).reduce(He,0)),b}const qo={virtualScrollSliceSize:{type:[Number,String],default:null},virtualScrollSliceRatioBefore:{type:[Number,String],default:1},virtualScrollSliceRatioAfter:{type:[Number,String],default:1},virtualScrollItemSize:{type:[Number,String],default:24},virtualScrollStickySizeStart:{type:[Number,String],default:0},virtualScrollStickySizeEnd:{type:[Number,String],default:0},tableColspan:[Number,String]},Io={virtualScrollHorizontal:Boolean,onVirtualScroll:Function,...qo};function zo({virtualScrollLength:e,getVirtualScrollTarget:S,getVirtualScrollEl:g,virtualScrollItemSizeComputed:p}){const F=ht(),{props:r,emit:q,proxy:b}=F,{$q:c}=b;let D,i,h,w=[],u;const H=L(0),n=L(0),K=L({}),A=L(null),M=L(null),x=L(null),k=L({from:0,to:0}),_=T(()=>r.tableColspan!==void 0?r.tableColspan:100);p===void 0&&(p=T(()=>r.virtualScrollItemSize));const G=T(()=>p.value+";"+r.virtualScrollHorizontal),ie=T(()=>G.value+";"+r.virtualScrollSliceRatioBefore+";"+r.virtualScrollSliceRatioAfter);Ee(ie,()=>{fe()}),Ee(G,re);function re(){ge(i,!0)}function ne(l){ge(l===void 0?i:l)}function te(l,o){const m=S();if(m==null||m.nodeType===8)return;const v=gt(m,g(),A.value,M.value,r.virtualScrollHorizontal,c.lang.rtl,r.virtualScrollStickySizeStart,r.virtualScrollStickySizeEnd);h!==v.scrollViewSize&&fe(v.scrollViewSize),pe(m,v,Math.min(e.value-1,Math.max(0,parseInt(l,10)||0)),0,_o.indexOf(o)>-1?o:i>-1&&l>i?"end":"start")}function $(){const l=S();if(l==null||l.nodeType===8)return;const o=gt(l,g(),A.value,M.value,r.virtualScrollHorizontal,c.lang.rtl,r.virtualScrollStickySizeStart,r.virtualScrollStickySizeEnd),m=e.value-1,v=o.scrollMaxSize-o.offsetStart-o.offsetEnd-n.value;if(D===o.scrollStart)return;if(o.scrollMaxSize<=0){pe(l,o,0,0);return}h!==o.scrollViewSize&&fe(o.scrollViewSize),me(k.value.from);const O=Math.floor(o.scrollMaxSize-Math.max(o.scrollViewSize,o.offsetEnd)-Math.min(u[m],o.scrollViewSize/2));if(O>0&&Math.ceil(o.scrollStart)>=O){pe(l,o,m,o.scrollMaxSize-o.offsetEnd-w.reduce(He,0));return}let I=0,P=o.scrollStart-o.offsetStart,U=P;if(P<=v&&P+o.scrollViewSize>=H.value)P-=H.value,I=k.value.from,U=P;else for(let z=0;P>=w[z]&&I<m;z++)P-=w[z],I+=de;for(;P>0&&I<m;)P-=u[I],P>-o.scrollViewSize?(I++,U=P):U=u[I]+P;pe(l,o,I,U)}function pe(l,o,m,v,O){const I=typeof O=="string"&&O.indexOf("-force")>-1,P=I===!0?O.replace("-force",""):O,U=P!==void 0?P:"start";let z=Math.max(0,m-K.value[U]),le=z+K.value.total;le>e.value&&(le=e.value,z=Math.max(0,le-K.value.total)),D=o.scrollStart;const _e=z!==k.value.from||le!==k.value.to;if(_e===!1&&P===void 0){we(m);return}const{activeElement:Le}=document,ve=x.value;_e===!0&&ve!==null&&ve!==Le&&ve.contains(Le)===!0&&(ve.addEventListener("focusout",se),setTimeout(()=>{ve!==null&&ve.removeEventListener("focusout",se)})),Po(ve,m-z);const Je=P!==void 0?u.slice(z,m).reduce(He,0):0;if(_e===!0){const ke=le>=k.value.from&&z<=k.value.to?k.value.to:le;k.value={from:z,to:ke},H.value=We(w,u,0,z),n.value=We(w,u,le,e.value),requestAnimationFrame(()=>{k.value.to!==le&&D===o.scrollStart&&(k.value={from:k.value.from,to:le},n.value=We(w,u,le,e.value))})}requestAnimationFrame(()=>{if(D!==o.scrollStart)return;_e===!0&&me(z);const ke=u.slice(z,m).reduce(He,0),Pe=ke+o.offsetStart+H.value,Xe=Pe+u[m];let Qe=Pe+v;if(P!==void 0){const at=ke-Je,oe=o.scrollStart+at;Qe=I!==!0&&oe<Pe&&Xe<oe+o.scrollViewSize?oe:P==="end"?Xe-o.scrollViewSize:Pe-(P==="start"?0:Math.round((o.scrollViewSize-u[m])/2))}D=Qe,Wt(l,Qe,r.virtualScrollHorizontal,c.lang.rtl),we(m)})}function me(l){const o=x.value;if(o){const m=ul.call(o.children,z=>z.classList&&z.classList.contains("q-virtual-scroll--skip")===!1),v=m.length,O=r.virtualScrollHorizontal===!0?z=>z.getBoundingClientRect().width:z=>z.offsetHeight;let I=l,P,U;for(let z=0;z<v;){for(P=O(m[z]),z++;z<v&&m[z].classList.contains("q-virtual-scroll--with-prev")===!0;)P+=O(m[z]),z++;U=P-u[I],U!==0&&(u[I]+=U,w[Math.floor(I/de)]+=U),I++}}}function se(){x.value!==null&&x.value!==void 0&&x.value.focus()}function ge(l,o){const m=1*p.value;(o===!0||Array.isArray(u)===!1)&&(u=[]);const v=u.length;u.length=e.value;for(let I=e.value-1;I>=v;I--)u[I]=m;const O=Math.floor((e.value-1)/de);w=[];for(let I=0;I<=O;I++){let P=0;const U=Math.min((I+1)*de,e.value);for(let z=I*de;z<U;z++)P+=u[z];w.push(P)}i=-1,D=void 0,H.value=We(w,u,0,k.value.from),n.value=We(w,u,k.value.to,e.value),l>=0?(me(k.value.from),ye(()=>{te(l)})):Se()}function fe(l){if(l===void 0&&typeof window!="undefined"){const P=S();P!=null&&P.nodeType!==8&&(l=gt(P,g(),A.value,M.value,r.virtualScrollHorizontal,c.lang.rtl,r.virtualScrollStickySizeStart,r.virtualScrollStickySizeEnd).scrollViewSize)}h=l;const o=parseFloat(r.virtualScrollSliceRatioBefore)||0,m=parseFloat(r.virtualScrollSliceRatioAfter)||0,v=1+o+m,O=l===void 0||l<=0?1:Math.ceil(l/p.value),I=Math.max(1,O,Math.ceil((r.virtualScrollSliceSize>0?r.virtualScrollSliceSize:10)/v));K.value={total:Math.ceil(I*v),start:Math.ceil(I*o),center:Math.ceil(I*(.5+o)),end:Math.ceil(I*(1+o)),view:O}}function xe(l,o){const m=r.virtualScrollHorizontal===!0?"width":"height",v={["--q-virtual-scroll-item-"+m]:p.value+"px"};return[l==="tbody"?E(l,{class:"q-virtual-scroll__padding",key:"before",ref:A},[E("tr",[E("td",{style:{[m]:`${H.value}px`,...v},colspan:_.value})])]):E(l,{class:"q-virtual-scroll__padding",key:"before",ref:A,style:{[m]:`${H.value}px`,...v}}),E(l,{class:"q-virtual-scroll__content",key:"content",ref:x,tabindex:-1},o.flat()),l==="tbody"?E(l,{class:"q-virtual-scroll__padding",key:"after",ref:M},[E("tr",[E("td",{style:{[m]:`${n.value}px`,...v},colspan:_.value})])]):E(l,{class:"q-virtual-scroll__padding",key:"after",ref:M,style:{[m]:`${n.value}px`,...v}})]}function we(l){i!==l&&(r.onVirtualScroll!==void 0&&q("virtualScroll",{index:l,from:k.value.from,to:k.value.to-1,direction:l<i?"decrease":"increase",ref:b}),i=l)}fe();const Se=xl($,c.platform.is.ios===!0?120:35);_l(()=>{fe()});let a=!1;return Xt(()=>{a=!0}),Gt(()=>{if(a!==!0)return;const l=S();D!==void 0&&l!==void 0&&l!==null&&l.nodeType!==8?Wt(l,D,r.virtualScrollHorizontal,c.lang.rtl):te(i)}),Yt(()=>{Se.cancel()}),Object.assign(b,{scrollTo:te,reset:re,refresh:ne}),{virtualScrollSliceRange:k,virtualScrollSliceSizeComputed:K,setVirtualScrollSize:fe,onVirtualScrollEvt:Se,localResetVirtualScroll:ge,padVirtualScroll:xe,scrollTo:te,reset:re,refresh:ne}}const Jt=e=>["add","add-unique","toggle"].includes(e),To=".*+?^${}()|[]\\",Mo=Object.keys(el);var Fo=Zt({name:"QSelect",inheritAttrs:!1,props:{...Io,...Pl,...el,modelValue:{required:!0},multiple:Boolean,displayValue:[String,Number],displayValueHtml:Boolean,dropdownIcon:String,options:{type:Array,default:()=>[]},optionValue:[Function,String],optionLabel:[Function,String],optionDisable:[Function,String],hideSelected:Boolean,hideDropdownIcon:Boolean,fillInput:Boolean,maxValues:[Number,String],optionsDense:Boolean,optionsDark:{type:Boolean,default:null},optionsSelectedClass:String,optionsHtml:Boolean,optionsCover:Boolean,menuShrink:Boolean,menuAnchor:String,menuSelf:String,menuOffset:Array,popupContentClass:String,popupContentStyle:[String,Array,Object],useInput:Boolean,useChips:Boolean,newValueMode:{type:String,validator:Jt},mapOptions:Boolean,emitValue:Boolean,inputDebounce:{type:[Number,String],default:500},inputClass:[Array,String,Object],inputStyle:[Array,String,Object],tabindex:{type:[String,Number],default:0},autocomplete:String,transitionShow:String,transitionHide:String,transitionDuration:[String,Number],behavior:{type:String,validator:e=>["default","menu","dialog"].includes(e),default:"default"},virtualScrollItemSize:{type:[Number,String],default:void 0},onNewValue:Function,onFilter:Function},emits:[...ql,"add","remove","inputValue","newValue","keyup","keypress","keydown","filterAbort"],setup(e,{slots:S,emit:g}){const{proxy:p}=ht(),{$q:F}=p,r=L(!1),q=L(!1),b=L(-1),c=L(""),D=L(!1),i=L(!1);let h=null,w,u,H,n=null,K,A,M,x;const k=L(null),_=L(null),G=L(null),ie=L(null),re=L(null),ne=Il(e),te=Al($t),$=T(()=>Array.isArray(e.options)?e.options.length:0),pe=T(()=>e.virtualScrollItemSize===void 0?e.optionsDense===!0?24:48:e.virtualScrollItemSize),{virtualScrollSliceRange:me,virtualScrollSliceSizeComputed:se,localResetVirtualScroll:ge,padVirtualScroll:fe,onVirtualScrollEvt:xe,scrollTo:we,setVirtualScrollSize:Se}=zo({virtualScrollLength:$,getVirtualScrollTarget:dl,getVirtualScrollEl:Ft,virtualScrollItemSizeComputed:pe}),a=zl(),l=T(()=>{const t=e.mapOptions===!0&&e.multiple!==!0,f=e.modelValue!==void 0&&(e.modelValue!==null||t===!0)?e.multiple===!0&&Array.isArray(e.modelValue)?e.modelValue:[e.modelValue]:[];if(e.mapOptions===!0&&Array.isArray(e.options)===!0){const s=e.mapOptions===!0&&w!==void 0?w:[],C=f.map(Q=>cl(Q,s));return e.modelValue===null&&t===!0?C.filter(Q=>Q!==null):C}return f}),o=T(()=>{const t={};return Mo.forEach(f=>{const s=e[f];s!==void 0&&(t[f]=s)}),t}),m=T(()=>e.optionsDark===null?a.isDark.value:e.optionsDark),v=T(()=>Dt(l.value)),O=T(()=>{let t="q-field__input q-placeholder col";return e.hideSelected===!0||l.value.length===0?[t,e.inputClass]:(t+=" q-field__input--padding",e.inputClass===void 0?t:[t,e.inputClass])}),I=T(()=>(e.virtualScrollHorizontal===!0?"q-virtual-scroll--horizontal":"")+(e.popupContentClass?" "+e.popupContentClass:"")),P=T(()=>$.value===0),U=T(()=>l.value.map(t=>ae.value(t)).join(", ")),z=T(()=>e.displayValue!==void 0?e.displayValue:U.value),le=T(()=>e.optionsHtml===!0?()=>!0:t=>t!=null&&t.html===!0),_e=T(()=>e.displayValueHtml===!0||e.displayValue===void 0&&(e.optionsHtml===!0||l.value.some(le.value))),Le=T(()=>a.focused.value===!0?e.tabindex:-1),ve=T(()=>{const t={tabindex:e.tabindex,role:"combobox","aria-label":e.label,"aria-readonly":e.readonly===!0?"true":"false","aria-autocomplete":e.useInput===!0?"list":"none","aria-expanded":r.value===!0?"true":"false","aria-controls":`${a.targetUid.value}_lb`};return b.value>=0&&(t["aria-activedescendant"]=`${a.targetUid.value}_${b.value}`),t}),Je=T(()=>({id:`${a.targetUid.value}_lb`,role:"listbox","aria-multiselectable":e.multiple===!0?"true":"false"})),ke=T(()=>l.value.map((t,f)=>({index:f,opt:t,html:le.value(t),selected:!0,removeAtIndex:sl,toggleOption:Ce,tabindex:Le.value}))),Pe=T(()=>{if($.value===0)return[];const{from:t,to:f}=me.value;return e.options.slice(t,f).map((s,C)=>{const Q=qe.value(s)===!0,B=t+C,W={clickable:!0,active:!1,activeClass:at.value,manualFocus:!0,focused:!1,disable:Q,tabindex:-1,dense:e.optionsDense,dark:m.value,role:"option",id:`${a.targetUid.value}_${B}`,onClick:()=>{Ce(s)}};return Q!==!0&&(it(s)===!0&&(W.active=!0),b.value===B&&(W.focused=!0),W["aria-selected"]=W.active===!0?"true":"false",F.platform.is.desktop===!0&&(W.onMousemove=()=>{r.value===!0&&Ie(B)})),{index:B,opt:s,html:le.value(s),label:ae.value(s),selected:W.active,focused:W.focused,toggleOption:Ce,setOptionIndex:Ie,itemProps:W}})}),Xe=T(()=>e.dropdownIcon!==void 0?e.dropdownIcon:F.iconSet.arrow.dropdown),Qe=T(()=>e.optionsCover===!1&&e.outlined!==!0&&e.standout!==!0&&e.borderless!==!0&&e.rounded!==!0),at=T(()=>e.optionsSelectedClass!==void 0?e.optionsSelectedClass:e.color!==void 0?`text-${e.color}`:""),oe=T(()=>ut(e.optionValue,"value")),ae=T(()=>ut(e.optionLabel,"label")),qe=T(()=>ut(e.optionDisable,"disable")),Ge=T(()=>l.value.map(t=>oe.value(t))),rl=T(()=>{const t={onInput:$t,onChange:te,onKeydown:Mt,onKeyup:zt,onKeypress:Tt,onFocus:qt,onClick(f){u===!0&&Ae(f)}};return t.onCompositionstart=t.onCompositionupdate=t.onCompositionend=te,t});Ee(l,t=>{w=t,e.useInput===!0&&e.fillInput===!0&&e.multiple!==!0&&a.innerLoading.value!==!0&&(q.value!==!0&&r.value!==!0||v.value!==!0)&&(H!==!0&&Fe(),(q.value===!0||r.value===!0)&&ze(""))},{immediate:!0}),Ee(()=>e.fillInput,Fe),Ee(r,rt),Ee($,Cl);function _t(t){return e.emitValue===!0?oe.value(t):t}function nt(t){if(t>-1&&t<l.value.length)if(e.multiple===!0){const f=e.modelValue.slice();g("remove",{index:t,value:f.splice(t,1)[0]}),g("update:modelValue",f)}else g("update:modelValue",null)}function sl(t){nt(t),a.focus()}function Pt(t,f){const s=_t(t);if(e.multiple!==!0){e.fillInput===!0&&Ne(ae.value(t),!0,!0),g("update:modelValue",s);return}if(l.value.length===0){g("add",{index:0,value:s}),g("update:modelValue",e.multiple===!0?[s]:s);return}if(f===!0&&it(t)===!0||e.maxValues!==void 0&&e.modelValue.length>=e.maxValues)return;const C=e.modelValue.slice();g("add",{index:C.length,value:s}),C.push(s),g("update:modelValue",C)}function Ce(t,f){if(a.editable.value!==!0||t===void 0||qe.value(t)===!0)return;const s=oe.value(t);if(e.multiple!==!0){f!==!0&&(Ne(e.fillInput===!0?ae.value(t):"",!0,!0),Ve()),_.value!==null&&_.value.focus(),(l.value.length===0||Ke(oe.value(l.value[0]),s)!==!0)&&g("update:modelValue",e.emitValue===!0?s:t);return}if((u!==!0||D.value===!0)&&a.focus(),qt(),l.value.length===0){const B=e.emitValue===!0?s:t;g("add",{index:0,value:B}),g("update:modelValue",e.multiple===!0?[B]:B);return}const C=e.modelValue.slice(),Q=Ge.value.findIndex(B=>Ke(B,s));if(Q>-1)g("remove",{index:Q,value:C.splice(Q,1)[0]});else{if(e.maxValues!==void 0&&C.length>=e.maxValues)return;const B=e.emitValue===!0?s:t;g("add",{index:C.length,value:B}),C.push(B)}g("update:modelValue",C)}function Ie(t){if(F.platform.is.desktop!==!0)return;const f=t>-1&&t<$.value?t:-1;b.value!==f&&(b.value=f)}function Ye(t=1,f){if(r.value===!0){let s=b.value;do s=Ht(s+t,-1,$.value-1);while(s!==-1&&s!==b.value&&qe.value(e.options[s])===!0);b.value!==s&&(Ie(s),we(s),f!==!0&&e.useInput===!0&&e.fillInput===!0&&Ze(s>=0?ae.value(e.options[s]):K))}}function cl(t,f){const s=C=>Ke(oe.value(C),t);return e.options.find(s)||f.find(s)||t}function ut(t,f){const s=t!==void 0?t:f;return typeof s=="function"?s:C=>C!==null&&typeof C=="object"&&s in C?C[s]:C}function it(t){const f=oe.value(t);return Ge.value.find(s=>Ke(s,f))!==void 0}function qt(t){e.useInput===!0&&_.value!==null&&(t===void 0||_.value===t.target&&t.target.value===U.value)&&_.value.select()}function It(t){$l(t,27)===!0&&r.value===!0&&(Ae(t),Ve(),Fe()),g("keyup",t)}function zt(t){const{value:f}=t.target;if(t.keyCode!==void 0){It(t);return}if(t.target.value="",h!==null&&(clearTimeout(h),h=null),Fe(),typeof f=="string"&&f.length!==0){const s=f.toLocaleLowerCase(),C=B=>{const W=e.options.find(ee=>B.value(ee).toLocaleLowerCase()===s);return W===void 0?!1:(l.value.indexOf(W)===-1?Ce(W):Ve(),!0)},Q=B=>{C(oe)!==!0&&(C(ae)===!0||B===!0||ze(f,!0,()=>Q(!0)))};Q()}else a.clearValue(t)}function Tt(t){g("keypress",t)}function Mt(t){if(g("keydown",t),Ol(t)===!0)return;const f=c.value.length!==0&&(e.newValueMode!==void 0||e.onNewValue!==void 0),s=t.shiftKey!==!0&&e.multiple!==!0&&(b.value>-1||f===!0);if(t.keyCode===27){ct(t);return}if(t.keyCode===9&&s===!1){Te();return}if(t.target===void 0||t.target.id!==a.targetUid.value||a.editable.value!==!0)return;if(t.keyCode===40&&a.innerLoading.value!==!0&&r.value===!1){he(t),Me();return}if(t.keyCode===8&&e.hideSelected!==!0&&c.value.length===0){e.multiple===!0&&Array.isArray(e.modelValue)===!0?nt(e.modelValue.length-1):e.multiple!==!0&&e.modelValue!==null&&g("update:modelValue",null);return}(t.keyCode===35||t.keyCode===36)&&(typeof c.value!="string"||c.value.length===0)&&(he(t),b.value=-1,Ye(t.keyCode===36?1:-1,e.multiple)),(t.keyCode===33||t.keyCode===34)&&se.value!==void 0&&(he(t),b.value=Math.max(-1,Math.min($.value,b.value+(t.keyCode===33?-1:1)*se.value.view)),Ye(t.keyCode===33?1:-1,e.multiple)),(t.keyCode===38||t.keyCode===40)&&(he(t),Ye(t.keyCode===38?-1:1,e.multiple));const C=$.value;if((M===void 0||x<Date.now())&&(M=""),C>0&&e.useInput!==!0&&t.key!==void 0&&t.key.length===1&&t.altKey===!1&&t.ctrlKey===!1&&t.metaKey===!1&&(t.keyCode!==32||M.length!==0)){r.value!==!0&&Me(t);const Q=t.key.toLocaleLowerCase(),B=M.length===1&&M[0]===Q;x=Date.now()+1500,B===!1&&(he(t),M+=Q);const W=new RegExp("^"+M.split("").map(st=>To.indexOf(st)>-1?"\\"+st:st).join(".*"),"i");let ee=b.value;if(B===!0||ee<0||W.test(ae.value(e.options[ee]))!==!0)do ee=Ht(ee+1,-1,C-1);while(ee!==b.value&&(qe.value(e.options[ee])===!0||W.test(ae.value(e.options[ee]))!==!0));b.value!==ee&&ye(()=>{Ie(ee),we(ee),ee>=0&&e.useInput===!0&&e.fillInput===!0&&Ze(ae.value(e.options[ee]))});return}if(!(t.keyCode!==13&&(t.keyCode!==32||e.useInput===!0||M!=="")&&(t.keyCode!==9||s===!1))){if(t.keyCode!==9&&he(t),b.value>-1&&b.value<C){Ce(e.options[b.value]);return}if(f===!0){const Q=(B,W)=>{if(W){if(Jt(W)!==!0)return}else W=e.newValueMode;if(Ne("",e.multiple!==!0,!0),B==null)return;(W==="toggle"?Ce:Pt)(B,W==="add-unique"),e.multiple!==!0&&(_.value!==null&&_.value.focus(),Ve())};if(e.onNewValue!==void 0?g("newValue",c.value,Q):Q(c.value),e.multiple!==!0)return}r.value===!0?Te():a.innerLoading.value!==!0&&Me()}}function Ft(){return u===!0?re.value:G.value!==null&&G.value.contentEl!==null?G.value.contentEl:void 0}function dl(){return Ft()}function fl(){return e.hideSelected===!0?[]:S["selected-item"]!==void 0?ke.value.map(t=>S["selected-item"](t)).slice():S.selected!==void 0?[].concat(S.selected()):e.useChips===!0?ke.value.map((t,f)=>E(bt,{key:"option-"+f,removable:a.editable.value===!0&&qe.value(t.opt)!==!0,dense:!0,textColor:e.color,tabindex:Le.value,onRemove(){t.removeAtIndex(f)}},()=>E("span",{class:"ellipsis",[t.html===!0?"innerHTML":"textContent"]:ae.value(t.opt)}))):[E("span",{[_e.value===!0?"innerHTML":"textContent"]:z.value})]}function At(){if(P.value===!0)return S["no-option"]!==void 0?S["no-option"]({inputValue:c.value}):void 0;const t=S.option!==void 0?S.option:s=>E(Be,{key:s.index,...s.itemProps},()=>E(Oe,()=>E($e,()=>E("span",{[s.html===!0?"innerHTML":"textContent"]:s.label}))));let f=fe("div",Pe.value.map(t));return S["before-options"]!==void 0&&(f=S["before-options"]().concat(f)),Bl(S["after-options"],f)}function vl(t,f){const s=f===!0?{...ve.value,...a.splitAttrs.attributes.value}:void 0,C={ref:f===!0?_:void 0,key:"i_t",class:O.value,style:e.inputStyle,value:c.value!==void 0?c.value:"",type:"search",...s,id:f===!0?a.targetUid.value:void 0,maxlength:e.maxlength,autocomplete:e.autocomplete,"data-autofocus":t===!0||e.autofocus===!0||void 0,disabled:e.disable===!0,readonly:e.readonly===!0,...rl.value};return t!==!0&&u===!0&&(Array.isArray(C.class)===!0?C.class=[...C.class,"no-pointer-events"]:C.class+=" no-pointer-events"),E("input",C)}function $t(t){h!==null&&(clearTimeout(h),h=null),!(t&&t.target&&t.target.qComposing===!0)&&(Ze(t.target.value||""),H=!0,K=c.value,a.focused.value!==!0&&(u!==!0||D.value===!0)&&a.focus(),e.onFilter!==void 0&&(h=setTimeout(()=>{h=null,ze(c.value)},e.inputDebounce)))}function Ze(t){c.value!==t&&(c.value=t,g("inputValue",t))}function Ne(t,f,s){H=s!==!0,e.useInput===!0&&(Ze(t),(f===!0||s!==!0)&&(K=t),f!==!0&&ze(t))}function ze(t,f,s){if(e.onFilter===void 0||f!==!0&&a.focused.value!==!0)return;a.innerLoading.value===!0?g("filterAbort"):(a.innerLoading.value=!0,i.value=!0),t!==""&&e.multiple!==!0&&l.value.length!==0&&H!==!0&&t===ae.value(l.value[0])&&(t="");const C=setTimeout(()=>{r.value===!0&&(r.value=!1)},10);n!==null&&clearTimeout(n),n=C,g("filter",t,(Q,B)=>{(f===!0||a.focused.value===!0)&&n===C&&(clearTimeout(n),typeof Q=="function"&&Q(),i.value=!1,ye(()=>{a.innerLoading.value=!1,a.editable.value===!0&&(f===!0?r.value===!0&&Ve():r.value===!0?rt(!0):r.value=!0),typeof B=="function"&&ye(()=>{B(p)}),typeof s=="function"&&ye(()=>{s(p)})}))},()=>{a.focused.value===!0&&n===C&&(clearTimeout(n),a.innerLoading.value=!1,i.value=!1),r.value===!0&&(r.value=!1)})}function ml(){return E(uo,{ref:G,class:I.value,style:e.popupContentStyle,modelValue:r.value,fit:e.menuShrink!==!0,cover:e.optionsCover===!0&&P.value!==!0&&e.useInput!==!0,anchor:e.menuAnchor,self:e.menuSelf,offset:e.menuOffset,dark:m.value,noParentEvent:!0,noRefocus:!0,noFocus:!0,square:Qe.value,transitionShow:e.transitionShow,transitionHide:e.transitionHide,transitionDuration:e.transitionDuration,separateClosePopup:!0,...Je.value,onScrollPassive:xe,onBeforeShow:Bt,onBeforeHide:gl,onShow:yl},At)}function gl(t){Rt(t),Te()}function yl(){Se()}function pl(t){Ae(t),_.value!==null&&_.value.focus(),D.value=!0,window.scrollTo(window.pageXOffset||window.scrollX||document.body.scrollLeft||0,0)}function Sl(t){Ae(t),ye(()=>{D.value=!1})}function bl(){const t=[E(Re,{class:`col-auto ${a.fieldClass.value}`,...o.value,for:a.targetUid.value,dark:m.value,square:!0,loading:i.value,itemAligned:!1,filled:!0,stackLabel:c.value.length!==0,...a.splitAttrs.listeners.value,onFocus:pl,onBlur:Sl},{...S,rawControl:()=>a.getControl(!0),before:void 0,after:void 0})];return r.value===!0&&t.push(E("div",{ref:re,class:I.value+" scroll",style:e.popupContentStyle,...Je.value,onClick:ct,onScrollPassive:xe},At())),E(wt,{ref:ie,modelValue:q.value,position:e.useInput===!0?"top":void 0,transitionShow:A,transitionHide:e.transitionHide,transitionDuration:e.transitionDuration,onBeforeShow:Bt,onBeforeHide:hl,onHide:wl,onShow:kl},()=>E("div",{class:"q-select__dialog"+(m.value===!0?" q-select__dialog--dark q-dark":"")+(D.value===!0?" q-select__dialog--focused":"")},t))}function hl(t){Rt(t),ie.value!==null&&ie.value.__updateRefocusTarget(a.rootRef.value.querySelector(".q-field__native > [tabindex]:last-child")),a.focused.value=!1}function wl(t){Ve(),a.focused.value===!1&&g("blur",t),Fe()}function kl(){const t=document.activeElement;(t===null||t.id!==a.targetUid.value)&&_.value!==null&&_.value!==t&&_.value.focus(),Se()}function Te(){q.value!==!0&&(b.value=-1,r.value===!0&&(r.value=!1),a.focused.value===!1&&(n!==null&&(clearTimeout(n),n=null),a.innerLoading.value===!0&&(g("filterAbort"),a.innerLoading.value=!1,i.value=!1)))}function Me(t){a.editable.value===!0&&(u===!0?(a.onControlFocusin(t),q.value=!0,ye(()=>{a.focus()})):a.focus(),e.onFilter!==void 0?ze(c.value):(P.value!==!0||S["no-option"]!==void 0)&&(r.value=!0))}function Ve(){q.value=!1,Te()}function Fe(){e.useInput===!0&&Ne(e.multiple!==!0&&e.fillInput===!0&&l.value.length!==0&&ae.value(l.value[0])||"",!0,!0)}function rt(t){let f=-1;if(t===!0){if(l.value.length!==0){const s=oe.value(l.value[0]);f=e.options.findIndex(C=>Ke(oe.value(C),s))}ge(f)}Ie(f)}function Cl(t,f){r.value===!0&&a.innerLoading.value===!1&&(ge(-1,!0),ye(()=>{r.value===!0&&a.innerLoading.value===!1&&(t>f?ge():rt(!0))}))}function Ot(){q.value===!1&&G.value!==null&&G.value.updatePosition()}function Bt(t){t!==void 0&&Ae(t),g("popupShow",t),a.hasPopupOpen=!0,a.onControlFocusin(t)}function Rt(t){t!==void 0&&Ae(t),g("popupHide",t),a.hasPopupOpen=!1,a.onControlFocusout(t)}function Et(){u=F.platform.is.mobile!==!0&&e.behavior!=="dialog"?!1:e.behavior!=="menu"&&(e.useInput===!0?S["no-option"]!==void 0||e.onFilter!==void 0||P.value===!1:!0),A=F.platform.is.ios===!0&&u===!0&&e.useInput===!0?"fade":e.transitionShow}return Tl(Et),Ml(Ot),Et(),Yt(()=>{h!==null&&clearTimeout(h)}),Object.assign(p,{showPopup:Me,hidePopup:Ve,removeAtIndex:nt,add:Pt,toggleOption:Ce,getOptionIndex:()=>b.value,setOptionIndex:Ie,moveOptionSelection:Ye,filter:ze,updateMenuPosition:Ot,updateInputValue:Ne,isOptionSelected:it,getEmittingOptionValue:_t,isOptionDisabled:(...t)=>qe.value.apply(null,t)===!0,getOptionValue:(...t)=>oe.value.apply(null,t),getOptionLabel:(...t)=>ae.value.apply(null,t)}),Object.assign(a,{innerValue:l,fieldClass:T(()=>`q-select q-field--auto-height q-select--with${e.useInput!==!0?"out":""}-input q-select--with${e.useChips!==!0?"out":""}-chips q-select--${e.multiple===!0?"multiple":"single"}`),inputRef:k,targetRef:_,hasValue:v,showPopup:Me,floatingLabel:T(()=>e.hideSelected!==!0&&v.value===!0||typeof c.value=="number"||c.value.length!==0||Dt(e.displayValue)),getControlChild:()=>{if(a.editable.value!==!1&&(q.value===!0||P.value!==!0||S["no-option"]!==void 0))return u===!0?bl():ml();a.hasPopupOpen===!0&&(a.hasPopupOpen=!1)},controlEvents:{onFocusin(t){a.onControlFocusin(t)},onFocusout(t){a.onControlFocusout(t,()=>{Fe(),Te()})},onClick(t){if(ct(t),u!==!0&&r.value===!0){Te(),_.value!==null&&_.value.focus();return}Me(t)}},getControl:t=>{const f=fl(),s=t===!0||q.value!==!0||u!==!0;if(e.useInput===!0)f.push(vl(t,s));else if(a.editable.value===!0){const Q=s===!0?ve.value:void 0;f.push(E("input",{ref:s===!0?_:void 0,key:"d_t",class:"q-select__focus-target",id:s===!0?a.targetUid.value:void 0,value:z.value,readonly:!0,"data-autofocus":t===!0||e.autofocus===!0||void 0,...Q,onKeydown:Mt,onKeyup:It,onKeypress:Tt})),s===!0&&typeof e.autocomplete=="string"&&e.autocomplete.length!==0&&f.push(E("input",{class:"q-select__autocomplete-input",autocomplete:e.autocomplete,tabindex:-1,onKeyup:zt}))}if(ne.value!==void 0&&e.disable!==!0&&Ge.value.length!==0){const Q=Ge.value.map(B=>E("option",{value:B,selected:!0}));f.push(E("select",{class:"hidden",name:ne.value,multiple:e.multiple},Q))}const C=e.useInput===!0||s!==!0?void 0:a.splitAttrs.attributes.value;return E("div",{class:"q-field__native row items-center",...C,...a.splitAttrs.listeners.value},f)},getInnerAppend:()=>e.loading!==!0&&i.value!==!0&&e.hideDropdownIcon!==!0?[E(yt,{class:"q-select__dropdown-icon"+(r.value===!0?" rotate-180":""),name:Xe.value})]:null}),Fl(a)}}),Ao=Zt({name:"QForm",props:{autofocus:Boolean,noErrorFocus:Boolean,noResetFocus:Boolean,greedy:Boolean,onSubmit:Function},emits:["reset","validationSuccess","validationError"],setup(e,{slots:S,emit:g}){const p=ht(),F=L(null);let r=0;const q=[];function b(u){const H=typeof u=="boolean"?u:e.noErrorFocus!==!0,n=++r,K=(x,k)=>{g("validation"+(x===!0?"Success":"Error"),k)},A=x=>{const k=x.validate();return typeof k.then=="function"?k.then(_=>({valid:_,comp:x}),_=>({valid:!1,comp:x,err:_})):Promise.resolve({valid:k,comp:x})};return(e.greedy===!0?Promise.all(q.map(A)).then(x=>x.filter(k=>k.valid!==!0)):q.reduce((x,k)=>x.then(()=>A(k).then(_=>{if(_.valid===!1)return Promise.reject(_)})),Promise.resolve()).catch(x=>[x])).then(x=>{if(x===void 0||x.length===0)return n===r&&K(!0),!0;if(n===r){const{comp:k,err:_}=x[0];if(_!==void 0&&console.error(_),K(!1,k),H===!0){const G=x.find(({comp:ie})=>typeof ie.focus=="function"&&Dl(ie.$)===!1);G!==void 0&&G.comp.focus()}}return!1})}function c(){r++,q.forEach(u=>{typeof u.resetValidation=="function"&&u.resetValidation()})}function D(u){u!==void 0&&he(u);const H=r+1;b().then(n=>{H===r&&n===!0&&(e.onSubmit!==void 0?g("submit",u):u!==void 0&&u.target!==void 0&&typeof u.target.submit=="function"&&u.target.submit())})}function i(u){u!==void 0&&he(u),g("reset"),ye(()=>{c(),e.autofocus===!0&&e.noResetFocus!==!0&&h()})}function h(){Hl(()=>{if(F.value===null)return;const u=F.value.querySelector("[autofocus][tabindex], [data-autofocus][tabindex]")||F.value.querySelector("[autofocus] [tabindex], [data-autofocus] [tabindex]")||F.value.querySelector("[autofocus], [data-autofocus]")||Array.prototype.find.call(F.value.querySelectorAll("[tabindex]"),H=>H.tabIndex>-1);u!=null&&u.focus({preventScroll:!0})})}Rl(Ll,{bindComponent(u){q.push(u)},unbindComponent(u){const H=q.indexOf(u);H>-1&&q.splice(H,1)}});let w=!1;return Xt(()=>{w=!0}),Gt(()=>{w===!0&&e.autofocus===!0&&h()}),kt(()=>{e.autofocus===!0&&h()}),Object.assign(p.proxy,{validate:b,resetValidation:c,submit:D,reset:i,focus:h,getValidationComponents:()=>q}),()=>E("form",{class:"q-form",ref:F,onSubmit:D,onReset:i},El(S.default))}});const $o={__name:"FileEdit",emits:[...ot.emits],setup(e,{expose:S}){const g=xt(),p=Ct({item:null,callback:null}),F=(h,w)=>{p.item=new Vo().fromObject(h),p.item.Jpg=null,p.item.Code=ll(h.Code),p.item.Title=lt(h.Title),p.callback=w,b.value.show()},r=async()=>{await q(!0)},q=async h=>{const{Id:w,Title:u,Code:H,Actress:n,FileType:K,MovieType:A,Jpg:M}=p.item;let x=H.trim();x&&x.indexOf("-")<0&&(x="-"+x);let k="";n.length!=0&&(k+="["+n.trim()+"]"),x.length!=0&&(k+=" ["+x.trim()+"]"),A&&A!="\u65E0"&&k.indexOf("{{")<0&&(k+=`{{${A}}}`);const _=u.trim().split("."),G=_.length;for(let ne=0;ne<G;ne++){const te=_[ne];k+=te.replace(te.charAt(0),te.charAt(0).toUpperCase())}k.indexOf("."+K)<0&&(k+="."+K);const re=await al({Id:w,Name:k,Code:x,Title:u,Actress:n,MoveOut:h,Jpg:M,NoRefresh:!0});re.Code==200?(D(),p.callback&&p.callback()):g.notify({type:"negative",message:re.Message})},{dialogRef:b,onDialogHide:c,onDialogOK:D,onDialogCancel:i}=ot();return S({open:F}),(h,w)=>(V(),N(wt,{ref_key:"dialogRef",ref:b,onHide:j(c)},{default:y(()=>[d(Vt,{class:"q-dialog-plugin q-pa-md",style:tl({width:"600px",backgroundImage:"linear-gradient(to left, rgba(255,255,255,0.1), rgba(255,255,255,0.1))"})},{default:y(()=>[d(Ao,{class:"q-gutter-md"},{default:y(()=>[d(Ql,{modelValue:p.item.MovieType,"onUpdate:modelValue":w[0]||(w[0]=u=>p.item.MovieType=u),options:j(ol),color:"primary",inline:""},null,8,["modelValue","options"]),d(De,{label:"\u7F16\u7801",autogrow:"",modelValue:p.item.Code,"onUpdate:modelValue":w[1]||(w[1]=u=>p.item.Code=u),dense:!1},null,8,["modelValue"]),d(De,{label:"\u56FE\u9274",autogrow:"",modelValue:p.item.Actress,"onUpdate:modelValue":w[2]||(w[2]=u=>p.item.Actress=u),dense:!1},null,8,["modelValue"]),d(De,{label:"\u540D\u79F0",autogrow:"",modelValue:p.item.Title,"onUpdate:modelValue":w[3]||(w[3]=u=>p.item.Title=u),dense:!1},null,8,["modelValue"]),d(De,{label:"\u56FE\u7247\u5730\u5740",autogrow:"",modelValue:p.item.Jpg,"onUpdate:modelValue":w[4]||(w[4]=u=>p.item.Jpg=u),dense:!1},null,8,["modelValue"])]),_:1}),d(Nl,{align:"right"},{default:y(()=>[d(J,{color:"primary",label:"\u79FB\u52A8",onClick:r}),d(J,{color:"primary",label:"\u547D\u540D",onClick:w[5]||(w[5]=()=>{q(!1)})}),d(J,{color:"primary",label:"\u5173\u95ED",onClick:j(i)},null,8,["onClick"])]),_:1})]),_:1},8,["style"])]),_:1},8,["onHide"]))}},Oo={style:{"max-width":"50vw",height:"1.5rem",overflow:"hidden"}},Bo={key:0,style:{overflow:"auto"}},Ro=["src"],Eo={key:1},Do={key:2},Ho={class:"self-center full-width no-outline",tabindex:"0"},Lo={class:"self-center full-width no-outline",tabindex:"0"},Qo={class:"self-center full-width no-outline",tabindex:"0"},No={class:"self-center full-width no-outline",tabindex:"0"},Ko={key:3},Uo={__name:"FileInfo",emits:[...ot.emits],setup(e,{expose:S}){const g=xt(),p=T(()=>g.platform.is.mobile),F=[{label:"\u64AD\u653E",value:"movie"},{label:"\u8BE6\u60C5",value:"detail"},{label:"\u56FE\u5C42",value:"image"},{label:"JavBus",value:"web"}],r=L(null),q=L(!1),b=L("detail"),c=Ct({item:{},settingInfo:{},callback:null,prewiewImages:[]}),D=()=>{b.value="movie",setTimeout(()=>{r.value.open(c.item)},100)},i=K=>{const{item:A,cb:M,playing:x}=K;c.prewiewImages=[],c.item={...A},c.callback=M,u.value.show(),x&&D(),setTimeout(()=>{mo(A.Id).then(k=>{c.prewiewImages=k.data})},500)},h=async()=>{const K=await nl();c.settingInfo=K.data},w=K=>{const A=`${c.settingInfo.BaseUrl}/${K.Code}`;console.log(A),g.platform.is.electron?window.electron.createWindow({router:A,width:1280,height:1e3,titleBarStyle:""}):window.open(A)},{dialogRef:u,onDialogHide:H}=ot(),n=()=>{r.value&&r.value.stop(),b.value="detail",q.value=!1,H()};return kt(()=>{h()}),S({open:i}),(K,A)=>(V(),N(wt,{ref_key:"dialogRef",ref:u,onEscapeKey:n,onBeforeHide:n,onHide:n,"model-value":q.value,"onUpdate:modelValue":A[2]||(A[2]=M=>q.value=M),maximized:p.value,"full-width":""},{default:y(()=>[d(oo,{class:"bg-black text-white shadow-2 rounded-borders"},{default:y(()=>[d(lo,{shrink:""},{default:y(()=>[R("div",Oo,Y(c.item.Name),1)]),_:1}),d(Qt),d(ro,{modelValue:b.value,"onUpdate:modelValue":A[0]||(A[0]=M=>b.value=M),shrink:""},{default:y(()=>[(V(),Z(ue,null,ce(F,M=>d(so,{key:M.value,name:M.value,label:M.label,onClick:x=>b.value=M.value},null,8,["name","label","onClick"])),64))]),_:1},8,["modelValue"]),d(Qt),d(J,{dense:"",flat:"",icon:"close",onClick:n},{default:y(()=>[d(io,{class:"bg-white text-primary"},{default:y(()=>[be("\u5173\u95ED")]),_:1})]),_:1})]),_:1}),d(Vt,{style:{"max-width":"1400px!important",height:"96vh!important"}},{default:y(()=>[b.value=="web"?(V(),Z("div",Bo,[R("iframe",{frameborder:0,allowfullscreen:!0,width:"100%",height:"900px",src:`${c.settingInfo.BaseUrl}${c.item.Code}`},null,8,Ro)])):X("",!0),b.value=="movie"?(V(),Z("div",Eo,[d(ao,{ref_key:"vue3VideoPlayRef",ref:r,mode:p.value?"drawer":"window",onClose:n},null,8,["mode"])])):X("",!0),b.value=="detail"?(V(),Z("div",Do,[d(pt,{fit:"fit",easier:"",draggable:"",src:j(Zl)(c.item.Id),style:{"max-height":"60vh"}},null,8,["src"]),d(Re,{label:"Code","stack-label":""},{control:y(()=>[R("div",{class:"self-center full-width no-outline cursor-pointer",style:{color:"blue"},tabindex:"0",onClick:A[1]||(A[1]=M=>w(c.item))},Y(c.item.Code),1)]),_:1}),d(Re,{label:"Actress","stack-label":""},{control:y(()=>[R("div",Ho,Y(c.item.Actress),1)]),_:1}),d(Re,{label:"Name","stack-label":""},{control:y(()=>[R("div",Lo,Y(j(lt)(c.item.Name)),1)]),_:1}),d(Re,{label:"Time","stack-label":""},{control:y(()=>[R("div",Qo,Y(j(lt)(c.item.MTime)),1)]),_:1}),d(Re,{label:"Path","stack-label":""},{control:y(()=>[R("div",No,Y(c.item.Path),1)]),_:1})])):X("",!0),b.value=="image"?(V(),Z("div",Ko,[(V(!0),Z(ue,null,ce(c.prewiewImages,M=>(V(),N(pt,{fit:"fit",key:M.Id,src:j(eo)(M.Id),style:{width:"100%",height:"auto"}},null,8,["src"]))),128))])):X("",!0)]),_:1})]),_:1},8,["model-value","maximized"]))}};const il=e=>(Gl("data-v-530223f6"),e=e(),Yl(),e),jo={class:"q-mg-md top",style:{"margin-bottom":"40px"}},Wo={class:"row justify-center q-gutter-sm",ref:"top"},Jo={style:{width:"200px","max-height":"50vh"}},Xo={class:"q-pa-sm flex flex-center"},Go={class:"row justify-center q-mt-sm mainlist"},Yo={class:"float-head absolute-top"},Zo={style:{display:"flex","flex-direction":"column","justify-content":"flex-start",width:"fit-content"}},ea={class:"tag-popup"},ta=il(()=>R("span",null,"\u79CD\u8349",-1)),la=["onClick"],oa=il(()=>R("div",{class:"text-subtitle1 text-white"}," Loading... ",-1)),aa={style:{"background-color":"rgba(0, 0, 0, 0.2)"}},na={style:{display:"flex","flex-direction":"row"}},ua={style:{display:"flex","flex-direction":"row"}},ia={style:{height:"4rem",overflow:"hidden"}},ra=["onClick"],sa=["onClick"],ca=["onClick"],da={__name:"SearchPage",setup(e){const S=L(null),g=L(null),p=L(null),F=L("Hello"),{copy:r}=vo({source:F}),q=xo(),b=T(()=>q.getSuggestions),c=xt(),D=T(()=>n.settingInfo.Buttons),i=T(()=>c.platform.is.mobile),h=a=>{if(c.platform.is.electron){const{Path:l}=a;window.electron.openBySystem({Path:l})}else _(ho(a.Id))},w=a=>{const{settingInfo:l}=a;l&&(n.settingInfo=l)},u=a=>!D.value||D.value.length==0?!0:D.value.indexOf(a)>=0,H=a=>{const l=`#/playing/${a.Id}`;c.platform.is.electron?window.electron.createWindow({router:l}):window.open(l)},n=Ct({currentData:{},settingInfo:{},queryParam:{Keyword:"",MovieType:"",OnlyRepeat:!1,fullscreen:!1,Page:1,PageSize:20,SortField:"MTime",SortType:"desc"},resultData:{},fullscreen:!1}),K=a=>{const l=`${n.settingInfo.BaseUrl}${a.Code}`;console.log(l),c.platform.is.electron?window.electron.createWindow({router:l,width:1280,height:1e3,titleBarStyle:""}):window.open(l)},A=a=>{console.log(a),a.target.select()},M=a=>{c.platform.is.electron?window.electron.showInFolder(a.Path):_(wo(a.Id))},x=a=>{c.dialog({title:a.Name,message:"\u786E\u5B9A\u5220\u9664\u5417?",cancel:!0,persistent:!0}).onOk(()=>{console.log(">>>> onOk"),_(ko(a.Id),!0)}).onCancel(()=>{console.log(">>>> Cancel")}).onDismiss(()=>{})},k=async()=>{const a=await nl();n.settingInfo=a.data,q.SettingInfo=a.data},_=async(a,l)=>{const{Code:o,Message:m}=await a||{};console.log(o,m),o!=200?c.notify({message:`${m}`}):l&&se()};jt(["`"],()=>{se()}),jt(["Enter"],()=>{$()});const G=async a=>{await r(a),c.notify({message:`${a}`})},ie=a=>{const{Page:l,PageSize:o,MovieType:m,SortField:v,SortType:O}=n.queryParam,I=Se({path:"/search",query:{Page:l,PageSize:o,MovieType:m,SortField:v,SortType:O,Keyword:a}});window.open(I.href,"_blank")},re=a=>{n.currentData=a,q.Playing=a,q.drawerRight=!0},ne=async a=>{console.log("view.queryParam.Page",a),await $();const l=document.querySelector(".scroll");console.log(l),l&&l.scrollTo(0,0)},te=a=>{n.queryParam.Page=n.queryParam.Page+a,ne()},$=async a=>{fe();const{Keyword:l}=n.queryParam,o=await go(n.queryParam);console.log(o),n.resultData={...o};const{ResultSize:m,ResultCnt:v}=o;document.title=`\u641C\u7D22 ${l||""} : ${m} {${v}}`},pe=async a=>{const l=await al({...a,NoRefresh:!0,MoveOut:!0});console.log(l),l.Code==200?c.notify({type:"negative",message:l.Message}):c.notify({type:"negative",message:l.Message})},me=L(!1),se=async()=>{me.value=!0;const{Code:a,Message:l}=await yo("/api/refreshIndex");console.log(a,l),a=="200"&&(c.notify({type:"negative",message:l}),await $()),me.value=!1},ge=async(a,l)=>{const{Code:o,Message:m}=await Co(a,l);o==="200"?c.notify({type:"negative",message:m}):c.notify({type:"warning",message:m})},fe=()=>{q.syncSearchParam(n.queryParam),localStorage.setItem("queryParam",JSON.stringify(n.queryParam));const{Page:a,PageSize:l,MovieType:o,SortField:m,SortType:v,Keyword:O}=n.queryParam;we({path:"/search",query:{Page:a,PageSize:l,MovieType:o,SortField:m,SortType:v,Keyword:O}})},xe=Ul(),{push:we,resolve:Se}=jl();return kt(async()=>{document.title="\u641C\u7D22";const{Page:a,PageSize:l,MovieType:o,SortField:m,SortType:v,Keyword:O,showStyle:I,from:P}=xe.query;if(await k(),O&&(n.queryParam.Keyword=O),a&&l)n.queryParam.Page=Number(a),n.queryParam.PageSize=Number(l),n.queryParam.MovieType=o,n.queryParam.SortField=m,n.queryParam.SortType=v,n.queryParam.Keyword=O,n.queryParam.showStyle=I;else if(P=="index"){const U=q.FileSearchParam;U&&(console.log("piniaParam",U),n.queryParam=U)}else{const U=JSON.parse(localStorage.getItem("queryParam"));U&&(console.log("storage",U),n.queryParam=U)}$()}),(a,l)=>(V(),Z(ue,null,[R("div",jo,[d(dt,{style:{"z-index":"9"},position:"bottom-left",offset:[6,i.value?180:160]},{default:y(()=>[n.queryParam.Page>1?(V(),N(J,{key:0,round:"",class:"page-sticky",color:"amber","text-color":"black",icon:"keyboard_arrow_left",onClick:l[0]||(l[0]=o=>te(-1))})):X("",!0)]),_:1},8,["offset"]),d(dt,{style:{"z-index":"9"},position:"bottom-right",offset:[10,i.value?180:160]},{default:y(()=>[d(J,{round:"",class:"page-sticky",color:"secondary","text-color":"black",icon:"keyboard_arrow_right",onClick:l[1]||(l[1]=o=>te(1))})]),_:1},8,["offset"]),R("div",Wo,[d(J,{loading:me.value,outline:i.value,color:"red",onClick:se},{loading:y(()=>[be(" \u6267\u884C\u4E2D")]),default:y(()=>[be(" \u7D22\u5370~ ")]),_:1},8,["loading","outline"]),i.value?X("",!0):(V(),N(ft,{key:0,size:"md",modelValue:n.queryParam.SortField,"onUpdate:modelValue":[l[2]||(l[2]=o=>n.queryParam.SortField=o),l[3]||(l[3]=o=>$())],"toggle-color":"primary",options:[{label:"\u65F6",value:"MTime"},{label:"\u5BB9",value:"Size"},{label:"\u540D",value:"Code"}]},null,8,["modelValue"])),i.value?X("",!0):(V(),N(ft,{key:1,modelValue:n.queryParam.SortType,"onUpdate:modelValue":[l[4]||(l[4]=o=>n.queryParam.SortType=o),l[5]||(l[5]=o=>$())],"toggle-color":"primary",options:[{label:"\u6B63",value:"asc"},{label:"\u5012",value:"desc"}]},null,8,["modelValue"])),i.value?X("",!0):(V(),N(ft,{key:2,modelValue:n.queryParam.MovieType,"onUpdate:modelValue":[l[6]||(l[6]=o=>n.queryParam.MovieType=o),l[7]||(l[7]=o=>$())],"toggle-color":"primary",options:j(vt)},null,8,["modelValue","options"])),i.value?(V(),N(et,{key:3,outline:"",color:"primary",label:j(mt)(n.queryParam.SortField,j(Kt))},{default:y(()=>[d(je,null,{default:y(()=>[(V(!0),Z(ue,null,ce(j(Kt),o=>Ue((V(),N(Be,{key:o.label,clickable:"",onClick:m=>{n.queryParam.SortField=o.value,$()}},{default:y(()=>[d(Oe,null,{default:y(()=>[d($e,null,{default:y(()=>[be(Y(o.label),1)]),_:2},1024)]),_:2},1024)]),_:2},1032,["onClick"])),[[tt]])),128))]),_:1})]),_:1},8,["label"])):X("",!0),i.value?(V(),N(et,{key:4,outline:"",color:"primary",label:j(mt)(n.queryParam.SortType,j(Ut))},{default:y(()=>[d(je,null,{default:y(()=>[(V(!0),Z(ue,null,ce(j(Ut),o=>Ue((V(),N(Be,{key:o.label,clickable:"",onClick:m=>{n.queryParam.SortType=o.value,$()}},{default:y(()=>[d(Oe,null,{default:y(()=>[d($e,null,{default:y(()=>[be(Y(o.label),1)]),_:2},1024)]),_:2},1024)]),_:2},1032,["onClick"])),[[tt]])),128))]),_:1})]),_:1},8,["label"])):X("",!0),i.value?(V(),N(et,{key:5,outline:"",color:"primary",label:j(mt)(n.queryParam.MovieType,j(vt))},{default:y(()=>[d(je,null,{default:y(()=>[(V(!0),Z(ue,null,ce(j(vt),o=>Ue((V(),N(Be,{key:o.label,clickable:"",onClick:m=>{n.queryParam.MovieType=o.value,$()}},{default:y(()=>[d(Oe,null,{default:y(()=>[d($e,null,{default:y(()=>[be(Y(o.label),1)]),_:2},1024)]),_:2},1024)]),_:2},1032,["onClick"])),[[tt]])),128))]),_:1})]),_:1},8,["label"])):X("",!0),d(De,{id:"searchBtn",label:"...",modelValue:n.queryParam.Keyword,"onUpdate:modelValue":[l[8]||(l[8]=o=>n.queryParam.Keyword=o),l[9]||(l[9]=o=>$())],dense:!0,filled:"",clearable:""},{prepend:y(()=>[d(yt,{name:"ti-list",class:"cursor-pointer"},{default:y(()=>[d(Nt,null,{default:y(()=>[R("div",Jo,[d(je,null,{default:y(()=>[(V(!0),Z(ue,null,ce(b.value,o=>Ue((V(),N(Be,{clickable:"",key:o,onClick:m=>{n.queryParam.Keyword=o,$()}},{default:y(()=>[d(Oe,null,{default:y(()=>[d($e,null,{default:y(()=>[be(Y(o),1)]),_:2},1024)]),_:2},1024)]),_:2},1032,["onClick"])),[[Xl]])),128))]),_:1})])]),_:1})]),_:1})]),append:y(()=>[d(yt,{name:"ti-search",title:"\u641C",class:"cursor-pointer",onClick:$})]),_:1},8,["modelValue"]),d(J,{class:"q-mr-sm",flat:"",size:"sm",color:"primary",icon:"ti-settings",onClick:l[10]||(l[10]=o=>p.value.open({queryParam:n.queryParam,settingInfo:n.settingInfo,cb:w}))}),i.value?X("",!0):(V(),N(Wl,{key:6,modelValue:n.queryParam.OnlyRepeat,"onUpdate:modelValue":[l[11]||(l[11]=o=>n.queryParam.OnlyRepeat=o),$],flat:"",label:"\u91CD"},null,8,["modelValue"]))],512),d(dt,{position:"bottom",style:{"z-index":"9","background-color":"rgba(0, 0, 0, 0.6)"}},{default:y(()=>[R("div",Xo,[d(Fo,{color:"lime-11 q-mr-md","bg-color":"black",dense:"","onUpdate:modelValue":[l[12]||(l[12]=o=>{n.queryParam.PageSize=Number(o),$()}),l[13]||(l[13]=o=>n.queryParam.PageSize=o)],filled:"",dark:"",modelValue:n.queryParam.PageSize,options:[10,20,30,50,200]},null,8,["modelValue"]),d(co,{modelValue:n.queryParam.Page,"onUpdate:modelValue":[l[14]||(l[14]=o=>n.queryParam.Page=o),ne],color:"deep-orange",ellipses:!0,max:n.resultData.TotalPage||0,"max-pages":i.value?5:10,"boundary-numbers":"","direction-links":""},null,8,["modelValue","max","max-pages"]),d(De,{modelValue:n.queryParam.Page,"onUpdate:modelValue":[l[15]||(l[15]=o=>n.queryParam.Page=o),l[17]||(l[17]=o=>{n.queryParam.Page=Number(o),$()})],dense:!0,type:"search",style:{"background-color":"aliceblue",width:"40px","text-align":"center"},onFocus:l[16]||(l[16]=o=>A(o))},null,8,["modelValue"])])]),_:1}),d(no,null,{default:y(()=>[R("div",Go,[(V(!0),Z(ue,null,ce(n.resultData.Data,o=>(V(),N(Vt,{class:Lt(["q-ma-sm",{"example-item":!i.value,"mobile-item":i.value}]),key:o.Id},{default:y(()=>{var m;return[R("div",Yo,[R("div",Zo,[d(bt,{square:"","text-color":"white",style:{"margin-left":"0px",padding:"0 4px","background-color":"rgba(236, 15, 15, 0.8)"}},{default:y(()=>[d(Nt,{"context-menu":""},{default:y(()=>[R("div",ea,[R("div",null,[(V(!0),Z(ue,null,ce(o.Tags,v=>(V(),N(J,{size:"sm",icon:"ti-minus",square:"","text-color":"white",color:"green",class:"tag-item",key:v,label:v,onClick:O=>_(j(po)(o.Id,v),!0)},null,8,["label","onClick"]))),128))]),R("div",null,[(V(!0),Z(ue,null,ce(n.settingInfo.Tags,v=>(V(),N(J,{size:"sm",icon:"ti-plus",square:"","text-color":"white",color:"red",class:"tag-item",key:v,label:v,onClick:O=>_(j(So)(o.Id,v),!0)},null,8,["label","onClick"]))),128))])])]),_:2},1024),ta]),_:2},1024),(V(!0),Z(ue,null,ce(o.Tags,v=>(V(),N(bt,{square:"","text-color":"white",key:v,style:{"margin-left":"0px",padding:"0 4px","background-color":"rgba(188, 24, 24, 0.6)"}},{default:y(()=>[R("span",{onClick:O=>{n.queryParam.Keyword=v,$()}},Y(v==null?void 0:v.substring(0,4)),9,la)]),_:2},1024))),128))]),d(et,{style:{"background-color":"rgba(0, 0, 0, 0.8)",width:"85px",height:"1rem",color:"antiquewhite"},label:o.MovieType},{default:y(()=>[d(je,{style:{"background-color":"rgba(0, 0, 0, 0.7)"}},{default:y(()=>[(V(!0),Z(ue,null,ce(j(ol),v=>Ue((V(),N(Be,{key:v.value,class:"movieTypeSelectItem"},{default:y(()=>[d(Oe,null,{default:y(()=>[d($e,{onClick:O=>ge(o.Id,v.value)},{default:y(()=>[be(Y(v.label),1)]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024)),[[tt]])),128))]),_:2},1024)]),_:2},1032,["label"])]),d(pt,{fit:"fit",easier:"",draggable:"",class:Lt({"img-self":!i.value,"img-self-moblie":i.value}),src:j(to)(o.Id),onClick:()=>{g.value.open({item:o,cb:se})}},{loading:y(()=>[oa]),_:2},1032,["class","src","onClick"]),R("div",{class:"absolute-bottom float-btn",style:tl({height:i.value?"6rem":"8.5rem"})},[R("div",aa,[R("div",na,[u("\u64AD\u653E")&&!i.value?(V(),N(J,{key:0,round:"",class:"q-mr-sm",size:i.value?"sm":"md",ripple:"",color:"primary",icon:"ti-control-eject",onClick:v=>h(o),title:"\u64AD\u653E"},null,8,["size","onClick"])):X("",!0),d(J,{round:"",class:"q-mr-sm",size:i.value?"sm":"md",ripple:"",color:"red",icon:"ti-fullscreen",title:"\u5355\u9875\u64AD\u653E",onClick:v=>H(o)},null,8,["size","onClick"]),d(J,{round:"",class:"q-mr-sm",size:i.value?"sm":"md",ripple:"",color:"orange",icon:"ti-arrow-right",onClick:v=>re(o),title:"\u5C0F\u64AD\u653E"},null,8,["size","onClick"]),d(J,{round:"",class:"q-mr-sm",size:i.value?"sm":"md",ripple:"",color:"orange",icon:"ti-blackboard",onClick:v=>g.value.open({item:o,playing:!0}),title:"\u5C0F\u64AD\u653E"},null,8,["size","onClick"])]),R("div",ua,[u("\u7F16\u8F91")?(V(),N(J,{key:0,round:"",class:"q-mr-sm",size:"sm",color:"primary",icon:"ti-slice",onClick:v=>S.value.open(o,se),title:"\u7F16\u8F91"},null,8,["onClick"])):X("",!0),u("\u6587\u4EF6\u5939")&&!i.value?(V(),N(J,{key:1,round:"",class:"q-mr-sm",size:"sm",color:"primary",icon:"open_in_new",onClick:v=>M(o),title:"\u6587\u4EF6\u5939"},null,8,["onClick"])):X("",!0),d(J,{round:"",class:"q-mr-sm",size:"sm",color:"brown-5",icon:"ti-search",title:"\u7F51\u641C",onClick:v=>K(o)},null,8,["onClick"]),u("\u522E\u56FE")?(V(),N(J,{key:2,round:"",class:"q-mr-sm",size:"sm",color:"secondary",icon:"ti-import",onClick:v=>_(j(bo)(o.Id)),title:"\u522E\u56FE"},null,8,["onClick"])):X("",!0),u("\u5220\u9664")?(V(),N(J,{key:3,round:"",class:"q-mr-sm",size:"sm",color:"amber",glossy:"","text-color":"black",icon:"ti-trash",onClick:v=>x(o),title:"\u5220\u9664"},null,8,["onClick"])):X("",!0),u("\u79FB\u52A8")?(V(),N(J,{key:4,round:"",class:"q-mr-sm",size:"sm",color:"black",onClick:v=>pe(o),icon:"ti-location-arrow",title:"\u79FB\u52A8"},null,8,["onClick"])):X("",!0)])]),R("div",ia,[R("a",{style:{color:"#9e089e","background-color":"rgba(0, 0, 0, 0.1)"},class:"mr10 cursor-pointer",target:"_blank",onClick:v=>ie(o.Actress)},Y((m=o.Actress)==null?void 0:m.substring(0,6)),9,ra),R("a",{style:{color:"rgb(239, 30, 30)","background-color":"rgba(0, 0, 0, 0.1)"},class:"mr10 cursor-pointer",onClick:v=>G(o.Code)},Y(j(ll)(o.Code)),9,sa),R("a",{style:{color:"rgb(22, 26, 227)","background-color":"rgba(0, 0, 0, 0.1)"},class:"mr10 cursor-pointer",onClick:v=>G(o.Title)},Y(o.SizeStr),9,ca),R("span",null,Y(j(lt)(o.Title)),1)])],4)]}),_:2},1032,["class"]))),128))]),d(Jl,{position:"bottom-right","scroll-offset":150,offset:[18,100]},{default:y(()=>[d(J,{fab:"",icon:"keyboard_arrow_up",color:"accent"})]),_:1})]),_:1})]),d($o,{ref_key:"fileEditRef",ref:S},null,512),d(Uo,{ref_key:"fileInfoRef",ref:g},null,512),d(fo,{ref_key:"listEditRef",ref:p},null,512)],64))}};var Pa=Kl(da,[["__scopeId","data-v-530223f6"]]);export{Pa as default};
