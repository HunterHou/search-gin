import{b1 as Rl,r as G,u as $,v as xe,b2 as Ll,b3 as Hl,b4 as rl,b5 as sl,K as ft,_ as _e,G as F,N as vt,E as mt,ab as Ql,b6 as cl,b7 as Nl,b8 as Ul,b9 as Kl,ba as Gt,bb as Xe,bc as jl,bd as Wl,az as Ct,Q as je,be as Jl,bf as Gl,bg as Ne,bh as Yt,ay as Yl,bi as Xl,af as qe,s as gt,a6 as Zl,a1 as eo,Z as At,H as dl,bj as to,aR as lo,bk as oo,g as et,o as w,c as U,w as s,C as W,a as n,bl as ao,l as Se,m as no,p as L,ah as fl,q as tt,h as R,t as J,k as Z,z as re,F as ue,f as le,e as oe,aj as uo,bm as io,aL as vl,S as ro,P as so,T as co,R as fo,bn as Xt,V as vo,b0 as Zt,n as Ie,A as mo,bo as el,i as go,ag as Vt,ar as ml,ap as yo,x as bo,aq as po,bp as So,as as ho,ak as wo,al as ko}from"./index.3a29eae7.js";import{Q as xt}from"./QPageSticky.f1bd62f5.js";import{a as Pt,c as Co,d as xo,Q as rt,b as _o}from"./index.d7326852.js";import{Q as ke,d as qo,e as tl,c as Io,P as Vo,g as Pe,i as Po,j as ll}from"./PlayingVideo.cebdde1b.js";import{c as To,a as ye,Q as Ve,d as zo}from"./QMenu.d88dc170.js";import{r as Tt,Q as Ae,a as gl,b as st,c as $o,d as _t,e as Fe,f as Mo}from"./Setting.6ea8d999.js";import{Q as zt}from"./QChip.5dea51ee.js";import{u as We,Q as Ao}from"./use-dialog-plugin-component.e2092cb1.js";import{C as Ue}from"./ClosePopup.18fa20a0.js";import{u as yt,a as Fo,o as ol}from"./index.27d30962.js";import{F as Ft,Q as Oo,b as $t,c as Bo,C as yl,T as Eo,d as Do,e as Ro,D as Mt,A as bl,R as pl,S as Sl,f as Lo,P as Ho,g as Qo}from"./searchAPI.28a64331.js";import{a as hl,P as No}from"./settingAPI.c05ae860.js";import{F as Uo,u as Ko}from"./System.d4b99f85.js";import"./axios.56dc1885.js";const we=1e3,jo=["start","center","end","start-force","center-force","end-force"],wl=Array.prototype.filter,Wo=window.getComputedStyle(document.body).overflowAnchor===void 0?Rl:function(e,S){e!==null&&(e._qOverflowAnimationFrame!==void 0&&cancelAnimationFrame(e._qOverflowAnimationFrame),e._qOverflowAnimationFrame=requestAnimationFrame(()=>{if(e===null)return;e._qOverflowAnimationFrame=void 0;const m=e.children||[];wl.call(m,z=>z.dataset&&z.dataset.qVsAnchor!==void 0).forEach(z=>{delete z.dataset.qVsAnchor});const y=m[S];y&&y.dataset&&(y.dataset.qVsAnchor="")}))};function Ke(e,S){return e+S}function qt(e,S,m,y,z,c,q,u){const r=e===window?document.scrollingElement||document.documentElement:e,H=z===!0?"offsetWidth":"offsetHeight",f={scrollStart:0,scrollViewSize:-q-u,scrollMaxSize:0,offsetStart:-q,offsetEnd:-u};if(z===!0?(e===window?(f.scrollStart=window.pageXOffset||window.scrollX||document.body.scrollLeft||0,f.scrollViewSize+=document.documentElement.clientWidth):(f.scrollStart=r.scrollLeft,f.scrollViewSize+=r.clientWidth),f.scrollMaxSize=r.scrollWidth,c===!0&&(f.scrollStart=(Tt===!0?f.scrollMaxSize-f.scrollViewSize:0)-f.scrollStart)):(e===window?(f.scrollStart=window.pageYOffset||window.scrollY||document.body.scrollTop||0,f.scrollViewSize+=document.documentElement.clientHeight):(f.scrollStart=r.scrollTop,f.scrollViewSize+=r.clientHeight),f.scrollMaxSize=r.scrollHeight),m!==null)for(let C=m.previousElementSibling;C!==null;C=C.previousElementSibling)C.classList.contains("q-virtual-scroll--skip")===!1&&(f.offsetStart+=C[H]);if(y!==null)for(let C=y.nextElementSibling;C!==null;C=C.nextElementSibling)C.classList.contains("q-virtual-scroll--skip")===!1&&(f.offsetEnd+=C[H]);if(S!==e){const C=r.getBoundingClientRect(),x=S.getBoundingClientRect();z===!0?(f.offsetStart+=x.left-C.left,f.offsetEnd-=x.width):(f.offsetStart+=x.top-C.top,f.offsetEnd-=x.height),e!==window&&(f.offsetStart+=f.scrollStart),f.offsetEnd+=f.scrollMaxSize-f.offsetStart}return f}function al(e,S,m,y){S==="end"&&(S=(e===window?document.body:e)[m===!0?"scrollWidth":"scrollHeight"]),e===window?m===!0?(y===!0&&(S=(Tt===!0?document.body.scrollWidth-document.documentElement.clientWidth:0)-S),window.scrollTo(S,window.pageYOffset||window.scrollY||document.body.scrollTop||0)):window.scrollTo(window.pageXOffset||window.scrollX||document.body.scrollLeft||0,S):m===!0?(y===!0&&(S=(Tt===!0?e.scrollWidth-e.offsetWidth:0)-S),e.scrollLeft=S):e.scrollTop=S}function Ze(e,S,m,y){if(m>=y)return 0;const z=S.length,c=Math.floor(m/we),q=Math.floor((y-1)/we)+1;let u=e.slice(c,q).reduce(Ke,0);return m%we!==0&&(u-=S.slice(c*we,m).reduce(Ke,0)),y%we!==0&&y!==z&&(u-=S.slice(y,q*we).reduce(Ke,0)),u}const Jo={virtualScrollSliceSize:{type:[Number,String],default:null},virtualScrollSliceRatioBefore:{type:[Number,String],default:1},virtualScrollSliceRatioAfter:{type:[Number,String],default:1},virtualScrollItemSize:{type:[Number,String],default:24},virtualScrollStickySizeStart:{type:[Number,String],default:0},virtualScrollStickySizeEnd:{type:[Number,String],default:0},tableColspan:[Number,String]},Go={virtualScrollHorizontal:Boolean,onVirtualScroll:Function,...Jo};function Yo({virtualScrollLength:e,getVirtualScrollTarget:S,getVirtualScrollEl:m,virtualScrollItemSizeComputed:y}){const z=vt(),{props:c,emit:q,proxy:u}=z,{$q:r}=u;let H,f,C,x=[],d;const j=G(0),a=G(0),D=G({}),T=G(null),_=G(null),O=G(null),P=G({from:0,to:0}),M=$(()=>c.tableColspan!==void 0?c.tableColspan:100);y===void 0&&(y=$(()=>c.virtualScrollItemSize));const ae=$(()=>y.value+";"+c.virtualScrollHorizontal),ce=$(()=>ae.value+";"+c.virtualScrollSliceRatioBefore+";"+c.virtualScrollSliceRatioAfter);xe(ce,()=>{I()}),xe(ae,de);function de(){v(f,!0)}function fe(l){v(l===void 0?f:l)}function ie(l,o){const k=S();if(k==null||k.nodeType===8)return;const h=qt(k,m(),T.value,_.value,c.virtualScrollHorizontal,r.lang.rtl,c.virtualScrollStickySizeStart,c.virtualScrollStickySizeEnd);C!==h.scrollViewSize&&I(h.scrollViewSize),he(k,h,Math.min(e.value-1,Math.max(0,parseInt(l,10)||0)),0,jo.indexOf(o)>-1?o:f>-1&&l>f?"end":"start")}function K(){const l=S();if(l==null||l.nodeType===8)return;const o=qt(l,m(),T.value,_.value,c.virtualScrollHorizontal,r.lang.rtl,c.virtualScrollStickySizeStart,c.virtualScrollStickySizeEnd),k=e.value-1,h=o.scrollMaxSize-o.offsetStart-o.offsetEnd-a.value;if(H===o.scrollStart)return;if(o.scrollMaxSize<=0){he(l,o,0,0);return}C!==o.scrollViewSize&&I(o.scrollViewSize),V(P.value.from);const Y=Math.floor(o.scrollMaxSize-Math.max(o.scrollViewSize,o.offsetEnd)-Math.min(d[k],o.scrollViewSize/2));if(Y>0&&Math.ceil(o.scrollStart)>=Y){he(l,o,k,o.scrollMaxSize-o.offsetEnd-x.reduce(Ke,0));return}let Q=0,E=o.scrollStart-o.offsetStart,te=E;if(E<=h&&E+o.scrollViewSize>=j.value)E-=j.value,Q=P.value.from,te=E;else for(let N=0;E>=x[N]&&Q<k;N++)E-=x[N],Q+=we;for(;E>0&&Q<k;)E-=d[Q],E>-o.scrollViewSize?(Q++,te=E):te=d[Q]+E;he(l,o,Q,te)}function he(l,o,k,h,Y){const Q=typeof Y=="string"&&Y.indexOf("-force")>-1,E=Q===!0?Y.replace("-force",""):Y,te=E!==void 0?E:"start";let N=Math.max(0,k-D.value[te]),me=N+D.value.total;me>e.value&&(me=e.value,N=Math.max(0,me-D.value.total)),H=o.scrollStart;const Oe=N!==P.value.from||me!==P.value.to;if(Oe===!1&&E===void 0){se(k);return}const{activeElement:Je}=document,Ce=O.value;Oe===!0&&Ce!==null&&Ce!==Je&&Ce.contains(Je)===!0&&(Ce.addEventListener("focusout",p),setTimeout(()=>{Ce!==null&&Ce.removeEventListener("focusout",p)})),Wo(Ce,k-N);const ot=E!==void 0?d.slice(N,k).reduce(Ke,0):0;if(Oe===!0){const Te=me>=P.value.from&&N<=P.value.to?P.value.to:me;P.value={from:N,to:Te},j.value=Ze(x,d,0,N),a.value=Ze(x,d,me,e.value),requestAnimationFrame(()=>{P.value.to!==me&&H===o.scrollStart&&(P.value={from:P.value.from,to:me},a.value=Ze(x,d,me,e.value))})}requestAnimationFrame(()=>{if(H!==o.scrollStart)return;Oe===!0&&V(N);const Te=d.slice(N,k).reduce(Ke,0),Be=Te+o.offsetStart+j.value,at=Be+d[k];let Ge=Be+h;if(E!==void 0){const bt=Te-ot,ge=o.scrollStart+bt;Ge=Q!==!0&&ge<Be&&at<ge+o.scrollViewSize?ge:E==="end"?at-o.scrollViewSize:Be-(E==="start"?0:Math.round((o.scrollViewSize-d[k])/2))}H=Ge,al(l,Ge,c.virtualScrollHorizontal,r.lang.rtl),se(k)})}function V(l){const o=O.value;if(o){const k=wl.call(o.children,N=>N.classList&&N.classList.contains("q-virtual-scroll--skip")===!1),h=k.length,Y=c.virtualScrollHorizontal===!0?N=>N.getBoundingClientRect().width:N=>N.offsetHeight;let Q=l,E,te;for(let N=0;N<h;){for(E=Y(k[N]),N++;N<h&&k[N].classList.contains("q-virtual-scroll--with-prev")===!0;)E+=Y(k[N]),N++;te=E-d[Q],te!==0&&(d[Q]+=te,x[Math.floor(Q/we)]+=te),Q++}}}function p(){O.value!==null&&O.value!==void 0&&O.value.focus()}function v(l,o){const k=1*y.value;(o===!0||Array.isArray(d)===!1)&&(d=[]);const h=d.length;d.length=e.value;for(let Q=e.value-1;Q>=h;Q--)d[Q]=k;const Y=Math.floor((e.value-1)/we);x=[];for(let Q=0;Q<=Y;Q++){let E=0;const te=Math.min((Q+1)*we,e.value);for(let N=Q*we;N<te;N++)E+=d[N];x.push(E)}f=-1,H=void 0,j.value=Ze(x,d,0,P.value.from),a.value=Ze(x,d,P.value.to,e.value),l>=0?(V(P.value.from),_e(()=>{ie(l)})):be()}function I(l){if(l===void 0&&typeof window!="undefined"){const E=S();E!=null&&E.nodeType!==8&&(l=qt(E,m(),T.value,_.value,c.virtualScrollHorizontal,r.lang.rtl,c.virtualScrollStickySizeStart,c.virtualScrollStickySizeEnd).scrollViewSize)}C=l;const o=parseFloat(c.virtualScrollSliceRatioBefore)||0,k=parseFloat(c.virtualScrollSliceRatioAfter)||0,h=1+o+k,Y=l===void 0||l<=0?1:Math.ceil(l/y.value),Q=Math.max(1,Y,Math.ceil((c.virtualScrollSliceSize>0?c.virtualScrollSliceSize:10)/h));D.value={total:Math.ceil(Q*h),start:Math.ceil(Q*o),center:Math.ceil(Q*(.5+o)),end:Math.ceil(Q*(1+o)),view:Y}}function A(l,o){const k=c.virtualScrollHorizontal===!0?"width":"height",h={["--q-virtual-scroll-item-"+k]:y.value+"px"};return[l==="tbody"?F(l,{class:"q-virtual-scroll__padding",key:"before",ref:T},[F("tr",[F("td",{style:{[k]:`${j.value}px`,...h},colspan:M.value})])]):F(l,{class:"q-virtual-scroll__padding",key:"before",ref:T,style:{[k]:`${j.value}px`,...h}}),F(l,{class:"q-virtual-scroll__content",key:"content",ref:O,tabindex:-1},o.flat()),l==="tbody"?F(l,{class:"q-virtual-scroll__padding",key:"after",ref:_},[F("tr",[F("td",{style:{[k]:`${a.value}px`,...h},colspan:M.value})])]):F(l,{class:"q-virtual-scroll__padding",key:"after",ref:_,style:{[k]:`${a.value}px`,...h}})]}function se(l){f!==l&&(c.onVirtualScroll!==void 0&&q("virtualScroll",{index:l,from:P.value.from,to:P.value.to-1,direction:l<f?"decrease":"increase",ref:u}),f=l)}I();const be=Ll(K,r.platform.is.ios===!0?120:35);Hl(()=>{I()});let i=!1;return rl(()=>{i=!0}),sl(()=>{if(i!==!0)return;const l=S();H!==void 0&&l!==void 0&&l!==null&&l.nodeType!==8?al(l,H,c.virtualScrollHorizontal,r.lang.rtl):ie(f)}),ft(()=>{be.cancel()}),Object.assign(u,{scrollTo:ie,reset:de,refresh:fe}),{virtualScrollSliceRange:P,virtualScrollSliceSizeComputed:D,setVirtualScrollSize:I,onVirtualScrollEvt:be,localResetVirtualScroll:v,padVirtualScroll:A,scrollTo:ie,reset:de,refresh:fe}}const nl=e=>["add","add-unique","toggle"].includes(e),Xo=".*+?^${}()|[]\\",Zo=Object.keys(cl);var ea=mt({name:"QSelect",inheritAttrs:!1,props:{...Go,...Ql,...cl,modelValue:{required:!0},multiple:Boolean,displayValue:[String,Number],displayValueHtml:Boolean,dropdownIcon:String,options:{type:Array,default:()=>[]},optionValue:[Function,String],optionLabel:[Function,String],optionDisable:[Function,String],hideSelected:Boolean,hideDropdownIcon:Boolean,fillInput:Boolean,maxValues:[Number,String],optionsDense:Boolean,optionsDark:{type:Boolean,default:null},optionsSelectedClass:String,optionsHtml:Boolean,optionsCover:Boolean,menuShrink:Boolean,menuAnchor:String,menuSelf:String,menuOffset:Array,popupContentClass:String,popupContentStyle:[String,Array,Object],useInput:Boolean,useChips:Boolean,newValueMode:{type:String,validator:nl},mapOptions:Boolean,emitValue:Boolean,inputDebounce:{type:[Number,String],default:500},inputClass:[Array,String,Object],inputStyle:[Array,String,Object],tabindex:{type:[String,Number],default:0},autocomplete:String,transitionShow:String,transitionHide:String,transitionDuration:[String,Number],behavior:{type:String,validator:e=>["default","menu","dialog"].includes(e),default:"default"},virtualScrollItemSize:{type:[Number,String],default:void 0},onNewValue:Function,onFilter:Function},emits:[...Nl,"add","remove","inputValue","newValue","keyup","keypress","keydown","filterAbort"],setup(e,{slots:S,emit:m}){const{proxy:y}=vt(),{$q:z}=y,c=G(!1),q=G(!1),u=G(-1),r=G(""),H=G(!1),f=G(!1);let C=null,x,d,j,a=null,D,T,_,O;const P=G(null),M=G(null),ae=G(null),ce=G(null),de=G(null),fe=Ul(e),ie=Gl(Ut),K=$(()=>Array.isArray(e.options)?e.options.length:0),he=$(()=>e.virtualScrollItemSize===void 0?e.optionsDense===!0?24:48:e.virtualScrollItemSize),{virtualScrollSliceRange:V,virtualScrollSliceSizeComputed:p,localResetVirtualScroll:v,padVirtualScroll:I,onVirtualScrollEvt:A,scrollTo:se,setVirtualScrollSize:be}=Yo({virtualScrollLength:K,getVirtualScrollTarget:Il,getVirtualScrollEl:Qt,virtualScrollItemSizeComputed:he}),i=Kl(),l=$(()=>{const t=e.mapOptions===!0&&e.multiple!==!0,b=e.modelValue!==void 0&&(e.modelValue!==null||t===!0)?e.multiple===!0&&Array.isArray(e.modelValue)?e.modelValue:[e.modelValue]:[];if(e.mapOptions===!0&&Array.isArray(e.options)===!0){const g=e.mapOptions===!0&&x!==void 0?x:[],B=b.map(ee=>ql(ee,g));return e.modelValue===null&&t===!0?B.filter(ee=>ee!==null):B}return b}),o=$(()=>{const t={};return Zo.forEach(b=>{const g=e[b];g!==void 0&&(t[b]=g)}),t}),k=$(()=>e.optionsDark===null?i.isDark.value:e.optionsDark),h=$(()=>Gt(l.value)),Y=$(()=>{let t="q-field__input q-placeholder col";return e.hideSelected===!0||l.value.length===0?[t,e.inputClass]:(t+=" q-field__input--padding",e.inputClass===void 0?t:[t,e.inputClass])}),Q=$(()=>(e.virtualScrollHorizontal===!0?"q-virtual-scroll--horizontal":"")+(e.popupContentClass?" "+e.popupContentClass:"")),E=$(()=>K.value===0),te=$(()=>l.value.map(t=>pe.value(t)).join(", ")),N=$(()=>e.displayValue!==void 0?e.displayValue:te.value),me=$(()=>e.optionsHtml===!0?()=>!0:t=>t!=null&&t.html===!0),Oe=$(()=>e.displayValueHtml===!0||e.displayValue===void 0&&(e.optionsHtml===!0||l.value.some(me.value))),Je=$(()=>i.focused.value===!0?e.tabindex:-1),Ce=$(()=>{const t={tabindex:e.tabindex,role:"combobox","aria-label":e.label,"aria-readonly":e.readonly===!0?"true":"false","aria-autocomplete":e.useInput===!0?"list":"none","aria-expanded":c.value===!0?"true":"false","aria-controls":`${i.targetUid.value}_lb`};return u.value>=0&&(t["aria-activedescendant"]=`${i.targetUid.value}_${u.value}`),t}),ot=$(()=>({id:`${i.targetUid.value}_lb`,role:"listbox","aria-multiselectable":e.multiple===!0?"true":"false"})),Te=$(()=>l.value.map((t,b)=>({index:b,opt:t,html:me.value(t),selected:!0,removeAtIndex:_l,toggleOption:ze,tabindex:Je.value}))),Be=$(()=>{if(K.value===0)return[];const{from:t,to:b}=V.value;return e.options.slice(t,b).map((g,B)=>{const ee=Ee.value(g)===!0,X=t+B,ne={clickable:!0,active:!1,activeClass:bt.value,manualFocus:!0,focused:!1,disable:ee,tabindex:-1,dense:e.optionsDense,dark:k.value,role:"option",id:`${i.targetUid.value}_${X}`,onClick:()=>{ze(g)}};return ee!==!0&&(ht(g)===!0&&(ne.active=!0),u.value===X&&(ne.focused=!0),ne["aria-selected"]=ne.active===!0?"true":"false",z.platform.is.desktop===!0&&(ne.onMousemove=()=>{c.value===!0&&De(X)})),{index:X,opt:g,html:me.value(g),label:pe.value(g),selected:ne.active,focused:ne.focused,toggleOption:ze,setOptionIndex:De,itemProps:ne}})}),at=$(()=>e.dropdownIcon!==void 0?e.dropdownIcon:z.iconSet.arrow.dropdown),Ge=$(()=>e.optionsCover===!1&&e.outlined!==!0&&e.standout!==!0&&e.borderless!==!0&&e.rounded!==!0),bt=$(()=>e.optionsSelectedClass!==void 0?e.optionsSelectedClass:e.color!==void 0?`text-${e.color}`:""),ge=$(()=>St(e.optionValue,"value")),pe=$(()=>St(e.optionLabel,"label")),Ee=$(()=>St(e.optionDisable,"disable")),nt=$(()=>l.value.map(t=>ge.value(t))),xl=$(()=>{const t={onInput:Ut,onChange:ie,onKeydown:Ht,onKeyup:Rt,onKeypress:Lt,onFocus:Et,onClick(b){d===!0&&Ne(b)}};return t.onCompositionstart=t.onCompositionupdate=t.onCompositionend=ie,t});xe(l,t=>{x=t,e.useInput===!0&&e.fillInput===!0&&e.multiple!==!0&&i.innerLoading.value!==!0&&(q.value!==!0&&c.value!==!0||h.value!==!0)&&(j!==!0&&Qe(),(q.value===!0||c.value===!0)&&Re(""))},{immediate:!0}),xe(()=>e.fillInput,Qe),xe(c,wt),xe(K,Dl);function Ot(t){return e.emitValue===!0?ge.value(t):t}function pt(t){if(t>-1&&t<l.value.length)if(e.multiple===!0){const b=e.modelValue.slice();m("remove",{index:t,value:b.splice(t,1)[0]}),m("update:modelValue",b)}else m("update:modelValue",null)}function _l(t){pt(t),i.focus()}function Bt(t,b){const g=Ot(t);if(e.multiple!==!0){e.fillInput===!0&&Ye(pe.value(t),!0,!0),m("update:modelValue",g);return}if(l.value.length===0){m("add",{index:0,value:g}),m("update:modelValue",e.multiple===!0?[g]:g);return}if(b===!0&&ht(t)===!0||e.maxValues!==void 0&&e.modelValue.length>=e.maxValues)return;const B=e.modelValue.slice();m("add",{index:B.length,value:g}),B.push(g),m("update:modelValue",B)}function ze(t,b){if(i.editable.value!==!0||t===void 0||Ee.value(t)===!0)return;const g=ge.value(t);if(e.multiple!==!0){b!==!0&&(Ye(e.fillInput===!0?pe.value(t):"",!0,!0),$e()),M.value!==null&&M.value.focus(),(l.value.length===0||Xe(ge.value(l.value[0]),g)!==!0)&&m("update:modelValue",e.emitValue===!0?g:t);return}if((d!==!0||H.value===!0)&&i.focus(),Et(),l.value.length===0){const X=e.emitValue===!0?g:t;m("add",{index:0,value:X}),m("update:modelValue",e.multiple===!0?[X]:X);return}const B=e.modelValue.slice(),ee=nt.value.findIndex(X=>Xe(X,g));if(ee>-1)m("remove",{index:ee,value:B.splice(ee,1)[0]});else{if(e.maxValues!==void 0&&B.length>=e.maxValues)return;const X=e.emitValue===!0?g:t;m("add",{index:B.length,value:X}),B.push(X)}m("update:modelValue",B)}function De(t){if(z.platform.is.desktop!==!0)return;const b=t>-1&&t<K.value?t:-1;u.value!==b&&(u.value=b)}function ut(t=1,b){if(c.value===!0){let g=u.value;do g=Yt(g+t,-1,K.value-1);while(g!==-1&&g!==u.value&&Ee.value(e.options[g])===!0);u.value!==g&&(De(g),se(g),b!==!0&&e.useInput===!0&&e.fillInput===!0&&it(g>=0?pe.value(e.options[g]):D))}}function ql(t,b){const g=B=>Xe(ge.value(B),t);return e.options.find(g)||b.find(g)||t}function St(t,b){const g=t!==void 0?t:b;return typeof g=="function"?g:B=>B!==null&&typeof B=="object"&&g in B?B[g]:B}function ht(t){const b=ge.value(t);return nt.value.find(g=>Xe(g,b))!==void 0}function Et(t){e.useInput===!0&&M.value!==null&&(t===void 0||M.value===t.target&&t.target.value===te.value)&&M.value.select()}function Dt(t){Yl(t,27)===!0&&c.value===!0&&(Ne(t),$e(),Qe()),m("keyup",t)}function Rt(t){const{value:b}=t.target;if(t.keyCode!==void 0){Dt(t);return}if(t.target.value="",C!==null&&(clearTimeout(C),C=null),Qe(),typeof b=="string"&&b.length!==0){const g=b.toLocaleLowerCase(),B=X=>{const ne=e.options.find(ve=>X.value(ve).toLocaleLowerCase()===g);return ne===void 0?!1:(l.value.indexOf(ne)===-1?ze(ne):$e(),!0)},ee=X=>{B(ge)!==!0&&(B(pe)===!0||X===!0||Re(b,!0,()=>ee(!0)))};ee()}else i.clearValue(t)}function Lt(t){m("keypress",t)}function Ht(t){if(m("keydown",t),Xl(t)===!0)return;const b=r.value.length!==0&&(e.newValueMode!==void 0||e.onNewValue!==void 0),g=t.shiftKey!==!0&&e.multiple!==!0&&(u.value>-1||b===!0);if(t.keyCode===27){Ct(t);return}if(t.keyCode===9&&g===!1){Le();return}if(t.target===void 0||t.target.id!==i.targetUid.value||i.editable.value!==!0)return;if(t.keyCode===40&&i.innerLoading.value!==!0&&c.value===!1){qe(t),He();return}if(t.keyCode===8&&e.hideSelected!==!0&&r.value.length===0){e.multiple===!0&&Array.isArray(e.modelValue)===!0?pt(e.modelValue.length-1):e.multiple!==!0&&e.modelValue!==null&&m("update:modelValue",null);return}(t.keyCode===35||t.keyCode===36)&&(typeof r.value!="string"||r.value.length===0)&&(qe(t),u.value=-1,ut(t.keyCode===36?1:-1,e.multiple)),(t.keyCode===33||t.keyCode===34)&&p.value!==void 0&&(qe(t),u.value=Math.max(-1,Math.min(K.value,u.value+(t.keyCode===33?-1:1)*p.value.view)),ut(t.keyCode===33?1:-1,e.multiple)),(t.keyCode===38||t.keyCode===40)&&(qe(t),ut(t.keyCode===38?-1:1,e.multiple));const B=K.value;if((_===void 0||O<Date.now())&&(_=""),B>0&&e.useInput!==!0&&t.key!==void 0&&t.key.length===1&&t.altKey===!1&&t.ctrlKey===!1&&t.metaKey===!1&&(t.keyCode!==32||_.length!==0)){c.value!==!0&&He(t);const ee=t.key.toLocaleLowerCase(),X=_.length===1&&_[0]===ee;O=Date.now()+1500,X===!1&&(qe(t),_+=ee);const ne=new RegExp("^"+_.split("").map(kt=>Xo.indexOf(kt)>-1?"\\"+kt:kt).join(".*"),"i");let ve=u.value;if(X===!0||ve<0||ne.test(pe.value(e.options[ve]))!==!0)do ve=Yt(ve+1,-1,B-1);while(ve!==u.value&&(Ee.value(e.options[ve])===!0||ne.test(pe.value(e.options[ve]))!==!0));u.value!==ve&&_e(()=>{De(ve),se(ve),ve>=0&&e.useInput===!0&&e.fillInput===!0&&it(pe.value(e.options[ve]))});return}if(!(t.keyCode!==13&&(t.keyCode!==32||e.useInput===!0||_!=="")&&(t.keyCode!==9||g===!1))){if(t.keyCode!==9&&qe(t),u.value>-1&&u.value<B){ze(e.options[u.value]);return}if(b===!0){const ee=(X,ne)=>{if(ne){if(nl(ne)!==!0)return}else ne=e.newValueMode;if(Ye("",e.multiple!==!0,!0),X==null)return;(ne==="toggle"?ze:Bt)(X,ne==="add-unique"),e.multiple!==!0&&(M.value!==null&&M.value.focus(),$e())};if(e.onNewValue!==void 0?m("newValue",r.value,ee):ee(r.value),e.multiple!==!0)return}c.value===!0?Le():i.innerLoading.value!==!0&&He()}}function Qt(){return d===!0?de.value:ae.value!==null&&ae.value.contentEl!==null?ae.value.contentEl:void 0}function Il(){return Qt()}function Vl(){return e.hideSelected===!0?[]:S["selected-item"]!==void 0?Te.value.map(t=>S["selected-item"](t)).slice():S.selected!==void 0?[].concat(S.selected()):e.useChips===!0?Te.value.map((t,b)=>F(zt,{key:"option-"+b,removable:i.editable.value===!0&&Ee.value(t.opt)!==!0,dense:!0,textColor:e.color,tabindex:Je.value,onRemove(){t.removeAtIndex(b)}},()=>F("span",{class:"ellipsis",[t.html===!0?"innerHTML":"textContent"]:pe.value(t.opt)}))):[F("span",{[Oe.value===!0?"innerHTML":"textContent"]:N.value})]}function Nt(){if(E.value===!0)return S["no-option"]!==void 0?S["no-option"]({inputValue:r.value}):void 0;const t=S.option!==void 0?S.option:g=>F(Ve,{key:g.index,...g.itemProps},()=>F(ye,()=>F(ke,()=>F("span",{[g.html===!0?"innerHTML":"textContent"]:g.label}))));let b=I("div",Be.value.map(t));return S["before-options"]!==void 0&&(b=S["before-options"]().concat(b)),Zl(S["after-options"],b)}function Pl(t,b){const g=b===!0?{...Ce.value,...i.splitAttrs.attributes.value}:void 0,B={ref:b===!0?M:void 0,key:"i_t",class:Y.value,style:e.inputStyle,value:r.value!==void 0?r.value:"",type:"search",...g,id:b===!0?i.targetUid.value:void 0,maxlength:e.maxlength,autocomplete:e.autocomplete,"data-autofocus":t===!0||e.autofocus===!0||void 0,disabled:e.disable===!0,readonly:e.readonly===!0,...xl.value};return t!==!0&&d===!0&&(Array.isArray(B.class)===!0?B.class=[...B.class,"no-pointer-events"]:B.class+=" no-pointer-events"),F("input",B)}function Ut(t){C!==null&&(clearTimeout(C),C=null),!(t&&t.target&&t.target.qComposing===!0)&&(it(t.target.value||""),j=!0,D=r.value,i.focused.value!==!0&&(d!==!0||H.value===!0)&&i.focus(),e.onFilter!==void 0&&(C=setTimeout(()=>{C=null,Re(r.value)},e.inputDebounce)))}function it(t){r.value!==t&&(r.value=t,m("inputValue",t))}function Ye(t,b,g){j=g!==!0,e.useInput===!0&&(it(t),(b===!0||g!==!0)&&(D=t),b!==!0&&Re(t))}function Re(t,b,g){if(e.onFilter===void 0||b!==!0&&i.focused.value!==!0)return;i.innerLoading.value===!0?m("filterAbort"):(i.innerLoading.value=!0,f.value=!0),t!==""&&e.multiple!==!0&&l.value.length!==0&&j!==!0&&t===pe.value(l.value[0])&&(t="");const B=setTimeout(()=>{c.value===!0&&(c.value=!1)},10);a!==null&&clearTimeout(a),a=B,m("filter",t,(ee,X)=>{(b===!0||i.focused.value===!0)&&a===B&&(clearTimeout(a),typeof ee=="function"&&ee(),f.value=!1,_e(()=>{i.innerLoading.value=!1,i.editable.value===!0&&(b===!0?c.value===!0&&$e():c.value===!0?wt(!0):c.value=!0),typeof X=="function"&&_e(()=>{X(y)}),typeof g=="function"&&_e(()=>{g(y)})}))},()=>{i.focused.value===!0&&a===B&&(clearTimeout(a),i.innerLoading.value=!1,f.value=!1),c.value===!0&&(c.value=!1)})}function Tl(){return F(To,{ref:ae,class:Q.value,style:e.popupContentStyle,modelValue:c.value,fit:e.menuShrink!==!0,cover:e.optionsCover===!0&&E.value!==!0&&e.useInput!==!0,anchor:e.menuAnchor,self:e.menuSelf,offset:e.menuOffset,dark:k.value,noParentEvent:!0,noRefocus:!0,noFocus:!0,square:Ge.value,transitionShow:e.transitionShow,transitionHide:e.transitionHide,transitionDuration:e.transitionDuration,separateClosePopup:!0,...ot.value,onScrollPassive:A,onBeforeShow:jt,onBeforeHide:zl,onShow:$l},Nt)}function zl(t){Wt(t),Le()}function $l(){be()}function Ml(t){Ne(t),M.value!==null&&M.value.focus(),H.value=!0,window.scrollTo(window.pageXOffset||window.scrollX||document.body.scrollLeft||0,0)}function Al(t){Ne(t),_e(()=>{H.value=!1})}function Fl(){const t=[F(Ae,{class:`col-auto ${i.fieldClass.value}`,...o.value,for:i.targetUid.value,dark:k.value,square:!0,loading:f.value,itemAligned:!1,filled:!0,stackLabel:r.value.length!==0,...i.splitAttrs.listeners.value,onFocus:Ml,onBlur:Al},{...S,rawControl:()=>i.getControl(!0),before:void 0,after:void 0})];return c.value===!0&&t.push(F("div",{ref:de,class:Q.value+" scroll",style:e.popupContentStyle,...ot.value,onClick:Ct,onScrollPassive:A},Nt())),F(gt,{ref:ce,modelValue:q.value,position:e.useInput===!0?"top":void 0,transitionShow:T,transitionHide:e.transitionHide,transitionDuration:e.transitionDuration,onBeforeShow:jt,onBeforeHide:Ol,onHide:Bl,onShow:El},()=>F("div",{class:"q-select__dialog"+(k.value===!0?" q-select__dialog--dark q-dark":"")+(H.value===!0?" q-select__dialog--focused":"")},t))}function Ol(t){Wt(t),ce.value!==null&&ce.value.__updateRefocusTarget(i.rootRef.value.querySelector(".q-field__native > [tabindex]:last-child")),i.focused.value=!1}function Bl(t){$e(),i.focused.value===!1&&m("blur",t),Qe()}function El(){const t=document.activeElement;(t===null||t.id!==i.targetUid.value)&&M.value!==null&&M.value!==t&&M.value.focus(),be()}function Le(){q.value!==!0&&(u.value=-1,c.value===!0&&(c.value=!1),i.focused.value===!1&&(a!==null&&(clearTimeout(a),a=null),i.innerLoading.value===!0&&(m("filterAbort"),i.innerLoading.value=!1,f.value=!1)))}function He(t){i.editable.value===!0&&(d===!0?(i.onControlFocusin(t),q.value=!0,_e(()=>{i.focus()})):i.focus(),e.onFilter!==void 0?Re(r.value):(E.value!==!0||S["no-option"]!==void 0)&&(c.value=!0))}function $e(){q.value=!1,Le()}function Qe(){e.useInput===!0&&Ye(e.multiple!==!0&&e.fillInput===!0&&l.value.length!==0&&pe.value(l.value[0])||"",!0,!0)}function wt(t){let b=-1;if(t===!0){if(l.value.length!==0){const g=ge.value(l.value[0]);b=e.options.findIndex(B=>Xe(ge.value(B),g))}v(b)}De(b)}function Dl(t,b){c.value===!0&&i.innerLoading.value===!1&&(v(-1,!0),_e(()=>{c.value===!0&&i.innerLoading.value===!1&&(t>b?v():wt(!0))}))}function Kt(){q.value===!1&&ae.value!==null&&ae.value.updatePosition()}function jt(t){t!==void 0&&Ne(t),m("popupShow",t),i.hasPopupOpen=!0,i.onControlFocusin(t)}function Wt(t){t!==void 0&&Ne(t),m("popupHide",t),i.hasPopupOpen=!1,i.onControlFocusout(t)}function Jt(){d=z.platform.is.mobile!==!0&&e.behavior!=="dialog"?!1:e.behavior!=="menu"&&(e.useInput===!0?S["no-option"]!==void 0||e.onFilter!==void 0||E.value===!1:!0),T=z.platform.is.ios===!0&&d===!0&&e.useInput===!0?"fade":e.transitionShow}return jl(Jt),Wl(Kt),Jt(),ft(()=>{C!==null&&clearTimeout(C)}),Object.assign(y,{showPopup:He,hidePopup:$e,removeAtIndex:pt,add:Bt,toggleOption:ze,getOptionIndex:()=>u.value,setOptionIndex:De,moveOptionSelection:ut,filter:Re,updateMenuPosition:Kt,updateInputValue:Ye,isOptionSelected:ht,getEmittingOptionValue:Ot,isOptionDisabled:(...t)=>Ee.value.apply(null,t)===!0,getOptionValue:(...t)=>ge.value.apply(null,t),getOptionLabel:(...t)=>pe.value.apply(null,t)}),Object.assign(i,{innerValue:l,fieldClass:$(()=>`q-select q-field--auto-height q-select--with${e.useInput!==!0?"out":""}-input q-select--with${e.useChips!==!0?"out":""}-chips q-select--${e.multiple===!0?"multiple":"single"}`),inputRef:P,targetRef:M,hasValue:h,showPopup:He,floatingLabel:$(()=>e.hideSelected!==!0&&h.value===!0||typeof r.value=="number"||r.value.length!==0||Gt(e.displayValue)),getControlChild:()=>{if(i.editable.value!==!1&&(q.value===!0||E.value!==!0||S["no-option"]!==void 0))return d===!0?Fl():Tl();i.hasPopupOpen===!0&&(i.hasPopupOpen=!1)},controlEvents:{onFocusin(t){i.onControlFocusin(t)},onFocusout(t){i.onControlFocusout(t,()=>{Qe(),Le()})},onClick(t){if(Ct(t),d!==!0&&c.value===!0){Le(),M.value!==null&&M.value.focus();return}He(t)}},getControl:t=>{const b=Vl(),g=t===!0||q.value!==!0||d!==!0;if(e.useInput===!0)b.push(Pl(t,g));else if(i.editable.value===!0){const ee=g===!0?Ce.value:void 0;b.push(F("input",{ref:g===!0?M:void 0,key:"d_t",class:"q-select__focus-target",id:g===!0?i.targetUid.value:void 0,value:N.value,readonly:!0,"data-autofocus":t===!0||e.autofocus===!0||void 0,...ee,onKeydown:Ht,onKeyup:Dt,onKeypress:Lt})),g===!0&&typeof e.autocomplete=="string"&&e.autocomplete.length!==0&&b.push(F("input",{class:"q-select__autocomplete-input",autocomplete:e.autocomplete,tabindex:-1,onKeyup:Rt}))}if(fe.value!==void 0&&e.disable!==!0&&nt.value.length!==0){const ee=nt.value.map(X=>F("option",{value:X,selected:!0}));b.push(F("select",{class:"hidden",name:fe.value,multiple:e.multiple},ee))}const B=e.useInput===!0||g!==!0?void 0:i.splitAttrs.attributes.value;return F("div",{class:"q-field__native row items-center",...B,...i.splitAttrs.listeners.value},b)},getInnerAppend:()=>e.loading!==!0&&f.value!==!0&&e.hideDropdownIcon!==!0?[F(je,{class:"q-select__dropdown-icon"+(c.value===!0?" rotate-180":""),name:at.value})]:null}),Jl(i)}});const ta=e=>(e.indexOf("{{")>=0&&(e=e.split("{{")[1]),e.indexOf("}}")>=0&&(e=e.split("}}")[0]),e),la=e=>(e.indexOf("\u300A")>=0&&(e=e.split("\u300A")[1]),e.indexOf("\u300B")>=0&&(e=e.split("\u300B")[0]),e),kl=e=>e?e.indexOf("-")==0?e=e.substring(1):e.substring(0,10):"",dt=e=>e?(e.lastIndexOf("]")>=0&&(e=e.substring(e.lastIndexOf("]")+1)),e.indexOf("{{")>=0&&(e=e.replace(`{{${ta(e)}}}`,"")),e.indexOf("\u300A")>=0&&(e=e.replace(`\u300A${la(e)}\u300B`,"")),e):"",lt=[{label:"\u9A91\u5175",value:"\u9A91\u5175"},{label:"\u6B65\u5175",value:"\u6B65\u5175"},{label:"\u56FD\u4EA7",value:"\u56FD\u4EA7"},{label:"\u6D0B\u9A6C",value:"\u65AF\u5DF4\u8FBE"},{label:"\u6F2B\u52A8",value:"\u6F2B\u52A8"}],ct=[{label:"\u5168\u90E8",value:""},...lt,{label:"\u65E0",value:"\u65E0"}],ul=[{label:"\u6B63",value:"asc"},{label:"\u5012",value:"desc"}],il=[{label:"\u65F6",value:"MTime"},{label:"\u5BB9",value:"Size"},{label:"\u540D",value:"Code"}],It=(e,S)=>{if(S&&S.length>0){let m="";return S.forEach(y=>{y.value===e&&(m=y.label)}),m}else return e};var oa=mt({name:"QForm",props:{autofocus:Boolean,noErrorFocus:Boolean,noResetFocus:Boolean,greedy:Boolean,onSubmit:Function},emits:["reset","validationSuccess","validationError"],setup(e,{slots:S,emit:m}){const y=vt(),z=G(null);let c=0;const q=[];function u(d){const j=typeof d=="boolean"?d:e.noErrorFocus!==!0,a=++c,D=(O,P)=>{m("validation"+(O===!0?"Success":"Error"),P)},T=O=>{const P=O.validate();return typeof P.then=="function"?P.then(M=>({valid:M,comp:O}),M=>({valid:!1,comp:O,err:M})):Promise.resolve({valid:P,comp:O})};return(e.greedy===!0?Promise.all(q.map(T)).then(O=>O.filter(P=>P.valid!==!0)):q.reduce((O,P)=>O.then(()=>T(P).then(M=>{if(M.valid===!1)return Promise.reject(M)})),Promise.resolve()).catch(O=>[O])).then(O=>{if(O===void 0||O.length===0)return a===c&&D(!0),!0;if(a===c){const{comp:P,err:M}=O[0];if(M!==void 0&&console.error(M),D(!1,P),j===!0){const ae=O.find(({comp:ce})=>typeof ce.focus=="function"&&to(ce.$)===!1);ae!==void 0&&ae.comp.focus()}}return!1})}function r(){c++,q.forEach(d=>{typeof d.resetValidation=="function"&&d.resetValidation()})}function H(d){d!==void 0&&qe(d);const j=c+1;u().then(a=>{j===c&&a===!0&&(e.onSubmit!==void 0?m("submit",d):d!==void 0&&d.target!==void 0&&typeof d.target.submit=="function"&&d.target.submit())})}function f(d){d!==void 0&&qe(d),m("reset"),_e(()=>{r(),e.autofocus===!0&&e.noResetFocus!==!0&&C()})}function C(){lo(()=>{if(z.value===null)return;const d=z.value.querySelector("[autofocus][tabindex], [data-autofocus][tabindex]")||z.value.querySelector("[autofocus] [tabindex], [data-autofocus] [tabindex]")||z.value.querySelector("[autofocus], [data-autofocus]")||Array.prototype.find.call(z.value.querySelectorAll("[tabindex]"),j=>j.tabIndex>-1);d!=null&&d.focus({preventScroll:!0})})}eo(oo,{bindComponent(d){q.push(d)},unbindComponent(d){const j=q.indexOf(d);j>-1&&q.splice(j,1)}});let x=!1;return rl(()=>{x=!0}),sl(()=>{x===!0&&e.autofocus===!0&&C()}),At(()=>{e.autofocus===!0&&C()}),Object.assign(y.proxy,{validate:u,resetValidation:r,submit:H,reset:f,focus:C,getValidationComponents:()=>q}),()=>F("form",{class:"q-form",ref:z,onSubmit:H,onReset:f},dl(S.default))}});const aa={__name:"FileEdit",emits:[...We.emits],setup(e,{expose:S}){const m=yt(),y=et({item:null,callback:null}),z=(C,x)=>{y.item=new Uo().fromObject(C),y.item.Jpg=null,y.item.Code=kl(C.Code),y.item.Title=dt(C.Title),y.callback=x,u.value.show()},c=async()=>{await q(!0)},q=async C=>{const{Id:x,Title:d,Code:j,Actress:a,FileType:D,MovieType:T,Jpg:_}=y.item;let O=j.trim();O&&O.indexOf("-")<0&&(O="-"+O);let P="";a.length!=0&&(P+="["+a.trim()+"]"),O.length!=0&&(P+=" ["+O.trim()+"]"),T&&T!="\u65E0"&&P.indexOf("{{")<0&&(P+=`{{${T}}}`);const M=d.trim().split("."),ae=M.length;for(let fe=0;fe<ae;fe++){const ie=M[fe];P+=ie.replace(ie.charAt(0),ie.charAt(0).toUpperCase())}P.indexOf("."+D)<0&&(P+="."+D);const de=await Ft({Id:x,Name:P,Code:O,Title:d,Actress:a,MoveOut:C,Jpg:_,NoRefresh:!0});de.Code==200?(H(),y.callback&&y.callback()):m.notify({type:"negative",message:de.Message})},{dialogRef:u,onDialogHide:r,onDialogOK:H,onDialogCancel:f}=We();return S({open:z}),(C,x)=>(w(),U(gt,{ref_key:"dialogRef",ref:u,onHide:W(r)},{default:s(()=>[n(tt,{class:"q-dialog-plugin q-pa-md",style:fl({width:"600px",backgroundImage:"linear-gradient(to left, rgba(255,255,255,0.1), rgba(255,255,255,0.1))"})},{default:s(()=>[n(oa,{class:"q-gutter-md"},{default:s(()=>[n(ao,{modelValue:y.item.MovieType,"onUpdate:modelValue":x[0]||(x[0]=d=>y.item.MovieType=d),options:W(lt),color:"primary",inline:""},null,8,["modelValue","options"]),n(Se,{label:"\u7F16\u7801",autogrow:"",modelValue:y.item.Code,"onUpdate:modelValue":x[1]||(x[1]=d=>y.item.Code=d),dense:!1},null,8,["modelValue"]),n(Se,{label:"\u56FE\u9274",autogrow:"",modelValue:y.item.Actress,"onUpdate:modelValue":x[2]||(x[2]=d=>y.item.Actress=d),dense:!1},null,8,["modelValue"]),n(Se,{label:"\u540D\u79F0",autogrow:"",modelValue:y.item.Title,"onUpdate:modelValue":x[3]||(x[3]=d=>y.item.Title=d),dense:!1},null,8,["modelValue"]),n(Se,{label:"\u56FE\u7247\u5730\u5740",autogrow:"",modelValue:y.item.Jpg,"onUpdate:modelValue":x[4]||(x[4]=d=>y.item.Jpg=d),dense:!1},null,8,["modelValue"])]),_:1}),n(no,{align:"right"},{default:s(()=>[n(L,{color:"primary",label:"\u79FB\u52A8",onClick:c}),n(L,{color:"primary",label:"\u547D\u540D",onClick:x[5]||(x[5]=()=>{q(!1)})}),n(L,{color:"primary",label:"\u5173\u95ED",onClick:W(f)},null,8,["onClick"])]),_:1})]),_:1},8,["style"])]),_:1},8,["onHide"]))}},na={style:{"max-width":"50vw",height:"1.5rem",overflow:"hidden"}},ua={key:0,style:{overflow:"auto"}},ia=["src"],ra={key:1},sa={key:2},ca={class:"self-center full-width no-outline",tabindex:"0"},da={class:"self-center full-width no-outline",tabindex:"0"},fa={class:"self-center full-width no-outline",tabindex:"0"},va={class:"self-center full-width no-outline",tabindex:"0"},ma={key:3},ga={__name:"FileInfo",emits:[...We.emits],setup(e,{expose:S}){const m=yt(),y=$(()=>m.platform.is.mobile),z=[{label:"\u64AD\u653E",value:"movie"},{label:"\u8BE6\u60C5",value:"detail"},{label:"\u56FE\u5C42",value:"image"},{label:"JavBus",value:"web"}],c=G(null),q=G(!1),u=G("detail"),r=et({item:{},settingInfo:{},callback:null,prewiewImages:[]}),H=()=>{u.value="movie",setTimeout(()=>{c.value.open(r.item)},100)},f=D=>{const{item:T,cb:_,playing:O}=D;r.prewiewImages=[],r.item={...T},r.callback=_,d.value.show(),O&&H(),setTimeout(()=>{Oo(T.Id).then(P=>{r.prewiewImages=P.data})},500)},C=async()=>{const D=await hl();r.settingInfo=D.data},x=D=>{const T=`${r.settingInfo.BaseUrl}/${D.Code}`;console.log(T),m.platform.is.electron?window.electron.createWindow({router:T,width:1280,height:1e3,titleBarStyle:""}):window.open(T)},{dialogRef:d,onDialogHide:j}=We(),a=()=>{c.value&&c.value.stop(),u.value="detail",q.value=!1,j()};return At(()=>{C()}),S({open:f}),(D,T)=>(w(),U(gt,{ref_key:"dialogRef",ref:d,onEscapeKey:a,onBeforeHide:a,onHide:a,"model-value":q.value,"onUpdate:modelValue":T[2]||(T[2]=_=>q.value=_),maximized:y.value,"full-width":""},{default:s(()=>[n(Io,{class:"bg-black text-white shadow-2 rounded-borders"},{default:s(()=>[n(qo,{shrink:""},{default:s(()=>[R("div",na,J(r.item.Name),1)]),_:1}),n(tl),n(gl,{modelValue:u.value,"onUpdate:modelValue":T[0]||(T[0]=_=>u.value=_),shrink:""},{default:s(()=>[(w(),Z(ue,null,re(z,_=>n(st,{key:_.value,name:_.value,label:_.label,onClick:O=>u.value=_.value},null,8,["name","label","onClick"])),64))]),_:1},8,["modelValue"]),n(tl),n(L,{dense:"",flat:"",icon:"close",onClick:a},{default:s(()=>[n(zo,{class:"bg-white text-primary"},{default:s(()=>[le("\u5173\u95ED")]),_:1})]),_:1})]),_:1}),n(tt,{style:{"max-width":"1400px!important",height:"96vh!important"}},{default:s(()=>[u.value=="web"?(w(),Z("div",ua,[R("iframe",{frameborder:0,allowfullscreen:!0,width:"100%",height:"900px",src:`${r.settingInfo.BaseUrl}${r.item.Code}`},null,8,ia)])):oe("",!0),u.value=="movie"?(w(),Z("div",ra,[n(Vo,{ref_key:"vue3VideoPlayRef",ref:c,mode:y.value?"drawer":"window",onClose:a},null,8,["mode"])])):oe("",!0),u.value=="detail"?(w(),Z("div",sa,[n(Pt,{fit:"fit",easier:"",draggable:"",src:W(Co)(r.item.Id),style:{"max-height":"60vh"}},null,8,["src"]),n(Ae,{label:"Code","stack-label":""},{control:s(()=>[R("div",{class:"self-center full-width no-outline cursor-pointer",style:{color:"blue"},tabindex:"0",onClick:T[1]||(T[1]=_=>x(r.item))},J(r.item.Code),1)]),_:1}),n(Ae,{label:"Actress","stack-label":""},{control:s(()=>[R("div",ca,J(r.item.Actress),1)]),_:1}),n(Ae,{label:"Name","stack-label":""},{control:s(()=>[R("div",da,J(W(dt)(r.item.Name)),1)]),_:1}),n(Ae,{label:"Time","stack-label":""},{control:s(()=>[R("div",fa,J(W(dt)(r.item.MTime)),1)]),_:1}),n(Ae,{label:"Path","stack-label":""},{control:s(()=>[R("div",va,J(r.item.Path),1)]),_:1})])):oe("",!0),u.value=="image"?(w(),Z("div",ma,[(w(!0),Z(ue,null,re(r.prewiewImages,_=>(w(),U(Pt,{fit:"fit",key:_.Id,src:W(xo)(_.Id),style:{width:"100%",height:"auto"}},null,8,["src"]))),128))])):oe("",!0)]),_:1})]),_:1},8,["model-value","maximized"]))}};var ya=mt({name:"QSlideTransition",props:{appear:Boolean,duration:{type:Number,default:300}},emits:["show","hide"],setup(e,{slots:S,emit:m}){let y=!1,z,c,q=null,u=null,r,H;function f(){z&&z(),z=null,y=!1,q!==null&&(clearTimeout(q),q=null),u!==null&&(clearTimeout(u),u=null),c!==void 0&&c.removeEventListener("transitionend",r),r=null}function C(a,D,T){D!==void 0&&(a.style.height=`${D}px`),a.style.transition=`height ${e.duration}ms cubic-bezier(.25, .8, .50, 1)`,y=!0,z=T}function x(a,D){a.style.overflowY=null,a.style.height=null,a.style.transition=null,f(),D!==H&&m(D)}function d(a,D){let T=0;c=a,y===!0?(f(),T=a.offsetHeight===a.scrollHeight?0:void 0):(H="hide",a.style.overflowY="hidden"),C(a,T,D),q=setTimeout(()=>{q=null,a.style.height=`${a.scrollHeight}px`,r=_=>{u=null,(Object(_)!==_||_.target===a)&&x(a,"show")},a.addEventListener("transitionend",r),u=setTimeout(r,e.duration*1.1)},100)}function j(a,D){let T;c=a,y===!0?f():(H="show",a.style.overflowY="hidden",T=a.scrollHeight),C(a,T,D),q=setTimeout(()=>{q=null,a.style.height=0,r=_=>{u=null,(Object(_)!==_||_.target===a)&&x(a,"hide")},a.addEventListener("transitionend",r),u=setTimeout(r,e.duration*1.1)},100)}return ft(()=>{y===!0&&f()}),()=>F(uo,{css:!1,appear:e.appear,onEnter:d,onLeave:j},S.default)}});const Me=io({}),ba=Object.keys(vl);var pa=mt({name:"QExpansionItem",props:{...vl,...ro,...so,icon:String,label:String,labelLines:[Number,String],caption:String,captionLines:[Number,String],dense:Boolean,toggleAriaLabel:String,expandIcon:String,expandedIcon:String,expandIconClass:[Array,String,Object],duration:Number,headerInsetLevel:Number,contentInsetLevel:Number,expandSeparator:Boolean,defaultOpened:Boolean,hideExpandIcon:Boolean,expandIconToggle:Boolean,switchToggleSide:Boolean,denseToggle:Boolean,group:String,popup:Boolean,headerStyle:[Array,String,Object],headerClass:[Array,String,Object]},emits:[...co,"click","afterShow","afterHide"],setup(e,{slots:S,emit:m}){const{proxy:{$q:y}}=vt(),z=fo(e,y),c=G(e.modelValue!==null?e.modelValue:e.defaultOpened),q=G(null),u=Xt(),{show:r,hide:H,toggle:f}=vo({showing:c});let C,x;const d=$(()=>`q-expansion-item q-item-type q-expansion-item--${c.value===!0?"expanded":"collapsed"} q-expansion-item--${e.popup===!0?"popup":"standard"}`),j=$(()=>{if(e.contentInsetLevel===void 0)return null;const A=y.lang.rtl===!0?"Right":"Left";return{["padding"+A]:e.contentInsetLevel*56+"px"}}),a=$(()=>e.disable!==!0&&(e.href!==void 0||e.to!==void 0&&e.to!==null&&e.to!=="")),D=$(()=>{const A={};return ba.forEach(se=>{A[se]=e[se]}),A}),T=$(()=>a.value===!0||e.expandIconToggle!==!0),_=$(()=>e.expandedIcon!==void 0&&c.value===!0?e.expandedIcon:e.expandIcon||y.iconSet.expansionItem[e.denseToggle===!0?"denseIcon":"icon"]),O=$(()=>e.disable!==!0&&(a.value===!0||e.expandIconToggle===!0)),P=$(()=>({expanded:c.value===!0,detailsId:e.targetUid,toggle:f,show:r,hide:H})),M=$(()=>{const A=e.toggleAriaLabel!==void 0?e.toggleAriaLabel:y.lang.label[c.value===!0?"collapse":"expand"](e.label);return{role:"button","aria-expanded":c.value===!0?"true":"false","aria-controls":u,"aria-label":A}});xe(()=>e.group,A=>{x!==void 0&&x(),A!==void 0&&K()});function ae(A){a.value!==!0&&f(A),m("click",A)}function ce(A){A.keyCode===13&&de(A,!0)}function de(A,se){se!==!0&&q.value!==null&&q.value.focus(),f(A),qe(A)}function fe(){m("afterShow")}function ie(){m("afterHide")}function K(){C===void 0&&(C=Xt()),c.value===!0&&(Me[e.group]=C);const A=xe(c,be=>{be===!0?Me[e.group]=C:Me[e.group]===C&&delete Me[e.group]}),se=xe(()=>Me[e.group],(be,i)=>{i===C&&be!==void 0&&be!==C&&H()});x=()=>{A(),se(),Me[e.group]===C&&delete Me[e.group],x=void 0}}function he(){const A={class:[`q-focusable relative-position cursor-pointer${e.denseToggle===!0&&e.switchToggleSide===!0?" items-end":""}`,e.expandIconClass],side:e.switchToggleSide!==!0,avatar:e.switchToggleSide},se=[F(je,{class:"q-expansion-item__toggle-icon"+(e.expandedIcon===void 0&&c.value===!0?" q-expansion-item__toggle-icon--rotated":""),name:_.value})];return O.value===!0&&(Object.assign(A,{tabindex:0,...M.value,onClick:de,onKeyup:ce}),se.unshift(F("div",{ref:q,class:"q-expansion-item__toggle-focus q-icon q-focus-helper q-focus-helper--rounded",tabindex:-1}))),F(ye,A,()=>se)}function V(){let A;return S.header!==void 0?A=[].concat(S.header(P.value)):(A=[F(ye,()=>[F(ke,{lines:e.labelLines},()=>e.label||""),e.caption?F(ke,{lines:e.captionLines,caption:!0},()=>e.caption):null])],e.icon&&A[e.switchToggleSide===!0?"push":"unshift"](F(ye,{side:e.switchToggleSide===!0,avatar:e.switchToggleSide!==!0},()=>F(je,{name:e.icon})))),e.disable!==!0&&e.hideExpandIcon!==!0&&A[e.switchToggleSide===!0?"unshift":"push"](he()),A}function p(){const A={ref:"item",style:e.headerStyle,class:e.headerClass,dark:z.value,disable:e.disable,dense:e.dense,insetLevel:e.headerInsetLevel};return T.value===!0&&(A.clickable=!0,A.onClick=ae,Object.assign(A,a.value===!0?D.value:M.value)),F(Ve,A,V)}function v(){return Ie(F("div",{key:"e-content",class:"q-expansion-item__content relative-position",style:j.value,id:u},dl(S.default)),[[mo,c.value]])}function I(){const A=[p(),F(ya,{duration:e.duration,onShow:fe,onHide:ie},v)];return e.expandSeparator===!0&&A.push(F(Zt,{class:"q-expansion-item__border q-expansion-item__border--top absolute-top",dark:z.value}),F(Zt,{class:"q-expansion-item__border q-expansion-item__border--bottom absolute-bottom",dark:z.value})),A}return e.group!==void 0&&K(),ft(()=>{x!==void 0&&x()}),()=>F("div",{class:d.value},[F("div",{class:"q-expansion-item__container relative-position"},I())])}});const Sa={class:"q-mr-sm q-mb-sm row justify-left"},ha={class:"q-mr-sm row justify-left"},wa={style:{width:"300px"}},ka={class:"q-gutter-sm q-mt-sm"},Ca={style:{display:"flex","flex-direction":"column"}},xa={key:0,style:{color:"red"}},_a={style:{display:"flex","flex-direction":"row"}},qa={key:0,style:{display:"flex","flex-direction":"row","align-items":"center","background-color":"antiquewhite","border-radius":"12px",padding:"4px"}},Ia={style:{"max-height":"20vh",overflow:"auto"}},Va={__name:"ListEdit",emits:[...We.emits],setup(e,{expose:S}){const m=yt(),y=$(()=>m.platform.is.mobile),z=G("filelist");let c;xe(()=>z.value,V=>{console.log(V),V==="tasking"?(q(),c=setInterval(q,2e3)):clearInterval(c)});const q=async()=>{const V=await Eo();u.tasking=V.Data},u=et({selectAll:!1,settingInfo:{},resultData:{},queryParam:{},selector:[],callback:null,cutListIds:[],tasking:{}}),r=et({sH:"00",sM:"00",sS:"00",eH:"99",eM:"00",eS:"00"}),H=V=>{u.cutListIds.indexOf(V.Id)<0&&u.cutListIds.push(V.Id),_(Do(V.Id))},f=V=>{u.cutListIds.indexOf(V.Id)<0&&u.cutListIds.push(V.Id),_(Ro(V.Id,[r.sH,r.sM,r.sS].join(":"),[r.eH,r.eM,r.eS].join(":")))},C=()=>{u.selectAll=!u.selectAll,u.selectAll?u.selector=u.resultData.Data.map(V=>V.Id):u.selector=[]},x=V=>{u.selector&&u.selector.length>0&&u.selector.forEach(p=>{_($t(p,V))})},d=()=>{u.selector&&u.selector.length>0&&u.selector.forEach(V=>{_(Mt(V))})},j=V=>{u.selector&&u.selector.length>0&&u.selector.forEach(p=>{_(bl(p,V))})},a=async()=>{await pl(),await T()},D=V=>{u.queryParam.Page=u.queryParam.Page+V,T()},T=async()=>{const V=await Sl(u.queryParam);u.resultData=V},_=async V=>{const{Code:p,Message:v}=await V;console.log(p,v),p!=200?m.notify({message:`${v}`}):m.notify({message:`${v}`})},O=V=>{const{queryParam:p,settingInfo:v,cb:I}=V;u.queryParam=p,u.queryParam.PageSize=10,u.settingInfo=v,u.callback=I,ce.value.show(),T()},P=async()=>{u.callback&&u.callback({settingInfo:u.settingInfo}),ie(),fe(),de(),console.log("dialogHide")},M=V=>{m.dialog({title:V.Name,message:"\u786E\u5B9A\u5220\u9664\u5417?",cancel:!0,persistent:!0}).onOk(()=>{console.log(">>>> onOk"),_(Mt(V.Id)).then(()=>{for(let p=0;p<u.resultData.Data.length;p++)u.resultData.Data[p].Id==V.Id&&u.resultData.Data.splice(p,1)})}).onCancel(()=>{console.log(">>>> Cancel")}).onDismiss(()=>{})},ae=async V=>{const p=await Ft({...V,NoRefresh:!0,MoveOut:!0});if(console.log(p),p.Code==200){for(let v=0;v<u.resultData.Data.length;v++)u.resultData.Data[v].Id==V.Id&&u.resultData.Data.splice(v,1);m.notify({type:"negative",message:p.Message})}else m.notify({type:"negative",message:p.Message})},{dialogRef:ce,onDialogHide:de,onDialogOK:fe,onDialogCancel:ie}=We(),K=()=>{u.callback&&(No(u.settingInfo),u.callback({settingInfo:u.settingInfo}))},he=()=>{console.log("beforeShow")};return S({open:O}),(V,p)=>(w(),U(gt,{ref_key:"dialogRef",ref:ce,onHide:P,onBeforeShow:he},{default:s(()=>[n(tt,{class:Vt({"card-q":!y.value,"card-q-mobile":y.value})},{default:s(()=>[n(gl,{alert:"",ripple:"",modelValue:z.value,"onUpdate:modelValue":p[0]||(p[0]=v=>z.value=v),style:{"background-color":"rgba(0, 0, 0, 0.2)"},align:"justify","narrow-indicator":""},{default:s(()=>[n(st,{name:"filelist",label:"\u6279\u91CF\u64CD\u4F5C"}),n(st,{name:"setting",label:"\u8BBE\u7F6E"}),n(st,{name:"tasking",label:"\u4EFB\u52A1\u6267\u884C"})]),_:1},8,["modelValue"]),n($o,{modelValue:z.value,"onUpdate:modelValue":p[15]||(p[15]=v=>z.value=v),animated:"",style:{height:"100%",overflow:"auto"}},{default:s(()=>[n(_t,{name:"filelist"},{default:s(()=>[R("div",Sa,[n(rt,{outline:"",modelValue:u.queryParam.MovieType,"onUpdate:modelValue":[p[1]||(p[1]=v=>u.queryParam.MovieType=v),p[2]||(p[2]=v=>T())],"toggle-color":"primary",options:W(ct)},null,8,["modelValue","options"]),u.queryParam.Page!=1?(w(),U(L,{key:0,class:"q-ml-sm",size:"sm",color:"primary",onClick:p[3]||(p[3]=v=>D(-1))},{default:s(()=>[le("\u4E0A")]),_:1})):oe("",!0),n(L,{class:"q-ml-sm",size:"sm",color:"primary",onClick:p[4]||(p[4]=v=>D(1))},{default:s(()=>[le("\u4E0B")]),_:1})]),R("div",ha,[n(L,{class:"q-mr-sm",color:"amber",outline:"",size:"sm",glossy:"","text-color":"black",onClick:C},{default:s(()=>[le(J(u.selectAll?"\u4E0D\u9009":"\u5168\u9009"),1)]),_:1}),n(Se,{label:"...",modelValue:u.queryParam.Keyword,"onUpdate:modelValue":[p[5]||(p[5]=v=>u.queryParam.Keyword=v),p[6]||(p[6]=v=>T())],dense:!0,filled:"",clearable:""},null,8,["modelValue"]),n(L,{class:"q-mr-sm",size:"sm",color:"blue-6",icon:"refresh",onClick:a},{default:s(()=>[le("\u5237\u65B0")]),_:1}),n(Fe,{class:"q-mr-sm",size:"sm",label:"\u8BBE\u7F6E",type:"primary",color:"teal",icon:"ti-settings"},{default:s(()=>[n(Pe,null,{default:s(()=>[(w(!0),Z(ue,null,re(W(lt),v=>Ie((w(),U(Ve,{key:v.value,class:"movieTypeSelectItem"},{default:s(()=>[n(ye,{onClick:I=>x(v.value)},{default:s(()=>[n(ke,null,{default:s(()=>[le(J(v.label),1)]),_:2},1024)]),_:2},1032,["onClick"])]),_:2},1024)),[[Ue]])),128))]),_:1})]),_:1}),n(Fe,{class:"q-mr-sm",size:"sm",label:"\u6807\u7B7E",type:"primary",color:"teal",icon:"ti-plus"},{default:s(()=>[R("div",wa,[(w(!0),Z(ue,null,re(u.settingInfo.Tags,v=>(w(),U(L,{size:"sm",icon:"ti-plus",square:"","text-color":"white",color:"red",class:"tag-item",key:v,label:v,onClick:I=>j(v)},null,8,["label","onClick"]))),128))])]),_:1}),n(L,{outline:"",class:"q-mr-sm",size:"sm",color:"red",icon:"delete",onClick:d},{default:s(()=>[le("\u5220\u9664")]),_:1})]),R("div",ka,[(w(!0),Z(ue,null,re(u.resultData.Data,v=>(w(),Z("div",{key:v.Id,style:{border:"1px dotted purple",padding:"2px","border-radius":"4px","background-color":"rgba(0, 0, 0, 0.1)"}},[R("div",Ca,[n(ke,null,{default:s(()=>[u.cutListIds.indexOf(v.Id)>=0?(w(),Z("span",xa,"\u526A\u5207\u4E2D\uFF1A\uFF1A")):oe("",!0),le(J(v.Title)+"\u3010"+J(v.SizeStr)+"\u3011 ",1)]),_:2},1024),Ie((w(),Z("div",_a,[n(el,{size:"sm",modelValue:u.selector,"onUpdate:modelValue":p[7]||(p[7]=I=>u.selector=I),val:v.Id,color:"red"},null,8,["modelValue","val"]),n(Fe,{class:"q-mr-sm",size:"sm",label:v.MovieType,type:"primary",color:"blue-6"},{default:s(()=>[n(Pe,null,{default:s(()=>[(w(!0),Z(ue,null,re(W(lt),I=>Ie((w(),U(Ve,{key:I.value,class:"movieTypeSelectItem"},{default:s(()=>[n(ye,null,{default:s(()=>[n(ke,{onClick:A=>{v.MovieType=I.value,_(W($t)(v.Id,I.value))}},{default:s(()=>[le(J(I.label),1)]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024)),[[Ue]])),128))]),_:2},1024)]),_:2},1032,["label"]),n(L,{outline:"",size:"sm",class:"q-mr-sm",color:"amber",glossy:"","text-color":"black",icon:"delete",onClick:I=>M(v)},null,8,["onClick"]),n(L,{outline:"",size:"sm",class:"q-mr-sm",onClick:I=>ae(v),icon:"near_me"},null,8,["onClick"]),n(L,{outline:"",class:"q-mr-sm",size:"sm",icon:"open_in_new",onClick:I=>_(V.OpenFileFolder(v.Id))},null,8,["onClick"]),n(L,{outline:"",size:"sm",class:"q-mr-sm",icon:"ti-pencil-alt2",onClick:I=>v.showCut=!0},null,8,["onClick"]),n(L,{outline:"",size:"sm",class:"q-mr-sm",color:"green",onClick:I=>H(v)},{default:s(()=>[le("toMp4")]),_:2},1032,["onClick"]),!v.MovieType||v.MovieType=="\u65E0"?(w(),U(L,{key:0,outline:"",class:"q-mr-sm",size:"sm",color:"brown-5",icon:"wifi_protected_setup",onClick:I=>_(W(Bo)(v.Id))},null,8,["onClick"])):oe("",!0),(w(!0),Z(ue,null,re(v.Tags,I=>(w(),U(L,{color:"red",key:I,onClick:A=>_(W(yl)(v.Id,I),!0)},{default:s(()=>[le(J(`- ${I}`),1)]),_:2},1032,["onClick"]))),128))])),[[ml]]),v.showCut?(w(),Z("div",qa,[le(" \u5F00\u59CB\uFF1A "),n(Se,{style:{width:"40px"},"model-value":r.sH,"onUpdate:modelValue":p[8]||(p[8]=I=>r.sH=I)},null,8,["model-value"]),n(Se,{style:{width:"40px"},"model-value":r.sM,"onUpdate:modelValue":p[9]||(p[9]=I=>r.sM=I)},null,8,["model-value"]),n(Se,{style:{width:"40px"},"model-value":r.sS,"onUpdate:modelValue":p[10]||(p[10]=I=>r.sS=I)},null,8,["model-value"]),le(" \u7ED3\u675F\uFF1A "),n(Se,{style:{width:"40px"},"model-value":r.eH,"onUpdate:modelValue":p[11]||(p[11]=I=>r.eH=I)},null,8,["model-value"]),n(Se,{style:{width:"40px"},"model-value":r.eM,"onUpdate:modelValue":p[12]||(p[12]=I=>r.eM=I)},null,8,["model-value"]),n(Se,{style:{width:"40px"},"model-value":r.eS,"onUpdate:modelValue":p[13]||(p[13]=I=>r.eS=I)},null,8,["model-value"]),n(L,{size:"sm",color:"black",type:"primary",onClick:I=>{f(v),v.showCut=!1},label:"\u786E\u8BA4"},null,8,["onClick"]),n(L,{size:"sm",color:"blue",onClick:I=>v.showCut=!1,label:"\u53D6\u6D88"},null,8,["onClick"])])):oe("",!0)])]))),128))])]),_:1}),n(_t,{name:"setting"},{default:s(()=>[n(Ae,{color:"purple-12",label:"Buttons\uFF08\u6700\u4F735\uFF09","stack-label":""},{prepend:s(()=>[n(je,{name:"event"})]),control:s(()=>[(w(!0),Z(ue,null,re(W(Mo),v=>(w(),U(el,{modelValue:u.settingInfo.Buttons,"onUpdate:modelValue":[p[14]||(p[14]=I=>u.settingInfo.Buttons=I),K],key:v,val:v,label:v,color:"teal"},null,8,["modelValue","val","label"]))),128))]),_:1})]),_:1}),n(_t,{name:"tasking"},{default:s(()=>[n(Pe,{bordered:"",separator:""},{default:s(()=>[(w(!0),Z(ue,null,re(u.tasking,(v,I)=>(w(),U(pa,{key:I},{header:s(()=>[n(ye,{avatar:""},{default:s(()=>[n(L,{color:"blue",class:"q-mr-sm"},{default:s(()=>[le(J(v.Type),1)]),_:2},1024),le(" "+J(` \u683C\u5F0F\uFF1A${v.To} `),1)]),_:2},1024),n(ye,null,{default:s(()=>[R("div",null,J(v.Name),1),R("div",null,J(`\u5F00\u59CB\u65F6\u95F4\uFF1A${v.Start} `)+" "+J(` \u7ED3\u675F\u65F6\u95F4\uFF1A${v.End} `),1),R("div",null,J(`\u8017\u65F6\uFF1A${((v.FinishTime?new Date(v.FinishTime):new Date).getTime()-new Date(v.CreateTime).getTime())/1e3}`),1)]),_:2},1024),n(ye,{side:""},{default:s(()=>[n(L,{class:"q-mr-sm",color:v.Status=="\u6210\u529F"?"green":"black"},{default:s(()=>[le(J(v.Status),1)]),_:2},1032,["color"])]),_:2},1024)]),default:s(()=>[n(tt,null,{default:s(()=>[n(go,null,{default:s(()=>[R("div",Ia,J(v.Log),1)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1},8,["class"])]),_:1},512))}};const Cl=e=>(wo("data-v-7a1036c0"),e=e(),ko(),e),Pa={class:"q-mg-md top",style:{"margin-bottom":"40px"}},Ta={class:"row justify-center q-gutter-sm",ref:"top"},za={style:{width:"200px","max-height":"50vh"}},$a={class:"q-pa-sm flex flex-center"},Ma={class:"row justify-center q-mt-sm mainlist"},Aa={class:"float-head absolute-top"},Fa={style:{display:"flex","flex-direction":"column","justify-content":"flex-start",width:"fit-content"}},Oa={class:"tag-popup"},Ba=Cl(()=>R("span",null,"\u79CD\u8349",-1)),Ea=["onClick"],Da=Cl(()=>R("div",{class:"text-subtitle1 text-white"}," Loading... ",-1)),Ra={style:{"background-color":"rgba(0, 0, 0, 0.2)"}},La={style:{display:"flex","flex-direction":"row"}},Ha={style:{display:"flex","flex-direction":"row"}},Qa={style:{height:"4rem",overflow:"hidden"}},Na=["onClick"],Ua=["onClick"],Ka=["onClick"],ja={__name:"SearchPage",setup(e){const S=G(null),m=G(null),y=G(null),z=G("Hello"),{copy:c}=Fo({source:z}),q=Ko(),u=$(()=>q.getSuggestions),r=yt(),H=$(()=>a.settingInfo.Buttons),f=$(()=>r.platform.is.mobile),C=i=>{if(r.platform.is.electron){const{Path:l}=i;window.electron.openBySystem({Path:l})}else M(Ho(i.Id))},x=i=>{const{settingInfo:l}=i;l&&(a.settingInfo=l)},d=i=>!H.value||H.value.length==0?!0:H.value.indexOf(i)>=0,j=i=>{const l=`#/playing/${i.Id}`;r.platform.is.electron?window.electron.createWindow({router:l}):window.open(l)},a=et({currentData:{},settingInfo:{},queryParam:{Keyword:"",MovieType:"",OnlyRepeat:!1,fullscreen:!1,Page:1,PageSize:20,SortField:"MTime",SortType:"desc"},resultData:{},fullscreen:!1}),D=i=>{const l=`${a.settingInfo.BaseUrl}${i.Code}`;console.log(l),r.platform.is.electron?window.electron.createWindow({router:l,width:1280,height:1e3,titleBarStyle:""}):window.open(l)},T=i=>{console.log(i),i.target.select()},_=i=>{r.platform.is.electron?window.electron.showInFolder(i.Path):M(Qo(i.Id))},O=i=>{r.dialog({title:i.Name,message:"\u786E\u5B9A\u5220\u9664\u5417?",cancel:!0,persistent:!0}).onOk(()=>{console.log(">>>> onOk"),M(Mt(i.Id),!0)}).onCancel(()=>{console.log(">>>> Cancel")}).onDismiss(()=>{})},P=async()=>{const i=await hl();a.settingInfo=i.data,q.SettingInfo=i.data},M=async(i,l)=>{const{Code:o,Message:k}=await i||{};console.log(o,k),o!=200?r.notify({message:`${k}`}):l&&p()};ol(["`"],()=>{p()}),ol(["Enter"],()=>{K()});const ae=async i=>{await c(i),r.notify({message:`${i}`})},ce=i=>{const{Page:l,PageSize:o,MovieType:k,SortField:h,SortType:Y}=a.queryParam,Q=be({path:"/search",query:{Page:l,PageSize:o,MovieType:k,SortField:h,SortType:Y,Keyword:i}});window.open(Q.href,"_blank")},de=i=>{a.currentData=i,q.Playing=i,q.drawerRight=!0},fe=async i=>{console.log("view.queryParam.Page",i),await K();const l=document.querySelector(".scroll");console.log(l),l&&l.scrollTo(0,0)},ie=i=>{a.queryParam.Page=a.queryParam.Page+i,fe()},K=async i=>{I();const{Keyword:l}=a.queryParam,o=await Sl(a.queryParam);console.log(o),a.resultData={...o};const{ResultSize:k,ResultCnt:h}=o;document.title=`\u641C\u7D22 ${l||""} : ${k} {${h}}`},he=async i=>{const l=await Ft({...i,NoRefresh:!0,MoveOut:!0});console.log(l),l.Code==200?r.notify({type:"negative",message:l.Message}):r.notify({type:"negative",message:l.Message})},V=G(!1),p=async()=>{V.value=!0;const{Code:i,Message:l}=await pl("/api/refreshIndex");console.log(i,l),i=="200"&&(r.notify({type:"negative",message:l}),await K()),V.value=!1},v=async(i,l)=>{const{Code:o,Message:k}=await $t(i,l);o==="200"?r.notify({type:"negative",message:k}):r.notify({type:"warning",message:k})},I=()=>{q.syncSearchParam(a.queryParam),localStorage.setItem("queryParam",JSON.stringify(a.queryParam));const{Page:i,PageSize:l,MovieType:o,SortField:k,SortType:h,Keyword:Y}=a.queryParam;se({path:"/search",query:{Page:i,PageSize:l,MovieType:o,SortField:k,SortType:h,Keyword:Y}})},A=bo(),{push:se,resolve:be}=po();return At(async()=>{document.title="\u641C\u7D22";const{Page:i,PageSize:l,MovieType:o,SortField:k,SortType:h,Keyword:Y,showStyle:Q,from:E}=A.query;if(await P(),Y&&(a.queryParam.Keyword=Y),i&&l)a.queryParam.Page=Number(i),a.queryParam.PageSize=Number(l),a.queryParam.MovieType=o,a.queryParam.SortField=k,a.queryParam.SortType=h,a.queryParam.Keyword=Y,a.queryParam.showStyle=Q;else if(E=="index"){const te=q.FileSearchParam;te&&(console.log("piniaParam",te),a.queryParam=te)}else{const te=JSON.parse(localStorage.getItem("queryParam"));te&&(console.log("storage",te),a.queryParam=te)}K()}),(i,l)=>(w(),Z(ue,null,[R("div",Pa,[n(xt,{style:{"z-index":"9"},position:"bottom-left",offset:[6,f.value?180:160]},{default:s(()=>[a.queryParam.Page>1?(w(),U(L,{key:0,round:"",class:"page-sticky",color:"amber","text-color":"black",icon:"keyboard_arrow_left",onClick:l[0]||(l[0]=o=>ie(-1))})):oe("",!0)]),_:1},8,["offset"]),n(xt,{style:{"z-index":"9"},position:"bottom-right",offset:[10,f.value?180:160]},{default:s(()=>[n(L,{round:"",class:"page-sticky",color:"secondary","text-color":"black",icon:"keyboard_arrow_right",onClick:l[1]||(l[1]=o=>ie(1))})]),_:1},8,["offset"]),R("div",Ta,[n(L,{loading:V.value,outline:f.value,color:"red",onClick:p},{loading:s(()=>[le(" \u6267\u884C\u4E2D")]),default:s(()=>[le(" \u7D22\u5370~ ")]),_:1},8,["loading","outline"]),f.value?oe("",!0):(w(),U(rt,{key:0,size:"md",modelValue:a.queryParam.SortField,"onUpdate:modelValue":[l[2]||(l[2]=o=>a.queryParam.SortField=o),l[3]||(l[3]=o=>K())],"toggle-color":"primary",options:[{label:"\u65F6",value:"MTime"},{label:"\u5BB9",value:"Size"},{label:"\u540D",value:"Code"}]},null,8,["modelValue"])),f.value?oe("",!0):(w(),U(rt,{key:1,modelValue:a.queryParam.SortType,"onUpdate:modelValue":[l[4]||(l[4]=o=>a.queryParam.SortType=o),l[5]||(l[5]=o=>K())],"toggle-color":"primary",options:[{label:"\u6B63",value:"asc"},{label:"\u5012",value:"desc"}]},null,8,["modelValue"])),f.value?oe("",!0):(w(),U(rt,{key:2,modelValue:a.queryParam.MovieType,"onUpdate:modelValue":[l[6]||(l[6]=o=>a.queryParam.MovieType=o),l[7]||(l[7]=o=>K())],"toggle-color":"primary",options:W(ct)},null,8,["modelValue","options"])),f.value?(w(),U(Fe,{key:3,outline:"",color:"primary",label:W(It)(a.queryParam.SortField,W(il))},{default:s(()=>[n(Pe,null,{default:s(()=>[(w(!0),Z(ue,null,re(W(il),o=>Ie((w(),U(Ve,{key:o.label,clickable:"",onClick:k=>{a.queryParam.SortField=o.value,K()}},{default:s(()=>[n(ye,null,{default:s(()=>[n(ke,null,{default:s(()=>[le(J(o.label),1)]),_:2},1024)]),_:2},1024)]),_:2},1032,["onClick"])),[[Ue]])),128))]),_:1})]),_:1},8,["label"])):oe("",!0),f.value?(w(),U(Fe,{key:4,outline:"",color:"primary",label:W(It)(a.queryParam.SortType,W(ul))},{default:s(()=>[n(Pe,null,{default:s(()=>[(w(!0),Z(ue,null,re(W(ul),o=>Ie((w(),U(Ve,{key:o.label,clickable:"",onClick:k=>{a.queryParam.SortType=o.value,K()}},{default:s(()=>[n(ye,null,{default:s(()=>[n(ke,null,{default:s(()=>[le(J(o.label),1)]),_:2},1024)]),_:2},1024)]),_:2},1032,["onClick"])),[[Ue]])),128))]),_:1})]),_:1},8,["label"])):oe("",!0),f.value?(w(),U(Fe,{key:5,outline:"",color:"primary",label:W(It)(a.queryParam.MovieType,W(ct))},{default:s(()=>[n(Pe,null,{default:s(()=>[(w(!0),Z(ue,null,re(W(ct),o=>Ie((w(),U(Ve,{key:o.label,clickable:"",onClick:k=>{a.queryParam.MovieType=o.value,K()}},{default:s(()=>[n(ye,null,{default:s(()=>[n(ke,null,{default:s(()=>[le(J(o.label),1)]),_:2},1024)]),_:2},1024)]),_:2},1032,["onClick"])),[[Ue]])),128))]),_:1})]),_:1},8,["label"])):oe("",!0),n(Se,{id:"searchBtn",label:"...",modelValue:a.queryParam.Keyword,"onUpdate:modelValue":[l[8]||(l[8]=o=>a.queryParam.Keyword=o),l[9]||(l[9]=o=>K())],dense:!0,filled:"",clearable:""},{prepend:s(()=>[n(je,{name:"ti-list",class:"cursor-pointer"},{default:s(()=>[n(ll,null,{default:s(()=>[R("div",za,[n(Pe,null,{default:s(()=>[(w(!0),Z(ue,null,re(u.value,o=>Ie((w(),U(Ve,{clickable:"",key:o,onClick:k=>{a.queryParam.Keyword=o,K()}},{default:s(()=>[n(ye,null,{default:s(()=>[n(ke,null,{default:s(()=>[le(J(o),1)]),_:2},1024)]),_:2},1024)]),_:2},1032,["onClick"])),[[ml]])),128))]),_:1})])]),_:1})]),_:1})]),append:s(()=>[n(je,{name:"ti-search",title:"\u641C",class:"cursor-pointer",onClick:K})]),_:1},8,["modelValue"]),n(L,{class:"q-mr-sm",flat:"",size:"sm",color:"primary",icon:"apps",onClick:l[10]||(l[10]=o=>y.value.open({queryParam:a.queryParam,settingInfo:a.settingInfo,cb:x}))}),f.value?oe("",!0):(w(),U(So,{key:6,modelValue:a.queryParam.OnlyRepeat,"onUpdate:modelValue":[l[11]||(l[11]=o=>a.queryParam.OnlyRepeat=o),K],flat:"",label:"\u91CD"},null,8,["modelValue"]))],512),n(xt,{position:"bottom",style:{"z-index":"9","background-color":"rgba(0, 0, 0, 0.6)"}},{default:s(()=>[R("div",$a,[n(ea,{color:"lime-11 q-mr-md","bg-color":"black",dense:"","onUpdate:modelValue":[l[12]||(l[12]=o=>{a.queryParam.PageSize=Number(o),K()}),l[13]||(l[13]=o=>a.queryParam.PageSize=o)],filled:"",dark:"",modelValue:a.queryParam.PageSize,options:[10,20,30,50,200]},null,8,["modelValue"]),n(Ao,{modelValue:a.queryParam.Page,"onUpdate:modelValue":[l[14]||(l[14]=o=>a.queryParam.Page=o),fe],color:"deep-orange",ellipses:!0,max:a.resultData.TotalPage||0,"max-pages":f.value?5:10,"boundary-numbers":"","direction-links":""},null,8,["modelValue","max","max-pages"]),n(Se,{modelValue:a.queryParam.Page,"onUpdate:modelValue":[l[15]||(l[15]=o=>a.queryParam.Page=o),l[17]||(l[17]=o=>{a.queryParam.Page=Number(o),K()})],dense:!0,type:"search",style:{"background-color":"aliceblue",width:"40px","text-align":"center"},onFocus:l[16]||(l[16]=o=>T(o))},null,8,["modelValue"])])]),_:1}),n(Po,null,{default:s(()=>[R("div",Ma,[(w(!0),Z(ue,null,re(a.resultData.Data,o=>(w(),U(tt,{class:Vt(["q-ma-sm",{"example-item":!f.value,"mobile-item":f.value}]),key:o.Id},{default:s(()=>{var k;return[R("div",Aa,[R("div",Fa,[n(zt,{square:"","text-color":"white",style:{"margin-left":"0px",padding:"0 4px","background-color":"rgba(236, 15, 15, 0.8)"}},{default:s(()=>[n(ll,{"context-menu":""},{default:s(()=>[R("div",Oa,[R("div",null,[(w(!0),Z(ue,null,re(o.Tags,h=>(w(),U(L,{size:"sm",icon:"ti-minus",square:"","text-color":"white",color:"green",class:"tag-item",key:h,label:h,onClick:Y=>M(W(yl)(o.Id,h),!0)},null,8,["label","onClick"]))),128))]),R("div",null,[(w(!0),Z(ue,null,re(a.settingInfo.Tags,h=>(w(),U(L,{size:"sm",icon:"ti-plus",square:"","text-color":"white",color:"red",class:"tag-item",key:h,label:h,onClick:Y=>M(W(bl)(o.Id,h),!0)},null,8,["label","onClick"]))),128))])])]),_:2},1024),Ba]),_:2},1024),(w(!0),Z(ue,null,re(o.Tags,h=>(w(),U(zt,{square:"","text-color":"white",key:h,style:{"margin-left":"0px",padding:"0 4px","background-color":"rgba(188, 24, 24, 0.6)"}},{default:s(()=>[R("span",{onClick:Y=>{a.queryParam.Keyword=h,K()}},J(h==null?void 0:h.substring(0,4)),9,Ea)]),_:2},1024))),128))]),n(Fe,{style:{"background-color":"rgba(0, 0, 0, 0.8)",width:"85px",height:"1rem",color:"antiquewhite"},label:o.MovieType},{default:s(()=>[n(Pe,{style:{"background-color":"rgba(0, 0, 0, 0.7)"}},{default:s(()=>[(w(!0),Z(ue,null,re(W(lt),h=>Ie((w(),U(Ve,{key:h.value,class:"movieTypeSelectItem"},{default:s(()=>[n(ye,null,{default:s(()=>[n(ke,{onClick:Y=>v(o.Id,h.value)},{default:s(()=>[le(J(h.label),1)]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024)),[[Ue]])),128))]),_:2},1024)]),_:2},1032,["label"])]),n(Pt,{fit:"fit",easier:"",draggable:"",class:Vt({"img-self":!f.value,"img-self-moblie":f.value}),src:W(_o)(o.Id),onClick:()=>{m.value.open({item:o,cb:p})}},{loading:s(()=>[Da]),_:2},1032,["class","src","onClick"]),R("div",{class:"absolute-bottom float-btn",style:fl({height:f.value?"6rem":"8.5rem"})},[R("div",Ra,[R("div",La,[d("\u64AD\u653E")&&!f.value?(w(),U(L,{key:0,round:"",class:"q-mr-sm",size:f.value?"sm":"md",ripple:"",color:"primary",icon:"ti-control-eject",onClick:h=>C(o),title:"\u64AD\u653E"},null,8,["size","onClick"])):oe("",!0),n(L,{round:"",class:"q-mr-sm",size:f.value?"sm":"md",ripple:"",color:"red",icon:"ti-fullscreen",title:"\u5355\u9875\u64AD\u653E",onClick:h=>j(o)},null,8,["size","onClick"]),n(L,{round:"",class:"q-mr-sm",size:f.value?"sm":"md",ripple:"",color:"orange",icon:"ti-arrow-right",onClick:h=>de(o),title:"\u5C0F\u64AD\u653E"},null,8,["size","onClick"]),n(L,{round:"",class:"q-mr-sm",size:f.value?"sm":"md",ripple:"",color:"orange",icon:"ti-blackboard",onClick:h=>m.value.open({item:o,playing:!0}),title:"\u5C0F\u64AD\u653E"},null,8,["size","onClick"])]),R("div",Ha,[d("\u7F16\u8F91")?(w(),U(L,{key:0,round:"",class:"q-mr-sm",size:"sm",color:"primary",icon:"ti-slice",onClick:h=>S.value.open(o,p),title:"\u7F16\u8F91"},null,8,["onClick"])):oe("",!0),d("\u6587\u4EF6\u5939")&&!f.value?(w(),U(L,{key:1,round:"",class:"q-mr-sm",size:"sm",color:"primary",icon:"open_in_new",onClick:h=>_(o),title:"\u6587\u4EF6\u5939"},null,8,["onClick"])):oe("",!0),n(L,{round:"",class:"q-mr-sm",size:"sm",color:"brown-5",icon:"ti-search",title:"\u7F51\u641C",onClick:h=>D(o)},null,8,["onClick"]),d("\u522E\u56FE")?(w(),U(L,{key:2,round:"",class:"q-mr-sm",size:"sm",color:"secondary",icon:"ti-import",onClick:h=>M(W(Lo)(o.Id)),title:"\u522E\u56FE"},null,8,["onClick"])):oe("",!0),d("\u5220\u9664")?(w(),U(L,{key:3,round:"",class:"q-mr-sm",size:"sm",color:"amber",glossy:"","text-color":"black",icon:"ti-trash",onClick:h=>O(o),title:"\u5220\u9664"},null,8,["onClick"])):oe("",!0),d("\u79FB\u52A8")?(w(),U(L,{key:4,round:"",class:"q-mr-sm",size:"sm",color:"black",onClick:h=>he(o),icon:"ti-location-arrow",title:"\u79FB\u52A8"},null,8,["onClick"])):oe("",!0)])]),R("div",Qa,[R("a",{style:{color:"#9e089e","background-color":"rgba(0, 0, 0, 0.1)"},class:"mr10 cursor-pointer",target:"_blank",onClick:h=>ce(o.Actress)},J((k=o.Actress)==null?void 0:k.substring(0,6)),9,Na),R("a",{style:{color:"rgb(239, 30, 30)","background-color":"rgba(0, 0, 0, 0.1)"},class:"mr10 cursor-pointer",onClick:h=>ae(o.Code)},J(W(kl)(o.Code)),9,Ua),R("a",{style:{color:"rgb(22, 26, 227)","background-color":"rgba(0, 0, 0, 0.1)"},class:"mr10 cursor-pointer",onClick:h=>ae(o.Title)},J(o.SizeStr),9,Ka),R("span",null,J(W(dt)(o.Title)),1)])],4)]}),_:2},1032,["class"]))),128))]),n(ho,{position:"bottom-right","scroll-offset":150,offset:[18,100]},{default:s(()=>[n(L,{fab:"",icon:"keyboard_arrow_up",color:"accent"})]),_:1})]),_:1})]),n(aa,{ref_key:"fileEditRef",ref:S},null,512),n(ga,{ref_key:"fileInfoRef",ref:m},null,512),n(Va,{ref_key:"listEditRef",ref:y},null,512)],64))}};var sn=yo(ja,[["__scopeId","data-v-7a1036c0"]]);export{sn as default};
