import{d as Y,o as u,a as m,w as l,Q as r,e as y,t as N,f as g,r as v,g as E,h as e,j as Q,k as Z,l as S,m as _,n as V,p as ee,s as b,u as te,v as oe,c as h,x as le,y as q,z as ne,F as T,A as U,B as se,C as R,D as C}from"./index.a657d947.js";import{Q as ae,a as re,b as ue,c as de,d as ie,e as $,f as ce,g as fe,h as me,P as pe,i as we}from"./PlayingVideo.f4fb0a49.js";import{u as G}from"./System.b7d94d83.js";import{u as he}from"./axios.0b902684.js";import{Q as ye}from"./QMenu.2f37609b.js";import{C as B,_ as ve}from"./ListEdit.f92397eb.js";import{G as z}from"./settingAPI.cd6c5769.js";import{o as ge}from"./index.c2827aa8.js";import"./index.77843dbd.js";import"./use-page-sticky.0c5e1c43.js";import"./searchAPI.239ea025.js";import"./Setting.0863823f.js";import"./use-dialog-plugin-component.4f68a912.js";const I=Y({__name:"EssentialLink",props:{title:{},caption:{default:""},link:{default:"#"},icon:{default:""}},setup(L){return(d,i)=>(u(),m(ye,{clickable:"",tag:"a",target:"_self",to:d.link,style:{padding:"0"}},{default:l(()=>[d.icon?(u(),m(r,{key:0,style:{margin:"1px  8px"},flat:"",dense:"",icon:d.icon},{default:l(()=>[y(N(d.title),1)]),_:1},8,["icon"])):g("",!0)]),_:1},8,["to"]))}});const ke={style:{width:"240px",padding:"10px"}},_e=Q("div",{class:"text-h6"},"\u5173\u673A\u8BBE\u7F6E",-1),Se={class:"q-gutter-sm"},Ve={key:0,style:{display:"flex","flex-direction":"row","justify-content":"space-between"}},Te={__name:"ShutdownComponent",setup(L,{expose:d}){const i=v(!1),o=G(),t=E({shutdownHH:0,shutdownMM:0,shutdownSS:0,shutdownType:"now",shutdownTime:new Date}),k=()=>{i.value=!0},w=()=>{i.value=!1},c=()=>{clearTimeout(o.shutdownTimer),t.shutdownType==="now"?(console.log("GetShutDown now"),z()):t.shutdownType==="target"?(o.shutdownLeftSecond=(t.shutdownHH||0)*3600+(t.shutdownMM||0)*60+(t.shutdownSS||0),o.shutdownTimer=setInterval(()=>{console.log(o.shutdownLeftSecond),o.shutdownLeftSecond=o.shutdownLeftSecond-1,o.shutdownLeftSecond<0&&(clearTimeout(o.shutdownTimer),z(),console.log("GetShutDown timeout"))},1e3)):t.shutdownType==="clear"&&(o.shutdownLeftSecond=null)};return d({open:k,close:w}),(D,n)=>(u(),m(oe,{modelValue:i.value,"onUpdate:modelValue":n[6]||(n[6]=s=>i.value=s),title:"\u5173\u673A\u8BBE\u7F6E"},{default:l(()=>[e(te,{class:"my-card"},{default:l(()=>[Q("div",ke,[_e,e(Z,{class:"q-pt-none"},{default:l(()=>[Q("div",Se,[e(S,{modelValue:t.shutdownType,"onUpdate:modelValue":n[0]||(n[0]=s=>t.shutdownType=s),val:"clear",label:"\u6E05\u9664"},null,8,["modelValue"]),e(S,{modelValue:t.shutdownType,"onUpdate:modelValue":n[1]||(n[1]=s=>t.shutdownType=s),val:"now",label:"\u7ACB\u5373"},null,8,["modelValue"]),e(S,{modelValue:t.shutdownType,"onUpdate:modelValue":n[2]||(n[2]=s=>t.shutdownType=s),val:"target",label:"\u5B9A\u65F6"},null,8,["modelValue"])]),t.shutdownType==="target"?(u(),_("div",Ve,[e(V,{class:"timeSelect",modelValue:t.shutdownHH,"onUpdate:modelValue":n[3]||(n[3]=s=>t.shutdownHH=s)},null,8,["modelValue"]),e(V,{class:"timeSelect",modelValue:t.shutdownMM,"onUpdate:modelValue":n[4]||(n[4]=s=>t.shutdownMM=s)},null,8,["modelValue"]),e(V,{class:"timeSelect",modelValue:t.shutdownSS,"onUpdate:modelValue":n[5]||(n[5]=s=>t.shutdownSS=s)},null,8,["modelValue"])])):g("",!0)]),_:1})]),e(ee,{align:"right"},{default:l(()=>[b((u(),m(r,{flat:"",color:"primary"},{default:l(()=>[y("\u53D6\u6D88")]),_:1})),[[B]]),b((u(),m(r,{flat:"",color:"primary",onClick:c},{default:l(()=>[y("\u786E\u5B9A")]),_:1})),[[B]])]),_:1})]),_:1})]),_:1},8,["modelValue"]))}},Be={__name:"MainLayout",setup(L){const d=v(null),i=v(null),o=G(),t=he(),k=v(null),w=v(!1),c=E({fullscreen:!1});ge(["ctrl","y"],()=>{M()});const D=h(()=>t.screen.width>1e3),n=h(()=>t.platform.is.electron),s=h(()=>t.platform.is.mobile?t.screen.width:t.screen.width/2),W=h(()=>o.Playing||{}),x=h(()=>le().path),M=()=>{d.value.open({tabName:"history"})},A=()=>{window.close()},F=()=>{window.electron.hideMainWindow()},j=()=>{o.isDark=!o.isDark},K=()=>{n.value?window.electron.maxMainWindow():c.fullscreen?t.fullscreen.exit():t.fullscreen.request(),c.fullscreen=!c.fullscreen},P=h(()=>o.shutdownLeftSecond?`${Math.floor(o.shutdownLeftSecond/3600)} \u65F6 ${Math.floor(o.shutdownLeftSecond/60%60)} \u5206 ${Math.floor(o.shutdownLeftSecond%60)} \u79D2`:null);q(W,p=>{p&&p.Id?i.value.open(p):i.value.stop()}),t.dark.set(o.isDark),q(()=>o.isDark,p=>{t.dark.set(p)});const J=()=>{window.location.reload()},O=()=>{k.value.open()},H=[{title:"\u9996\u9875",caption:"quasar.dev",icon:"home",link:"/"},{title:"\u641C\u7D22",caption:"github.com/quasarframework",icon:"search",link:"/search"},{title:"\u56FE\u9274",caption:"chat.quasar.dev",icon:"image",link:"/picture"},{title:"\u914D\u7F6E",caption:"chat.quasar.dev",icon:"settings",link:"/setting"},{title:"\u7CFB\u7EDF",caption:"forum.quasar.dev",icon:"chat",link:"/system"}];return(p,f)=>{const X=ne("router-view");return u(),_(T,null,[e(ae,{view:"hHh Lpr lff",container:"",style:{height:"100vh"},class:"shadow-2 rounded-borders"},{default:l(()=>[e(re,{reveal:"",class:"bg-black",style:{height:"6vh"}},{default:l(()=>[e(ue,{class:"q-electron-drag"},{default:l(()=>[e(r,{flat:"",onClick:f[0]||(f[0]=a=>w.value=!w.value),round:"",dense:"",icon:"menu"}),e(de,{style:{"-webkit-app-region":"drag"}},{default:l(()=>[y(" \u641C\u7D22 ")]),_:1}),(u(),_(T,null,U(H,a=>b(e(I,R({key:a.title},a,{style:{color:x.value===a.link?"red":"",scale:1.2}}),null,16,["style"]),[[se,D.value]])),64)),e(ie),P.value?(u(),m(r,{key:0,dense:"",flat:"",color:"red"},{default:l(()=>[y("\u5173\u673A\u5012\u8BA1\u65F6\uFF1A"+N(P.value),1)]),_:1})):g("",!0),e(r,{dense:"",flat:"",size:"lg",icon:"refresh",onClick:J}),e(r,{dense:"",flat:"",size:"md",icon:"ti-settings",onClick:M}),e(r,{dense:"",flat:"",icon:"ti-na",onClick:O}),e(r,{onClick:j,dense:"",icon:"ti-reload",flat:"",color:C(t).dark.mode?"white":"grey"},null,8,["color"]),n.value?(u(),m(r,{key:1,dense:"",flat:"",icon:"ti-minus",onClick:F})):g("",!0),e(r,{flat:"",dense:"",size:"lg",icon:c.fullscreen?"fullscreen_exit":"fullscreen",modelValue:c.fullscreen,"onUpdate:modelValue":f[1]||(f[1]=a=>c.fullscreen=a),onClick:K},null,8,["icon","modelValue"]),n.value?(u(),m(r,{key:2,dense:"",flat:"",size:"lg",icon:"ti-close",onClick:A})):g("",!0)]),_:1})]),_:1}),e($,{modelValue:w.value,"onUpdate:modelValue":f[2]||(f[2]=a=>w.value=a),width:200,breakpoint:700,bordered:""},{default:l(()=>[e(ce,{class:"fit"},{default:l(()=>[e(fe,null,{default:l(()=>[e(me,{header:""},{default:l(()=>[y(" \u4F60\u7684\u641C\u7D22\u5DE5\u5177 ")]),_:1}),(u(),_(T,null,U(H,a=>e(I,R({key:a.title},a,{style:{color:x.value===a.link?"red":"",scale:1.2}}),null,16,["style"])),64))]),_:1})]),_:1})]),_:1},8,["modelValue"]),e($,{side:"right",width:s.value,modelValue:C(o).drawerRight,"onUpdate:modelValue":f[3]||(f[3]=a=>C(o).drawerRight=a),bordered:"",class:"bg-grey-3"},{default:l(()=>[e(pe,{ref_key:"vue3VideoPlayRef",ref:i,mode:"drawer"},null,512)]),_:1},8,["width","modelValue"]),e(we,null,{default:l(()=>[e(X)]),_:1})]),_:1}),e(Te,{ref_key:"shutdown",ref:k},null,512),e(ve,{ref_key:"listEditRef",ref:d},null,512)],64)}}};export{Be as default};
