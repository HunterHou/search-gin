import{d as Z,o as r,a as m,w as l,e,Q as ee,f as _,g as y,t as E,r as v,h as N,j as Q,k as te,l as P,m as g,n as S,p as oe,s as C,u,v as le,x as ne,c as h,y as se,z as H,A as ae,F as q,B as U,C as re,D as R,E as V}from"./index.9319c570.js";import{Q as G,a as ue,b as de,c as ie,d as ce,e as fe,f as $,g as me,h as pe,P as we,i as he}from"./PlayingVideo.3e429941.js";import{u as W}from"./System.8916f787.js";import{u as ye}from"./axios.bad6ef18.js";import{Q as ve,a as _e}from"./QMenu.b0ac91b0.js";import{C as B,_ as ke}from"./ListEdit.bbf4c5a0.js";import{G as I}from"./settingAPI.6ce74979.js";import{o as ge}from"./index.72de99b7.js";import"./index.213ad274.js";import"./use-page-sticky.02c04e76.js";import"./searchAPI.054836f6.js";import"./Setting.415cd06c.js";import"./use-dialog-plugin-component.48cb1180.js";const z=Z({__name:"EssentialLink",props:{title:{},caption:{default:""},link:{default:"#"},icon:{default:""}},setup(L){return(d,i)=>(r(),m(ve,{clickable:"",tag:"a",target:"_self",to:d.link},{default:l(()=>[e(_e,null,{default:l(()=>[e(G,null,{default:l(()=>[d.icon?(r(),m(ee,{key:0,name:d.icon},null,8,["name"])):_("",!0),y(E(d.title),1)]),_:1})]),_:1})]),_:1},8,["to"]))}});const Se={style:{width:"240px",padding:"10px"}},Ve=Q("div",{class:"text-h6"},"\u5173\u673A\u8BBE\u7F6E",-1),Qe={class:"q-gutter-sm"},Ce={key:0,style:{display:"flex","flex-direction":"row","justify-content":"space-between"}},Le={__name:"ShutdownComponent",setup(L,{expose:d}){const i=v(!1),o=W(),t=N({shutdownHH:0,shutdownMM:0,shutdownSS:0,shutdownType:"now",shutdownTime:new Date}),k=()=>{i.value=!0},w=()=>{i.value=!1},c=()=>{clearTimeout(o.shutdownTimer),console.log("view.shutdownType",t.shutdownType),t.shutdownType=="now"?(console.log("GetShutDown now"),I()):(o.shutdownLeftSecond=(t.shutdownHH||0)*3600+(t.shutdownMM||0)*60+(t.shutdownSS||0),console.log("shutdownLeftSecond",o.shutdownLeftSecond),o.shutdownTimer=setInterval(()=>{console.log(o.shutdownLeftSecond),o.shutdownLeftSecond=o.shutdownLeftSecond-1,o.shutdownLeftSecond<0&&(clearTimeout(o.shutdownTimer),I(),console.log("GetShutDown timeout"))},1e3))};return d({open:k,close:w}),(T,n)=>(r(),m(ne,{modelValue:i.value,"onUpdate:modelValue":n[5]||(n[5]=a=>i.value=a),title:"\u5173\u673A\u8BBE\u7F6E"},{default:l(()=>[e(le,{class:"my-card"},{default:l(()=>[Q("div",Se,[Ve,e(te,{class:"q-pt-none"},{default:l(()=>[Q("div",Qe,[e(P,{modelValue:t.shutdownType,"onUpdate:modelValue":n[0]||(n[0]=a=>t.shutdownType=a),val:"now",label:"\u7ACB\u5373"},null,8,["modelValue"]),e(P,{modelValue:t.shutdownType,"onUpdate:modelValue":n[1]||(n[1]=a=>t.shutdownType=a),val:"target",label:"\u5B9A\u65F6"},null,8,["modelValue"])]),t.shutdownType=="target"?(r(),g("div",Ce,[e(S,{class:"timeSelect",modelValue:t.shutdownHH,"onUpdate:modelValue":n[2]||(n[2]=a=>t.shutdownHH=a)},null,8,["modelValue"]),e(S,{class:"timeSelect",modelValue:t.shutdownMM,"onUpdate:modelValue":n[3]||(n[3]=a=>t.shutdownMM=a)},null,8,["modelValue"]),e(S,{class:"timeSelect",modelValue:t.shutdownSS,"onUpdate:modelValue":n[4]||(n[4]=a=>t.shutdownSS=a)},null,8,["modelValue"])])):_("",!0)]),_:1})]),e(oe,{align:"right"},{default:l(()=>[C((r(),m(u,{flat:"",color:"primary"},{default:l(()=>[y("\u53D6\u6D88")]),_:1})),[[B]]),C((r(),m(u,{flat:"",color:"primary",onClick:c},{default:l(()=>[y("\u786E\u5B9A")]),_:1})),[[B]])]),_:1})]),_:1})]),_:1},8,["modelValue"]))}},ze={__name:"MainLayout",setup(L){const d=v(null),i=v(null),o=W(),t=ye(),k=v(null),w=v(!1),c=N({fullscreen:!1});ge(["ctrl","y"],()=>{D()});const T=h(()=>t.screen.width>1e3),n=h(()=>t.platform.is.electron),a=h(()=>t.platform.is.mobile?t.screen.width:t.screen.width/2),A=h(()=>o.Playing||{}),b=h(()=>se().path),D=()=>{d.value.open({tabName:"history"})},F=()=>{window.close()},j=()=>{window.electron.hideMainWindow()},K=()=>{o.isDark=!o.isDark},J=()=>{n.value?window.electron.maxMainWindow():c.fullscreen?t.fullscreen.exit():t.fullscreen.request(),c.fullscreen=!c.fullscreen},M=h(()=>o.shutdownLeftSecond?`${Math.floor(o.shutdownLeftSecond/3600)} \u65F6 ${Math.floor(o.shutdownLeftSecond/60%60)} \u5206 ${Math.floor(o.shutdownLeftSecond%60)} \u79D2`:null);H(A,p=>{p&&p.Id?i.value.open(p):i.value.stop()}),t.dark.set(o.isDark),H(()=>o.isDark,p=>{t.dark.set(p)});const O=()=>{window.location.reload()},X=()=>{k.value.open()},x=[{title:"\u9996\u9875",caption:"quasar.dev",icon:"home",link:"/"},{title:"\u641C\u7D22",caption:"github.com/quasarframework",icon:"search",link:"/search"},{title:"\u56FE\u9274",caption:"chat.quasar.dev",icon:"image",link:"/picture"},{title:"\u8BBE\u7F6E",caption:"chat.quasar.dev",icon:"settings",link:"/setting"},{title:"\u7CFB\u7EDF",caption:"forum.quasar.dev",icon:"chat",link:"/system"}];return(p,f)=>{const Y=ae("router-view");return r(),g("div",null,[e(ue,{view:"hHh Lpr lff",style:{height:"100vh"},class:"shadow-2 rounded-borders"},{default:l(()=>[e(de,{reveal:"",class:"bg-black"},{default:l(()=>[e(ie,null,{default:l(()=>[e(u,{flat:"",onClick:f[0]||(f[0]=s=>w.value=!w.value),round:"",dense:"",icon:"menu"}),e(ce,{style:{"-webkit-app-region":"drag"}},{default:l(()=>[y(" \u6587\u4EF6\u641C\u7D22 ")]),_:1}),(r(),g(q,null,U(x,s=>C(e(z,R({key:s.title},s,{style:{color:b.value===s.link?"red":"",scale:1.2}}),null,16,["style"]),[[re,T.value]])),64)),e(fe),M.value?(r(),m(u,{key:0,dense:"",flat:"",color:"red"},{default:l(()=>[y("\u5173\u673A\u5012\u8BA1\u65F6\uFF1A"+E(M.value),1)]),_:1})):_("",!0),e(u,{dense:"",flat:"",size:"lg",icon:"refresh",onClick:O}),e(u,{dense:"",flat:"",size:"md",icon:"ti-settings",onClick:D}),e(u,{dense:"",flat:"",icon:"ti-na",onClick:X}),e(u,{onClick:K,dense:"",icon:"ti-reload",flat:"",color:V(t).dark.mode?"white":"grey"},null,8,["color"]),n.value?(r(),m(u,{key:1,dense:"",flat:"",icon:"ti-minus",onClick:j})):_("",!0),e(u,{flat:"",dense:"",size:"lg",icon:c.fullscreen?"fullscreen_exit":"fullscreen",modelValue:c.fullscreen,"onUpdate:modelValue":f[1]||(f[1]=s=>c.fullscreen=s),onClick:J},null,8,["icon","modelValue"]),n.value?(r(),m(u,{key:2,dense:"",flat:"",size:"lg",icon:"ti-close",onClick:F})):_("",!0)]),_:1})]),_:1}),e($,{modelValue:w.value,"onUpdate:modelValue":f[2]||(f[2]=s=>w.value=s),width:200,breakpoint:700,bordered:""},{default:l(()=>[e(me,{class:"fit"},{default:l(()=>[e(pe,null,{default:l(()=>[e(G,{header:""},{default:l(()=>[y(" \u4F60\u7684\u641C\u7D22\u5DE5\u5177 ")]),_:1}),(r(),g(q,null,U(x,s=>e(z,R({key:s.title},s,{style:{color:b.value===s.link?"red":"",scale:1.2}}),null,16,["style"])),64))]),_:1})]),_:1})]),_:1},8,["modelValue"]),e($,{side:"right",width:a.value,modelValue:V(o).drawerRight,"onUpdate:modelValue":f[3]||(f[3]=s=>V(o).drawerRight=s),bordered:"",class:"bg-grey-3"},{default:l(()=>[e(we,{ref_key:"vue3VideoPlayRef",ref:i,mode:"drawer"},null,512)]),_:1},8,["width","modelValue"]),e(he,null,{default:l(()=>[e(Y)]),_:1})]),_:1}),e(Le,{ref_key:"shutdown",ref:k},null,512),e(ke,{ref_key:"listEditRef",ref:d},null,512)])}}};export{ze as default};
