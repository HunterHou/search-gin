import{b1 as Ql,r as Z,u as M,v as xe,b2 as Nl,b3 as Ul,b4 as rl,b5 as sl,K as mt,_ as _e,G as F,N as ot,E as at,ab as Kl,b6 as cl,b7 as jl,b8 as Wl,b9 as Jl,ba as Gt,bb as Xe,bc as Gl,bd as Yl,aE as xt,Q as Oe,be as Xl,bf as Zl,bg as Ue,bh as Yt,aw as eo,bi as to,af as qe,s as gt,a6 as lo,a1 as oo,Z as At,H as Ft,bj as ao,aU as no,bk as io,g as et,o as h,c as H,w as r,C as G,a as i,bl as uo,l as Se,m as ro,p as A,ah as dl,q as tt,P as fl,R as vl,h as L,t as X,f as Y,e as ae,k as le,F as re,z as fe,aj as so,bm as co,aC as ml,S as fo,T as vo,bn as Xt,V as mo,b0 as Zt,n as Ie,A as go,bo as el,i as yo,ag as Pt,ar as gl,ap as po,x as bo,aq as So,bp as ho,as as wo,ak as ko,al as Co}from"./index.6b10a76a.js";import{a as Tt,c as xo,d as _o,Q as ct,b as qo}from"./index.d90e82ac.js";import{Q as ke,P as Io,f as Pe,h as Vo,i as tl}from"./PlayingVideo.2adddb7f.js";import{c as Po,a as ye,Q as Ve,d as To}from"./QTooltip.8c20156b.js";import{r as $t,Q as Ae,a as $o,b as _t,c as zo,d as qt,e as Fe,f as Mo}from"./Setting.46f2fd58.js";import{Q as zt}from"./QChip.63eed739.js";import{u as We,Q as Ao}from"./use-dialog-plugin-component.d0e273c3.js";import{Q as Fo}from"./QPageSticky.7e6aee3a.js";import{Q as Oo,C as Ke}from"./ClosePopup.da8af627.js";import{u as yt,a as Bo,o as ll}from"./index.b6530f6f.js";import{F as pt,Q as Do,P as yl,b as pl,D as ft,c as Mt,d as Eo,C as bl,T as Ro,e as Lo,f as Ho,A as Sl,R as hl,S as wl,g as Qo}from"./searchAPI.26d203ea.js";import{a as kl,P as No}from"./settingAPI.9c2fda10.js";import{F as Uo,u as Cl}from"./System.2758c8a8.js";import"./axios.fc0787d8.js";const we=1e3,Ko=["start","center","end","start-force","center-force","end-force"],xl=Array.prototype.filter,jo=window.getComputedStyle(document.body).overflowAnchor===void 0?Ql:function(e,b){e!==null&&(e._qOverflowAnimationFrame!==void 0&&cancelAnimationFrame(e._qOverflowAnimationFrame),e._qOverflowAnimationFrame=requestAnimationFrame(()=>{if(e===null)return;e._qOverflowAnimationFrame=void 0;const v=e.children||[];xl.call(v,$=>$.dataset&&$.dataset.qVsAnchor!==void 0).forEach($=>{delete $.dataset.qVsAnchor});const g=v[b];g&&g.dataset&&(g.dataset.qVsAnchor="")}))};function je(e,b){return e+b}function It(e,b,v,g,$,s,V,n){const c=e===window?document.scrollingElement||document.documentElement:e,Q=$===!0?"offsetWidth":"offsetHeight",f={scrollStart:0,scrollViewSize:-V-n,scrollMaxSize:0,offsetStart:-V,offsetEnd:-n};if($===!0?(e===window?(f.scrollStart=window.pageXOffset||window.scrollX||document.body.scrollLeft||0,f.scrollViewSize+=document.documentElement.clientWidth):(f.scrollStart=c.scrollLeft,f.scrollViewSize+=c.clientWidth),f.scrollMaxSize=c.scrollWidth,s===!0&&(f.scrollStart=($t===!0?f.scrollMaxSize-f.scrollViewSize:0)-f.scrollStart)):(e===window?(f.scrollStart=window.pageYOffset||window.scrollY||document.body.scrollTop||0,f.scrollViewSize+=document.documentElement.clientHeight):(f.scrollStart=c.scrollTop,f.scrollViewSize+=c.clientHeight),f.scrollMaxSize=c.scrollHeight),v!==null)for(let x=v.previousElementSibling;x!==null;x=x.previousElementSibling)x.classList.contains("q-virtual-scroll--skip")===!1&&(f.offsetStart+=x[Q]);if(g!==null)for(let x=g.nextElementSibling;x!==null;x=x.nextElementSibling)x.classList.contains("q-virtual-scroll--skip")===!1&&(f.offsetEnd+=x[Q]);if(b!==e){const x=c.getBoundingClientRect(),I=b.getBoundingClientRect();$===!0?(f.offsetStart+=I.left-x.left,f.offsetEnd-=I.width):(f.offsetStart+=I.top-x.top,f.offsetEnd-=I.height),e!==window&&(f.offsetStart+=f.scrollStart),f.offsetEnd+=f.scrollMaxSize-f.offsetStart}return f}function ol(e,b,v,g){b==="end"&&(b=(e===window?document.body:e)[v===!0?"scrollWidth":"scrollHeight"]),e===window?v===!0?(g===!0&&(b=($t===!0?document.body.scrollWidth-document.documentElement.clientWidth:0)-b),window.scrollTo(b,window.pageYOffset||window.scrollY||document.body.scrollTop||0)):window.scrollTo(window.pageXOffset||window.scrollX||document.body.scrollLeft||0,b):v===!0?(g===!0&&(b=($t===!0?e.scrollWidth-e.offsetWidth:0)-b),e.scrollLeft=b):e.scrollTop=b}function Ze(e,b,v,g){if(v>=g)return 0;const $=b.length,s=Math.floor(v/we),V=Math.floor((g-1)/we)+1;let n=e.slice(s,V).reduce(je,0);return v%we!==0&&(n-=b.slice(s*we,v).reduce(je,0)),g%we!==0&&g!==$&&(n-=b.slice(g,V*we).reduce(je,0)),n}const Wo={virtualScrollSliceSize:{type:[Number,String],default:null},virtualScrollSliceRatioBefore:{type:[Number,String],default:1},virtualScrollSliceRatioAfter:{type:[Number,String],default:1},virtualScrollItemSize:{type:[Number,String],default:24},virtualScrollStickySizeStart:{type:[Number,String],default:0},virtualScrollStickySizeEnd:{type:[Number,String],default:0},tableColspan:[Number,String]},Jo={virtualScrollHorizontal:Boolean,onVirtualScroll:Function,...Wo};function Go({virtualScrollLength:e,getVirtualScrollTarget:b,getVirtualScrollEl:v,virtualScrollItemSizeComputed:g}){const $=ot(),{props:s,emit:V,proxy:n}=$,{$q:c}=n;let Q,f,x,I=[],d;const q=Z(0),a=Z(0),W=Z({}),j=Z(null),B=Z(null),D=Z(null),P=Z({from:0,to:0}),_=M(()=>s.tableColspan!==void 0?s.tableColspan:100);g===void 0&&(g=M(()=>s.virtualScrollItemSize));const w=M(()=>g.value+";"+s.virtualScrollHorizontal),U=M(()=>w.value+";"+s.virtualScrollSliceRatioBefore+";"+s.virtualScrollSliceRatioAfter);xe(U,()=>{T()}),xe(w,ue);function ue(){m(f,!0)}function se(l){m(l===void 0?f:l)}function ce(l,o){const C=b();if(C==null||C.nodeType===8)return;const k=It(C,v(),j.value,B.value,s.virtualScrollHorizontal,c.lang.rtl,s.virtualScrollStickySizeStart,s.virtualScrollStickySizeEnd);x!==k.scrollViewSize&&T(k.scrollViewSize),he(C,k,Math.min(e.value-1,Math.max(0,parseInt(l,10)||0)),0,Ko.indexOf(o)>-1?o:f>-1&&l>f?"end":"start")}function J(){const l=b();if(l==null||l.nodeType===8)return;const o=It(l,v(),j.value,B.value,s.virtualScrollHorizontal,c.lang.rtl,s.virtualScrollStickySizeStart,s.virtualScrollStickySizeEnd),C=e.value-1,k=o.scrollMaxSize-o.offsetStart-o.offsetEnd-a.value;if(Q===o.scrollStart)return;if(o.scrollMaxSize<=0){he(l,o,0,0);return}x!==o.scrollViewSize&&T(o.scrollViewSize),z(P.value.from);const ee=Math.floor(o.scrollMaxSize-Math.max(o.scrollViewSize,o.offsetEnd)-Math.min(d[C],o.scrollViewSize/2));if(ee>0&&Math.ceil(o.scrollStart)>=ee){he(l,o,C,o.scrollMaxSize-o.offsetEnd-I.reduce(je,0));return}let N=0,R=o.scrollStart-o.offsetStart,ne=R;if(R<=k&&R+o.scrollViewSize>=q.value)R-=q.value,N=P.value.from,ne=R;else for(let K=0;R>=I[K]&&N<C;K++)R-=I[K],N+=we;for(;R>0&&N<C;)R-=d[N],R>-o.scrollViewSize?(N++,ne=R):ne=d[N]+R;he(l,o,N,ne)}function he(l,o,C,k,ee){const N=typeof ee=="string"&&ee.indexOf("-force")>-1,R=N===!0?ee.replace("-force",""):ee,ne=R!==void 0?R:"start";let K=Math.max(0,C-W.value[ne]),me=K+W.value.total;me>e.value&&(me=e.value,K=Math.max(0,me-W.value.total)),Q=o.scrollStart;const Be=K!==P.value.from||me!==P.value.to;if(Be===!1&&R===void 0){de(C);return}const{activeElement:Je}=document,Ce=D.value;Be===!0&&Ce!==null&&Ce!==Je&&Ce.contains(Je)===!0&&(Ce.addEventListener("focusout",S),setTimeout(()=>{Ce!==null&&Ce.removeEventListener("focusout",S)})),jo(Ce,C-K);const nt=R!==void 0?d.slice(K,C).reduce(je,0):0;if(Be===!0){const Te=me>=P.value.from&&K<=P.value.to?P.value.to:me;P.value={from:K,to:Te},q.value=Ze(I,d,0,K),a.value=Ze(I,d,me,e.value),requestAnimationFrame(()=>{P.value.to!==me&&Q===o.scrollStart&&(P.value={from:P.value.from,to:me},a.value=Ze(I,d,me,e.value))})}requestAnimationFrame(()=>{if(Q!==o.scrollStart)return;Be===!0&&z(K);const Te=d.slice(K,C).reduce(je,0),De=Te+o.offsetStart+q.value,it=De+d[C];let Ge=De+k;if(R!==void 0){const bt=Te-nt,ge=o.scrollStart+bt;Ge=N!==!0&&ge<De&&it<ge+o.scrollViewSize?ge:R==="end"?it-o.scrollViewSize:De-(R==="start"?0:Math.round((o.scrollViewSize-d[C])/2))}Q=Ge,ol(l,Ge,s.virtualScrollHorizontal,c.lang.rtl),de(C)})}function z(l){const o=D.value;if(o){const C=xl.call(o.children,K=>K.classList&&K.classList.contains("q-virtual-scroll--skip")===!1),k=C.length,ee=s.virtualScrollHorizontal===!0?K=>K.getBoundingClientRect().width:K=>K.offsetHeight;let N=l,R,ne;for(let K=0;K<k;){for(R=ee(C[K]),K++;K<k&&C[K].classList.contains("q-virtual-scroll--with-prev")===!0;)R+=ee(C[K]),K++;ne=R-d[N],ne!==0&&(d[N]+=ne,I[Math.floor(N/we)]+=ne),N++}}}function S(){D.value!==null&&D.value!==void 0&&D.value.focus()}function m(l,o){const C=1*g.value;(o===!0||Array.isArray(d)===!1)&&(d=[]);const k=d.length;d.length=e.value;for(let N=e.value-1;N>=k;N--)d[N]=C;const ee=Math.floor((e.value-1)/we);I=[];for(let N=0;N<=ee;N++){let R=0;const ne=Math.min((N+1)*we,e.value);for(let K=N*we;K<ne;K++)R+=d[K];I.push(R)}f=-1,Q=void 0,q.value=Ze(I,d,0,P.value.from),a.value=Ze(I,d,P.value.to,e.value),l>=0?(z(P.value.from),_e(()=>{ce(l)})):pe()}function T(l){if(l===void 0&&typeof window!="undefined"){const R=b();R!=null&&R.nodeType!==8&&(l=It(R,v(),j.value,B.value,s.virtualScrollHorizontal,c.lang.rtl,s.virtualScrollStickySizeStart,s.virtualScrollStickySizeEnd).scrollViewSize)}x=l;const o=parseFloat(s.virtualScrollSliceRatioBefore)||0,C=parseFloat(s.virtualScrollSliceRatioAfter)||0,k=1+o+C,ee=l===void 0||l<=0?1:Math.ceil(l/g.value),N=Math.max(1,ee,Math.ceil((s.virtualScrollSliceSize>0?s.virtualScrollSliceSize:10)/k));W.value={total:Math.ceil(N*k),start:Math.ceil(N*o),center:Math.ceil(N*(.5+o)),end:Math.ceil(N*(1+o)),view:ee}}function O(l,o){const C=s.virtualScrollHorizontal===!0?"width":"height",k={["--q-virtual-scroll-item-"+C]:g.value+"px"};return[l==="tbody"?F(l,{class:"q-virtual-scroll__padding",key:"before",ref:j},[F("tr",[F("td",{style:{[C]:`${q.value}px`,...k},colspan:_.value})])]):F(l,{class:"q-virtual-scroll__padding",key:"before",ref:j,style:{[C]:`${q.value}px`,...k}}),F(l,{class:"q-virtual-scroll__content",key:"content",ref:D,tabindex:-1},o.flat()),l==="tbody"?F(l,{class:"q-virtual-scroll__padding",key:"after",ref:B},[F("tr",[F("td",{style:{[C]:`${a.value}px`,...k},colspan:_.value})])]):F(l,{class:"q-virtual-scroll__padding",key:"after",ref:B,style:{[C]:`${a.value}px`,...k}})]}function de(l){f!==l&&(s.onVirtualScroll!==void 0&&V("virtualScroll",{index:l,from:P.value.from,to:P.value.to-1,direction:l<f?"decrease":"increase",ref:n}),f=l)}T();const pe=Nl(J,c.platform.is.ios===!0?120:35);Ul(()=>{T()});let u=!1;return rl(()=>{u=!0}),sl(()=>{if(u!==!0)return;const l=b();Q!==void 0&&l!==void 0&&l!==null&&l.nodeType!==8?ol(l,Q,s.virtualScrollHorizontal,c.lang.rtl):ce(f)}),mt(()=>{pe.cancel()}),Object.assign(n,{scrollTo:ce,reset:ue,refresh:se}),{virtualScrollSliceRange:P,virtualScrollSliceSizeComputed:W,setVirtualScrollSize:T,onVirtualScrollEvt:pe,localResetVirtualScroll:m,padVirtualScroll:O,scrollTo:ce,reset:ue,refresh:se}}const al=e=>["add","add-unique","toggle"].includes(e),Yo=".*+?^${}()|[]\\",Xo=Object.keys(cl);var Zo=at({name:"QSelect",inheritAttrs:!1,props:{...Jo,...Kl,...cl,modelValue:{required:!0},multiple:Boolean,displayValue:[String,Number],displayValueHtml:Boolean,dropdownIcon:String,options:{type:Array,default:()=>[]},optionValue:[Function,String],optionLabel:[Function,String],optionDisable:[Function,String],hideSelected:Boolean,hideDropdownIcon:Boolean,fillInput:Boolean,maxValues:[Number,String],optionsDense:Boolean,optionsDark:{type:Boolean,default:null},optionsSelectedClass:String,optionsHtml:Boolean,optionsCover:Boolean,menuShrink:Boolean,menuAnchor:String,menuSelf:String,menuOffset:Array,popupContentClass:String,popupContentStyle:[String,Array,Object],useInput:Boolean,useChips:Boolean,newValueMode:{type:String,validator:al},mapOptions:Boolean,emitValue:Boolean,inputDebounce:{type:[Number,String],default:500},inputClass:[Array,String,Object],inputStyle:[Array,String,Object],tabindex:{type:[String,Number],default:0},autocomplete:String,transitionShow:String,transitionHide:String,transitionDuration:[String,Number],behavior:{type:String,validator:e=>["default","menu","dialog"].includes(e),default:"default"},virtualScrollItemSize:{type:[Number,String],default:void 0},onNewValue:Function,onFilter:Function},emits:[...jl,"add","remove","inputValue","newValue","keyup","keypress","keydown","filterAbort"],setup(e,{slots:b,emit:v}){const{proxy:g}=ot(),{$q:$}=g,s=Z(!1),V=Z(!1),n=Z(-1),c=Z(""),Q=Z(!1),f=Z(!1);let x=null,I,d,q,a=null,W,j,B,D;const P=Z(null),_=Z(null),w=Z(null),U=Z(null),ue=Z(null),se=Wl(e),ce=Zl(Ut),J=M(()=>Array.isArray(e.options)?e.options.length:0),he=M(()=>e.virtualScrollItemSize===void 0?e.optionsDense===!0?24:48:e.virtualScrollItemSize),{virtualScrollSliceRange:z,virtualScrollSliceSizeComputed:S,localResetVirtualScroll:m,padVirtualScroll:T,onVirtualScrollEvt:O,scrollTo:de,setVirtualScrollSize:pe}=Go({virtualScrollLength:J,getVirtualScrollTarget:Tl,getVirtualScrollEl:Qt,virtualScrollItemSizeComputed:he}),u=Jl(),l=M(()=>{const t=e.mapOptions===!0&&e.multiple!==!0,p=e.modelValue!==void 0&&(e.modelValue!==null||t===!0)?e.multiple===!0&&Array.isArray(e.modelValue)?e.modelValue:[e.modelValue]:[];if(e.mapOptions===!0&&Array.isArray(e.options)===!0){const y=e.mapOptions===!0&&I!==void 0?I:[],E=p.map(oe=>Pl(oe,y));return e.modelValue===null&&t===!0?E.filter(oe=>oe!==null):E}return p}),o=M(()=>{const t={};return Xo.forEach(p=>{const y=e[p];y!==void 0&&(t[p]=y)}),t}),C=M(()=>e.optionsDark===null?u.isDark.value:e.optionsDark),k=M(()=>Gt(l.value)),ee=M(()=>{let t="q-field__input q-placeholder col";return e.hideSelected===!0||l.value.length===0?[t,e.inputClass]:(t+=" q-field__input--padding",e.inputClass===void 0?t:[t,e.inputClass])}),N=M(()=>(e.virtualScrollHorizontal===!0?"q-virtual-scroll--horizontal":"")+(e.popupContentClass?" "+e.popupContentClass:"")),R=M(()=>J.value===0),ne=M(()=>l.value.map(t=>be.value(t)).join(", ")),K=M(()=>e.displayValue!==void 0?e.displayValue:ne.value),me=M(()=>e.optionsHtml===!0?()=>!0:t=>t!=null&&t.html===!0),Be=M(()=>e.displayValueHtml===!0||e.displayValue===void 0&&(e.optionsHtml===!0||l.value.some(me.value))),Je=M(()=>u.focused.value===!0?e.tabindex:-1),Ce=M(()=>{const t={tabindex:e.tabindex,role:"combobox","aria-label":e.label,"aria-readonly":e.readonly===!0?"true":"false","aria-autocomplete":e.useInput===!0?"list":"none","aria-expanded":s.value===!0?"true":"false","aria-controls":`${u.targetUid.value}_lb`};return n.value>=0&&(t["aria-activedescendant"]=`${u.targetUid.value}_${n.value}`),t}),nt=M(()=>({id:`${u.targetUid.value}_lb`,role:"listbox","aria-multiselectable":e.multiple===!0?"true":"false"})),Te=M(()=>l.value.map((t,p)=>({index:p,opt:t,html:me.value(t),selected:!0,removeAtIndex:Vl,toggleOption:$e,tabindex:Je.value}))),De=M(()=>{if(J.value===0)return[];const{from:t,to:p}=z.value;return e.options.slice(t,p).map((y,E)=>{const oe=Ee.value(y)===!0,te=t+E,ie={clickable:!0,active:!1,activeClass:bt.value,manualFocus:!0,focused:!1,disable:oe,tabindex:-1,dense:e.optionsDense,dark:C.value,role:"option",id:`${u.targetUid.value}_${te}`,onClick:()=>{$e(y)}};return oe!==!0&&(wt(y)===!0&&(ie.active=!0),n.value===te&&(ie.focused=!0),ie["aria-selected"]=ie.active===!0?"true":"false",$.platform.is.desktop===!0&&(ie.onMousemove=()=>{s.value===!0&&Re(te)})),{index:te,opt:y,html:me.value(y),label:be.value(y),selected:ie.active,focused:ie.focused,toggleOption:$e,setOptionIndex:Re,itemProps:ie}})}),it=M(()=>e.dropdownIcon!==void 0?e.dropdownIcon:$.iconSet.arrow.dropdown),Ge=M(()=>e.optionsCover===!1&&e.outlined!==!0&&e.standout!==!0&&e.borderless!==!0&&e.rounded!==!0),bt=M(()=>e.optionsSelectedClass!==void 0?e.optionsSelectedClass:e.color!==void 0?`text-${e.color}`:""),ge=M(()=>ht(e.optionValue,"value")),be=M(()=>ht(e.optionLabel,"label")),Ee=M(()=>ht(e.optionDisable,"disable")),ut=M(()=>l.value.map(t=>ge.value(t))),Il=M(()=>{const t={onInput:Ut,onChange:ce,onKeydown:Ht,onKeyup:Rt,onKeypress:Lt,onFocus:Dt,onClick(p){d===!0&&Ue(p)}};return t.onCompositionstart=t.onCompositionupdate=t.onCompositionend=ce,t});xe(l,t=>{I=t,e.useInput===!0&&e.fillInput===!0&&e.multiple!==!0&&u.innerLoading.value!==!0&&(V.value!==!0&&s.value!==!0||k.value!==!0)&&(q!==!0&&Ne(),(V.value===!0||s.value===!0)&&Le(""))},{immediate:!0}),xe(()=>e.fillInput,Ne),xe(s,kt),xe(J,Hl);function Ot(t){return e.emitValue===!0?ge.value(t):t}function St(t){if(t>-1&&t<l.value.length)if(e.multiple===!0){const p=e.modelValue.slice();v("remove",{index:t,value:p.splice(t,1)[0]}),v("update:modelValue",p)}else v("update:modelValue",null)}function Vl(t){St(t),u.focus()}function Bt(t,p){const y=Ot(t);if(e.multiple!==!0){e.fillInput===!0&&Ye(be.value(t),!0,!0),v("update:modelValue",y);return}if(l.value.length===0){v("add",{index:0,value:y}),v("update:modelValue",e.multiple===!0?[y]:y);return}if(p===!0&&wt(t)===!0||e.maxValues!==void 0&&e.modelValue.length>=e.maxValues)return;const E=e.modelValue.slice();v("add",{index:E.length,value:y}),E.push(y),v("update:modelValue",E)}function $e(t,p){if(u.editable.value!==!0||t===void 0||Ee.value(t)===!0)return;const y=ge.value(t);if(e.multiple!==!0){p!==!0&&(Ye(e.fillInput===!0?be.value(t):"",!0,!0),ze()),_.value!==null&&_.value.focus(),(l.value.length===0||Xe(ge.value(l.value[0]),y)!==!0)&&v("update:modelValue",e.emitValue===!0?y:t);return}if((d!==!0||Q.value===!0)&&u.focus(),Dt(),l.value.length===0){const te=e.emitValue===!0?y:t;v("add",{index:0,value:te}),v("update:modelValue",e.multiple===!0?[te]:te);return}const E=e.modelValue.slice(),oe=ut.value.findIndex(te=>Xe(te,y));if(oe>-1)v("remove",{index:oe,value:E.splice(oe,1)[0]});else{if(e.maxValues!==void 0&&E.length>=e.maxValues)return;const te=e.emitValue===!0?y:t;v("add",{index:E.length,value:te}),E.push(te)}v("update:modelValue",E)}function Re(t){if($.platform.is.desktop!==!0)return;const p=t>-1&&t<J.value?t:-1;n.value!==p&&(n.value=p)}function rt(t=1,p){if(s.value===!0){let y=n.value;do y=Yt(y+t,-1,J.value-1);while(y!==-1&&y!==n.value&&Ee.value(e.options[y])===!0);n.value!==y&&(Re(y),de(y),p!==!0&&e.useInput===!0&&e.fillInput===!0&&st(y>=0?be.value(e.options[y]):W))}}function Pl(t,p){const y=E=>Xe(ge.value(E),t);return e.options.find(y)||p.find(y)||t}function ht(t,p){const y=t!==void 0?t:p;return typeof y=="function"?y:E=>E!==null&&typeof E=="object"&&y in E?E[y]:E}function wt(t){const p=ge.value(t);return ut.value.find(y=>Xe(y,p))!==void 0}function Dt(t){e.useInput===!0&&_.value!==null&&(t===void 0||_.value===t.target&&t.target.value===ne.value)&&_.value.select()}function Et(t){eo(t,27)===!0&&s.value===!0&&(Ue(t),ze(),Ne()),v("keyup",t)}function Rt(t){const{value:p}=t.target;if(t.keyCode!==void 0){Et(t);return}if(t.target.value="",x!==null&&(clearTimeout(x),x=null),Ne(),typeof p=="string"&&p.length!==0){const y=p.toLocaleLowerCase(),E=te=>{const ie=e.options.find(ve=>te.value(ve).toLocaleLowerCase()===y);return ie===void 0?!1:(l.value.indexOf(ie)===-1?$e(ie):ze(),!0)},oe=te=>{E(ge)!==!0&&(E(be)===!0||te===!0||Le(p,!0,()=>oe(!0)))};oe()}else u.clearValue(t)}function Lt(t){v("keypress",t)}function Ht(t){if(v("keydown",t),to(t)===!0)return;const p=c.value.length!==0&&(e.newValueMode!==void 0||e.onNewValue!==void 0),y=t.shiftKey!==!0&&e.multiple!==!0&&(n.value>-1||p===!0);if(t.keyCode===27){xt(t);return}if(t.keyCode===9&&y===!1){He();return}if(t.target===void 0||t.target.id!==u.targetUid.value||u.editable.value!==!0)return;if(t.keyCode===40&&u.innerLoading.value!==!0&&s.value===!1){qe(t),Qe();return}if(t.keyCode===8&&e.hideSelected!==!0&&c.value.length===0){e.multiple===!0&&Array.isArray(e.modelValue)===!0?St(e.modelValue.length-1):e.multiple!==!0&&e.modelValue!==null&&v("update:modelValue",null);return}(t.keyCode===35||t.keyCode===36)&&(typeof c.value!="string"||c.value.length===0)&&(qe(t),n.value=-1,rt(t.keyCode===36?1:-1,e.multiple)),(t.keyCode===33||t.keyCode===34)&&S.value!==void 0&&(qe(t),n.value=Math.max(-1,Math.min(J.value,n.value+(t.keyCode===33?-1:1)*S.value.view)),rt(t.keyCode===33?1:-1,e.multiple)),(t.keyCode===38||t.keyCode===40)&&(qe(t),rt(t.keyCode===38?-1:1,e.multiple));const E=J.value;if((B===void 0||D<Date.now())&&(B=""),E>0&&e.useInput!==!0&&t.key!==void 0&&t.key.length===1&&t.altKey===!1&&t.ctrlKey===!1&&t.metaKey===!1&&(t.keyCode!==32||B.length!==0)){s.value!==!0&&Qe(t);const oe=t.key.toLocaleLowerCase(),te=B.length===1&&B[0]===oe;D=Date.now()+1500,te===!1&&(qe(t),B+=oe);const ie=new RegExp("^"+B.split("").map(Ct=>Yo.indexOf(Ct)>-1?"\\"+Ct:Ct).join(".*"),"i");let ve=n.value;if(te===!0||ve<0||ie.test(be.value(e.options[ve]))!==!0)do ve=Yt(ve+1,-1,E-1);while(ve!==n.value&&(Ee.value(e.options[ve])===!0||ie.test(be.value(e.options[ve]))!==!0));n.value!==ve&&_e(()=>{Re(ve),de(ve),ve>=0&&e.useInput===!0&&e.fillInput===!0&&st(be.value(e.options[ve]))});return}if(!(t.keyCode!==13&&(t.keyCode!==32||e.useInput===!0||B!=="")&&(t.keyCode!==9||y===!1))){if(t.keyCode!==9&&qe(t),n.value>-1&&n.value<E){$e(e.options[n.value]);return}if(p===!0){const oe=(te,ie)=>{if(ie){if(al(ie)!==!0)return}else ie=e.newValueMode;if(Ye("",e.multiple!==!0,!0),te==null)return;(ie==="toggle"?$e:Bt)(te,ie==="add-unique"),e.multiple!==!0&&(_.value!==null&&_.value.focus(),ze())};if(e.onNewValue!==void 0?v("newValue",c.value,oe):oe(c.value),e.multiple!==!0)return}s.value===!0?He():u.innerLoading.value!==!0&&Qe()}}function Qt(){return d===!0?ue.value:w.value!==null&&w.value.contentEl!==null?w.value.contentEl:void 0}function Tl(){return Qt()}function $l(){return e.hideSelected===!0?[]:b["selected-item"]!==void 0?Te.value.map(t=>b["selected-item"](t)).slice():b.selected!==void 0?[].concat(b.selected()):e.useChips===!0?Te.value.map((t,p)=>F(zt,{key:"option-"+p,removable:u.editable.value===!0&&Ee.value(t.opt)!==!0,dense:!0,textColor:e.color,tabindex:Je.value,onRemove(){t.removeAtIndex(p)}},()=>F("span",{class:"ellipsis",[t.html===!0?"innerHTML":"textContent"]:be.value(t.opt)}))):[F("span",{[Be.value===!0?"innerHTML":"textContent"]:K.value})]}function Nt(){if(R.value===!0)return b["no-option"]!==void 0?b["no-option"]({inputValue:c.value}):void 0;const t=b.option!==void 0?b.option:y=>F(Ve,{key:y.index,...y.itemProps},()=>F(ye,()=>F(ke,()=>F("span",{[y.html===!0?"innerHTML":"textContent"]:y.label}))));let p=T("div",De.value.map(t));return b["before-options"]!==void 0&&(p=b["before-options"]().concat(p)),lo(b["after-options"],p)}function zl(t,p){const y=p===!0?{...Ce.value,...u.splitAttrs.attributes.value}:void 0,E={ref:p===!0?_:void 0,key:"i_t",class:ee.value,style:e.inputStyle,value:c.value!==void 0?c.value:"",type:"search",...y,id:p===!0?u.targetUid.value:void 0,maxlength:e.maxlength,autocomplete:e.autocomplete,"data-autofocus":t===!0||e.autofocus===!0||void 0,disabled:e.disable===!0,readonly:e.readonly===!0,...Il.value};return t!==!0&&d===!0&&(Array.isArray(E.class)===!0?E.class=[...E.class,"no-pointer-events"]:E.class+=" no-pointer-events"),F("input",E)}function Ut(t){x!==null&&(clearTimeout(x),x=null),!(t&&t.target&&t.target.qComposing===!0)&&(st(t.target.value||""),q=!0,W=c.value,u.focused.value!==!0&&(d!==!0||Q.value===!0)&&u.focus(),e.onFilter!==void 0&&(x=setTimeout(()=>{x=null,Le(c.value)},e.inputDebounce)))}function st(t){c.value!==t&&(c.value=t,v("inputValue",t))}function Ye(t,p,y){q=y!==!0,e.useInput===!0&&(st(t),(p===!0||y!==!0)&&(W=t),p!==!0&&Le(t))}function Le(t,p,y){if(e.onFilter===void 0||p!==!0&&u.focused.value!==!0)return;u.innerLoading.value===!0?v("filterAbort"):(u.innerLoading.value=!0,f.value=!0),t!==""&&e.multiple!==!0&&l.value.length!==0&&q!==!0&&t===be.value(l.value[0])&&(t="");const E=setTimeout(()=>{s.value===!0&&(s.value=!1)},10);a!==null&&clearTimeout(a),a=E,v("filter",t,(oe,te)=>{(p===!0||u.focused.value===!0)&&a===E&&(clearTimeout(a),typeof oe=="function"&&oe(),f.value=!1,_e(()=>{u.innerLoading.value=!1,u.editable.value===!0&&(p===!0?s.value===!0&&ze():s.value===!0?kt(!0):s.value=!0),typeof te=="function"&&_e(()=>{te(g)}),typeof y=="function"&&_e(()=>{y(g)})}))},()=>{u.focused.value===!0&&a===E&&(clearTimeout(a),u.innerLoading.value=!1,f.value=!1),s.value===!0&&(s.value=!1)})}function Ml(){return F(Po,{ref:w,class:N.value,style:e.popupContentStyle,modelValue:s.value,fit:e.menuShrink!==!0,cover:e.optionsCover===!0&&R.value!==!0&&e.useInput!==!0,anchor:e.menuAnchor,self:e.menuSelf,offset:e.menuOffset,dark:C.value,noParentEvent:!0,noRefocus:!0,noFocus:!0,square:Ge.value,transitionShow:e.transitionShow,transitionHide:e.transitionHide,transitionDuration:e.transitionDuration,separateClosePopup:!0,...nt.value,onScrollPassive:O,onBeforeShow:jt,onBeforeHide:Al,onShow:Fl},Nt)}function Al(t){Wt(t),He()}function Fl(){pe()}function Ol(t){Ue(t),_.value!==null&&_.value.focus(),Q.value=!0,window.scrollTo(window.pageXOffset||window.scrollX||document.body.scrollLeft||0,0)}function Bl(t){Ue(t),_e(()=>{Q.value=!1})}function Dl(){const t=[F(Ae,{class:`col-auto ${u.fieldClass.value}`,...o.value,for:u.targetUid.value,dark:C.value,square:!0,loading:f.value,itemAligned:!1,filled:!0,stackLabel:c.value.length!==0,...u.splitAttrs.listeners.value,onFocus:Ol,onBlur:Bl},{...b,rawControl:()=>u.getControl(!0),before:void 0,after:void 0})];return s.value===!0&&t.push(F("div",{ref:ue,class:N.value+" scroll",style:e.popupContentStyle,...nt.value,onClick:xt,onScrollPassive:O},Nt())),F(gt,{ref:U,modelValue:V.value,position:e.useInput===!0?"top":void 0,transitionShow:j,transitionHide:e.transitionHide,transitionDuration:e.transitionDuration,onBeforeShow:jt,onBeforeHide:El,onHide:Rl,onShow:Ll},()=>F("div",{class:"q-select__dialog"+(C.value===!0?" q-select__dialog--dark q-dark":"")+(Q.value===!0?" q-select__dialog--focused":"")},t))}function El(t){Wt(t),U.value!==null&&U.value.__updateRefocusTarget(u.rootRef.value.querySelector(".q-field__native > [tabindex]:last-child")),u.focused.value=!1}function Rl(t){ze(),u.focused.value===!1&&v("blur",t),Ne()}function Ll(){const t=document.activeElement;(t===null||t.id!==u.targetUid.value)&&_.value!==null&&_.value!==t&&_.value.focus(),pe()}function He(){V.value!==!0&&(n.value=-1,s.value===!0&&(s.value=!1),u.focused.value===!1&&(a!==null&&(clearTimeout(a),a=null),u.innerLoading.value===!0&&(v("filterAbort"),u.innerLoading.value=!1,f.value=!1)))}function Qe(t){u.editable.value===!0&&(d===!0?(u.onControlFocusin(t),V.value=!0,_e(()=>{u.focus()})):u.focus(),e.onFilter!==void 0?Le(c.value):(R.value!==!0||b["no-option"]!==void 0)&&(s.value=!0))}function ze(){V.value=!1,He()}function Ne(){e.useInput===!0&&Ye(e.multiple!==!0&&e.fillInput===!0&&l.value.length!==0&&be.value(l.value[0])||"",!0,!0)}function kt(t){let p=-1;if(t===!0){if(l.value.length!==0){const y=ge.value(l.value[0]);p=e.options.findIndex(E=>Xe(ge.value(E),y))}m(p)}Re(p)}function Hl(t,p){s.value===!0&&u.innerLoading.value===!1&&(m(-1,!0),_e(()=>{s.value===!0&&u.innerLoading.value===!1&&(t>p?m():kt(!0))}))}function Kt(){V.value===!1&&w.value!==null&&w.value.updatePosition()}function jt(t){t!==void 0&&Ue(t),v("popupShow",t),u.hasPopupOpen=!0,u.onControlFocusin(t)}function Wt(t){t!==void 0&&Ue(t),v("popupHide",t),u.hasPopupOpen=!1,u.onControlFocusout(t)}function Jt(){d=$.platform.is.mobile!==!0&&e.behavior!=="dialog"?!1:e.behavior!=="menu"&&(e.useInput===!0?b["no-option"]!==void 0||e.onFilter!==void 0||R.value===!1:!0),j=$.platform.is.ios===!0&&d===!0&&e.useInput===!0?"fade":e.transitionShow}return Gl(Jt),Yl(Kt),Jt(),mt(()=>{x!==null&&clearTimeout(x)}),Object.assign(g,{showPopup:Qe,hidePopup:ze,removeAtIndex:St,add:Bt,toggleOption:$e,getOptionIndex:()=>n.value,setOptionIndex:Re,moveOptionSelection:rt,filter:Le,updateMenuPosition:Kt,updateInputValue:Ye,isOptionSelected:wt,getEmittingOptionValue:Ot,isOptionDisabled:(...t)=>Ee.value.apply(null,t)===!0,getOptionValue:(...t)=>ge.value.apply(null,t),getOptionLabel:(...t)=>be.value.apply(null,t)}),Object.assign(u,{innerValue:l,fieldClass:M(()=>`q-select q-field--auto-height q-select--with${e.useInput!==!0?"out":""}-input q-select--with${e.useChips!==!0?"out":""}-chips q-select--${e.multiple===!0?"multiple":"single"}`),inputRef:P,targetRef:_,hasValue:k,showPopup:Qe,floatingLabel:M(()=>e.hideSelected!==!0&&k.value===!0||typeof c.value=="number"||c.value.length!==0||Gt(e.displayValue)),getControlChild:()=>{if(u.editable.value!==!1&&(V.value===!0||R.value!==!0||b["no-option"]!==void 0))return d===!0?Dl():Ml();u.hasPopupOpen===!0&&(u.hasPopupOpen=!1)},controlEvents:{onFocusin(t){u.onControlFocusin(t)},onFocusout(t){u.onControlFocusout(t,()=>{Ne(),He()})},onClick(t){if(xt(t),d!==!0&&s.value===!0){He(),_.value!==null&&_.value.focus();return}Qe(t)}},getControl:t=>{const p=$l(),y=t===!0||V.value!==!0||d!==!0;if(e.useInput===!0)p.push(zl(t,y));else if(u.editable.value===!0){const oe=y===!0?Ce.value:void 0;p.push(F("input",{ref:y===!0?_:void 0,key:"d_t",class:"q-select__focus-target",id:y===!0?u.targetUid.value:void 0,value:K.value,readonly:!0,"data-autofocus":t===!0||e.autofocus===!0||void 0,...oe,onKeydown:Ht,onKeyup:Et,onKeypress:Lt})),y===!0&&typeof e.autocomplete=="string"&&e.autocomplete.length!==0&&p.push(F("input",{class:"q-select__autocomplete-input",autocomplete:e.autocomplete,tabindex:-1,onKeyup:Rt}))}if(se.value!==void 0&&e.disable!==!0&&ut.value.length!==0){const oe=ut.value.map(te=>F("option",{value:te,selected:!0}));p.push(F("select",{class:"hidden",name:se.value,multiple:e.multiple},oe))}const E=e.useInput===!0||y!==!0?void 0:u.splitAttrs.attributes.value;return F("div",{class:"q-field__native row items-center",...E,...u.splitAttrs.listeners.value},p)},getInnerAppend:()=>e.loading!==!0&&f.value!==!0&&e.hideDropdownIcon!==!0?[F(Oe,{class:"q-select__dropdown-icon"+(s.value===!0?" rotate-180":""),name:it.value})]:null}),Xl(u)}});const ea=e=>(e.indexOf("{{")>=0&&(e=e.split("{{")[1]),e.indexOf("}}")>=0&&(e=e.split("}}")[0]),e),ta=e=>(e.indexOf("\u300A")>=0&&(e=e.split("\u300A")[1]),e.indexOf("\u300B")>=0&&(e=e.split("\u300B")[0]),e),_l=e=>e?e.indexOf("-")==0?e=e.substring(1):e.substring(0,10):"",vt=e=>e?(e.lastIndexOf("]")>=0&&(e=e.substring(e.lastIndexOf("]")+1)),e.indexOf("{{")>=0&&(e=e.replace(`{{${ea(e)}}}`,"")),e.indexOf("\u300A")>=0&&(e=e.replace(`\u300A${ta(e)}\u300B`,"")),e):"",lt=[{label:"\u9A91\u5175",value:"\u9A91\u5175"},{label:"\u6B65\u5175",value:"\u6B65\u5175"},{label:"\u56FD\u4EA7",value:"\u56FD\u4EA7"},{label:"\u6D0B\u9A6C",value:"\u65AF\u5DF4\u8FBE"},{label:"\u6F2B\u52A8",value:"\u6F2B\u52A8"}],dt=[{label:"\u5168\u90E8",value:""},...lt,{label:"\u65E0",value:"\u65E0"}],nl=[{label:"\u6B63",value:"asc"},{label:"\u5012",value:"desc"}],il=[{label:"\u65F6",value:"MTime"},{label:"\u5BB9",value:"Size"},{label:"\u540D",value:"Code"}],Vt=(e,b)=>{if(b&&b.length>0){let v="";return b.forEach(g=>{g.value===e&&(v=g.label)}),v}else return e};var la=at({name:"QForm",props:{autofocus:Boolean,noErrorFocus:Boolean,noResetFocus:Boolean,greedy:Boolean,onSubmit:Function},emits:["reset","validationSuccess","validationError"],setup(e,{slots:b,emit:v}){const g=ot(),$=Z(null);let s=0;const V=[];function n(d){const q=typeof d=="boolean"?d:e.noErrorFocus!==!0,a=++s,W=(D,P)=>{v("validation"+(D===!0?"Success":"Error"),P)},j=D=>{const P=D.validate();return typeof P.then=="function"?P.then(_=>({valid:_,comp:D}),_=>({valid:!1,comp:D,err:_})):Promise.resolve({valid:P,comp:D})};return(e.greedy===!0?Promise.all(V.map(j)).then(D=>D.filter(P=>P.valid!==!0)):V.reduce((D,P)=>D.then(()=>j(P).then(_=>{if(_.valid===!1)return Promise.reject(_)})),Promise.resolve()).catch(D=>[D])).then(D=>{if(D===void 0||D.length===0)return a===s&&W(!0),!0;if(a===s){const{comp:P,err:_}=D[0];if(_!==void 0&&console.error(_),W(!1,P),q===!0){const w=D.find(({comp:U})=>typeof U.focus=="function"&&ao(U.$)===!1);w!==void 0&&w.comp.focus()}}return!1})}function c(){s++,V.forEach(d=>{typeof d.resetValidation=="function"&&d.resetValidation()})}function Q(d){d!==void 0&&qe(d);const q=s+1;n().then(a=>{q===s&&a===!0&&(e.onSubmit!==void 0?v("submit",d):d!==void 0&&d.target!==void 0&&typeof d.target.submit=="function"&&d.target.submit())})}function f(d){d!==void 0&&qe(d),v("reset"),_e(()=>{c(),e.autofocus===!0&&e.noResetFocus!==!0&&x()})}function x(){no(()=>{if($.value===null)return;const d=$.value.querySelector("[autofocus][tabindex], [data-autofocus][tabindex]")||$.value.querySelector("[autofocus] [tabindex], [data-autofocus] [tabindex]")||$.value.querySelector("[autofocus], [data-autofocus]")||Array.prototype.find.call($.value.querySelectorAll("[tabindex]"),q=>q.tabIndex>-1);d!=null&&d.focus({preventScroll:!0})})}oo(io,{bindComponent(d){V.push(d)},unbindComponent(d){const q=V.indexOf(d);q>-1&&V.splice(q,1)}});let I=!1;return rl(()=>{I=!0}),sl(()=>{I===!0&&e.autofocus===!0&&x()}),At(()=>{e.autofocus===!0&&x()}),Object.assign(g.proxy,{validate:n,resetValidation:c,submit:Q,reset:f,focus:x,getValidationComponents:()=>V}),()=>F("form",{class:"q-form",ref:$,onSubmit:Q,onReset:f},Ft(b.default))}});const oa={__name:"FileEdit",emits:[...We.emits],setup(e,{expose:b}){const v=yt(),g=et({item:null,callback:null}),$=(x,I)=>{g.item=new Uo().fromObject(x),g.item.Jpg=null,g.item.Code=_l(x.Code),g.item.Title=vt(x.Title),g.callback=I,n.value.show()},s=async()=>{await V(!0)},V=async x=>{const{Id:I,Title:d,Code:q,Actress:a,FileType:W,MovieType:j,Jpg:B}=g.item;let D=q.trim();D&&D.indexOf("-")<0&&(D="-"+D);let P="";a.length!=0&&(P+="["+a.trim()+"]"),D.length!=0&&(P+=" ["+D.trim()+"]"),j&&j!="\u65E0"&&P.indexOf("{{")<0&&(P+=`{{${j}}}`);const _=d.trim().split("."),w=_.length;for(let se=0;se<w;se++){const ce=_[se];P+=ce.replace(ce.charAt(0),ce.charAt(0).toUpperCase())}P.indexOf("."+W)<0&&(P+="."+W);const ue=await pt({Id:I,Name:P,Code:D,Title:d,Actress:a,MoveOut:x,Jpg:B,NoRefresh:!0});ue.Code==200?(Q(),g.callback&&g.callback()):v.notify({type:"negative",message:ue.Message})},{dialogRef:n,onDialogHide:c,onDialogOK:Q,onDialogCancel:f}=We();return b({open:$}),(x,I)=>(h(),H(gt,{ref_key:"dialogRef",ref:n,onHide:G(c)},{default:r(()=>[i(tt,{class:"q-dialog-plugin q-pa-md",style:dl({width:"600px",backgroundImage:"linear-gradient(to left, rgba(255,255,255,0.1), rgba(255,255,255,0.1))"})},{default:r(()=>[i(la,{class:"q-gutter-md"},{default:r(()=>[i(uo,{modelValue:g.item.MovieType,"onUpdate:modelValue":I[0]||(I[0]=d=>g.item.MovieType=d),options:G(lt),color:"primary",inline:""},null,8,["modelValue","options"]),i(Se,{label:"\u7F16\u7801",autogrow:"",modelValue:g.item.Code,"onUpdate:modelValue":I[1]||(I[1]=d=>g.item.Code=d),dense:!1},null,8,["modelValue"]),i(Se,{label:"\u56FE\u9274",autogrow:"",modelValue:g.item.Actress,"onUpdate:modelValue":I[2]||(I[2]=d=>g.item.Actress=d),dense:!1},null,8,["modelValue"]),i(Se,{label:"\u540D\u79F0",autogrow:"",modelValue:g.item.Title,"onUpdate:modelValue":I[3]||(I[3]=d=>g.item.Title=d),dense:!1},null,8,["modelValue"]),i(Se,{label:"\u56FE\u7247\u5730\u5740",autogrow:"",modelValue:g.item.Jpg,"onUpdate:modelValue":I[4]||(I[4]=d=>g.item.Jpg=d),dense:!1},null,8,["modelValue"])]),_:1}),i(ro,{align:"right"},{default:r(()=>[i(A,{color:"primary",label:"\u79FB\u52A8",onClick:s}),i(A,{color:"primary",label:"\u547D\u540D",onClick:I[5]||(I[5]=()=>{V(!1)})}),i(A,{color:"primary",label:"\u5173\u95ED",onClick:G(f)},null,8,["onClick"])]),_:1})]),_:1},8,["style"])]),_:1},8,["onHide"]))}};var ul=at({name:"QBar",props:{...fl,dense:Boolean},setup(e,{slots:b}){const{proxy:{$q:v}}=ot(),g=vl(e,v),$=M(()=>`q-bar row no-wrap items-center q-bar--${e.dense===!0?"dense":"standard"}  q-bar--${g.value===!0?"dark":"light"}`);return()=>F("div",{class:$.value,role:"toolbar"},Ft(b.default))}});const aa={style:{height:"1.5rem",overflow:"hidden"}},na={style:{position:"relative","margin-top":"0",display:"flex","flex-direction":"row","flex-wrap":"nowrap","justify-content":"space-between",overflow:"hidden"}},ia={key:0},ua={key:0,style:{overflow:"auto"}},ra=["src"],sa={key:1},ca={key:2},da={class:"self-center full-width no-outline",tabindex:"0"},fa={class:"self-center full-width no-outline",tabindex:"0"},va={class:"self-center full-width no-outline",tabindex:"0"},ma={class:"self-center full-width no-outline",tabindex:"0"},ga={key:3},ya={__name:"FileInfo",emits:[...We.emits],setup(e,{expose:b}){const v=yt(),g=Cl(),$=M(()=>v.platform.is.mobile),s=Z(null),V=Z(!1),n=Z("detail"),c=async _=>{const{Code:w,Message:U}=await _||{};w!=200&&v.notify({message:`${U}`})},Q=_=>{const w=`#/playing/${_.Id}`;v.platform.is.electron?window.electron.createWindow({router:w}):window.open(w)},f=()=>{n.value="movie",setTimeout(()=>{s.value.open(q.item)},100)},x=async _=>{const w=await pt({..._,NoRefresh:!0,MoveOut:!0});w.Code==200?v.notify({type:"negative",message:w.Message}):v.notify({type:"negative",message:w.Message})},I=_=>{v.dialog({title:_.Name,message:"\u786E\u5B9A\u5220\u9664\u5417?",cancel:!0,persistent:!0}).onOk(()=>{c(ft(_.Id))}).onCancel(()=>{console.log(">>>> Cancel")}).onDismiss(()=>{})},d=_=>{q.currentData=_,g.Playing=_,g.drawerRight=!0},q=et({item:{},settingInfo:{},callback:null,prewiewImages:[]}),a=_=>{const{item:w,cb:U,playing:ue}=_;q.prewiewImages=[],q.item={...w},q.callback=U,B.value.show(),ue&&f(),setTimeout(()=>{Do(w.Id).then(se=>{q.prewiewImages=se.data})},500)},W=async()=>{const _=await kl();q.settingInfo=_.data},j=_=>{const w=`${q.settingInfo.BaseUrl}/${_.Code}`;console.log(w),v.platform.is.electron?window.electron.createWindow({router:w,width:1280,height:1e3,titleBarStyle:""}):window.open(w)},{dialogRef:B,onDialogHide:D}=We(),P=()=>{s.value&&s.value.stop(),n.value="detail",V.value=!1,D()};return At(()=>{W()}),b({open:a}),(_,w)=>(h(),H(gt,{ref_key:"dialogRef",ref:B,onEscapeKey:P,onBeforeHide:P,onHide:P,"model-value":V.value,"onUpdate:modelValue":w[10]||(w[10]=U=>V.value=U),maximized:$.value,"full-width":""},{default:r(()=>[i(tt,{class:"text-white",style:{"max-width":"1400px!important",height:"96vh!important"}},{default:r(()=>[i(ul,{class:"bg-black"},{default:r(()=>[i(Oe,{name:"info"}),L("div",aa,X(q.item.Name),1),i(Oo),i(A,{dense:"",flat:"",icon:"close",onClick:P},{default:r(()=>[i(To,{class:"bg-white text-primary"},{default:r(()=>[Y("\u5173\u95ED")]),_:1})]),_:1})]),_:1}),i(ul,null,{default:r(()=>[L("div",na,[L("div",null,[n.value!=="movie"?(h(),H(A,{key:0,class:"q-mr-sm",size:"sm",color:"red",onClick:f,icon:"ti-arrow-circle-right"},{default:r(()=>[Y("\u64AD\u653E")]),_:1})):ae("",!0),n.value!=="detail"?(h(),H(A,{key:1,class:"q-mr-sm",size:"sm",color:"purple",onClick:w[0]||(w[0]=U=>n.value="detail"),icon:"ti-arrow-circle-right"},{default:r(()=>[Y("\u8BE6\u60C5")]),_:1})):ae("",!0),n.value!=="image"?(h(),H(A,{key:2,class:"q-mr-sm",size:"sm",color:"deep-orange",onClick:w[1]||(w[1]=U=>n.value="image"),icon:"ti-arrow-circle-right"},{default:r(()=>[Y("\u56FE\u5C42")]),_:1})):ae("",!0),n.value!=="web"?(h(),H(A,{key:3,class:"q-mr-sm",size:"sm",color:"deep-orange",onClick:w[2]||(w[2]=U=>n.value="web"),icon:"ti-world"},{default:r(()=>[Y("JavBus")]),_:1})):ae("",!0)]),$.value?ae("",!0):(h(),le("div",ia,[i(A,{class:"q-mr-sm",size:"sm",ripple:"",color:"green",icon:"ti-fullscreen",onClick:w[3]||(w[3]=U=>Q(q.item))},{default:r(()=>[Y("\u5927\u5C4F")]),_:1}),i(A,{class:"q-mr-sm",size:"sm",ripple:"",color:"green-7",icon:"ti-blackboard",onClick:w[4]||(w[4]=U=>d(q.item))},{default:r(()=>[Y("\u4FA7\u5C4F")]),_:1}),i(A,{class:"q-mr-sm",size:"sm",color:"primary",icon:"ti-control-eject",onClick:w[5]||(w[5]=U=>c(G(yl)(q.item.Id)))},{default:r(()=>[Y("\u64AD\u653E")]),_:1}),i(A,{class:"q-mr-sm",size:"sm",color:"primary",icon:"open_in_new",onClick:w[6]||(w[6]=U=>c(G(pl)(q.item.Id)))},{default:r(()=>[Y("\u6587\u4EF6\u5939")]),_:1}),i(A,{class:"q-mr-sm",size:"sm",color:"amber",glossy:"","text-color":"black",icon:"ti-trash",onClick:w[7]||(w[7]=U=>I(q.item))},{default:r(()=>[Y("\u5220\u9664")]),_:1}),i(A,{class:"q-mr-sm",size:"sm",color:"black",onClick:w[8]||(w[8]=U=>x(q.item)),icon:"ti-control-shuffle"},{default:r(()=>[Y("\u79FB\u52A8")]),_:1})]))])]),_:1}),n.value=="web"?(h(),le("div",ua,[L("iframe",{frameborder:0,allowfullscreen:!0,width:"100%",height:"900px",src:`${q.settingInfo.BaseUrl}${q.item.Code}`},null,8,ra)])):ae("",!0),n.value=="movie"?(h(),le("div",sa,[i(Io,{ref_key:"vue3VideoPlayRef",ref:s,mode:$.value?"drawer":"window",onClose:P},null,8,["mode"])])):ae("",!0),n.value=="detail"?(h(),le("div",ca,[i(Tt,{fit:"fit",easier:"",draggable:"",src:G(xo)(q.item.Id),style:{"max-height":"60vh"}},null,8,["src"]),i(Ae,{label:"Code","stack-label":""},{control:r(()=>[L("div",{class:"self-center full-width no-outline cursor-pointer",style:{color:"blue"},tabindex:"0",onClick:w[9]||(w[9]=U=>j(q.item))},X(q.item.Code),1)]),_:1}),i(Ae,{label:"Actress","stack-label":""},{control:r(()=>[L("div",da,X(q.item.Actress),1)]),_:1}),i(Ae,{label:"Name","stack-label":""},{control:r(()=>[L("div",fa,X(G(vt)(q.item.Name)),1)]),_:1}),i(Ae,{label:"Time","stack-label":""},{control:r(()=>[L("div",va,X(G(vt)(q.item.MTime)),1)]),_:1}),i(Ae,{label:"Path","stack-label":""},{control:r(()=>[L("div",ma,X(q.item.Path),1)]),_:1})])):ae("",!0),n.value=="image"?(h(),le("div",ga,[(h(!0),le(re,null,fe(q.prewiewImages,U=>(h(),H(Tt,{fit:"fit",key:U.Id,src:G(_o)(U.Id),style:{width:"100%",height:"auto"}},null,8,["src"]))),128))])):ae("",!0)]),_:1})]),_:1},8,["model-value","maximized"]))}};var pa=at({name:"QSlideTransition",props:{appear:Boolean,duration:{type:Number,default:300}},emits:["show","hide"],setup(e,{slots:b,emit:v}){let g=!1,$,s,V=null,n=null,c,Q;function f(){$&&$(),$=null,g=!1,V!==null&&(clearTimeout(V),V=null),n!==null&&(clearTimeout(n),n=null),s!==void 0&&s.removeEventListener("transitionend",c),c=null}function x(a,W,j){W!==void 0&&(a.style.height=`${W}px`),a.style.transition=`height ${e.duration}ms cubic-bezier(.25, .8, .50, 1)`,g=!0,$=j}function I(a,W){a.style.overflowY=null,a.style.height=null,a.style.transition=null,f(),W!==Q&&v(W)}function d(a,W){let j=0;s=a,g===!0?(f(),j=a.offsetHeight===a.scrollHeight?0:void 0):(Q="hide",a.style.overflowY="hidden"),x(a,j,W),V=setTimeout(()=>{V=null,a.style.height=`${a.scrollHeight}px`,c=B=>{n=null,(Object(B)!==B||B.target===a)&&I(a,"show")},a.addEventListener("transitionend",c),n=setTimeout(c,e.duration*1.1)},100)}function q(a,W){let j;s=a,g===!0?f():(Q="show",a.style.overflowY="hidden",j=a.scrollHeight),x(a,j,W),V=setTimeout(()=>{V=null,a.style.height=0,c=B=>{n=null,(Object(B)!==B||B.target===a)&&I(a,"hide")},a.addEventListener("transitionend",c),n=setTimeout(c,e.duration*1.1)},100)}return mt(()=>{g===!0&&f()}),()=>F(so,{css:!1,appear:e.appear,onEnter:d,onLeave:q},b.default)}});const Me=co({}),ba=Object.keys(ml);var Sa=at({name:"QExpansionItem",props:{...ml,...fo,...fl,icon:String,label:String,labelLines:[Number,String],caption:String,captionLines:[Number,String],dense:Boolean,toggleAriaLabel:String,expandIcon:String,expandedIcon:String,expandIconClass:[Array,String,Object],duration:Number,headerInsetLevel:Number,contentInsetLevel:Number,expandSeparator:Boolean,defaultOpened:Boolean,hideExpandIcon:Boolean,expandIconToggle:Boolean,switchToggleSide:Boolean,denseToggle:Boolean,group:String,popup:Boolean,headerStyle:[Array,String,Object],headerClass:[Array,String,Object]},emits:[...vo,"click","afterShow","afterHide"],setup(e,{slots:b,emit:v}){const{proxy:{$q:g}}=ot(),$=vl(e,g),s=Z(e.modelValue!==null?e.modelValue:e.defaultOpened),V=Z(null),n=Xt(),{show:c,hide:Q,toggle:f}=mo({showing:s});let x,I;const d=M(()=>`q-expansion-item q-item-type q-expansion-item--${s.value===!0?"expanded":"collapsed"} q-expansion-item--${e.popup===!0?"popup":"standard"}`),q=M(()=>{if(e.contentInsetLevel===void 0)return null;const O=g.lang.rtl===!0?"Right":"Left";return{["padding"+O]:e.contentInsetLevel*56+"px"}}),a=M(()=>e.disable!==!0&&(e.href!==void 0||e.to!==void 0&&e.to!==null&&e.to!=="")),W=M(()=>{const O={};return ba.forEach(de=>{O[de]=e[de]}),O}),j=M(()=>a.value===!0||e.expandIconToggle!==!0),B=M(()=>e.expandedIcon!==void 0&&s.value===!0?e.expandedIcon:e.expandIcon||g.iconSet.expansionItem[e.denseToggle===!0?"denseIcon":"icon"]),D=M(()=>e.disable!==!0&&(a.value===!0||e.expandIconToggle===!0)),P=M(()=>({expanded:s.value===!0,detailsId:e.targetUid,toggle:f,show:c,hide:Q})),_=M(()=>{const O=e.toggleAriaLabel!==void 0?e.toggleAriaLabel:g.lang.label[s.value===!0?"collapse":"expand"](e.label);return{role:"button","aria-expanded":s.value===!0?"true":"false","aria-controls":n,"aria-label":O}});xe(()=>e.group,O=>{I!==void 0&&I(),O!==void 0&&J()});function w(O){a.value!==!0&&f(O),v("click",O)}function U(O){O.keyCode===13&&ue(O,!0)}function ue(O,de){de!==!0&&V.value!==null&&V.value.focus(),f(O),qe(O)}function se(){v("afterShow")}function ce(){v("afterHide")}function J(){x===void 0&&(x=Xt()),s.value===!0&&(Me[e.group]=x);const O=xe(s,pe=>{pe===!0?Me[e.group]=x:Me[e.group]===x&&delete Me[e.group]}),de=xe(()=>Me[e.group],(pe,u)=>{u===x&&pe!==void 0&&pe!==x&&Q()});I=()=>{O(),de(),Me[e.group]===x&&delete Me[e.group],I=void 0}}function he(){const O={class:[`q-focusable relative-position cursor-pointer${e.denseToggle===!0&&e.switchToggleSide===!0?" items-end":""}`,e.expandIconClass],side:e.switchToggleSide!==!0,avatar:e.switchToggleSide},de=[F(Oe,{class:"q-expansion-item__toggle-icon"+(e.expandedIcon===void 0&&s.value===!0?" q-expansion-item__toggle-icon--rotated":""),name:B.value})];return D.value===!0&&(Object.assign(O,{tabindex:0,..._.value,onClick:ue,onKeyup:U}),de.unshift(F("div",{ref:V,class:"q-expansion-item__toggle-focus q-icon q-focus-helper q-focus-helper--rounded",tabindex:-1}))),F(ye,O,()=>de)}function z(){let O;return b.header!==void 0?O=[].concat(b.header(P.value)):(O=[F(ye,()=>[F(ke,{lines:e.labelLines},()=>e.label||""),e.caption?F(ke,{lines:e.captionLines,caption:!0},()=>e.caption):null])],e.icon&&O[e.switchToggleSide===!0?"push":"unshift"](F(ye,{side:e.switchToggleSide===!0,avatar:e.switchToggleSide!==!0},()=>F(Oe,{name:e.icon})))),e.disable!==!0&&e.hideExpandIcon!==!0&&O[e.switchToggleSide===!0?"unshift":"push"](he()),O}function S(){const O={ref:"item",style:e.headerStyle,class:e.headerClass,dark:$.value,disable:e.disable,dense:e.dense,insetLevel:e.headerInsetLevel};return j.value===!0&&(O.clickable=!0,O.onClick=w,Object.assign(O,a.value===!0?W.value:_.value)),F(Ve,O,z)}function m(){return Ie(F("div",{key:"e-content",class:"q-expansion-item__content relative-position",style:q.value,id:n},Ft(b.default)),[[go,s.value]])}function T(){const O=[S(),F(pa,{duration:e.duration,onShow:se,onHide:ce},m)];return e.expandSeparator===!0&&O.push(F(Zt,{class:"q-expansion-item__border q-expansion-item__border--top absolute-top",dark:$.value}),F(Zt,{class:"q-expansion-item__border q-expansion-item__border--bottom absolute-bottom",dark:$.value})),O}return e.group!==void 0&&J(),mt(()=>{I!==void 0&&I()}),()=>F("div",{class:d.value},[F("div",{class:"q-expansion-item__container relative-position"},T())])}});const ha={class:"q-mr-sm q-mb-sm row justify-left"},wa={class:"q-mr-sm row justify-left"},ka={style:{width:"300px"}},Ca={class:"q-gutter-sm q-mt-sm"},xa={style:{display:"flex","flex-direction":"column"}},_a={key:0,style:{color:"red"}},qa={style:{display:"flex","flex-direction":"row"}},Ia={key:0,style:{display:"flex","flex-direction":"row","align-items":"center","background-color":"antiquewhite","border-radius":"12px",padding:"4px"}},Va={style:{"max-height":"20vh",overflow:"auto"}},Pa={__name:"ListEdit",emits:[...We.emits],setup(e,{expose:b}){const v=yt(),g=M(()=>v.platform.is.mobile),$=Z("filelist");let s;xe(()=>$.value,z=>{console.log(z),z==="tasking"?(V(),s=setInterval(V,2e3)):clearInterval(s)});const V=async()=>{const z=await Ro();n.tasking=z.Data},n=et({selectAll:!1,settingInfo:{},resultData:{},queryParam:{},selector:[],callback:null,cutListIds:[],tasking:{}}),c=et({sH:"00",sM:"00",sS:"00",eH:"99",eM:"00",eS:"00"}),Q=z=>{n.cutListIds.indexOf(z.Id)<0&&n.cutListIds.push(z.Id),B(Lo(z.Id))},f=z=>{n.cutListIds.indexOf(z.Id)<0&&n.cutListIds.push(z.Id),B(Ho(z.Id,[c.sH,c.sM,c.sS].join(":"),[c.eH,c.eM,c.eS].join(":")))},x=()=>{n.selectAll=!n.selectAll,n.selectAll?n.selector=n.resultData.Data.map(z=>z.Id):n.selector=[]},I=z=>{n.selector&&n.selector.length>0&&n.selector.forEach(S=>{B(Mt(S,z))})},d=()=>{n.selector&&n.selector.length>0&&n.selector.forEach(z=>{B(ft(z))})},q=z=>{n.selector&&n.selector.length>0&&n.selector.forEach(S=>{B(Sl(S,z))})},a=async()=>{await hl(),await j()},W=z=>{n.queryParam.Page=n.queryParam.Page+z,j()},j=async()=>{const z=await wl(n.queryParam);n.resultData=z},B=async z=>{const{Code:S,Message:m}=await z;console.log(S,m),S!=200?v.notify({message:`${m}`}):v.notify({message:`${m}`})},D=z=>{const{queryParam:S,settingInfo:m,cb:T}=z;n.queryParam=S,n.queryParam.PageSize=10,n.settingInfo=m,n.callback=T,U.value.show(),j()},P=async()=>{n.callback&&n.callback({settingInfo:n.settingInfo}),ce(),se(),ue(),console.log("dialogHide")},_=z=>{v.dialog({title:z.Name,message:"\u786E\u5B9A\u5220\u9664\u5417?",cancel:!0,persistent:!0}).onOk(()=>{console.log(">>>> onOk"),B(ft(z.Id)).then(()=>{for(let S=0;S<n.resultData.Data.length;S++)n.resultData.Data[S].Id==z.Id&&n.resultData.Data.splice(S,1)})}).onCancel(()=>{console.log(">>>> Cancel")}).onDismiss(()=>{})},w=async z=>{const S=await pt({...z,NoRefresh:!0,MoveOut:!0});if(console.log(S),S.Code==200){for(let m=0;m<n.resultData.Data.length;m++)n.resultData.Data[m].Id==z.Id&&n.resultData.Data.splice(m,1);v.notify({type:"negative",message:S.Message})}else v.notify({type:"negative",message:S.Message})},{dialogRef:U,onDialogHide:ue,onDialogOK:se,onDialogCancel:ce}=We(),J=()=>{n.callback&&(No(n.settingInfo),n.callback({settingInfo:n.settingInfo}))},he=()=>{console.log("beforeShow")};return b({open:D}),(z,S)=>(h(),H(gt,{ref_key:"dialogRef",ref:U,onHide:P,onBeforeShow:he},{default:r(()=>[i(tt,{class:Pt({"card-q":!g.value,"card-q-mobile":g.value})},{default:r(()=>[i($o,{alert:"",ripple:"",modelValue:$.value,"onUpdate:modelValue":S[0]||(S[0]=m=>$.value=m),style:{"background-color":"rgba(0, 0, 0, 0.2)"},align:"justify","narrow-indicator":""},{default:r(()=>[i(_t,{name:"filelist",label:"\u6279\u91CF\u64CD\u4F5C"}),i(_t,{name:"setting",label:"\u8BBE\u7F6E"}),i(_t,{name:"tasking",label:"\u4EFB\u52A1\u6267\u884C"})]),_:1},8,["modelValue"]),i(zo,{modelValue:$.value,"onUpdate:modelValue":S[15]||(S[15]=m=>$.value=m),animated:"",style:{height:"100%",overflow:"auto"}},{default:r(()=>[i(qt,{name:"filelist"},{default:r(()=>[L("div",ha,[i(ct,{outline:"",modelValue:n.queryParam.MovieType,"onUpdate:modelValue":[S[1]||(S[1]=m=>n.queryParam.MovieType=m),S[2]||(S[2]=m=>j())],"toggle-color":"primary",options:G(dt)},null,8,["modelValue","options"]),n.queryParam.Page!=1?(h(),H(A,{key:0,class:"q-ml-sm",size:"sm",color:"primary",onClick:S[3]||(S[3]=m=>W(-1))},{default:r(()=>[Y("\u4E0A")]),_:1})):ae("",!0),i(A,{class:"q-ml-sm",size:"sm",color:"primary",onClick:S[4]||(S[4]=m=>W(1))},{default:r(()=>[Y("\u4E0B")]),_:1})]),L("div",wa,[i(A,{class:"q-mr-sm",color:"amber",outline:"",size:"sm",glossy:"","text-color":"black",onClick:x},{default:r(()=>[Y(X(n.selectAll?"\u4E0D\u9009":"\u5168\u9009"),1)]),_:1}),i(Se,{label:"...",modelValue:n.queryParam.Keyword,"onUpdate:modelValue":[S[5]||(S[5]=m=>n.queryParam.Keyword=m),S[6]||(S[6]=m=>j())],dense:!0,filled:"",clearable:""},null,8,["modelValue"]),i(A,{class:"q-mr-sm",size:"sm",color:"blue-6",icon:"refresh",onClick:a},{default:r(()=>[Y("\u5237\u65B0")]),_:1}),i(Fe,{class:"q-mr-sm",size:"sm",label:"\u8BBE\u7F6E",type:"primary",color:"teal",icon:"ti-settings"},{default:r(()=>[i(Pe,null,{default:r(()=>[(h(!0),le(re,null,fe(G(lt),m=>Ie((h(),H(Ve,{key:m.value,class:"movieTypeSelectItem"},{default:r(()=>[i(ye,{onClick:T=>I(m.value)},{default:r(()=>[i(ke,null,{default:r(()=>[Y(X(m.label),1)]),_:2},1024)]),_:2},1032,["onClick"])]),_:2},1024)),[[Ke]])),128))]),_:1})]),_:1}),i(Fe,{class:"q-mr-sm",size:"sm",label:"\u6807\u7B7E",type:"primary",color:"teal",icon:"ti-plus"},{default:r(()=>[L("div",ka,[(h(!0),le(re,null,fe(n.settingInfo.Tags,m=>(h(),H(A,{size:"sm",icon:"ti-plus",square:"","text-color":"white",color:"red",class:"tag-item",key:m,label:m,onClick:T=>q(m)},null,8,["label","onClick"]))),128))])]),_:1}),i(A,{outline:"",class:"q-mr-sm",size:"sm",color:"red",icon:"delete",onClick:d},{default:r(()=>[Y("\u5220\u9664")]),_:1})]),L("div",Ca,[(h(!0),le(re,null,fe(n.resultData.Data,m=>(h(),le("div",{key:m.Id,style:{border:"1px dotted purple",padding:"2px","border-radius":"4px","background-color":"rgba(0, 0, 0, 0.1)"}},[L("div",xa,[i(ke,null,{default:r(()=>[n.cutListIds.indexOf(m.Id)>=0?(h(),le("span",_a,"\u526A\u5207\u4E2D\uFF1A\uFF1A")):ae("",!0),Y(X(m.Title)+"\u3010"+X(m.SizeStr)+"\u3011 ",1)]),_:2},1024),Ie((h(),le("div",qa,[i(el,{size:"sm",modelValue:n.selector,"onUpdate:modelValue":S[7]||(S[7]=T=>n.selector=T),val:m.Id,color:"red"},null,8,["modelValue","val"]),i(Fe,{class:"q-mr-sm",size:"sm",label:m.MovieType,type:"primary",color:"blue-6"},{default:r(()=>[i(Pe,null,{default:r(()=>[(h(!0),le(re,null,fe(G(lt),T=>Ie((h(),H(Ve,{key:T.value,class:"movieTypeSelectItem"},{default:r(()=>[i(ye,null,{default:r(()=>[i(ke,{onClick:O=>{m.MovieType=T.value,B(G(Mt)(m.Id,T.value))}},{default:r(()=>[Y(X(T.label),1)]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024)),[[Ke]])),128))]),_:2},1024)]),_:2},1032,["label"]),i(A,{outline:"",size:"sm",class:"q-mr-sm",color:"amber",glossy:"","text-color":"black",icon:"delete",onClick:T=>_(m)},null,8,["onClick"]),i(A,{outline:"",size:"sm",class:"q-mr-sm",onClick:T=>w(m),icon:"near_me"},null,8,["onClick"]),i(A,{outline:"",class:"q-mr-sm",size:"sm",icon:"open_in_new",onClick:T=>B(z.OpenFileFolder(m.Id))},null,8,["onClick"]),i(A,{outline:"",size:"sm",class:"q-mr-sm",icon:"ti-pencil-alt2",onClick:T=>m.showCut=!0},null,8,["onClick"]),i(A,{outline:"",size:"sm",class:"q-mr-sm",color:"green",onClick:T=>Q(m)},{default:r(()=>[Y("toMp4")]),_:2},1032,["onClick"]),!m.MovieType||m.MovieType=="\u65E0"?(h(),H(A,{key:0,outline:"",class:"q-mr-sm",size:"sm",color:"brown-5",icon:"wifi_protected_setup",onClick:T=>B(G(Eo)(m.Id))},null,8,["onClick"])):ae("",!0),(h(!0),le(re,null,fe(m.Tags,T=>(h(),H(A,{color:"red",key:T,onClick:O=>B(G(bl)(m.Id,T),!0)},{default:r(()=>[Y(X(`- ${T}`),1)]),_:2},1032,["onClick"]))),128))])),[[gl]]),m.showCut?(h(),le("div",Ia,[Y(" \u5F00\u59CB\uFF1A "),i(Se,{style:{width:"40px"},"model-value":c.sH,"onUpdate:modelValue":S[8]||(S[8]=T=>c.sH=T)},null,8,["model-value"]),i(Se,{style:{width:"40px"},"model-value":c.sM,"onUpdate:modelValue":S[9]||(S[9]=T=>c.sM=T)},null,8,["model-value"]),i(Se,{style:{width:"40px"},"model-value":c.sS,"onUpdate:modelValue":S[10]||(S[10]=T=>c.sS=T)},null,8,["model-value"]),Y(" \u7ED3\u675F\uFF1A "),i(Se,{style:{width:"40px"},"model-value":c.eH,"onUpdate:modelValue":S[11]||(S[11]=T=>c.eH=T)},null,8,["model-value"]),i(Se,{style:{width:"40px"},"model-value":c.eM,"onUpdate:modelValue":S[12]||(S[12]=T=>c.eM=T)},null,8,["model-value"]),i(Se,{style:{width:"40px"},"model-value":c.eS,"onUpdate:modelValue":S[13]||(S[13]=T=>c.eS=T)},null,8,["model-value"]),i(A,{size:"sm",color:"black",type:"primary",onClick:T=>{f(m),m.showCut=!1},label:"\u786E\u8BA4"},null,8,["onClick"]),i(A,{size:"sm",color:"blue",onClick:T=>m.showCut=!1,label:"\u53D6\u6D88"},null,8,["onClick"])])):ae("",!0)])]))),128))])]),_:1}),i(qt,{name:"setting"},{default:r(()=>[i(Ae,{color:"purple-12",label:"Buttons\uFF08\u6700\u4F735\uFF09","stack-label":""},{prepend:r(()=>[i(Oe,{name:"event"})]),control:r(()=>[(h(!0),le(re,null,fe(G(Mo),m=>(h(),H(el,{modelValue:n.settingInfo.Buttons,"onUpdate:modelValue":[S[14]||(S[14]=T=>n.settingInfo.Buttons=T),J],key:m,val:m,label:m,color:"teal"},null,8,["modelValue","val","label"]))),128))]),_:1})]),_:1}),i(qt,{name:"tasking"},{default:r(()=>[i(Pe,{bordered:"",separator:""},{default:r(()=>[(h(!0),le(re,null,fe(n.tasking,(m,T)=>(h(),H(Sa,{key:T},{header:r(()=>[i(ye,{avatar:""},{default:r(()=>[i(A,{color:"blue",class:"q-mr-sm"},{default:r(()=>[Y(X(m.Type),1)]),_:2},1024),Y(" "+X(` \u683C\u5F0F\uFF1A${m.To} `),1)]),_:2},1024),i(ye,null,{default:r(()=>[L("div",null,X(m.Name),1),L("div",null,X(`\u5F00\u59CB\u65F6\u95F4\uFF1A${m.Start} `)+" "+X(` \u7ED3\u675F\u65F6\u95F4\uFF1A${m.End} `),1),L("div",null,X(`\u8017\u65F6\uFF1A${((m.FinishTime?new Date(m.FinishTime):new Date).getTime()-new Date(m.CreateTime).getTime())/1e3}`),1)]),_:2},1024),i(ye,{side:""},{default:r(()=>[i(A,{class:"q-mr-sm",color:m.Status=="\u6210\u529F"?"green":"black"},{default:r(()=>[Y(X(m.Status),1)]),_:2},1032,["color"])]),_:2},1024)]),default:r(()=>[i(tt,null,{default:r(()=>[i(yo,null,{default:r(()=>[L("div",Va,X(m.Log),1)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1},8,["class"])]),_:1},512))}};const ql=e=>(ko("data-v-efaf7ed0"),e=e(),Co(),e),Ta={class:"q-mg-md top",style:{"margin-bottom":"40px"}},$a={class:"row justify-center q-gutter-sm",ref:"top"},za={style:{width:"200px","max-height":"50vh"}},Ma={class:"q-pa-sm flex flex-center"},Aa={class:"row justify-center q-mt-sm mainlist"},Fa={class:"float-head absolute-top"},Oa={style:{display:"flex","flex-direction":"column","justify-content":"flex-start",width:"fit-content"}},Ba={class:"tag-popup"},Da=ql(()=>L("span",null,"\u79CD\u8349",-1)),Ea=["onClick"],Ra=ql(()=>L("div",{class:"text-subtitle1 text-white"}," Loading... ",-1)),La={style:{"background-color":"rgba(0, 0, 0, 0.2)"}},Ha={style:{display:"flex","flex-direction":"row"}},Qa={style:{display:"flex","flex-direction":"row"}},Na={style:{height:"4rem",overflow:"hidden"}},Ua=["onClick"],Ka=["onClick"],ja=["onClick"],Wa={__name:"SearchPage",setup(e){const b=Z(null),v=Z(null),g=Z(null),$=Z("Hello"),{copy:s}=Bo({source:$}),V=Cl(),n=M(()=>V.getSuggestions),c=yt(),Q=M(()=>a.settingInfo.Buttons),f=M(()=>c.platform.is.mobile),x=u=>{if(c.platform.is.electron){const{Path:l}=u;window.electron.openBySystem({Path:l})}else w(yl(u.Id))},I=u=>{const{settingInfo:l}=u;l&&(a.settingInfo=l)},d=u=>!Q.value||Q.value.length==0?!0:Q.value.indexOf(u)>=0,q=u=>{const l=`#/playing/${u.Id}`;c.platform.is.electron?window.electron.createWindow({router:l}):window.open(l)},a=et({currentData:{},settingInfo:{},queryParam:{Keyword:"",MovieType:"",OnlyRepeat:!1,fullscreen:!1,Page:1,PageSize:20,SortField:"MTime",SortType:"desc"},resultData:{},fullscreen:!1}),W=()=>{a.fullscreen?c.fullscreen.exit():c.fullscreen.request(),a.fullscreen=!a.fullscreen,console.log(a.fullscreen)},j=u=>{const l=`${a.settingInfo.BaseUrl}${u.Code}`;console.log(l),c.platform.is.electron?window.electron.createWindow({router:l,width:1280,height:1e3,titleBarStyle:""}):window.open(l)},B=u=>{console.log(u),u.target.select()},D=u=>{c.platform.is.electron?window.electron.showInFolder(u.Path):w(pl(u.Id))},P=u=>{c.dialog({title:u.Name,message:"\u786E\u5B9A\u5220\u9664\u5417?",cancel:!0,persistent:!0}).onOk(()=>{console.log(">>>> onOk"),w(ft(u.Id),!0)}).onCancel(()=>{console.log(">>>> Cancel")}).onDismiss(()=>{})},_=async()=>{const u=await kl();a.settingInfo=u.data,V.SettingInfo=u.data},w=async(u,l)=>{const{Code:o,Message:C}=await u||{};console.log(o,C),o!=200?c.notify({message:`${C}`}):l&&S()};ll(["`"],()=>{S()}),ll(["Enter"],()=>{J()});const U=async u=>{await s(u),c.notify({message:`${u}`})},ue=u=>{const{Page:l,PageSize:o,MovieType:C,SortField:k,SortType:ee}=a.queryParam,N=pe({path:"/search",query:{Page:l,PageSize:o,MovieType:C,SortField:k,SortType:ee,Keyword:u}});window.open(N.href,"_blank")},se=u=>{a.currentData=u,V.Playing=u,V.drawerRight=!0},ce=async u=>{console.log("view.queryParam.Page",u),await J();const l=document.querySelector(".scroll");console.log(l),l&&l.scrollTo(0,0)},J=async u=>{T();const{Keyword:l}=a.queryParam,o=await wl(a.queryParam);console.log(o),a.resultData={...o};const{ResultSize:C,ResultCnt:k}=o;document.title=`\u641C\u7D22 ${l||""} : ${C} {${k}}`},he=async u=>{const l=await pt({...u,NoRefresh:!0,MoveOut:!0});console.log(l),l.Code==200?c.notify({type:"negative",message:l.Message}):c.notify({type:"negative",message:l.Message})},z=Z(!1),S=async()=>{z.value=!0;const{Code:u,Message:l}=await hl("/api/refreshIndex");console.log(u,l),u=="200"&&(c.notify({type:"negative",message:l}),await J()),z.value=!1},m=async(u,l)=>{const{Code:o,Message:C}=await Mt(u,l);o==="200"?c.notify({type:"negative",message:C}):c.notify({type:"warning",message:C})},T=()=>{V.syncSearchParam(a.queryParam),localStorage.setItem("queryParam",JSON.stringify(a.queryParam));const{Page:u,PageSize:l,MovieType:o,SortField:C,SortType:k,Keyword:ee}=a.queryParam;de({path:"/search",query:{Page:u,PageSize:l,MovieType:o,SortField:C,SortType:k,Keyword:ee}})},O=bo(),{push:de,resolve:pe}=So();return At(async()=>{document.title="\u641C\u7D22";const{Page:u,PageSize:l,MovieType:o,SortField:C,SortType:k,Keyword:ee,showStyle:N,from:R}=O.query;if(await _(),ee&&(a.queryParam.Keyword=ee),u&&l)a.queryParam.Page=Number(u),a.queryParam.PageSize=Number(l),a.queryParam.MovieType=o,a.queryParam.SortField=C,a.queryParam.SortType=k,a.queryParam.Keyword=ee,a.queryParam.showStyle=N;else if(R=="index"){const ne=V.FileSearchParam;ne&&(console.log("piniaParam",ne),a.queryParam=ne)}else{const ne=JSON.parse(localStorage.getItem("queryParam"));ne&&(console.log("storage",ne),a.queryParam=ne)}J()}),(u,l)=>(h(),le(re,null,[L("div",Ta,[L("div",$a,[i(A,{loading:z.value,outline:f.value,color:"red",onClick:S},{loading:r(()=>[Y(" \u6267\u884C\u4E2D")]),default:r(()=>[Y(" \u7D22~ ")]),_:1},8,["loading","outline"]),f.value?ae("",!0):(h(),H(ct,{key:0,size:"md",modelValue:a.queryParam.SortField,"onUpdate:modelValue":[l[0]||(l[0]=o=>a.queryParam.SortField=o),l[1]||(l[1]=o=>J())],"toggle-color":"primary",options:[{label:"\u65F6",value:"MTime"},{label:"\u5BB9",value:"Size"},{label:"\u540D",value:"Code"}]},null,8,["modelValue"])),f.value?ae("",!0):(h(),H(ct,{key:1,modelValue:a.queryParam.SortType,"onUpdate:modelValue":[l[2]||(l[2]=o=>a.queryParam.SortType=o),l[3]||(l[3]=o=>J())],"toggle-color":"primary",options:[{label:"\u6B63",value:"asc"},{label:"\u5012",value:"desc"}]},null,8,["modelValue"])),f.value?ae("",!0):(h(),H(ct,{key:2,modelValue:a.queryParam.MovieType,"onUpdate:modelValue":[l[4]||(l[4]=o=>a.queryParam.MovieType=o),l[5]||(l[5]=o=>J())],"toggle-color":"primary",options:G(dt)},null,8,["modelValue","options"])),f.value?(h(),H(Fe,{key:3,outline:"",color:"primary",label:G(Vt)(a.queryParam.SortField,G(il))},{default:r(()=>[i(Pe,null,{default:r(()=>[(h(!0),le(re,null,fe(G(il),o=>Ie((h(),H(Ve,{key:o.label,clickable:"",onClick:C=>{a.queryParam.SortField=o.value,J()}},{default:r(()=>[i(ye,null,{default:r(()=>[i(ke,null,{default:r(()=>[Y(X(o.label),1)]),_:2},1024)]),_:2},1024)]),_:2},1032,["onClick"])),[[Ke]])),128))]),_:1})]),_:1},8,["label"])):ae("",!0),f.value?(h(),H(Fe,{key:4,outline:"",color:"primary",label:G(Vt)(a.queryParam.SortType,G(nl))},{default:r(()=>[i(Pe,null,{default:r(()=>[(h(!0),le(re,null,fe(G(nl),o=>Ie((h(),H(Ve,{key:o.label,clickable:"",onClick:C=>{a.queryParam.SortType=o.value,J()}},{default:r(()=>[i(ye,null,{default:r(()=>[i(ke,null,{default:r(()=>[Y(X(o.label),1)]),_:2},1024)]),_:2},1024)]),_:2},1032,["onClick"])),[[Ke]])),128))]),_:1})]),_:1},8,["label"])):ae("",!0),f.value?(h(),H(Fe,{key:5,outline:"",color:"primary",label:G(Vt)(a.queryParam.MovieType,G(dt))},{default:r(()=>[i(Pe,null,{default:r(()=>[(h(!0),le(re,null,fe(G(dt),o=>Ie((h(),H(Ve,{key:o.label,clickable:"",onClick:C=>{a.queryParam.MovieType=o.value,J()}},{default:r(()=>[i(ye,null,{default:r(()=>[i(ke,null,{default:r(()=>[Y(X(o.label),1)]),_:2},1024)]),_:2},1024)]),_:2},1032,["onClick"])),[[Ke]])),128))]),_:1})]),_:1},8,["label"])):ae("",!0),i(Se,{id:"searchBtn",label:"...",modelValue:a.queryParam.Keyword,"onUpdate:modelValue":[l[6]||(l[6]=o=>a.queryParam.Keyword=o),l[7]||(l[7]=o=>J())],dense:!0,filled:"",clearable:""},{prepend:r(()=>[i(Oe,{name:"ti-list",class:"cursor-pointer"},{default:r(()=>[i(tl,null,{default:r(()=>[L("div",za,[i(Pe,null,{default:r(()=>[(h(!0),le(re,null,fe(n.value,o=>Ie((h(),H(Ve,{clickable:"",key:o,onClick:C=>{a.queryParam.Keyword=o,J()}},{default:r(()=>[i(ye,null,{default:r(()=>[i(ke,null,{default:r(()=>[Y(X(o),1)]),_:2},1024)]),_:2},1024)]),_:2},1032,["onClick"])),[[gl]])),128))]),_:1})])]),_:1})]),_:1})]),append:r(()=>[i(Oe,{name:"ti-search",title:"\u641C",class:"cursor-pointer",onClick:J})]),_:1},8,["modelValue"]),i(A,{color:"primary",flat:"",size:"sm",icon:a.fullscreen?"fullscreen_exit":"fullscreen",modelValue:a.fullscreen,"onUpdate:modelValue":l[8]||(l[8]=o=>a.fullscreen=o),onClick:W},null,8,["icon","modelValue"]),i(A,{class:"q-mr-sm",flat:"",size:"sm",color:"primary",icon:"apps",onClick:l[9]||(l[9]=o=>g.value.open({queryParam:a.queryParam,settingInfo:a.settingInfo,cb:I}))}),f.value?ae("",!0):(h(),H(ho,{key:6,modelValue:a.queryParam.OnlyRepeat,"onUpdate:modelValue":[l[10]||(l[10]=o=>a.queryParam.OnlyRepeat=o),J],flat:"",label:"\u91CD"},null,8,["modelValue"]))],512),i(Fo,{position:"bottom",style:{"z-index":"9","background-color":"rgba(0, 0, 0, 0.6)"}},{default:r(()=>[L("div",Ma,[i(Zo,{color:"lime-11 q-mr-md","bg-color":"black",dense:"","onUpdate:modelValue":[l[11]||(l[11]=o=>{a.queryParam.PageSize=Number(o),J()}),l[12]||(l[12]=o=>a.queryParam.PageSize=o)],filled:"",dark:"",modelValue:a.queryParam.PageSize,options:[10,20,30,50,200]},null,8,["modelValue"]),i(Ao,{modelValue:a.queryParam.Page,"onUpdate:modelValue":[l[13]||(l[13]=o=>a.queryParam.Page=o),ce],color:"deep-orange",ellipses:!0,max:a.resultData.TotalPage||0,"max-pages":f.value?5:10,"boundary-numbers":"","direction-links":""},null,8,["modelValue","max","max-pages"]),i(Se,{modelValue:a.queryParam.Page,"onUpdate:modelValue":[l[14]||(l[14]=o=>a.queryParam.Page=o),l[16]||(l[16]=o=>{a.queryParam.Page=Number(o),J()})],dense:!0,type:"search",style:{"background-color":"aliceblue",width:"40px","text-align":"center"},onFocus:l[15]||(l[15]=o=>B(o))},null,8,["modelValue"])])]),_:1}),i(Vo,null,{default:r(()=>[L("div",Aa,[(h(!0),le(re,null,fe(a.resultData.Data,o=>(h(),H(tt,{class:Pt(["q-ma-sm",{"example-item":!f.value,"mobile-item":f.value}]),key:o.Id},{default:r(()=>{var C;return[L("div",Fa,[L("div",Oa,[i(zt,{square:"","text-color":"white",style:{"margin-left":"0px",padding:"0 4px","background-color":"rgba(236, 15, 15, 0.8)"}},{default:r(()=>[i(tl,{"context-menu":""},{default:r(()=>[L("div",Ba,[L("div",null,[(h(!0),le(re,null,fe(o.Tags,k=>(h(),H(A,{size:"sm",icon:"ti-minus",square:"","text-color":"white",color:"green",class:"tag-item",key:k,label:k,onClick:ee=>w(G(bl)(o.Id,k),!0)},null,8,["label","onClick"]))),128))]),L("div",null,[(h(!0),le(re,null,fe(a.settingInfo.Tags,k=>(h(),H(A,{size:"sm",icon:"ti-plus",square:"","text-color":"white",color:"red",class:"tag-item",key:k,label:k,onClick:ee=>w(G(Sl)(o.Id,k),!0)},null,8,["label","onClick"]))),128))])])]),_:2},1024),Da]),_:2},1024),(h(!0),le(re,null,fe(o.Tags,k=>(h(),H(zt,{square:"","text-color":"white",key:k,style:{"margin-left":"0px",padding:"0 4px","background-color":"rgba(188, 24, 24, 0.6)"}},{default:r(()=>[L("span",{onClick:ee=>{a.queryParam.Keyword=k,J()}},X(k==null?void 0:k.substring(0,4)),9,Ea)]),_:2},1024))),128))]),i(Fe,{style:{"background-color":"rgba(0, 0, 0, 0.8)",width:"85px",height:"1rem",color:"antiquewhite"},label:o.MovieType},{default:r(()=>[i(Pe,{style:{"background-color":"rgba(0, 0, 0, 0.7)"}},{default:r(()=>[(h(!0),le(re,null,fe(G(lt),k=>Ie((h(),H(Ve,{key:k.value,class:"movieTypeSelectItem"},{default:r(()=>[i(ye,null,{default:r(()=>[i(ke,{onClick:ee=>m(o.Id,k.value)},{default:r(()=>[Y(X(k.label),1)]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024)),[[Ke]])),128))]),_:2},1024)]),_:2},1032,["label"])]),i(Tt,{fit:"fit",easier:"",draggable:"",class:Pt({"img-self":!f.value,"img-self-moblie":f.value}),src:G(qo)(o.Id),onClick:()=>{v.value.open({item:o,cb:S})}},{loading:r(()=>[Ra]),_:2},1032,["class","src","onClick"]),L("div",{class:"absolute-bottom float-btn",style:dl({height:f.value?"6rem":"8.5rem"})},[L("div",La,[L("div",Ha,[d("\u64AD\u653E")&&!f.value?(h(),H(A,{key:0,round:"",class:"q-mr-sm",size:f.value?"sm":"md",ripple:"",color:"primary",icon:"ti-control-eject",onClick:k=>x(o),title:"\u64AD\u653E"},null,8,["size","onClick"])):ae("",!0),i(A,{round:"",class:"q-mr-sm",size:f.value?"sm":"md",ripple:"",color:"red",icon:"ti-fullscreen",title:"\u5355\u9875\u64AD\u653E",onClick:k=>q(o)},null,8,["size","onClick"]),i(A,{round:"",class:"q-mr-sm",size:f.value?"sm":"md",ripple:"",color:"orange",icon:"ti-arrow-right",onClick:k=>se(o),title:"\u5C0F\u64AD\u653E"},null,8,["size","onClick"]),i(A,{round:"",class:"q-mr-sm",size:f.value?"sm":"md",ripple:"",color:"orange",icon:"ti-blackboard",onClick:k=>v.value.open({item:o,playing:!0}),title:"\u5C0F\u64AD\u653E"},null,8,["size","onClick"])]),L("div",Qa,[d("\u7F16\u8F91")?(h(),H(A,{key:0,round:"",class:"q-mr-sm",size:"sm",color:"primary",icon:"ti-slice",onClick:k=>b.value.open(o,S),title:"\u7F16\u8F91"},null,8,["onClick"])):ae("",!0),d("\u6587\u4EF6\u5939")&&!f.value?(h(),H(A,{key:1,round:"",class:"q-mr-sm",size:"sm",color:"primary",icon:"open_in_new",onClick:k=>D(o),title:"\u6587\u4EF6\u5939"},null,8,["onClick"])):ae("",!0),i(A,{round:"",class:"q-mr-sm",size:"sm",color:"brown-5",icon:"ti-search",title:"\u7F51\u641C",onClick:k=>j(o)},null,8,["onClick"]),d("\u522E\u56FE")?(h(),H(A,{key:2,round:"",class:"q-mr-sm",size:"sm",color:"secondary",icon:"ti-import",onClick:k=>w(G(Qo)(o.Id)),title:"\u522E\u56FE"},null,8,["onClick"])):ae("",!0),d("\u5220\u9664")?(h(),H(A,{key:3,round:"",class:"q-mr-sm",size:"sm",color:"amber",glossy:"","text-color":"black",icon:"ti-trash",onClick:k=>P(o),title:"\u5220\u9664"},null,8,["onClick"])):ae("",!0),d("\u79FB\u52A8")?(h(),H(A,{key:4,round:"",class:"q-mr-sm",size:"sm",color:"black",onClick:k=>he(o),icon:"ti-location-arrow",title:"\u79FB\u52A8"},null,8,["onClick"])):ae("",!0)])]),L("div",Na,[L("a",{style:{color:"#9e089e","background-color":"rgba(0, 0, 0, 0.1)"},class:"mr10 cursor-pointer",target:"_blank",onClick:k=>ue(o.Actress)},X((C=o.Actress)==null?void 0:C.substring(0,6)),9,Ua),L("a",{style:{color:"rgb(239, 30, 30)","background-color":"rgba(0, 0, 0, 0.1)"},class:"mr10 cursor-pointer",onClick:k=>U(o.Code)},X(G(_l)(o.Code)),9,Ka),L("a",{style:{color:"rgb(22, 26, 227)","background-color":"rgba(0, 0, 0, 0.1)"},class:"mr10 cursor-pointer",onClick:k=>U(o.Title)},X(o.SizeStr),9,ja),L("span",null,X(G(vt)(o.Title)),1)])],4)]}),_:2},1032,["class"]))),128))]),i(wo,{position:"bottom-right","scroll-offset":150,offset:[18,100]},{default:r(()=>[i(A,{fab:"",icon:"keyboard_arrow_up",color:"accent"})]),_:1})]),_:1})]),i(oa,{ref_key:"fileEditRef",ref:b},null,512),i(ya,{ref_key:"fileInfoRef",ref:v},null,512),i(Pa,{ref_key:"listEditRef",ref:g},null,512)],64))}};var cn=po(Wa,[["__scopeId","data-v-efaf7ed0"]]);export{cn as default};
