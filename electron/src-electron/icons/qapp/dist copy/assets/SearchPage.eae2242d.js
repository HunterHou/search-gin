import{b1 as Nl,r as Z,u as A,v as xe,b2 as Ul,b3 as Kl,b4 as sl,b5 as cl,K as mt,_ as _e,G as F,N as ot,E as at,ab as jl,b6 as dl,b7 as Wl,b8 as Jl,b9 as Gl,ba as Yt,bb as Xe,bc as Yl,bd as Xl,aE as xt,Q as Oe,be as Zl,bf as eo,bg as Ue,bh as Xt,aw as to,bi as lo,af as qe,s as gt,a6 as oo,a1 as ao,Z as Ft,H as Ot,bj as no,aU as io,bk as uo,g as et,o as S,c as U,w as r,C as G,a as n,bl as ro,l as he,m as so,p as z,ah as fl,q as tt,P as vl,R as ml,h as N,t as X,f as Y,e as le,k as oe,F as ce,z as ve,aj as co,bm as fo,aC as gl,S as vo,T as mo,bn as Zt,V as go,b0 as el,n as Ie,A as yo,bo as tl,i as po,ag as Tt,ar as yl,ap as bo,x as So,aq as ho,bp as wo,as as ko,ak as Co,al as xo}from"./index.6cbd7867.js";import{Q as _t}from"./QPageSticky.3ebc913c.js";import{a as $t,c as _o,d as qo,Q as ct,b as Io}from"./index.9cd9b2eb.js";import{Q as ke,P as Vo,f as Pe,h as Po,i as ll}from"./PlayingVideo.3079ed9f.js";import{c as To,a as pe,Q as Ve,d as $o}from"./QTooltip.e47ba4b9.js";import{r as zt,Q as Ae,a as zo,b as qt,c as Mo,d as It,e as Fe,f as Ao}from"./Setting.0b52cafa.js";import{Q as Mt}from"./QChip.b4d308f7.js";import{u as We,Q as Fo}from"./use-dialog-plugin-component.7690c4be.js";import{Q as Oo,C as Ke}from"./ClosePopup.f55c0d39.js";import{u as yt,a as Bo,o as ol}from"./index.cbe10a33.js";import{F as pt,Q as Do,P as pl,b as bl,D as ft,c as At,d as Eo,C as Sl,T as Ro,e as Lo,f as Ho,A as hl,R as wl,S as kl,g as Qo}from"./searchAPI.5cbd0ee6.js";import{a as Cl,P as No}from"./settingAPI.0dac8b58.js";import{F as Uo,u as xl}from"./System.62413352.js";import"./axios.ecb6ef83.js";const we=1e3,Ko=["start","center","end","start-force","center-force","end-force"],_l=Array.prototype.filter,jo=window.getComputedStyle(document.body).overflowAnchor===void 0?Nl:function(e,h){e!==null&&(e._qOverflowAnimationFrame!==void 0&&cancelAnimationFrame(e._qOverflowAnimationFrame),e._qOverflowAnimationFrame=requestAnimationFrame(()=>{if(e===null)return;e._qOverflowAnimationFrame=void 0;const m=e.children||[];_l.call(m,$=>$.dataset&&$.dataset.qVsAnchor!==void 0).forEach($=>{delete $.dataset.qVsAnchor});const g=m[h];g&&g.dataset&&(g.dataset.qVsAnchor="")}))};function je(e,h){return e+h}function Vt(e,h,m,g,$,s,V,i){const c=e===window?document.scrollingElement||document.documentElement:e,K=$===!0?"offsetWidth":"offsetHeight",d={scrollStart:0,scrollViewSize:-V-i,scrollMaxSize:0,offsetStart:-V,offsetEnd:-i};if($===!0?(e===window?(d.scrollStart=window.pageXOffset||window.scrollX||document.body.scrollLeft||0,d.scrollViewSize+=document.documentElement.clientWidth):(d.scrollStart=c.scrollLeft,d.scrollViewSize+=c.clientWidth),d.scrollMaxSize=c.scrollWidth,s===!0&&(d.scrollStart=(zt===!0?d.scrollMaxSize-d.scrollViewSize:0)-d.scrollStart)):(e===window?(d.scrollStart=window.pageYOffset||window.scrollY||document.body.scrollTop||0,d.scrollViewSize+=document.documentElement.clientHeight):(d.scrollStart=c.scrollTop,d.scrollViewSize+=c.clientHeight),d.scrollMaxSize=c.scrollHeight),m!==null)for(let C=m.previousElementSibling;C!==null;C=C.previousElementSibling)C.classList.contains("q-virtual-scroll--skip")===!1&&(d.offsetStart+=C[K]);if(g!==null)for(let C=g.nextElementSibling;C!==null;C=C.nextElementSibling)C.classList.contains("q-virtual-scroll--skip")===!1&&(d.offsetEnd+=C[K]);if(h!==e){const C=c.getBoundingClientRect(),q=h.getBoundingClientRect();$===!0?(d.offsetStart+=q.left-C.left,d.offsetEnd-=q.width):(d.offsetStart+=q.top-C.top,d.offsetEnd-=q.height),e!==window&&(d.offsetStart+=d.scrollStart),d.offsetEnd+=d.scrollMaxSize-d.offsetStart}return d}function al(e,h,m,g){h==="end"&&(h=(e===window?document.body:e)[m===!0?"scrollWidth":"scrollHeight"]),e===window?m===!0?(g===!0&&(h=(zt===!0?document.body.scrollWidth-document.documentElement.clientWidth:0)-h),window.scrollTo(h,window.pageYOffset||window.scrollY||document.body.scrollTop||0)):window.scrollTo(window.pageXOffset||window.scrollX||document.body.scrollLeft||0,h):m===!0?(g===!0&&(h=(zt===!0?e.scrollWidth-e.offsetWidth:0)-h),e.scrollLeft=h):e.scrollTop=h}function Ze(e,h,m,g){if(m>=g)return 0;const $=h.length,s=Math.floor(m/we),V=Math.floor((g-1)/we)+1;let i=e.slice(s,V).reduce(je,0);return m%we!==0&&(i-=h.slice(s*we,m).reduce(je,0)),g%we!==0&&g!==$&&(i-=h.slice(g,V*we).reduce(je,0)),i}const Wo={virtualScrollSliceSize:{type:[Number,String],default:null},virtualScrollSliceRatioBefore:{type:[Number,String],default:1},virtualScrollSliceRatioAfter:{type:[Number,String],default:1},virtualScrollItemSize:{type:[Number,String],default:24},virtualScrollStickySizeStart:{type:[Number,String],default:0},virtualScrollStickySizeEnd:{type:[Number,String],default:0},tableColspan:[Number,String]},Jo={virtualScrollHorizontal:Boolean,onVirtualScroll:Function,...Wo};function Go({virtualScrollLength:e,getVirtualScrollTarget:h,getVirtualScrollEl:m,virtualScrollItemSizeComputed:g}){const $=ot(),{props:s,emit:V,proxy:i}=$,{$q:c}=i;let K,d,C,q=[],f;const _=Z(0),o=Z(0),J=Z({}),W=Z(null),R=Z(null),L=Z(null),P=Z({from:0,to:0}),x=A(()=>s.tableColspan!==void 0?s.tableColspan:100);g===void 0&&(g=A(()=>s.virtualScrollItemSize));const w=A(()=>g.value+";"+s.virtualScrollHorizontal),j=A(()=>w.value+";"+s.virtualScrollSliceRatioBefore+";"+s.virtualScrollSliceRatioAfter);xe(j,()=>{T()}),xe(w,ue);function ue(){v(d,!0)}function de(u){v(u===void 0?d:u)}function re(u,a){const l=h();if(l==null||l.nodeType===8)return;const B=Vt(l,m(),W.value,R.value,s.virtualScrollHorizontal,c.lang.rtl,s.virtualScrollStickySizeStart,s.virtualScrollStickySizeEnd);C!==B.scrollViewSize&&T(B.scrollViewSize),te(l,B,Math.min(e.value-1,Math.max(0,parseInt(u,10)||0)),0,Ko.indexOf(a)>-1?a:d>-1&&u>d?"end":"start")}function ie(){const u=h();if(u==null||u.nodeType===8)return;const a=Vt(u,m(),W.value,R.value,s.virtualScrollHorizontal,c.lang.rtl,s.virtualScrollStickySizeStart,s.virtualScrollStickySizeEnd),l=e.value-1,B=a.scrollMaxSize-a.offsetStart-a.offsetEnd-o.value;if(K===a.scrollStart)return;if(a.scrollMaxSize<=0){te(u,a,0,0);return}C!==a.scrollViewSize&&T(a.scrollViewSize),M(P.value.from);const I=Math.floor(a.scrollMaxSize-Math.max(a.scrollViewSize,a.offsetEnd)-Math.min(f[l],a.scrollViewSize/2));if(I>0&&Math.ceil(a.scrollStart)>=I){te(u,a,l,a.scrollMaxSize-a.offsetEnd-q.reduce(je,0));return}let D=0,Q=a.scrollStart-a.offsetStart,se=Q;if(Q<=B&&Q+a.scrollViewSize>=_.value)Q-=_.value,D=P.value.from,se=Q;else for(let E=0;Q>=q[E]&&D<l;E++)Q-=q[E],D+=we;for(;Q>0&&D<l;)Q-=f[D],Q>-a.scrollViewSize?(D++,se=Q):se=f[D]+Q;te(u,a,D,se)}function te(u,a,l,B,I){const D=typeof I=="string"&&I.indexOf("-force")>-1,Q=D===!0?I.replace("-force",""):I,se=Q!==void 0?Q:"start";let E=Math.max(0,l-J.value[se]),ge=E+J.value.total;ge>e.value&&(ge=e.value,E=Math.max(0,ge-J.value.total)),K=a.scrollStart;const Be=E!==P.value.from||ge!==P.value.to;if(Be===!1&&Q===void 0){fe(l);return}const{activeElement:Je}=document,Ce=L.value;Be===!0&&Ce!==null&&Ce!==Je&&Ce.contains(Je)===!0&&(Ce.addEventListener("focusout",k),setTimeout(()=>{Ce!==null&&Ce.removeEventListener("focusout",k)})),jo(Ce,l-E);const nt=Q!==void 0?f.slice(E,l).reduce(je,0):0;if(Be===!0){const Te=ge>=P.value.from&&E<=P.value.to?P.value.to:ge;P.value={from:E,to:Te},_.value=Ze(q,f,0,E),o.value=Ze(q,f,ge,e.value),requestAnimationFrame(()=>{P.value.to!==ge&&K===a.scrollStart&&(P.value={from:P.value.from,to:ge},o.value=Ze(q,f,ge,e.value))})}requestAnimationFrame(()=>{if(K!==a.scrollStart)return;Be===!0&&M(E);const Te=f.slice(E,l).reduce(je,0),De=Te+a.offsetStart+_.value,it=De+f[l];let Ge=De+B;if(Q!==void 0){const bt=Te-nt,ye=a.scrollStart+bt;Ge=D!==!0&&ye<De&&it<ye+a.scrollViewSize?ye:Q==="end"?it-a.scrollViewSize:De-(Q==="start"?0:Math.round((a.scrollViewSize-f[l])/2))}K=Ge,al(u,Ge,s.virtualScrollHorizontal,c.lang.rtl),fe(l)})}function M(u){const a=L.value;if(a){const l=_l.call(a.children,E=>E.classList&&E.classList.contains("q-virtual-scroll--skip")===!1),B=l.length,I=s.virtualScrollHorizontal===!0?E=>E.getBoundingClientRect().width:E=>E.offsetHeight;let D=u,Q,se;for(let E=0;E<B;){for(Q=I(l[E]),E++;E<B&&l[E].classList.contains("q-virtual-scroll--with-prev")===!0;)Q+=I(l[E]),E++;se=Q-f[D],se!==0&&(f[D]+=se,q[Math.floor(D/we)]+=se),D++}}}function k(){L.value!==null&&L.value!==void 0&&L.value.focus()}function v(u,a){const l=1*g.value;(a===!0||Array.isArray(f)===!1)&&(f=[]);const B=f.length;f.length=e.value;for(let D=e.value-1;D>=B;D--)f[D]=l;const I=Math.floor((e.value-1)/we);q=[];for(let D=0;D<=I;D++){let Q=0;const se=Math.min((D+1)*we,e.value);for(let E=D*we;E<se;E++)Q+=f[E];q.push(Q)}d=-1,K=void 0,_.value=Ze(q,f,0,P.value.from),o.value=Ze(q,f,P.value.to,e.value),u>=0?(M(P.value.from),_e(()=>{re(u)})):be()}function T(u){if(u===void 0&&typeof window!="undefined"){const Q=h();Q!=null&&Q.nodeType!==8&&(u=Vt(Q,m(),W.value,R.value,s.virtualScrollHorizontal,c.lang.rtl,s.virtualScrollStickySizeStart,s.virtualScrollStickySizeEnd).scrollViewSize)}C=u;const a=parseFloat(s.virtualScrollSliceRatioBefore)||0,l=parseFloat(s.virtualScrollSliceRatioAfter)||0,B=1+a+l,I=u===void 0||u<=0?1:Math.ceil(u/g.value),D=Math.max(1,I,Math.ceil((s.virtualScrollSliceSize>0?s.virtualScrollSliceSize:10)/B));J.value={total:Math.ceil(D*B),start:Math.ceil(D*a),center:Math.ceil(D*(.5+a)),end:Math.ceil(D*(1+a)),view:I}}function O(u,a){const l=s.virtualScrollHorizontal===!0?"width":"height",B={["--q-virtual-scroll-item-"+l]:g.value+"px"};return[u==="tbody"?F(u,{class:"q-virtual-scroll__padding",key:"before",ref:W},[F("tr",[F("td",{style:{[l]:`${_.value}px`,...B},colspan:x.value})])]):F(u,{class:"q-virtual-scroll__padding",key:"before",ref:W,style:{[l]:`${_.value}px`,...B}}),F(u,{class:"q-virtual-scroll__content",key:"content",ref:L,tabindex:-1},a.flat()),u==="tbody"?F(u,{class:"q-virtual-scroll__padding",key:"after",ref:R},[F("tr",[F("td",{style:{[l]:`${o.value}px`,...B},colspan:x.value})])]):F(u,{class:"q-virtual-scroll__padding",key:"after",ref:R,style:{[l]:`${o.value}px`,...B}})]}function fe(u){d!==u&&(s.onVirtualScroll!==void 0&&V("virtualScroll",{index:u,from:P.value.from,to:P.value.to-1,direction:u<d?"decrease":"increase",ref:i}),d=u)}T();const be=Ul(ie,c.platform.is.ios===!0?120:35);Kl(()=>{T()});let p=!1;return sl(()=>{p=!0}),cl(()=>{if(p!==!0)return;const u=h();K!==void 0&&u!==void 0&&u!==null&&u.nodeType!==8?al(u,K,s.virtualScrollHorizontal,c.lang.rtl):re(d)}),mt(()=>{be.cancel()}),Object.assign(i,{scrollTo:re,reset:ue,refresh:de}),{virtualScrollSliceRange:P,virtualScrollSliceSizeComputed:J,setVirtualScrollSize:T,onVirtualScrollEvt:be,localResetVirtualScroll:v,padVirtualScroll:O,scrollTo:re,reset:ue,refresh:de}}const nl=e=>["add","add-unique","toggle"].includes(e),Yo=".*+?^${}()|[]\\",Xo=Object.keys(dl);var Zo=at({name:"QSelect",inheritAttrs:!1,props:{...Jo,...jl,...dl,modelValue:{required:!0},multiple:Boolean,displayValue:[String,Number],displayValueHtml:Boolean,dropdownIcon:String,options:{type:Array,default:()=>[]},optionValue:[Function,String],optionLabel:[Function,String],optionDisable:[Function,String],hideSelected:Boolean,hideDropdownIcon:Boolean,fillInput:Boolean,maxValues:[Number,String],optionsDense:Boolean,optionsDark:{type:Boolean,default:null},optionsSelectedClass:String,optionsHtml:Boolean,optionsCover:Boolean,menuShrink:Boolean,menuAnchor:String,menuSelf:String,menuOffset:Array,popupContentClass:String,popupContentStyle:[String,Array,Object],useInput:Boolean,useChips:Boolean,newValueMode:{type:String,validator:nl},mapOptions:Boolean,emitValue:Boolean,inputDebounce:{type:[Number,String],default:500},inputClass:[Array,String,Object],inputStyle:[Array,String,Object],tabindex:{type:[String,Number],default:0},autocomplete:String,transitionShow:String,transitionHide:String,transitionDuration:[String,Number],behavior:{type:String,validator:e=>["default","menu","dialog"].includes(e),default:"default"},virtualScrollItemSize:{type:[Number,String],default:void 0},onNewValue:Function,onFilter:Function},emits:[...Wl,"add","remove","inputValue","newValue","keyup","keypress","keydown","filterAbort"],setup(e,{slots:h,emit:m}){const{proxy:g}=ot(),{$q:$}=g,s=Z(!1),V=Z(!1),i=Z(-1),c=Z(""),K=Z(!1),d=Z(!1);let C=null,q,f,_,o=null,J,W,R,L;const P=Z(null),x=Z(null),w=Z(null),j=Z(null),ue=Z(null),de=Jl(e),re=eo(Kt),ie=A(()=>Array.isArray(e.options)?e.options.length:0),te=A(()=>e.virtualScrollItemSize===void 0?e.optionsDense===!0?24:48:e.virtualScrollItemSize),{virtualScrollSliceRange:M,virtualScrollSliceSizeComputed:k,localResetVirtualScroll:v,padVirtualScroll:T,onVirtualScrollEvt:O,scrollTo:fe,setVirtualScrollSize:be}=Go({virtualScrollLength:ie,getVirtualScrollTarget:$l,getVirtualScrollEl:Nt,virtualScrollItemSizeComputed:te}),p=Gl(),u=A(()=>{const t=e.mapOptions===!0&&e.multiple!==!0,b=e.modelValue!==void 0&&(e.modelValue!==null||t===!0)?e.multiple===!0&&Array.isArray(e.modelValue)?e.modelValue:[e.modelValue]:[];if(e.mapOptions===!0&&Array.isArray(e.options)===!0){const y=e.mapOptions===!0&&q!==void 0?q:[],H=b.map(ae=>Tl(ae,y));return e.modelValue===null&&t===!0?H.filter(ae=>ae!==null):H}return b}),a=A(()=>{const t={};return Xo.forEach(b=>{const y=e[b];y!==void 0&&(t[b]=y)}),t}),l=A(()=>e.optionsDark===null?p.isDark.value:e.optionsDark),B=A(()=>Yt(u.value)),I=A(()=>{let t="q-field__input q-placeholder col";return e.hideSelected===!0||u.value.length===0?[t,e.inputClass]:(t+=" q-field__input--padding",e.inputClass===void 0?t:[t,e.inputClass])}),D=A(()=>(e.virtualScrollHorizontal===!0?"q-virtual-scroll--horizontal":"")+(e.popupContentClass?" "+e.popupContentClass:"")),Q=A(()=>ie.value===0),se=A(()=>u.value.map(t=>Se.value(t)).join(", ")),E=A(()=>e.displayValue!==void 0?e.displayValue:se.value),ge=A(()=>e.optionsHtml===!0?()=>!0:t=>t!=null&&t.html===!0),Be=A(()=>e.displayValueHtml===!0||e.displayValue===void 0&&(e.optionsHtml===!0||u.value.some(ge.value))),Je=A(()=>p.focused.value===!0?e.tabindex:-1),Ce=A(()=>{const t={tabindex:e.tabindex,role:"combobox","aria-label":e.label,"aria-readonly":e.readonly===!0?"true":"false","aria-autocomplete":e.useInput===!0?"list":"none","aria-expanded":s.value===!0?"true":"false","aria-controls":`${p.targetUid.value}_lb`};return i.value>=0&&(t["aria-activedescendant"]=`${p.targetUid.value}_${i.value}`),t}),nt=A(()=>({id:`${p.targetUid.value}_lb`,role:"listbox","aria-multiselectable":e.multiple===!0?"true":"false"})),Te=A(()=>u.value.map((t,b)=>({index:b,opt:t,html:ge.value(t),selected:!0,removeAtIndex:Pl,toggleOption:$e,tabindex:Je.value}))),De=A(()=>{if(ie.value===0)return[];const{from:t,to:b}=M.value;return e.options.slice(t,b).map((y,H)=>{const ae=Ee.value(y)===!0,ee=t+H,ne={clickable:!0,active:!1,activeClass:bt.value,manualFocus:!0,focused:!1,disable:ae,tabindex:-1,dense:e.optionsDense,dark:l.value,role:"option",id:`${p.targetUid.value}_${ee}`,onClick:()=>{$e(y)}};return ae!==!0&&(wt(y)===!0&&(ne.active=!0),i.value===ee&&(ne.focused=!0),ne["aria-selected"]=ne.active===!0?"true":"false",$.platform.is.desktop===!0&&(ne.onMousemove=()=>{s.value===!0&&Re(ee)})),{index:ee,opt:y,html:ge.value(y),label:Se.value(y),selected:ne.active,focused:ne.focused,toggleOption:$e,setOptionIndex:Re,itemProps:ne}})}),it=A(()=>e.dropdownIcon!==void 0?e.dropdownIcon:$.iconSet.arrow.dropdown),Ge=A(()=>e.optionsCover===!1&&e.outlined!==!0&&e.standout!==!0&&e.borderless!==!0&&e.rounded!==!0),bt=A(()=>e.optionsSelectedClass!==void 0?e.optionsSelectedClass:e.color!==void 0?`text-${e.color}`:""),ye=A(()=>ht(e.optionValue,"value")),Se=A(()=>ht(e.optionLabel,"label")),Ee=A(()=>ht(e.optionDisable,"disable")),ut=A(()=>u.value.map(t=>ye.value(t))),Vl=A(()=>{const t={onInput:Kt,onChange:re,onKeydown:Qt,onKeyup:Lt,onKeypress:Ht,onFocus:Et,onClick(b){f===!0&&Ue(b)}};return t.onCompositionstart=t.onCompositionupdate=t.onCompositionend=re,t});xe(u,t=>{q=t,e.useInput===!0&&e.fillInput===!0&&e.multiple!==!0&&p.innerLoading.value!==!0&&(V.value!==!0&&s.value!==!0||B.value!==!0)&&(_!==!0&&Ne(),(V.value===!0||s.value===!0)&&Le(""))},{immediate:!0}),xe(()=>e.fillInput,Ne),xe(s,kt),xe(ie,Ql);function Bt(t){return e.emitValue===!0?ye.value(t):t}function St(t){if(t>-1&&t<u.value.length)if(e.multiple===!0){const b=e.modelValue.slice();m("remove",{index:t,value:b.splice(t,1)[0]}),m("update:modelValue",b)}else m("update:modelValue",null)}function Pl(t){St(t),p.focus()}function Dt(t,b){const y=Bt(t);if(e.multiple!==!0){e.fillInput===!0&&Ye(Se.value(t),!0,!0),m("update:modelValue",y);return}if(u.value.length===0){m("add",{index:0,value:y}),m("update:modelValue",e.multiple===!0?[y]:y);return}if(b===!0&&wt(t)===!0||e.maxValues!==void 0&&e.modelValue.length>=e.maxValues)return;const H=e.modelValue.slice();m("add",{index:H.length,value:y}),H.push(y),m("update:modelValue",H)}function $e(t,b){if(p.editable.value!==!0||t===void 0||Ee.value(t)===!0)return;const y=ye.value(t);if(e.multiple!==!0){b!==!0&&(Ye(e.fillInput===!0?Se.value(t):"",!0,!0),ze()),x.value!==null&&x.value.focus(),(u.value.length===0||Xe(ye.value(u.value[0]),y)!==!0)&&m("update:modelValue",e.emitValue===!0?y:t);return}if((f!==!0||K.value===!0)&&p.focus(),Et(),u.value.length===0){const ee=e.emitValue===!0?y:t;m("add",{index:0,value:ee}),m("update:modelValue",e.multiple===!0?[ee]:ee);return}const H=e.modelValue.slice(),ae=ut.value.findIndex(ee=>Xe(ee,y));if(ae>-1)m("remove",{index:ae,value:H.splice(ae,1)[0]});else{if(e.maxValues!==void 0&&H.length>=e.maxValues)return;const ee=e.emitValue===!0?y:t;m("add",{index:H.length,value:ee}),H.push(ee)}m("update:modelValue",H)}function Re(t){if($.platform.is.desktop!==!0)return;const b=t>-1&&t<ie.value?t:-1;i.value!==b&&(i.value=b)}function rt(t=1,b){if(s.value===!0){let y=i.value;do y=Xt(y+t,-1,ie.value-1);while(y!==-1&&y!==i.value&&Ee.value(e.options[y])===!0);i.value!==y&&(Re(y),fe(y),b!==!0&&e.useInput===!0&&e.fillInput===!0&&st(y>=0?Se.value(e.options[y]):J))}}function Tl(t,b){const y=H=>Xe(ye.value(H),t);return e.options.find(y)||b.find(y)||t}function ht(t,b){const y=t!==void 0?t:b;return typeof y=="function"?y:H=>H!==null&&typeof H=="object"&&y in H?H[y]:H}function wt(t){const b=ye.value(t);return ut.value.find(y=>Xe(y,b))!==void 0}function Et(t){e.useInput===!0&&x.value!==null&&(t===void 0||x.value===t.target&&t.target.value===se.value)&&x.value.select()}function Rt(t){to(t,27)===!0&&s.value===!0&&(Ue(t),ze(),Ne()),m("keyup",t)}function Lt(t){const{value:b}=t.target;if(t.keyCode!==void 0){Rt(t);return}if(t.target.value="",C!==null&&(clearTimeout(C),C=null),Ne(),typeof b=="string"&&b.length!==0){const y=b.toLocaleLowerCase(),H=ee=>{const ne=e.options.find(me=>ee.value(me).toLocaleLowerCase()===y);return ne===void 0?!1:(u.value.indexOf(ne)===-1?$e(ne):ze(),!0)},ae=ee=>{H(ye)!==!0&&(H(Se)===!0||ee===!0||Le(b,!0,()=>ae(!0)))};ae()}else p.clearValue(t)}function Ht(t){m("keypress",t)}function Qt(t){if(m("keydown",t),lo(t)===!0)return;const b=c.value.length!==0&&(e.newValueMode!==void 0||e.onNewValue!==void 0),y=t.shiftKey!==!0&&e.multiple!==!0&&(i.value>-1||b===!0);if(t.keyCode===27){xt(t);return}if(t.keyCode===9&&y===!1){He();return}if(t.target===void 0||t.target.id!==p.targetUid.value||p.editable.value!==!0)return;if(t.keyCode===40&&p.innerLoading.value!==!0&&s.value===!1){qe(t),Qe();return}if(t.keyCode===8&&e.hideSelected!==!0&&c.value.length===0){e.multiple===!0&&Array.isArray(e.modelValue)===!0?St(e.modelValue.length-1):e.multiple!==!0&&e.modelValue!==null&&m("update:modelValue",null);return}(t.keyCode===35||t.keyCode===36)&&(typeof c.value!="string"||c.value.length===0)&&(qe(t),i.value=-1,rt(t.keyCode===36?1:-1,e.multiple)),(t.keyCode===33||t.keyCode===34)&&k.value!==void 0&&(qe(t),i.value=Math.max(-1,Math.min(ie.value,i.value+(t.keyCode===33?-1:1)*k.value.view)),rt(t.keyCode===33?1:-1,e.multiple)),(t.keyCode===38||t.keyCode===40)&&(qe(t),rt(t.keyCode===38?-1:1,e.multiple));const H=ie.value;if((R===void 0||L<Date.now())&&(R=""),H>0&&e.useInput!==!0&&t.key!==void 0&&t.key.length===1&&t.altKey===!1&&t.ctrlKey===!1&&t.metaKey===!1&&(t.keyCode!==32||R.length!==0)){s.value!==!0&&Qe(t);const ae=t.key.toLocaleLowerCase(),ee=R.length===1&&R[0]===ae;L=Date.now()+1500,ee===!1&&(qe(t),R+=ae);const ne=new RegExp("^"+R.split("").map(Ct=>Yo.indexOf(Ct)>-1?"\\"+Ct:Ct).join(".*"),"i");let me=i.value;if(ee===!0||me<0||ne.test(Se.value(e.options[me]))!==!0)do me=Xt(me+1,-1,H-1);while(me!==i.value&&(Ee.value(e.options[me])===!0||ne.test(Se.value(e.options[me]))!==!0));i.value!==me&&_e(()=>{Re(me),fe(me),me>=0&&e.useInput===!0&&e.fillInput===!0&&st(Se.value(e.options[me]))});return}if(!(t.keyCode!==13&&(t.keyCode!==32||e.useInput===!0||R!=="")&&(t.keyCode!==9||y===!1))){if(t.keyCode!==9&&qe(t),i.value>-1&&i.value<H){$e(e.options[i.value]);return}if(b===!0){const ae=(ee,ne)=>{if(ne){if(nl(ne)!==!0)return}else ne=e.newValueMode;if(Ye("",e.multiple!==!0,!0),ee==null)return;(ne==="toggle"?$e:Dt)(ee,ne==="add-unique"),e.multiple!==!0&&(x.value!==null&&x.value.focus(),ze())};if(e.onNewValue!==void 0?m("newValue",c.value,ae):ae(c.value),e.multiple!==!0)return}s.value===!0?He():p.innerLoading.value!==!0&&Qe()}}function Nt(){return f===!0?ue.value:w.value!==null&&w.value.contentEl!==null?w.value.contentEl:void 0}function $l(){return Nt()}function zl(){return e.hideSelected===!0?[]:h["selected-item"]!==void 0?Te.value.map(t=>h["selected-item"](t)).slice():h.selected!==void 0?[].concat(h.selected()):e.useChips===!0?Te.value.map((t,b)=>F(Mt,{key:"option-"+b,removable:p.editable.value===!0&&Ee.value(t.opt)!==!0,dense:!0,textColor:e.color,tabindex:Je.value,onRemove(){t.removeAtIndex(b)}},()=>F("span",{class:"ellipsis",[t.html===!0?"innerHTML":"textContent"]:Se.value(t.opt)}))):[F("span",{[Be.value===!0?"innerHTML":"textContent"]:E.value})]}function Ut(){if(Q.value===!0)return h["no-option"]!==void 0?h["no-option"]({inputValue:c.value}):void 0;const t=h.option!==void 0?h.option:y=>F(Ve,{key:y.index,...y.itemProps},()=>F(pe,()=>F(ke,()=>F("span",{[y.html===!0?"innerHTML":"textContent"]:y.label}))));let b=T("div",De.value.map(t));return h["before-options"]!==void 0&&(b=h["before-options"]().concat(b)),oo(h["after-options"],b)}function Ml(t,b){const y=b===!0?{...Ce.value,...p.splitAttrs.attributes.value}:void 0,H={ref:b===!0?x:void 0,key:"i_t",class:I.value,style:e.inputStyle,value:c.value!==void 0?c.value:"",type:"search",...y,id:b===!0?p.targetUid.value:void 0,maxlength:e.maxlength,autocomplete:e.autocomplete,"data-autofocus":t===!0||e.autofocus===!0||void 0,disabled:e.disable===!0,readonly:e.readonly===!0,...Vl.value};return t!==!0&&f===!0&&(Array.isArray(H.class)===!0?H.class=[...H.class,"no-pointer-events"]:H.class+=" no-pointer-events"),F("input",H)}function Kt(t){C!==null&&(clearTimeout(C),C=null),!(t&&t.target&&t.target.qComposing===!0)&&(st(t.target.value||""),_=!0,J=c.value,p.focused.value!==!0&&(f!==!0||K.value===!0)&&p.focus(),e.onFilter!==void 0&&(C=setTimeout(()=>{C=null,Le(c.value)},e.inputDebounce)))}function st(t){c.value!==t&&(c.value=t,m("inputValue",t))}function Ye(t,b,y){_=y!==!0,e.useInput===!0&&(st(t),(b===!0||y!==!0)&&(J=t),b!==!0&&Le(t))}function Le(t,b,y){if(e.onFilter===void 0||b!==!0&&p.focused.value!==!0)return;p.innerLoading.value===!0?m("filterAbort"):(p.innerLoading.value=!0,d.value=!0),t!==""&&e.multiple!==!0&&u.value.length!==0&&_!==!0&&t===Se.value(u.value[0])&&(t="");const H=setTimeout(()=>{s.value===!0&&(s.value=!1)},10);o!==null&&clearTimeout(o),o=H,m("filter",t,(ae,ee)=>{(b===!0||p.focused.value===!0)&&o===H&&(clearTimeout(o),typeof ae=="function"&&ae(),d.value=!1,_e(()=>{p.innerLoading.value=!1,p.editable.value===!0&&(b===!0?s.value===!0&&ze():s.value===!0?kt(!0):s.value=!0),typeof ee=="function"&&_e(()=>{ee(g)}),typeof y=="function"&&_e(()=>{y(g)})}))},()=>{p.focused.value===!0&&o===H&&(clearTimeout(o),p.innerLoading.value=!1,d.value=!1),s.value===!0&&(s.value=!1)})}function Al(){return F(To,{ref:w,class:D.value,style:e.popupContentStyle,modelValue:s.value,fit:e.menuShrink!==!0,cover:e.optionsCover===!0&&Q.value!==!0&&e.useInput!==!0,anchor:e.menuAnchor,self:e.menuSelf,offset:e.menuOffset,dark:l.value,noParentEvent:!0,noRefocus:!0,noFocus:!0,square:Ge.value,transitionShow:e.transitionShow,transitionHide:e.transitionHide,transitionDuration:e.transitionDuration,separateClosePopup:!0,...nt.value,onScrollPassive:O,onBeforeShow:Wt,onBeforeHide:Fl,onShow:Ol},Ut)}function Fl(t){Jt(t),He()}function Ol(){be()}function Bl(t){Ue(t),x.value!==null&&x.value.focus(),K.value=!0,window.scrollTo(window.pageXOffset||window.scrollX||document.body.scrollLeft||0,0)}function Dl(t){Ue(t),_e(()=>{K.value=!1})}function El(){const t=[F(Ae,{class:`col-auto ${p.fieldClass.value}`,...a.value,for:p.targetUid.value,dark:l.value,square:!0,loading:d.value,itemAligned:!1,filled:!0,stackLabel:c.value.length!==0,...p.splitAttrs.listeners.value,onFocus:Bl,onBlur:Dl},{...h,rawControl:()=>p.getControl(!0),before:void 0,after:void 0})];return s.value===!0&&t.push(F("div",{ref:ue,class:D.value+" scroll",style:e.popupContentStyle,...nt.value,onClick:xt,onScrollPassive:O},Ut())),F(gt,{ref:j,modelValue:V.value,position:e.useInput===!0?"top":void 0,transitionShow:W,transitionHide:e.transitionHide,transitionDuration:e.transitionDuration,onBeforeShow:Wt,onBeforeHide:Rl,onHide:Ll,onShow:Hl},()=>F("div",{class:"q-select__dialog"+(l.value===!0?" q-select__dialog--dark q-dark":"")+(K.value===!0?" q-select__dialog--focused":"")},t))}function Rl(t){Jt(t),j.value!==null&&j.value.__updateRefocusTarget(p.rootRef.value.querySelector(".q-field__native > [tabindex]:last-child")),p.focused.value=!1}function Ll(t){ze(),p.focused.value===!1&&m("blur",t),Ne()}function Hl(){const t=document.activeElement;(t===null||t.id!==p.targetUid.value)&&x.value!==null&&x.value!==t&&x.value.focus(),be()}function He(){V.value!==!0&&(i.value=-1,s.value===!0&&(s.value=!1),p.focused.value===!1&&(o!==null&&(clearTimeout(o),o=null),p.innerLoading.value===!0&&(m("filterAbort"),p.innerLoading.value=!1,d.value=!1)))}function Qe(t){p.editable.value===!0&&(f===!0?(p.onControlFocusin(t),V.value=!0,_e(()=>{p.focus()})):p.focus(),e.onFilter!==void 0?Le(c.value):(Q.value!==!0||h["no-option"]!==void 0)&&(s.value=!0))}function ze(){V.value=!1,He()}function Ne(){e.useInput===!0&&Ye(e.multiple!==!0&&e.fillInput===!0&&u.value.length!==0&&Se.value(u.value[0])||"",!0,!0)}function kt(t){let b=-1;if(t===!0){if(u.value.length!==0){const y=ye.value(u.value[0]);b=e.options.findIndex(H=>Xe(ye.value(H),y))}v(b)}Re(b)}function Ql(t,b){s.value===!0&&p.innerLoading.value===!1&&(v(-1,!0),_e(()=>{s.value===!0&&p.innerLoading.value===!1&&(t>b?v():kt(!0))}))}function jt(){V.value===!1&&w.value!==null&&w.value.updatePosition()}function Wt(t){t!==void 0&&Ue(t),m("popupShow",t),p.hasPopupOpen=!0,p.onControlFocusin(t)}function Jt(t){t!==void 0&&Ue(t),m("popupHide",t),p.hasPopupOpen=!1,p.onControlFocusout(t)}function Gt(){f=$.platform.is.mobile!==!0&&e.behavior!=="dialog"?!1:e.behavior!=="menu"&&(e.useInput===!0?h["no-option"]!==void 0||e.onFilter!==void 0||Q.value===!1:!0),W=$.platform.is.ios===!0&&f===!0&&e.useInput===!0?"fade":e.transitionShow}return Yl(Gt),Xl(jt),Gt(),mt(()=>{C!==null&&clearTimeout(C)}),Object.assign(g,{showPopup:Qe,hidePopup:ze,removeAtIndex:St,add:Dt,toggleOption:$e,getOptionIndex:()=>i.value,setOptionIndex:Re,moveOptionSelection:rt,filter:Le,updateMenuPosition:jt,updateInputValue:Ye,isOptionSelected:wt,getEmittingOptionValue:Bt,isOptionDisabled:(...t)=>Ee.value.apply(null,t)===!0,getOptionValue:(...t)=>ye.value.apply(null,t),getOptionLabel:(...t)=>Se.value.apply(null,t)}),Object.assign(p,{innerValue:u,fieldClass:A(()=>`q-select q-field--auto-height q-select--with${e.useInput!==!0?"out":""}-input q-select--with${e.useChips!==!0?"out":""}-chips q-select--${e.multiple===!0?"multiple":"single"}`),inputRef:P,targetRef:x,hasValue:B,showPopup:Qe,floatingLabel:A(()=>e.hideSelected!==!0&&B.value===!0||typeof c.value=="number"||c.value.length!==0||Yt(e.displayValue)),getControlChild:()=>{if(p.editable.value!==!1&&(V.value===!0||Q.value!==!0||h["no-option"]!==void 0))return f===!0?El():Al();p.hasPopupOpen===!0&&(p.hasPopupOpen=!1)},controlEvents:{onFocusin(t){p.onControlFocusin(t)},onFocusout(t){p.onControlFocusout(t,()=>{Ne(),He()})},onClick(t){if(xt(t),f!==!0&&s.value===!0){He(),x.value!==null&&x.value.focus();return}Qe(t)}},getControl:t=>{const b=zl(),y=t===!0||V.value!==!0||f!==!0;if(e.useInput===!0)b.push(Ml(t,y));else if(p.editable.value===!0){const ae=y===!0?Ce.value:void 0;b.push(F("input",{ref:y===!0?x:void 0,key:"d_t",class:"q-select__focus-target",id:y===!0?p.targetUid.value:void 0,value:E.value,readonly:!0,"data-autofocus":t===!0||e.autofocus===!0||void 0,...ae,onKeydown:Qt,onKeyup:Rt,onKeypress:Ht})),y===!0&&typeof e.autocomplete=="string"&&e.autocomplete.length!==0&&b.push(F("input",{class:"q-select__autocomplete-input",autocomplete:e.autocomplete,tabindex:-1,onKeyup:Lt}))}if(de.value!==void 0&&e.disable!==!0&&ut.value.length!==0){const ae=ut.value.map(ee=>F("option",{value:ee,selected:!0}));b.push(F("select",{class:"hidden",name:de.value,multiple:e.multiple},ae))}const H=e.useInput===!0||y!==!0?void 0:p.splitAttrs.attributes.value;return F("div",{class:"q-field__native row items-center",...H,...p.splitAttrs.listeners.value},b)},getInnerAppend:()=>e.loading!==!0&&d.value!==!0&&e.hideDropdownIcon!==!0?[F(Oe,{class:"q-select__dropdown-icon"+(s.value===!0?" rotate-180":""),name:it.value})]:null}),Zl(p)}});const ea=e=>(e.indexOf("{{")>=0&&(e=e.split("{{")[1]),e.indexOf("}}")>=0&&(e=e.split("}}")[0]),e),ta=e=>(e.indexOf("\u300A")>=0&&(e=e.split("\u300A")[1]),e.indexOf("\u300B")>=0&&(e=e.split("\u300B")[0]),e),ql=e=>e?e.indexOf("-")==0?e=e.substring(1):e.substring(0,10):"",vt=e=>e?(e.lastIndexOf("]")>=0&&(e=e.substring(e.lastIndexOf("]")+1)),e.indexOf("{{")>=0&&(e=e.replace(`{{${ea(e)}}}`,"")),e.indexOf("\u300A")>=0&&(e=e.replace(`\u300A${ta(e)}\u300B`,"")),e):"",lt=[{label:"\u9A91\u5175",value:"\u9A91\u5175"},{label:"\u6B65\u5175",value:"\u6B65\u5175"},{label:"\u56FD\u4EA7",value:"\u56FD\u4EA7"},{label:"\u6D0B\u9A6C",value:"\u65AF\u5DF4\u8FBE"},{label:"\u6F2B\u52A8",value:"\u6F2B\u52A8"}],dt=[{label:"\u5168\u90E8",value:""},...lt,{label:"\u65E0",value:"\u65E0"}],il=[{label:"\u6B63",value:"asc"},{label:"\u5012",value:"desc"}],ul=[{label:"\u65F6",value:"MTime"},{label:"\u5BB9",value:"Size"},{label:"\u540D",value:"Code"}],Pt=(e,h)=>{if(h&&h.length>0){let m="";return h.forEach(g=>{g.value===e&&(m=g.label)}),m}else return e};var la=at({name:"QForm",props:{autofocus:Boolean,noErrorFocus:Boolean,noResetFocus:Boolean,greedy:Boolean,onSubmit:Function},emits:["reset","validationSuccess","validationError"],setup(e,{slots:h,emit:m}){const g=ot(),$=Z(null);let s=0;const V=[];function i(f){const _=typeof f=="boolean"?f:e.noErrorFocus!==!0,o=++s,J=(L,P)=>{m("validation"+(L===!0?"Success":"Error"),P)},W=L=>{const P=L.validate();return typeof P.then=="function"?P.then(x=>({valid:x,comp:L}),x=>({valid:!1,comp:L,err:x})):Promise.resolve({valid:P,comp:L})};return(e.greedy===!0?Promise.all(V.map(W)).then(L=>L.filter(P=>P.valid!==!0)):V.reduce((L,P)=>L.then(()=>W(P).then(x=>{if(x.valid===!1)return Promise.reject(x)})),Promise.resolve()).catch(L=>[L])).then(L=>{if(L===void 0||L.length===0)return o===s&&J(!0),!0;if(o===s){const{comp:P,err:x}=L[0];if(x!==void 0&&console.error(x),J(!1,P),_===!0){const w=L.find(({comp:j})=>typeof j.focus=="function"&&no(j.$)===!1);w!==void 0&&w.comp.focus()}}return!1})}function c(){s++,V.forEach(f=>{typeof f.resetValidation=="function"&&f.resetValidation()})}function K(f){f!==void 0&&qe(f);const _=s+1;i().then(o=>{_===s&&o===!0&&(e.onSubmit!==void 0?m("submit",f):f!==void 0&&f.target!==void 0&&typeof f.target.submit=="function"&&f.target.submit())})}function d(f){f!==void 0&&qe(f),m("reset"),_e(()=>{c(),e.autofocus===!0&&e.noResetFocus!==!0&&C()})}function C(){io(()=>{if($.value===null)return;const f=$.value.querySelector("[autofocus][tabindex], [data-autofocus][tabindex]")||$.value.querySelector("[autofocus] [tabindex], [data-autofocus] [tabindex]")||$.value.querySelector("[autofocus], [data-autofocus]")||Array.prototype.find.call($.value.querySelectorAll("[tabindex]"),_=>_.tabIndex>-1);f!=null&&f.focus({preventScroll:!0})})}ao(uo,{bindComponent(f){V.push(f)},unbindComponent(f){const _=V.indexOf(f);_>-1&&V.splice(_,1)}});let q=!1;return sl(()=>{q=!0}),cl(()=>{q===!0&&e.autofocus===!0&&C()}),Ft(()=>{e.autofocus===!0&&C()}),Object.assign(g.proxy,{validate:i,resetValidation:c,submit:K,reset:d,focus:C,getValidationComponents:()=>V}),()=>F("form",{class:"q-form",ref:$,onSubmit:K,onReset:d},Ot(h.default))}});const oa={__name:"FileEdit",emits:[...We.emits],setup(e,{expose:h}){const m=yt(),g=et({item:null,callback:null}),$=(C,q)=>{g.item=new Uo().fromObject(C),g.item.Jpg=null,g.item.Code=ql(C.Code),g.item.Title=vt(C.Title),g.callback=q,i.value.show()},s=async()=>{await V(!0)},V=async C=>{const{Id:q,Title:f,Code:_,Actress:o,FileType:J,MovieType:W,Jpg:R}=g.item;let L=_.trim();L&&L.indexOf("-")<0&&(L="-"+L);let P="";o.length!=0&&(P+="["+o.trim()+"]"),L.length!=0&&(P+=" ["+L.trim()+"]"),W&&W!="\u65E0"&&P.indexOf("{{")<0&&(P+=`{{${W}}}`);const x=f.trim().split("."),w=x.length;for(let de=0;de<w;de++){const re=x[de];P+=re.replace(re.charAt(0),re.charAt(0).toUpperCase())}P.indexOf("."+J)<0&&(P+="."+J);const ue=await pt({Id:q,Name:P,Code:L,Title:f,Actress:o,MoveOut:C,Jpg:R,NoRefresh:!0});ue.Code==200?(K(),g.callback&&g.callback()):m.notify({type:"negative",message:ue.Message})},{dialogRef:i,onDialogHide:c,onDialogOK:K,onDialogCancel:d}=We();return h({open:$}),(C,q)=>(S(),U(gt,{ref_key:"dialogRef",ref:i,onHide:G(c)},{default:r(()=>[n(tt,{class:"q-dialog-plugin q-pa-md",style:fl({width:"600px",backgroundImage:"linear-gradient(to left, rgba(255,255,255,0.1), rgba(255,255,255,0.1))"})},{default:r(()=>[n(la,{class:"q-gutter-md"},{default:r(()=>[n(ro,{modelValue:g.item.MovieType,"onUpdate:modelValue":q[0]||(q[0]=f=>g.item.MovieType=f),options:G(lt),color:"primary",inline:""},null,8,["modelValue","options"]),n(he,{label:"\u7F16\u7801",autogrow:"",modelValue:g.item.Code,"onUpdate:modelValue":q[1]||(q[1]=f=>g.item.Code=f),dense:!1},null,8,["modelValue"]),n(he,{label:"\u56FE\u9274",autogrow:"",modelValue:g.item.Actress,"onUpdate:modelValue":q[2]||(q[2]=f=>g.item.Actress=f),dense:!1},null,8,["modelValue"]),n(he,{label:"\u540D\u79F0",autogrow:"",modelValue:g.item.Title,"onUpdate:modelValue":q[3]||(q[3]=f=>g.item.Title=f),dense:!1},null,8,["modelValue"]),n(he,{label:"\u56FE\u7247\u5730\u5740",autogrow:"",modelValue:g.item.Jpg,"onUpdate:modelValue":q[4]||(q[4]=f=>g.item.Jpg=f),dense:!1},null,8,["modelValue"])]),_:1}),n(so,{align:"right"},{default:r(()=>[n(z,{color:"primary",label:"\u79FB\u52A8",onClick:s}),n(z,{color:"primary",label:"\u547D\u540D",onClick:q[5]||(q[5]=()=>{V(!1)})}),n(z,{color:"primary",label:"\u5173\u95ED",onClick:G(d)},null,8,["onClick"])]),_:1})]),_:1},8,["style"])]),_:1},8,["onHide"]))}};var rl=at({name:"QBar",props:{...vl,dense:Boolean},setup(e,{slots:h}){const{proxy:{$q:m}}=ot(),g=ml(e,m),$=A(()=>`q-bar row no-wrap items-center q-bar--${e.dense===!0?"dense":"standard"}  q-bar--${g.value===!0?"dark":"light"}`);return()=>F("div",{class:$.value,role:"toolbar"},Ot(h.default))}});const aa={style:{height:"1.5rem",overflow:"hidden"}},na={style:{position:"relative","margin-top":"0",display:"flex","flex-direction":"row","flex-wrap":"nowrap","justify-content":"space-between",overflow:"hidden"}},ia={key:0},ua={key:0,style:{overflow:"auto"}},ra=["src"],sa={key:1},ca={key:2},da={class:"self-center full-width no-outline",tabindex:"0"},fa={class:"self-center full-width no-outline",tabindex:"0"},va={class:"self-center full-width no-outline",tabindex:"0"},ma={class:"self-center full-width no-outline",tabindex:"0"},ga={key:3},ya={__name:"FileInfo",emits:[...We.emits],setup(e,{expose:h}){const m=yt(),g=xl(),$=A(()=>m.platform.is.mobile),s=Z(null),V=Z(!1),i=Z("detail"),c=async x=>{const{Code:w,Message:j}=await x||{};w!=200&&m.notify({message:`${j}`})},K=x=>{const w=`#/playing/${x.Id}`;m.platform.is.electron?window.electron.createWindow({router:w}):window.open(w)},d=()=>{i.value="movie",setTimeout(()=>{s.value.open(_.item)},100)},C=async x=>{const w=await pt({...x,NoRefresh:!0,MoveOut:!0});w.Code==200?m.notify({type:"negative",message:w.Message}):m.notify({type:"negative",message:w.Message})},q=x=>{m.dialog({title:x.Name,message:"\u786E\u5B9A\u5220\u9664\u5417?",cancel:!0,persistent:!0}).onOk(()=>{c(ft(x.Id))}).onCancel(()=>{console.log(">>>> Cancel")}).onDismiss(()=>{})},f=x=>{_.currentData=x,g.Playing=x,g.drawerRight=!0},_=et({item:{},settingInfo:{},callback:null,prewiewImages:[]}),o=x=>{const{item:w,cb:j,playing:ue}=x;_.prewiewImages=[],_.item={...w},_.callback=j,R.value.show(),ue&&d(),setTimeout(()=>{Do(w.Id).then(de=>{_.prewiewImages=de.data})},500)},J=async()=>{const x=await Cl();_.settingInfo=x.data},W=x=>{const w=`${_.settingInfo.BaseUrl}/${x.Code}`;console.log(w),m.platform.is.electron?window.electron.createWindow({router:w,width:1280,height:1e3,titleBarStyle:""}):window.open(w)},{dialogRef:R,onDialogHide:L}=We(),P=()=>{s.value&&s.value.stop(),i.value="detail",V.value=!1,L()};return Ft(()=>{J()}),h({open:o}),(x,w)=>(S(),U(gt,{ref_key:"dialogRef",ref:R,onEscapeKey:P,onBeforeHide:P,onHide:P,"model-value":V.value,"onUpdate:modelValue":w[10]||(w[10]=j=>V.value=j),maximized:$.value,"full-width":""},{default:r(()=>[n(tt,{class:"text-white",style:{"max-width":"1400px!important",height:"96vh!important"}},{default:r(()=>[n(rl,{class:"bg-black"},{default:r(()=>[n(Oe,{name:"info"}),N("div",aa,X(_.item.Name),1),n(Oo),n(z,{dense:"",flat:"",icon:"close",onClick:P},{default:r(()=>[n($o,{class:"bg-white text-primary"},{default:r(()=>[Y("\u5173\u95ED")]),_:1})]),_:1})]),_:1}),n(rl,null,{default:r(()=>[N("div",na,[N("div",null,[i.value!=="movie"?(S(),U(z,{key:0,class:"q-mr-sm",size:"sm",color:"red",onClick:d,icon:"ti-arrow-circle-right"},{default:r(()=>[Y("\u64AD\u653E")]),_:1})):le("",!0),i.value!=="detail"?(S(),U(z,{key:1,class:"q-mr-sm",size:"sm",color:"purple",onClick:w[0]||(w[0]=j=>i.value="detail"),icon:"ti-arrow-circle-right"},{default:r(()=>[Y("\u8BE6\u60C5")]),_:1})):le("",!0),i.value!=="image"?(S(),U(z,{key:2,class:"q-mr-sm",size:"sm",color:"deep-orange",onClick:w[1]||(w[1]=j=>i.value="image"),icon:"ti-arrow-circle-right"},{default:r(()=>[Y("\u56FE\u5C42")]),_:1})):le("",!0),i.value!=="web"?(S(),U(z,{key:3,class:"q-mr-sm",size:"sm",color:"deep-orange",onClick:w[2]||(w[2]=j=>i.value="web"),icon:"ti-world"},{default:r(()=>[Y("JavBus")]),_:1})):le("",!0)]),$.value?le("",!0):(S(),oe("div",ia,[n(z,{class:"q-mr-sm",size:"sm",ripple:"",color:"green",icon:"ti-fullscreen",onClick:w[3]||(w[3]=j=>K(_.item))},{default:r(()=>[Y("\u5927\u5C4F")]),_:1}),n(z,{class:"q-mr-sm",size:"sm",ripple:"",color:"green-7",icon:"ti-blackboard",onClick:w[4]||(w[4]=j=>f(_.item))},{default:r(()=>[Y("\u4FA7\u5C4F")]),_:1}),n(z,{class:"q-mr-sm",size:"sm",color:"primary",icon:"ti-control-eject",onClick:w[5]||(w[5]=j=>c(G(pl)(_.item.Id)))},{default:r(()=>[Y("\u64AD\u653E")]),_:1}),n(z,{class:"q-mr-sm",size:"sm",color:"primary",icon:"open_in_new",onClick:w[6]||(w[6]=j=>c(G(bl)(_.item.Id)))},{default:r(()=>[Y("\u6587\u4EF6\u5939")]),_:1}),n(z,{class:"q-mr-sm",size:"sm",color:"amber",glossy:"","text-color":"black",icon:"ti-trash",onClick:w[7]||(w[7]=j=>q(_.item))},{default:r(()=>[Y("\u5220\u9664")]),_:1}),n(z,{class:"q-mr-sm",size:"sm",color:"black",onClick:w[8]||(w[8]=j=>C(_.item)),icon:"ti-control-shuffle"},{default:r(()=>[Y("\u79FB\u52A8")]),_:1})]))])]),_:1}),i.value=="web"?(S(),oe("div",ua,[N("iframe",{frameborder:0,allowfullscreen:!0,width:"100%",height:"900px",src:`${_.settingInfo.BaseUrl}${_.item.Code}`},null,8,ra)])):le("",!0),i.value=="movie"?(S(),oe("div",sa,[n(Vo,{ref_key:"vue3VideoPlayRef",ref:s,mode:$.value?"drawer":"window",onClose:P},null,8,["mode"])])):le("",!0),i.value=="detail"?(S(),oe("div",ca,[n($t,{fit:"fit",easier:"",draggable:"",src:G(_o)(_.item.Id),style:{"max-height":"60vh"}},null,8,["src"]),n(Ae,{label:"Code","stack-label":""},{control:r(()=>[N("div",{class:"self-center full-width no-outline cursor-pointer",style:{color:"blue"},tabindex:"0",onClick:w[9]||(w[9]=j=>W(_.item))},X(_.item.Code),1)]),_:1}),n(Ae,{label:"Actress","stack-label":""},{control:r(()=>[N("div",da,X(_.item.Actress),1)]),_:1}),n(Ae,{label:"Name","stack-label":""},{control:r(()=>[N("div",fa,X(G(vt)(_.item.Name)),1)]),_:1}),n(Ae,{label:"Time","stack-label":""},{control:r(()=>[N("div",va,X(G(vt)(_.item.MTime)),1)]),_:1}),n(Ae,{label:"Path","stack-label":""},{control:r(()=>[N("div",ma,X(_.item.Path),1)]),_:1})])):le("",!0),i.value=="image"?(S(),oe("div",ga,[(S(!0),oe(ce,null,ve(_.prewiewImages,j=>(S(),U($t,{fit:"fit",key:j.Id,src:G(qo)(j.Id),style:{width:"100%",height:"auto"}},null,8,["src"]))),128))])):le("",!0)]),_:1})]),_:1},8,["model-value","maximized"]))}};var pa=at({name:"QSlideTransition",props:{appear:Boolean,duration:{type:Number,default:300}},emits:["show","hide"],setup(e,{slots:h,emit:m}){let g=!1,$,s,V=null,i=null,c,K;function d(){$&&$(),$=null,g=!1,V!==null&&(clearTimeout(V),V=null),i!==null&&(clearTimeout(i),i=null),s!==void 0&&s.removeEventListener("transitionend",c),c=null}function C(o,J,W){J!==void 0&&(o.style.height=`${J}px`),o.style.transition=`height ${e.duration}ms cubic-bezier(.25, .8, .50, 1)`,g=!0,$=W}function q(o,J){o.style.overflowY=null,o.style.height=null,o.style.transition=null,d(),J!==K&&m(J)}function f(o,J){let W=0;s=o,g===!0?(d(),W=o.offsetHeight===o.scrollHeight?0:void 0):(K="hide",o.style.overflowY="hidden"),C(o,W,J),V=setTimeout(()=>{V=null,o.style.height=`${o.scrollHeight}px`,c=R=>{i=null,(Object(R)!==R||R.target===o)&&q(o,"show")},o.addEventListener("transitionend",c),i=setTimeout(c,e.duration*1.1)},100)}function _(o,J){let W;s=o,g===!0?d():(K="show",o.style.overflowY="hidden",W=o.scrollHeight),C(o,W,J),V=setTimeout(()=>{V=null,o.style.height=0,c=R=>{i=null,(Object(R)!==R||R.target===o)&&q(o,"hide")},o.addEventListener("transitionend",c),i=setTimeout(c,e.duration*1.1)},100)}return mt(()=>{g===!0&&d()}),()=>F(co,{css:!1,appear:e.appear,onEnter:f,onLeave:_},h.default)}});const Me=fo({}),ba=Object.keys(gl);var Sa=at({name:"QExpansionItem",props:{...gl,...vo,...vl,icon:String,label:String,labelLines:[Number,String],caption:String,captionLines:[Number,String],dense:Boolean,toggleAriaLabel:String,expandIcon:String,expandedIcon:String,expandIconClass:[Array,String,Object],duration:Number,headerInsetLevel:Number,contentInsetLevel:Number,expandSeparator:Boolean,defaultOpened:Boolean,hideExpandIcon:Boolean,expandIconToggle:Boolean,switchToggleSide:Boolean,denseToggle:Boolean,group:String,popup:Boolean,headerStyle:[Array,String,Object],headerClass:[Array,String,Object]},emits:[...mo,"click","afterShow","afterHide"],setup(e,{slots:h,emit:m}){const{proxy:{$q:g}}=ot(),$=ml(e,g),s=Z(e.modelValue!==null?e.modelValue:e.defaultOpened),V=Z(null),i=Zt(),{show:c,hide:K,toggle:d}=go({showing:s});let C,q;const f=A(()=>`q-expansion-item q-item-type q-expansion-item--${s.value===!0?"expanded":"collapsed"} q-expansion-item--${e.popup===!0?"popup":"standard"}`),_=A(()=>{if(e.contentInsetLevel===void 0)return null;const O=g.lang.rtl===!0?"Right":"Left";return{["padding"+O]:e.contentInsetLevel*56+"px"}}),o=A(()=>e.disable!==!0&&(e.href!==void 0||e.to!==void 0&&e.to!==null&&e.to!=="")),J=A(()=>{const O={};return ba.forEach(fe=>{O[fe]=e[fe]}),O}),W=A(()=>o.value===!0||e.expandIconToggle!==!0),R=A(()=>e.expandedIcon!==void 0&&s.value===!0?e.expandedIcon:e.expandIcon||g.iconSet.expansionItem[e.denseToggle===!0?"denseIcon":"icon"]),L=A(()=>e.disable!==!0&&(o.value===!0||e.expandIconToggle===!0)),P=A(()=>({expanded:s.value===!0,detailsId:e.targetUid,toggle:d,show:c,hide:K})),x=A(()=>{const O=e.toggleAriaLabel!==void 0?e.toggleAriaLabel:g.lang.label[s.value===!0?"collapse":"expand"](e.label);return{role:"button","aria-expanded":s.value===!0?"true":"false","aria-controls":i,"aria-label":O}});xe(()=>e.group,O=>{q!==void 0&&q(),O!==void 0&&ie()});function w(O){o.value!==!0&&d(O),m("click",O)}function j(O){O.keyCode===13&&ue(O,!0)}function ue(O,fe){fe!==!0&&V.value!==null&&V.value.focus(),d(O),qe(O)}function de(){m("afterShow")}function re(){m("afterHide")}function ie(){C===void 0&&(C=Zt()),s.value===!0&&(Me[e.group]=C);const O=xe(s,be=>{be===!0?Me[e.group]=C:Me[e.group]===C&&delete Me[e.group]}),fe=xe(()=>Me[e.group],(be,p)=>{p===C&&be!==void 0&&be!==C&&K()});q=()=>{O(),fe(),Me[e.group]===C&&delete Me[e.group],q=void 0}}function te(){const O={class:[`q-focusable relative-position cursor-pointer${e.denseToggle===!0&&e.switchToggleSide===!0?" items-end":""}`,e.expandIconClass],side:e.switchToggleSide!==!0,avatar:e.switchToggleSide},fe=[F(Oe,{class:"q-expansion-item__toggle-icon"+(e.expandedIcon===void 0&&s.value===!0?" q-expansion-item__toggle-icon--rotated":""),name:R.value})];return L.value===!0&&(Object.assign(O,{tabindex:0,...x.value,onClick:ue,onKeyup:j}),fe.unshift(F("div",{ref:V,class:"q-expansion-item__toggle-focus q-icon q-focus-helper q-focus-helper--rounded",tabindex:-1}))),F(pe,O,()=>fe)}function M(){let O;return h.header!==void 0?O=[].concat(h.header(P.value)):(O=[F(pe,()=>[F(ke,{lines:e.labelLines},()=>e.label||""),e.caption?F(ke,{lines:e.captionLines,caption:!0},()=>e.caption):null])],e.icon&&O[e.switchToggleSide===!0?"push":"unshift"](F(pe,{side:e.switchToggleSide===!0,avatar:e.switchToggleSide!==!0},()=>F(Oe,{name:e.icon})))),e.disable!==!0&&e.hideExpandIcon!==!0&&O[e.switchToggleSide===!0?"unshift":"push"](te()),O}function k(){const O={ref:"item",style:e.headerStyle,class:e.headerClass,dark:$.value,disable:e.disable,dense:e.dense,insetLevel:e.headerInsetLevel};return W.value===!0&&(O.clickable=!0,O.onClick=w,Object.assign(O,o.value===!0?J.value:x.value)),F(Ve,O,M)}function v(){return Ie(F("div",{key:"e-content",class:"q-expansion-item__content relative-position",style:_.value,id:i},Ot(h.default)),[[yo,s.value]])}function T(){const O=[k(),F(pa,{duration:e.duration,onShow:de,onHide:re},v)];return e.expandSeparator===!0&&O.push(F(el,{class:"q-expansion-item__border q-expansion-item__border--top absolute-top",dark:$.value}),F(el,{class:"q-expansion-item__border q-expansion-item__border--bottom absolute-bottom",dark:$.value})),O}return e.group!==void 0&&ie(),mt(()=>{q!==void 0&&q()}),()=>F("div",{class:f.value},[F("div",{class:"q-expansion-item__container relative-position"},T())])}});const ha={class:"q-mr-sm q-mb-sm row justify-left"},wa={class:"q-mr-sm row justify-left"},ka={style:{width:"300px"}},Ca={class:"q-gutter-sm q-mt-sm"},xa={style:{display:"flex","flex-direction":"column"}},_a={key:0,style:{color:"red"}},qa={style:{display:"flex","flex-direction":"row"}},Ia={key:0,style:{display:"flex","flex-direction":"row","align-items":"center","background-color":"antiquewhite","border-radius":"12px",padding:"4px"}},Va={style:{"max-height":"20vh",overflow:"auto"}},Pa={__name:"ListEdit",emits:[...We.emits],setup(e,{expose:h}){const m=yt(),g=A(()=>m.platform.is.mobile),$=Z("filelist");let s;xe(()=>$.value,M=>{console.log(M),M==="tasking"?(V(),s=setInterval(V,2e3)):clearInterval(s)});const V=async()=>{const M=await Ro();i.tasking=M.Data},i=et({selectAll:!1,settingInfo:{},resultData:{},queryParam:{},selector:[],callback:null,cutListIds:[],tasking:{}}),c=et({sH:"00",sM:"00",sS:"00",eH:"99",eM:"00",eS:"00"}),K=M=>{i.cutListIds.indexOf(M.Id)<0&&i.cutListIds.push(M.Id),R(Lo(M.Id))},d=M=>{i.cutListIds.indexOf(M.Id)<0&&i.cutListIds.push(M.Id),R(Ho(M.Id,[c.sH,c.sM,c.sS].join(":"),[c.eH,c.eM,c.eS].join(":")))},C=()=>{i.selectAll=!i.selectAll,i.selectAll?i.selector=i.resultData.Data.map(M=>M.Id):i.selector=[]},q=M=>{i.selector&&i.selector.length>0&&i.selector.forEach(k=>{R(At(k,M))})},f=()=>{i.selector&&i.selector.length>0&&i.selector.forEach(M=>{R(ft(M))})},_=M=>{i.selector&&i.selector.length>0&&i.selector.forEach(k=>{R(hl(k,M))})},o=async()=>{await wl(),await W()},J=M=>{i.queryParam.Page=i.queryParam.Page+M,W()},W=async()=>{const M=await kl(i.queryParam);i.resultData=M},R=async M=>{const{Code:k,Message:v}=await M;console.log(k,v),k!=200?m.notify({message:`${v}`}):m.notify({message:`${v}`})},L=M=>{const{queryParam:k,settingInfo:v,cb:T}=M;i.queryParam=k,i.queryParam.PageSize=10,i.settingInfo=v,i.callback=T,j.value.show(),W()},P=async()=>{i.callback&&i.callback({settingInfo:i.settingInfo}),re(),de(),ue(),console.log("dialogHide")},x=M=>{m.dialog({title:M.Name,message:"\u786E\u5B9A\u5220\u9664\u5417?",cancel:!0,persistent:!0}).onOk(()=>{console.log(">>>> onOk"),R(ft(M.Id)).then(()=>{for(let k=0;k<i.resultData.Data.length;k++)i.resultData.Data[k].Id==M.Id&&i.resultData.Data.splice(k,1)})}).onCancel(()=>{console.log(">>>> Cancel")}).onDismiss(()=>{})},w=async M=>{const k=await pt({...M,NoRefresh:!0,MoveOut:!0});if(console.log(k),k.Code==200){for(let v=0;v<i.resultData.Data.length;v++)i.resultData.Data[v].Id==M.Id&&i.resultData.Data.splice(v,1);m.notify({type:"negative",message:k.Message})}else m.notify({type:"negative",message:k.Message})},{dialogRef:j,onDialogHide:ue,onDialogOK:de,onDialogCancel:re}=We(),ie=()=>{i.callback&&(No(i.settingInfo),i.callback({settingInfo:i.settingInfo}))},te=()=>{console.log("beforeShow")};return h({open:L}),(M,k)=>(S(),U(gt,{ref_key:"dialogRef",ref:j,onHide:P,onBeforeShow:te},{default:r(()=>[n(tt,{class:Tt({"card-q":!g.value,"card-q-mobile":g.value})},{default:r(()=>[n(zo,{alert:"",ripple:"",modelValue:$.value,"onUpdate:modelValue":k[0]||(k[0]=v=>$.value=v),style:{"background-color":"rgba(0, 0, 0, 0.2)"},align:"justify","narrow-indicator":""},{default:r(()=>[n(qt,{name:"filelist",label:"\u6279\u91CF\u64CD\u4F5C"}),n(qt,{name:"setting",label:"\u8BBE\u7F6E"}),n(qt,{name:"tasking",label:"\u4EFB\u52A1\u6267\u884C"})]),_:1},8,["modelValue"]),n(Mo,{modelValue:$.value,"onUpdate:modelValue":k[15]||(k[15]=v=>$.value=v),animated:"",style:{height:"100%",overflow:"auto"}},{default:r(()=>[n(It,{name:"filelist"},{default:r(()=>[N("div",ha,[n(ct,{outline:"",modelValue:i.queryParam.MovieType,"onUpdate:modelValue":[k[1]||(k[1]=v=>i.queryParam.MovieType=v),k[2]||(k[2]=v=>W())],"toggle-color":"primary",options:G(dt)},null,8,["modelValue","options"]),i.queryParam.Page!=1?(S(),U(z,{key:0,class:"q-ml-sm",size:"sm",color:"primary",onClick:k[3]||(k[3]=v=>J(-1))},{default:r(()=>[Y("\u4E0A")]),_:1})):le("",!0),n(z,{class:"q-ml-sm",size:"sm",color:"primary",onClick:k[4]||(k[4]=v=>J(1))},{default:r(()=>[Y("\u4E0B")]),_:1})]),N("div",wa,[n(z,{class:"q-mr-sm",color:"amber",outline:"",size:"sm",glossy:"","text-color":"black",onClick:C},{default:r(()=>[Y(X(i.selectAll?"\u4E0D\u9009":"\u5168\u9009"),1)]),_:1}),n(he,{label:"...",modelValue:i.queryParam.Keyword,"onUpdate:modelValue":[k[5]||(k[5]=v=>i.queryParam.Keyword=v),k[6]||(k[6]=v=>W())],dense:!0,filled:"",clearable:""},null,8,["modelValue"]),n(z,{class:"q-mr-sm",size:"sm",color:"blue-6",icon:"refresh",onClick:o},{default:r(()=>[Y("\u5237\u65B0")]),_:1}),n(Fe,{class:"q-mr-sm",size:"sm",label:"\u8BBE\u7F6E",type:"primary",color:"teal",icon:"ti-settings"},{default:r(()=>[n(Pe,null,{default:r(()=>[(S(!0),oe(ce,null,ve(G(lt),v=>Ie((S(),U(Ve,{key:v.value,class:"movieTypeSelectItem"},{default:r(()=>[n(pe,{onClick:T=>q(v.value)},{default:r(()=>[n(ke,null,{default:r(()=>[Y(X(v.label),1)]),_:2},1024)]),_:2},1032,["onClick"])]),_:2},1024)),[[Ke]])),128))]),_:1})]),_:1}),n(Fe,{class:"q-mr-sm",size:"sm",label:"\u6807\u7B7E",type:"primary",color:"teal",icon:"ti-plus"},{default:r(()=>[N("div",ka,[(S(!0),oe(ce,null,ve(i.settingInfo.Tags,v=>(S(),U(z,{size:"sm",icon:"ti-plus",square:"","text-color":"white",color:"red",class:"tag-item",key:v,label:v,onClick:T=>_(v)},null,8,["label","onClick"]))),128))])]),_:1}),n(z,{outline:"",class:"q-mr-sm",size:"sm",color:"red",icon:"delete",onClick:f},{default:r(()=>[Y("\u5220\u9664")]),_:1})]),N("div",Ca,[(S(!0),oe(ce,null,ve(i.resultData.Data,v=>(S(),oe("div",{key:v.Id,style:{border:"1px dotted purple",padding:"2px","border-radius":"4px","background-color":"rgba(0, 0, 0, 0.1)"}},[N("div",xa,[n(ke,null,{default:r(()=>[i.cutListIds.indexOf(v.Id)>=0?(S(),oe("span",_a,"\u526A\u5207\u4E2D\uFF1A\uFF1A")):le("",!0),Y(X(v.Title)+"\u3010"+X(v.SizeStr)+"\u3011 ",1)]),_:2},1024),Ie((S(),oe("div",qa,[n(tl,{size:"sm",modelValue:i.selector,"onUpdate:modelValue":k[7]||(k[7]=T=>i.selector=T),val:v.Id,color:"red"},null,8,["modelValue","val"]),n(Fe,{class:"q-mr-sm",size:"sm",label:v.MovieType,type:"primary",color:"blue-6"},{default:r(()=>[n(Pe,null,{default:r(()=>[(S(!0),oe(ce,null,ve(G(lt),T=>Ie((S(),U(Ve,{key:T.value,class:"movieTypeSelectItem"},{default:r(()=>[n(pe,null,{default:r(()=>[n(ke,{onClick:O=>{v.MovieType=T.value,R(G(At)(v.Id,T.value))}},{default:r(()=>[Y(X(T.label),1)]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024)),[[Ke]])),128))]),_:2},1024)]),_:2},1032,["label"]),n(z,{outline:"",size:"sm",class:"q-mr-sm",color:"amber",glossy:"","text-color":"black",icon:"delete",onClick:T=>x(v)},null,8,["onClick"]),n(z,{outline:"",size:"sm",class:"q-mr-sm",onClick:T=>w(v),icon:"near_me"},null,8,["onClick"]),n(z,{outline:"",class:"q-mr-sm",size:"sm",icon:"open_in_new",onClick:T=>R(M.OpenFileFolder(v.Id))},null,8,["onClick"]),n(z,{outline:"",size:"sm",class:"q-mr-sm",icon:"ti-pencil-alt2",onClick:T=>v.showCut=!0},null,8,["onClick"]),n(z,{outline:"",size:"sm",class:"q-mr-sm",color:"green",onClick:T=>K(v)},{default:r(()=>[Y("toMp4")]),_:2},1032,["onClick"]),!v.MovieType||v.MovieType=="\u65E0"?(S(),U(z,{key:0,outline:"",class:"q-mr-sm",size:"sm",color:"brown-5",icon:"wifi_protected_setup",onClick:T=>R(G(Eo)(v.Id))},null,8,["onClick"])):le("",!0),(S(!0),oe(ce,null,ve(v.Tags,T=>(S(),U(z,{color:"red",key:T,onClick:O=>R(G(Sl)(v.Id,T),!0)},{default:r(()=>[Y(X(`- ${T}`),1)]),_:2},1032,["onClick"]))),128))])),[[yl]]),v.showCut?(S(),oe("div",Ia,[Y(" \u5F00\u59CB\uFF1A "),n(he,{style:{width:"40px"},"model-value":c.sH,"onUpdate:modelValue":k[8]||(k[8]=T=>c.sH=T)},null,8,["model-value"]),n(he,{style:{width:"40px"},"model-value":c.sM,"onUpdate:modelValue":k[9]||(k[9]=T=>c.sM=T)},null,8,["model-value"]),n(he,{style:{width:"40px"},"model-value":c.sS,"onUpdate:modelValue":k[10]||(k[10]=T=>c.sS=T)},null,8,["model-value"]),Y(" \u7ED3\u675F\uFF1A "),n(he,{style:{width:"40px"},"model-value":c.eH,"onUpdate:modelValue":k[11]||(k[11]=T=>c.eH=T)},null,8,["model-value"]),n(he,{style:{width:"40px"},"model-value":c.eM,"onUpdate:modelValue":k[12]||(k[12]=T=>c.eM=T)},null,8,["model-value"]),n(he,{style:{width:"40px"},"model-value":c.eS,"onUpdate:modelValue":k[13]||(k[13]=T=>c.eS=T)},null,8,["model-value"]),n(z,{size:"sm",color:"black",type:"primary",onClick:T=>{d(v),v.showCut=!1},label:"\u786E\u8BA4"},null,8,["onClick"]),n(z,{size:"sm",color:"blue",onClick:T=>v.showCut=!1,label:"\u53D6\u6D88"},null,8,["onClick"])])):le("",!0)])]))),128))])]),_:1}),n(It,{name:"setting"},{default:r(()=>[n(Ae,{color:"purple-12",label:"Buttons\uFF08\u6700\u4F735\uFF09","stack-label":""},{prepend:r(()=>[n(Oe,{name:"event"})]),control:r(()=>[(S(!0),oe(ce,null,ve(G(Ao),v=>(S(),U(tl,{modelValue:i.settingInfo.Buttons,"onUpdate:modelValue":[k[14]||(k[14]=T=>i.settingInfo.Buttons=T),ie],key:v,val:v,label:v,color:"teal"},null,8,["modelValue","val","label"]))),128))]),_:1})]),_:1}),n(It,{name:"tasking"},{default:r(()=>[n(Pe,{bordered:"",separator:""},{default:r(()=>[(S(!0),oe(ce,null,ve(i.tasking,(v,T)=>(S(),U(Sa,{key:T},{header:r(()=>[n(pe,{avatar:""},{default:r(()=>[n(z,{color:"blue",class:"q-mr-sm"},{default:r(()=>[Y(X(v.Type),1)]),_:2},1024),Y(" "+X(` \u683C\u5F0F\uFF1A${v.To} `),1)]),_:2},1024),n(pe,null,{default:r(()=>[N("div",null,X(v.Name),1),N("div",null,X(`\u5F00\u59CB\u65F6\u95F4\uFF1A${v.Start} `)+" "+X(` \u7ED3\u675F\u65F6\u95F4\uFF1A${v.End} `),1),N("div",null,X(`\u8017\u65F6\uFF1A${((v.FinishTime?new Date(v.FinishTime):new Date).getTime()-new Date(v.CreateTime).getTime())/1e3}`),1)]),_:2},1024),n(pe,{side:""},{default:r(()=>[n(z,{class:"q-mr-sm",color:v.Status=="\u6210\u529F"?"green":"black"},{default:r(()=>[Y(X(v.Status),1)]),_:2},1032,["color"])]),_:2},1024)]),default:r(()=>[n(tt,null,{default:r(()=>[n(po,null,{default:r(()=>[N("div",Va,X(v.Log),1)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1},8,["class"])]),_:1},512))}};const Il=e=>(Co("data-v-e0af4ad6"),e=e(),xo(),e),Ta={class:"q-mg-md top",style:{"margin-bottom":"40px"}},$a={class:"row justify-center q-gutter-sm",ref:"top"},za={style:{width:"200px","max-height":"50vh"}},Ma={class:"q-pa-sm flex flex-center"},Aa={class:"row justify-center q-mt-sm mainlist"},Fa={class:"float-head absolute-top"},Oa={style:{display:"flex","flex-direction":"column","justify-content":"flex-start",width:"fit-content"}},Ba={class:"tag-popup"},Da=Il(()=>N("span",null,"\u79CD\u8349",-1)),Ea=["onClick"],Ra=Il(()=>N("div",{class:"text-subtitle1 text-white"}," Loading... ",-1)),La={style:{"background-color":"rgba(0, 0, 0, 0.2)"}},Ha={style:{display:"flex","flex-direction":"row"}},Qa={style:{display:"flex","flex-direction":"row"}},Na={style:{height:"4rem",overflow:"hidden"}},Ua=["onClick"],Ka=["onClick"],ja=["onClick"],Wa={__name:"SearchPage",setup(e){const h=Z(null),m=Z(null),g=Z(null),$=Z("Hello"),{copy:s}=Bo({source:$}),V=xl(),i=A(()=>V.getSuggestions),c=yt(),K=A(()=>o.settingInfo.Buttons),d=A(()=>c.platform.is.mobile),C=u=>{if(c.platform.is.electron){const{Path:a}=u;window.electron.openBySystem({Path:a})}else w(pl(u.Id))},q=u=>{const{settingInfo:a}=u;a&&(o.settingInfo=a)},f=u=>!K.value||K.value.length==0?!0:K.value.indexOf(u)>=0,_=u=>{const a=`#/playing/${u.Id}`;c.platform.is.electron?window.electron.createWindow({router:a}):window.open(a)},o=et({currentData:{},settingInfo:{},queryParam:{Keyword:"",MovieType:"",OnlyRepeat:!1,fullscreen:!1,Page:1,PageSize:20,SortField:"MTime",SortType:"desc"},resultData:{},fullscreen:!1}),J=()=>{o.fullscreen?c.fullscreen.exit():c.fullscreen.request(),o.fullscreen=!o.fullscreen,console.log(o.fullscreen)},W=u=>{const a=`${o.settingInfo.BaseUrl}${u.Code}`;console.log(a),c.platform.is.electron?window.electron.createWindow({router:a,width:1280,height:1e3,titleBarStyle:""}):window.open(a)},R=u=>{console.log(u),u.target.select()},L=u=>{c.platform.is.electron?window.electron.showInFolder(u.Path):w(bl(u.Id))},P=u=>{c.dialog({title:u.Name,message:"\u786E\u5B9A\u5220\u9664\u5417?",cancel:!0,persistent:!0}).onOk(()=>{console.log(">>>> onOk"),w(ft(u.Id),!0)}).onCancel(()=>{console.log(">>>> Cancel")}).onDismiss(()=>{})},x=async()=>{const u=await Cl();o.settingInfo=u.data,V.SettingInfo=u.data},w=async(u,a)=>{const{Code:l,Message:B}=await u||{};console.log(l,B),l!=200?c.notify({message:`${B}`}):a&&v()};ol(["`"],()=>{v()}),ol(["Enter"],()=>{te()});const j=async u=>{await s(u),c.notify({message:`${u}`})},ue=u=>{const{Page:a,PageSize:l,MovieType:B,SortField:I,SortType:D}=o.queryParam,Q=p({path:"/search",query:{Page:a,PageSize:l,MovieType:B,SortField:I,SortType:D,Keyword:u}});window.open(Q.href,"_blank")},de=u=>{o.currentData=u,V.Playing=u,V.drawerRight=!0},re=async u=>{console.log("view.queryParam.Page",u),await te();const a=document.querySelector(".scroll");console.log(a),a&&a.scrollTo(0,0)},ie=u=>{o.queryParam.Page=o.queryParam.Page+u,re()},te=async u=>{O();const{Keyword:a}=o.queryParam,l=await kl(o.queryParam);console.log(l),o.resultData={...l};const{ResultSize:B,ResultCnt:I}=l;document.title=`\u641C\u7D22 ${a||""} : ${B} {${I}}`},M=async u=>{const a=await pt({...u,NoRefresh:!0,MoveOut:!0});console.log(a),a.Code==200?c.notify({type:"negative",message:a.Message}):c.notify({type:"negative",message:a.Message})},k=Z(!1),v=async()=>{k.value=!0;const{Code:u,Message:a}=await wl("/api/refreshIndex");console.log(u,a),u=="200"&&(c.notify({type:"negative",message:a}),await te()),k.value=!1},T=async(u,a)=>{const{Code:l,Message:B}=await At(u,a);l==="200"?c.notify({type:"negative",message:B}):c.notify({type:"warning",message:B})},O=()=>{V.syncSearchParam(o.queryParam),localStorage.setItem("queryParam",JSON.stringify(o.queryParam));const{Page:u,PageSize:a,MovieType:l,SortField:B,SortType:I,Keyword:D}=o.queryParam;be({path:"/search",query:{Page:u,PageSize:a,MovieType:l,SortField:B,SortType:I,Keyword:D}})},fe=So(),{push:be,resolve:p}=ho();return Ft(async()=>{document.title="\u641C\u7D22";const{Page:u,PageSize:a,MovieType:l,SortField:B,SortType:I,Keyword:D,showStyle:Q,from:se}=fe.query;if(await x(),D&&(o.queryParam.Keyword=D),u&&a)o.queryParam.Page=Number(u),o.queryParam.PageSize=Number(a),o.queryParam.MovieType=l,o.queryParam.SortField=B,o.queryParam.SortType=I,o.queryParam.Keyword=D,o.queryParam.showStyle=Q;else if(se=="index"){const E=V.FileSearchParam;E&&(console.log("piniaParam",E),o.queryParam=E)}else{const E=JSON.parse(localStorage.getItem("queryParam"));E&&(console.log("storage",E),o.queryParam=E)}te()}),(u,a)=>(S(),oe(ce,null,[N("div",Ta,[n(_t,{style:{"z-index":"9"},position:"bottom-left",offset:[6,d.value?180:160]},{default:r(()=>[o.queryParam.Page>1?(S(),U(z,{key:0,round:"",class:"page-sticky",color:"amber","text-color":"black",icon:"keyboard_arrow_left",onClick:a[0]||(a[0]=l=>ie(-1))})):le("",!0)]),_:1},8,["offset"]),n(_t,{style:{"z-index":"9"},position:"bottom-right",offset:[10,d.value?180:160]},{default:r(()=>[n(z,{round:"",class:"page-sticky",color:"secondary","text-color":"black",icon:"keyboard_arrow_right",onClick:a[1]||(a[1]=l=>ie(1))})]),_:1},8,["offset"]),N("div",$a,[n(z,{loading:k.value,outline:d.value,color:"red",onClick:v},{loading:r(()=>[Y(" \u6267\u884C\u4E2D")]),default:r(()=>[Y(" \u7D22\u5370~ ")]),_:1},8,["loading","outline"]),d.value?le("",!0):(S(),U(ct,{key:0,size:"md",modelValue:o.queryParam.SortField,"onUpdate:modelValue":[a[2]||(a[2]=l=>o.queryParam.SortField=l),a[3]||(a[3]=l=>te())],"toggle-color":"primary",options:[{label:"\u65F6",value:"MTime"},{label:"\u5BB9",value:"Size"},{label:"\u540D",value:"Code"}]},null,8,["modelValue"])),d.value?le("",!0):(S(),U(ct,{key:1,modelValue:o.queryParam.SortType,"onUpdate:modelValue":[a[4]||(a[4]=l=>o.queryParam.SortType=l),a[5]||(a[5]=l=>te())],"toggle-color":"primary",options:[{label:"\u6B63",value:"asc"},{label:"\u5012",value:"desc"}]},null,8,["modelValue"])),d.value?le("",!0):(S(),U(ct,{key:2,modelValue:o.queryParam.MovieType,"onUpdate:modelValue":[a[6]||(a[6]=l=>o.queryParam.MovieType=l),a[7]||(a[7]=l=>te())],"toggle-color":"primary",options:G(dt)},null,8,["modelValue","options"])),d.value?(S(),U(Fe,{key:3,outline:"",color:"primary",label:G(Pt)(o.queryParam.SortField,G(ul))},{default:r(()=>[n(Pe,null,{default:r(()=>[(S(!0),oe(ce,null,ve(G(ul),l=>Ie((S(),U(Ve,{key:l.label,clickable:"",onClick:B=>{o.queryParam.SortField=l.value,te()}},{default:r(()=>[n(pe,null,{default:r(()=>[n(ke,null,{default:r(()=>[Y(X(l.label),1)]),_:2},1024)]),_:2},1024)]),_:2},1032,["onClick"])),[[Ke]])),128))]),_:1})]),_:1},8,["label"])):le("",!0),d.value?(S(),U(Fe,{key:4,outline:"",color:"primary",label:G(Pt)(o.queryParam.SortType,G(il))},{default:r(()=>[n(Pe,null,{default:r(()=>[(S(!0),oe(ce,null,ve(G(il),l=>Ie((S(),U(Ve,{key:l.label,clickable:"",onClick:B=>{o.queryParam.SortType=l.value,te()}},{default:r(()=>[n(pe,null,{default:r(()=>[n(ke,null,{default:r(()=>[Y(X(l.label),1)]),_:2},1024)]),_:2},1024)]),_:2},1032,["onClick"])),[[Ke]])),128))]),_:1})]),_:1},8,["label"])):le("",!0),d.value?(S(),U(Fe,{key:5,outline:"",color:"primary",label:G(Pt)(o.queryParam.MovieType,G(dt))},{default:r(()=>[n(Pe,null,{default:r(()=>[(S(!0),oe(ce,null,ve(G(dt),l=>Ie((S(),U(Ve,{key:l.label,clickable:"",onClick:B=>{o.queryParam.MovieType=l.value,te()}},{default:r(()=>[n(pe,null,{default:r(()=>[n(ke,null,{default:r(()=>[Y(X(l.label),1)]),_:2},1024)]),_:2},1024)]),_:2},1032,["onClick"])),[[Ke]])),128))]),_:1})]),_:1},8,["label"])):le("",!0),n(he,{id:"searchBtn",label:"...",modelValue:o.queryParam.Keyword,"onUpdate:modelValue":[a[8]||(a[8]=l=>o.queryParam.Keyword=l),a[9]||(a[9]=l=>te())],dense:!0,filled:"",clearable:""},{prepend:r(()=>[n(Oe,{name:"ti-list",class:"cursor-pointer"},{default:r(()=>[n(ll,null,{default:r(()=>[N("div",za,[n(Pe,null,{default:r(()=>[(S(!0),oe(ce,null,ve(i.value,l=>Ie((S(),U(Ve,{clickable:"",key:l,onClick:B=>{o.queryParam.Keyword=l,te()}},{default:r(()=>[n(pe,null,{default:r(()=>[n(ke,null,{default:r(()=>[Y(X(l),1)]),_:2},1024)]),_:2},1024)]),_:2},1032,["onClick"])),[[yl]])),128))]),_:1})])]),_:1})]),_:1})]),append:r(()=>[n(Oe,{name:"ti-search",title:"\u641C",class:"cursor-pointer",onClick:te})]),_:1},8,["modelValue"]),n(z,{color:"primary",flat:"",size:"sm",icon:o.fullscreen?"fullscreen_exit":"fullscreen",modelValue:o.fullscreen,"onUpdate:modelValue":a[10]||(a[10]=l=>o.fullscreen=l),onClick:J},null,8,["icon","modelValue"]),n(z,{class:"q-mr-sm",flat:"",size:"sm",color:"primary",icon:"apps",onClick:a[11]||(a[11]=l=>g.value.open({queryParam:o.queryParam,settingInfo:o.settingInfo,cb:q}))}),d.value?le("",!0):(S(),U(wo,{key:6,modelValue:o.queryParam.OnlyRepeat,"onUpdate:modelValue":[a[12]||(a[12]=l=>o.queryParam.OnlyRepeat=l),te],flat:"",label:"\u91CD"},null,8,["modelValue"]))],512),n(_t,{position:"bottom",style:{"z-index":"9","background-color":"rgba(0, 0, 0, 0.6)"}},{default:r(()=>[N("div",Ma,[n(Zo,{color:"lime-11 q-mr-md","bg-color":"black",dense:"","onUpdate:modelValue":[a[13]||(a[13]=l=>{o.queryParam.PageSize=Number(l),te()}),a[14]||(a[14]=l=>o.queryParam.PageSize=l)],filled:"",dark:"",modelValue:o.queryParam.PageSize,options:[10,20,30,50,200]},null,8,["modelValue"]),n(Fo,{modelValue:o.queryParam.Page,"onUpdate:modelValue":[a[15]||(a[15]=l=>o.queryParam.Page=l),re],color:"deep-orange",ellipses:!0,max:o.resultData.TotalPage||0,"max-pages":d.value?5:10,"boundary-numbers":"","direction-links":""},null,8,["modelValue","max","max-pages"]),n(he,{modelValue:o.queryParam.Page,"onUpdate:modelValue":[a[16]||(a[16]=l=>o.queryParam.Page=l),a[18]||(a[18]=l=>{o.queryParam.Page=Number(l),te()})],dense:!0,type:"search",style:{"background-color":"aliceblue",width:"40px","text-align":"center"},onFocus:a[17]||(a[17]=l=>R(l))},null,8,["modelValue"])])]),_:1}),n(Po,null,{default:r(()=>[N("div",Aa,[(S(!0),oe(ce,null,ve(o.resultData.Data,l=>(S(),U(tt,{class:Tt(["q-ma-sm",{"example-item":!d.value,"mobile-item":d.value}]),key:l.Id},{default:r(()=>{var B;return[N("div",Fa,[N("div",Oa,[n(Mt,{square:"","text-color":"white",style:{"margin-left":"0px",padding:"0 4px","background-color":"rgba(236, 15, 15, 0.8)"}},{default:r(()=>[n(ll,{"context-menu":""},{default:r(()=>[N("div",Ba,[N("div",null,[(S(!0),oe(ce,null,ve(l.Tags,I=>(S(),U(z,{size:"sm",icon:"ti-minus",square:"","text-color":"white",color:"green",class:"tag-item",key:I,label:I,onClick:D=>w(G(Sl)(l.Id,I),!0)},null,8,["label","onClick"]))),128))]),N("div",null,[(S(!0),oe(ce,null,ve(o.settingInfo.Tags,I=>(S(),U(z,{size:"sm",icon:"ti-plus",square:"","text-color":"white",color:"red",class:"tag-item",key:I,label:I,onClick:D=>w(G(hl)(l.Id,I),!0)},null,8,["label","onClick"]))),128))])])]),_:2},1024),Da]),_:2},1024),(S(!0),oe(ce,null,ve(l.Tags,I=>(S(),U(Mt,{square:"","text-color":"white",key:I,style:{"margin-left":"0px",padding:"0 4px","background-color":"rgba(188, 24, 24, 0.6)"}},{default:r(()=>[N("span",{onClick:D=>{o.queryParam.Keyword=I,te()}},X(I==null?void 0:I.substring(0,4)),9,Ea)]),_:2},1024))),128))]),n(Fe,{style:{"background-color":"rgba(0, 0, 0, 0.8)",width:"85px",height:"1rem",color:"antiquewhite"},label:l.MovieType},{default:r(()=>[n(Pe,{style:{"background-color":"rgba(0, 0, 0, 0.7)"}},{default:r(()=>[(S(!0),oe(ce,null,ve(G(lt),I=>Ie((S(),U(Ve,{key:I.value,class:"movieTypeSelectItem"},{default:r(()=>[n(pe,null,{default:r(()=>[n(ke,{onClick:D=>T(l.Id,I.value)},{default:r(()=>[Y(X(I.label),1)]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024)),[[Ke]])),128))]),_:2},1024)]),_:2},1032,["label"])]),n($t,{fit:"fit",easier:"",draggable:"",class:Tt({"img-self":!d.value,"img-self-moblie":d.value}),src:G(Io)(l.Id),onClick:()=>{m.value.open({item:l,cb:v})}},{loading:r(()=>[Ra]),_:2},1032,["class","src","onClick"]),N("div",{class:"absolute-bottom float-btn",style:fl({height:d.value?"6rem":"8.5rem"})},[N("div",La,[N("div",Ha,[f("\u64AD\u653E")&&!d.value?(S(),U(z,{key:0,round:"",class:"q-mr-sm",size:d.value?"sm":"md",ripple:"",color:"primary",icon:"ti-control-eject",onClick:I=>C(l),title:"\u64AD\u653E"},null,8,["size","onClick"])):le("",!0),n(z,{round:"",class:"q-mr-sm",size:d.value?"sm":"md",ripple:"",color:"red",icon:"ti-fullscreen",title:"\u5355\u9875\u64AD\u653E",onClick:I=>_(l)},null,8,["size","onClick"]),n(z,{round:"",class:"q-mr-sm",size:d.value?"sm":"md",ripple:"",color:"orange",icon:"ti-arrow-right",onClick:I=>de(l),title:"\u5C0F\u64AD\u653E"},null,8,["size","onClick"]),n(z,{round:"",class:"q-mr-sm",size:d.value?"sm":"md",ripple:"",color:"orange",icon:"ti-blackboard",onClick:I=>m.value.open({item:l,playing:!0}),title:"\u5C0F\u64AD\u653E"},null,8,["size","onClick"])]),N("div",Qa,[f("\u7F16\u8F91")?(S(),U(z,{key:0,round:"",class:"q-mr-sm",size:"sm",color:"primary",icon:"ti-slice",onClick:I=>h.value.open(l,v),title:"\u7F16\u8F91"},null,8,["onClick"])):le("",!0),f("\u6587\u4EF6\u5939")&&!d.value?(S(),U(z,{key:1,round:"",class:"q-mr-sm",size:"sm",color:"primary",icon:"open_in_new",onClick:I=>L(l),title:"\u6587\u4EF6\u5939"},null,8,["onClick"])):le("",!0),n(z,{round:"",class:"q-mr-sm",size:"sm",color:"brown-5",icon:"ti-search",title:"\u7F51\u641C",onClick:I=>W(l)},null,8,["onClick"]),f("\u522E\u56FE")?(S(),U(z,{key:2,round:"",class:"q-mr-sm",size:"sm",color:"secondary",icon:"ti-import",onClick:I=>w(G(Qo)(l.Id)),title:"\u522E\u56FE"},null,8,["onClick"])):le("",!0),f("\u5220\u9664")?(S(),U(z,{key:3,round:"",class:"q-mr-sm",size:"sm",color:"amber",glossy:"","text-color":"black",icon:"ti-trash",onClick:I=>P(l),title:"\u5220\u9664"},null,8,["onClick"])):le("",!0),f("\u79FB\u52A8")?(S(),U(z,{key:4,round:"",class:"q-mr-sm",size:"sm",color:"black",onClick:I=>M(l),icon:"ti-location-arrow",title:"\u79FB\u52A8"},null,8,["onClick"])):le("",!0)])]),N("div",Na,[N("a",{style:{color:"#9e089e","background-color":"rgba(0, 0, 0, 0.1)"},class:"mr10 cursor-pointer",target:"_blank",onClick:I=>ue(l.Actress)},X((B=l.Actress)==null?void 0:B.substring(0,6)),9,Ua),N("a",{style:{color:"rgb(239, 30, 30)","background-color":"rgba(0, 0, 0, 0.1)"},class:"mr10 cursor-pointer",onClick:I=>j(l.Code)},X(G(ql)(l.Code)),9,Ka),N("a",{style:{color:"rgb(22, 26, 227)","background-color":"rgba(0, 0, 0, 0.1)"},class:"mr10 cursor-pointer",onClick:I=>j(l.Title)},X(l.SizeStr),9,ja),N("span",null,X(G(vt)(l.Title)),1)])],4)]}),_:2},1032,["class"]))),128))]),n(ko,{position:"bottom-right","scroll-offset":150,offset:[18,100]},{default:r(()=>[n(z,{fab:"",icon:"keyboard_arrow_up",color:"accent"})]),_:1})]),_:1})]),n(oa,{ref_key:"fileEditRef",ref:h},null,512),n(ya,{ref_key:"fileInfoRef",ref:m},null,512),n(Pa,{ref_key:"listEditRef",ref:g},null,512)],64))}};var cn=bo(Wa,[["__scopeId","data-v-e0af4ad6"]]);export{cn as default};
