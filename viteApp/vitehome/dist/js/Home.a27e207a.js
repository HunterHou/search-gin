import{a as R}from"./vue-router.9e757da4.js";import{R as V,O as A,D as K}from"./index.a5cacb81.js";import{u as H,a as O}from"./index.2cefaac2.js";import{e as w,f as z,g as _,h as j,j as q,k as c}from"./element-plus.d4b845c0.js";import{K as G,f as y,r as W,g as X,o as u,c as v,a as g,Z as a,S as t,u as o,F as Y,a7 as Z,W as p,X as n,R as k,Y as d,a5 as J}from"./@vue.4a24e03e.js";import"./axios.40c08a08.js";import"./qs.400ff04d.js";import"./side-channel.7df7083e.js";import"./get-intrinsic.c778f87f.js";import"./has-symbols.72c87504.js";import"./function-bind.2e86ba3a.js";import"./has.c4971d6a.js";import"./call-bind.9e923d7c.js";import"./object-inspect.3624bc6e.js";import"./pinia.522c8f39.js";import"./pinia-plugin-persist.32a83e37.js";import"./@element-plus.83d37beb.js";import"./vue3-video-play.17c8eb31.js";import"./lodash-es.94e8499d.js";import"./@ctrl.9375a141.js";import"./dayjs.a7c6d4b1.js";import"./async-validator.73a10b83.js";import"./memoize-one.c87f6fc8.js";import"./escape-html.86960cf8.js";import"./normalize-wheel-es.e2b4fa49.js";import"./@floating-ui.6065d27f.js";const F=H(),Q=async()=>await F.get({url:"/api/typeSizeMap"}),U=async()=>await F.get({url:"/api/tagSizeMap"}),ee=async()=>await F.get({url:"/api/scanTime"}),te={align:"center"},ae=n(" \u6383\u63CF\u7ED3\u679C\u5206\u6790 "),ie=n("\u91CD\u5EFA\u7D22\u5F15 "),le={key:0,style:{background:"white"}},oe={style:{"font-size":"10px"}},ne=n(") "),re={key:1,class:"s-table d-li"},se={class:"d-table d-li"},ue=n("\u524D\u5F80 "),de=n("\u6253\u5F00 "),ce=n("\u5220\u9664 "),Ve=G({__name:"Home",setup(x){const{push:N,go:me}=R(),m=O();document.title="\u9996\u9875";const $=y(!1),S=W({tableData:[],indexLoading:!1}),T=y([]),C=y([]),h=y([]),D=i=>{m.setPage(1),m.setKeyword(i),m.setMovieType(""),N("/filelist")},f=i=>{const{IsDir:s,Name:l}=i,e=!s&&l!=="\u5168\u90E8"?l:"";m.setPage(1),m.setKeyword(l),m.setMovieType(e),N("/filelist")},E=async()=>{const i=await Q();i&&(T.value=i,M(),B())},M=async()=>{const i=await U();i&&(C.value=i)},B=async()=>{const i=await ee();h.value=i};X(()=>{E()});const I=async(i,s)=>{const{Name:l}=s;(await A({dirpath:l})).Code==200?_.success("\u6267\u884C\u6210\u529F"):_.error("\u6267\u884C\u5931\u8D25")},P=async(i,s)=>{const{Name:l}=s;(await K({dirpath:l})).Code==200?(_.success("\u6267\u884C\u6210\u529F"),b()):_.error("\u6267\u884C\u5931\u8D25")},b=async()=>{S.indexLoading=!0,(await V()).Code==200?(S.indexLoading=!1,_.success("\u6267\u884C\u6210\u529F"),L()):_.error("\u6267\u884C\u5931\u8D25")},L=()=>{setTimeout(()=>{window.location.href="/home"},200)};return(i,s)=>{const l=J("el-link");return u(),v("div",null,[g("h4",te,[ae,a(o(w),{type:"primary",loading:$.value,size:"small",onClick:s[0]||(s[0]=e=>b())},{default:t(()=>[ie]),_:1},8,["loading"])]),C.value&&C.value.length>0?(u(),v("div",le,[(u(!0),v(Y,null,Z(C.value,e=>(u(),k(l,{key:e.Name,class:"d-tag",underline:!1},{default:t(()=>[a(o(q),{size:"default",value:e.Cnt,onClick:r=>f(e)},{default:t(()=>[a(o(j),{value:e.Cnt},{default:t(()=>[g("span",oe,[g("b",null,[n(d(e.Name)+" (",1),g("i",null,d(e.SizeStr),1),ne])])]),_:2},1032,["value"])]),_:2},1032,["value","onClick"])]),_:2},1024))),128))])):p("",!0),h.value&&h.value.length>0?(u(),v("li",re,[a(o(z),{data:h.value,align:"center",stripe:!0},{default:t(()=>[a(o(c),{label:"\u6587\u4EF6\u5939","header-align":"left",align:"left"},{default:t(e=>[a(l,{title:e.row.Name,onClick:r=>D(e.row.Name)},{default:t(()=>[n(d(e.row.Name),1)]),_:2},1032,["title","onClick"])]),_:1}),a(o(c),{label:"\u6570\u91CF","header-align":"right",align:"right"},{default:t(e=>[a(l,{title:e.row.Size,onClick:r=>D(e.row.Size)},{default:t(()=>[n(d(e.row.Size),1)]),_:2},1032,["title","onClick"])]),_:1}),a(o(c),{label:"\u8017\u65F6",width:"80px","header-align":"right",align:"right"},{default:t(e=>[a(l,{title:e.row.Cnt,onClick:r=>D(e.row.Name)},{default:t(()=>[n(d(e.row.Cnt)+"\xA0ms ",1)]),_:2},1032,["title","onClick"])]),_:1})]),_:1},8,["data"])])):p("",!0),g("li",se,[a(o(z),{data:T.value,align:"center",style:{margin:"20px auto"},stripe:!0,border:""},{default:t(()=>[a(o(c),{label:"\u7ED3\u679C\u96C6","header-align":"left","min-width":"250px",align:"left"},{default:t(e=>[a(l,{title:e.row.Name,onClick:r=>f(e.row)},{default:t(()=>[n(d(e.row.Name),1)]),_:2},1032,["title","onClick"])]),_:1}),a(o(c),{label:"\u5927\u5C0F","header-align":"right",align:"right"},{default:t(e=>[a(l,{title:e.row.Name,onClick:r=>f(e.row)},{default:t(()=>[n(d(e.row.SizeStr),1)]),_:2},1032,["title","onClick"])]),_:1}),a(o(c),{label:"\u6570\u91CF","header-align":"right",align:"right"},{default:t(e=>[a(l,{title:e.row.Name,onClick:r=>f(e.row)},{default:t(()=>[n(d(e.row.Cnt),1)]),_:2},1032,["title","onClick"])]),_:1}),a(o(c),{prop:"Name",label:"\u64CD\u4F5C","header-align":"left",align:"left"},{default:t(e=>[e.row.IsDir?p("",!0):(u(),k(o(w),{key:0,type:"success",onClick:r=>f(e.row)},{default:t(()=>[ue]),_:2},1032,["onClick"])),e.row.IsDir?(u(),k(o(w),{key:1,size:"small",type:"info",onClick:r=>I(e.$index,e.row)},{default:t(()=>[de]),_:2},1032,["onClick"])):p("",!0),e.row.IsDir?(u(),k(o(w),{key:2,size:"small",type:"danger",onClick:r=>P(e.$index,e.row)},{default:t(()=>[ce]),_:2},1032,["onClick"])):p("",!0)]),_:1})]),_:1},8,["data"])])])}}});export{Ve as default};
