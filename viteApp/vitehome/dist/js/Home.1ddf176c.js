import{a as R}from"./vue-router.4b5d6d71.js";import{R as V,O as A,D as K}from"./index.69e5842e.js";import{u as H}from"./userAxios.0453d902.js";import{u as O}from"./index.5589866e.js";import{d as w,e as z,f,g as j,h as q,j as c}from"./element-plus.eda9c21b.js";import{K as G,f as y,r as W,g as X,o as u,c as v,a as p,Z as a,S as t,u as l,F as Y,a7 as Z,W as g,X as n,R as k,Y as d,a5 as J}from"./@vue.4a24e03e.js";import"./axios.40c08a08.js";import"./qs.400ff04d.js";import"./side-channel.7df7083e.js";import"./get-intrinsic.c778f87f.js";import"./has-symbols.72c87504.js";import"./function-bind.2e86ba3a.js";import"./has.c4971d6a.js";import"./call-bind.9e923d7c.js";import"./object-inspect.3624bc6e.js";import"./pinia.94acc33a.js";import"./vue-demi.6e7a88e9.js";import"./pinia-plugin-persist.32a83e37.js";import"./@element-plus.83d37beb.js";import"./vue3-video-play.17c8eb31.js";import"./lodash-es.94e8499d.js";import"./@popperjs.fd04dfd6.js";import"./@ctrl.9375a141.js";import"./dayjs.a7c6d4b1.js";import"./async-validator.73a10b83.js";import"./memoize-one.c87f6fc8.js";import"./escape-html.86960cf8.js";import"./normalize-wheel-es.e2b4fa49.js";import"./@floating-ui.6065d27f.js";const F=H(),Q=async()=>await F.get({url:"/api/typeSizeMap"}),U=async()=>await F.get({url:"/api/tagSizeMap"}),ee=async()=>await F.get({url:"/api/scanTime"}),te={align:"center"},ae=n(" \u6383\u63CF\u7ED3\u679C\u5206\u6790 "),ie=n("\u91CD\u5EFA\u7D22\u5F15 "),oe={key:0,style:{background:"white"}},le={style:{"font-size":"10px"}},ne=n(") "),re={key:1,class:"s-table d-li"},se={class:"d-table d-li"},ue=n("\u524D\u5F80 "),de=n("\u6253\u5F00 "),ce=n("\u5220\u9664 "),He=G({__name:"Home",setup(x){const{push:N,go:me}=R(),m=O();document.title="\u9996\u9875";const $=y(!1),S=W({tableData:[],indexLoading:!1}),T=y([]),C=y([]),h=y([]),D=i=>{m.setPage(1),m.setKeyword(i),m.setMovieType(""),N("/filelist")},_=i=>{const{IsDir:s,Name:o}=i,e=!s&&o!=="\u5168\u90E8"?o:"";m.setPage(1),m.setKeyword(o),m.setMovieType(e),N("/filelist")},E=async()=>{const i=await Q();i&&(T.value=i,M(),B())},M=async()=>{const i=await U();i&&(C.value=i)},B=async()=>{const i=await ee();h.value=i};X(()=>{E()});const I=async(i,s)=>{const{Name:o}=s;(await A({dirpath:o})).Code==200?f.success("\u6267\u884C\u6210\u529F"):f.error("\u6267\u884C\u5931\u8D25")},P=async(i,s)=>{const{Name:o}=s;(await K({dirpath:o})).Code==200?(f.success("\u6267\u884C\u6210\u529F"),b()):f.error("\u6267\u884C\u5931\u8D25")},b=async()=>{S.indexLoading=!0,(await V()).Code==200?(S.indexLoading=!1,f.success("\u6267\u884C\u6210\u529F"),L()):f.error("\u6267\u884C\u5931\u8D25")},L=()=>{setTimeout(()=>{window.location.href="/home"},200)};return(i,s)=>{const o=J("el-link");return u(),v("div",null,[p("h4",te,[ae,a(l(w),{type:"primary",loading:$.value,size:"small",onClick:s[0]||(s[0]=e=>b())},{default:t(()=>[ie]),_:1},8,["loading"])]),C.value&&C.value.length>0?(u(),v("div",oe,[(u(!0),v(Y,null,Z(C.value,e=>(u(),k(o,{key:e.Name,class:"d-tag",underline:!1},{default:t(()=>[a(l(q),{size:"default",value:e.Cnt,onClick:r=>_(e)},{default:t(()=>[a(l(j),{value:e.Cnt},{default:t(()=>[p("span",le,[p("b",null,[n(d(e.Name)+" (",1),p("i",null,d(e.SizeStr),1),ne])])]),_:2},1032,["value"])]),_:2},1032,["value","onClick"])]),_:2},1024))),128))])):g("",!0),h.value&&h.value.length>0?(u(),v("li",re,[a(l(z),{data:h.value,align:"center",stripe:!0},{default:t(()=>[a(l(c),{label:"\u6587\u4EF6\u5939","header-align":"left",align:"left"},{default:t(e=>[a(o,{title:e.row.Name,onClick:r=>D(e.row.Name)},{default:t(()=>[n(d(e.row.Name),1)]),_:2},1032,["title","onClick"])]),_:1}),a(l(c),{label:"\u6570\u91CF","header-align":"right",align:"right"},{default:t(e=>[a(o,{title:e.row.Size,onClick:r=>D(e.row.Size)},{default:t(()=>[n(d(e.row.Size),1)]),_:2},1032,["title","onClick"])]),_:1}),a(l(c),{label:"\u8017\u65F6",width:"80px","header-align":"right",align:"right"},{default:t(e=>[a(o,{title:e.row.Cnt,onClick:r=>D(e.row.Name)},{default:t(()=>[n(d(e.row.Cnt)+"\xA0ms ",1)]),_:2},1032,["title","onClick"])]),_:1})]),_:1},8,["data"])])):g("",!0),p("li",se,[a(l(z),{data:T.value,align:"center",style:{margin:"20px auto"},stripe:!0,border:""},{default:t(()=>[a(l(c),{label:"\u7ED3\u679C\u96C6","header-align":"left","min-width":"250px",align:"left"},{default:t(e=>[a(o,{title:e.row.Name,onClick:r=>_(e.row)},{default:t(()=>[n(d(e.row.Name),1)]),_:2},1032,["title","onClick"])]),_:1}),a(l(c),{label:"\u5927\u5C0F","header-align":"right",align:"right"},{default:t(e=>[a(o,{title:e.row.Name,onClick:r=>_(e.row)},{default:t(()=>[n(d(e.row.SizeStr),1)]),_:2},1032,["title","onClick"])]),_:1}),a(l(c),{label:"\u6570\u91CF","header-align":"right",align:"right"},{default:t(e=>[a(o,{title:e.row.Name,onClick:r=>_(e.row)},{default:t(()=>[n(d(e.row.Cnt),1)]),_:2},1032,["title","onClick"])]),_:1}),a(l(c),{prop:"Name",label:"\u64CD\u4F5C","header-align":"left",align:"left"},{default:t(e=>[e.row.IsDir?g("",!0):(u(),k(l(w),{key:0,type:"success",onClick:r=>_(e.row)},{default:t(()=>[ue]),_:2},1032,["onClick"])),e.row.IsDir?(u(),k(l(w),{key:1,size:"small",type:"info",onClick:r=>I(e.$index,e.row)},{default:t(()=>[de]),_:2},1032,["onClick"])):g("",!0),e.row.IsDir?(u(),k(l(w),{key:2,size:"small",type:"danger",onClick:r=>P(e.$index,e.row)},{default:t(()=>[ce]),_:2},1032,["onClick"])):g("",!0)]),_:1})]),_:1},8,["data"])])])}}});export{He as default};
