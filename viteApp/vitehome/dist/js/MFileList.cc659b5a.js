import{K as J,f as v,r as M,g as ee,o as r,c as f,Z as s,S as a,u as l,R as h,W as B,T as z,U as I,a as d,ab as te,ac as oe,a6 as N,F as E,a7 as V,a5 as k,X as p,Y as y}from"./@vue.4a24e03e.js";import{Q as se,b as le}from"./index.69e5842e.js";import{a as ue,b as ae}from"./ImageUtils.f11725cf.js";import{N as ie,S as ne,D as re,a as de,P as pe,B as g,I as ce,b as T,L as me,c as fe,T as R,R as ye,C as U,d as K}from"./vant.7b81c6e7.js";import{M as ge}from"./index.ce259e74.js";import{a as ve}from"./vue-router.4b5d6d71.js";import"./userAxios.0453d902.js";import"./axios.40c08a08.js";import"./qs.400ff04d.js";import"./side-channel.7df7083e.js";import"./get-intrinsic.c778f87f.js";import"./has-symbols.72c87504.js";import"./function-bind.2e86ba3a.js";import"./has.c4971d6a.js";import"./call-bind.9e923d7c.js";import"./object-inspect.3624bc6e.js";import"./element-plus.eda9c21b.js";import"./lodash-es.94e8499d.js";import"./@element-plus.83d37beb.js";import"./@popperjs.fd04dfd6.js";import"./@ctrl.9375a141.js";import"./dayjs.a7c6d4b1.js";import"./async-validator.73a10b83.js";import"./memoize-one.c87f6fc8.js";import"./escape-html.86960cf8.js";import"./normalize-wheel-es.e2b4fa49.js";import"./@floating-ui.6065d27f.js";import"./index.5589866e.js";import"./pinia.94acc33a.js";import"./vue-demi.6e7a88e9.js";import"./pinia-plugin-persist.32a83e37.js";import"./vue3-video-play.17c8eb31.js";import"./@vant.66a64b71.js";const _e={class:"mainBody"},he=p("\u505C\u6B62\u64AD\u653E"),Ce={style:{width:"40%",margin:"8px auto"}},Fe={style:{width:"55%",margin:"8px auto"}},De={style:{margin:"1px auto"}},xe=["onClick"],we=d("br",null,null,-1),Ae={key:1},Be={style:{margin:"1px auto","font-size":"12px",color:"gray"}},Ee={style:{margin:"1px auto"}},Ve=p("\u64AD\u653E"),ke=p("\u67E5\u770B"),Te=p("\u52A0\u8F7D"),Le={style:{width:"100%",height:"100%","z-index":"9999",top:"0",position:"fixed",overflow:"auto","background-color":"rgba(0,0,0,0.7)",float:"left"},id:"videoDiv"},be={style:{right:"1rem",top:"0",height:"2rem",position:"absolute","z-index":"9999"}},Se=p("\u9690\u85CF"),Pe=p("\u5173\u95ED"),Me={style:{width:"100%",height:"100%","z-index":"99",top:"0px",position:"fixed",overflow:"auto"}},ze={style:{right:"1rem",top:"20px",height:"2rem",position:"fixed","z-index":"999"}},Ie=p("\u5173\u95ED"),Ne=p(' @click.stop="innerVisibleFalse" '),Ct=J({__name:"MFileList",setup(Re){const{push:O}=ve(),L=v(!1),C=v(!1),F=v(!1),D=v(!1),x=v(!1),e=M({Page:0,PageSize:10,SortField:"MTime",SortType:"desc",MovieType:"",Keyword:"",ModelList:[],TotalCnt:0,ResultCnt:0,videoVisible:!1,currentFile:new ge,imageList:[]}),_=M({width:"100%",height:"auto",color:"#409eff",title:"",src:"http://192.168.3.38:8083/api/file/F~emby~emby-rename~\u4E95\u5DDD\u3086\u3044\u67F3\u7530\u3084\u3088\u3044~YeLLOW~[\u5DDD\u3044\u7530\u3088]EO29\u4EBA\u4E2D\u3057\u30F3\u30A3\u30B9\u30C3\u30F3 \u5DDD\u3044\u67F3\u3084\u3044~[\u5DDD\u3044\u7530\u3088][L-8]\u59BB\u51FA\u30D1\u30C6\u30FC\u30C8\u30AD\u30B0\u4E95\u3086 \u7530\u3088{\u9A91}\u8A98\u4E1Dmv[\u5DDD\u3044\u7530\u3088][L-8]\u59BB\u51FA\u30D1\u30C6\u30FC\u30C8\u30AD\u30B0\u4E95\u3086 \u7530\u3088{\u9A91}\u8A98\u4E1Dmv",muted:!1,webFullScreen:!1,speedRate:["0.75","1.0","1.25","1.5","2.0"],autoPlay:!0,loop:!0,mirror:!1,ligthOff:!1,volume:.3,control:!0,controlBtns:["audioTrack","quality","speedRate","volume","setting","pip","pageFullScreen","fullScreen"]}),b=async()=>{e.Page+=1,console.log("onLoad",e.Page),await m(!1)},S=n=>{e.Keyword=n,e.Page=1,m()},w=v(!1),$=async n=>{const t=K.loading({duration:0,forbidClick:!1,loadingType:"spinner",message:"\u52A0\u8F7D\u4E2D..."});setTimeout(()=>{t.clear()},3e3),await j(n.Id),t.clear(),e.imageList&&e.imageList.length>0?w.value=!0:K.fail("\u65E0\u56FE")},Q=()=>{w.value=!1},j=async n=>{const t=await le(n);if(t&&t.length>0){e.imageList=[];for(let i=0;i<t.length;i++)(t[i].FileType=="jpg"||t[i].FileType=="png")&&e.imageList.push(t[i].ImageBase)}},W=()=>{e.videoVisible=!1},P=()=>{e.videoVisible=!1,_.src=null,F.value=!1},Y=n=>{e.currentFile=n,F.value=!0,e.videoVisible=!0;const t=ae(n.Id);console.log(t),_.title=n.Name,_.src=t},m=async n=>{const t=await se(e);n!==!1&&(e.ModelList=[]);const i=t;i.Data.map(u=>{u.Code==u.Actress&&(u.Code="",u.Actress=""),u.Code.lastIndexOf("-")==u.Code.length-1&&(u.Code=u.Code.substring(0,u.Code.length-1)),u.name=u.Name.trim(),u.Name=u.Name.replace("["+u.Code+"]",""),u.Name=u.Name.replace("["+u.Actress+"]","")});const A=[...e.ModelList,...i.Data];e.ModelList=A,e.TotalCnt=i.TotalCnt,e.ResultCnt=i.ResultCnt,D.value=!1,x.value=!0,C.value=!1},q=()=>{m()},X=()=>{e.Keyword.length>=2&&(e.Page=1,m())};ee(()=>{_.src=null});const Z=[{value:"",text:"\u5168\u90E8"},{value:"\u9A91\u5175",text:"\u9A91\u5175"},{value:"\u6B65\u5175",text:"\u6B65\u5175"},{value:"\u65AF\u5DF4\u8FBE",text:"\u65AF\u5DF4\u8FBE"},{value:"\u56FD\u4EA7",text:"\u56FD\u4EA7"}],G=[{value:"MTime",text:"\u65F6\u95F4\u5012\u6392"},{value:"Name",text:"\u540D\u79F0\u5012\u6392"},{value:"Size",text:"\u5927\u5C0F\u5012\u6392"}],H=[{value:"desc",text:"\u5012\u6392"},{value:"asc",text:"\u6B63\u6392"}];return(n,t)=>{const i=k("ElButton"),A=k("vue3VideoPlay"),u=k("ElImage");return r(),f("div",_e,[s(l(ie),{title:"\u641C\u7D22","left-text":"\u8FD4\u56DE","left-arrow":"",onClickLeft:t[0]||(t[0]=o=>{l(O)("/home")})},{default:a(()=>[s(l(ce),{name:"search",slot:"right"})]),_:1}),F.value?(r(),h(l(ne),{key:0,offsetTop:520,style:{left:"450px",width:"400px"}},{default:a(()=>[s(l(g),{size:"small",type:"success",onClick:t[1]||(t[1]=()=>{e.videoVisible=!0})},{default:a(()=>{var o,c;return[p(" \u6B63\u5728\u64AD\u653E\uFF1A "+y(((o=e.currentFile)==null?void 0:o.Code)||((c=e.currentFile)==null?void 0:c.Actress)||"\u65E0")+" ",1),s(l(g),{size:"small",type:"success",loading:!0,"loading-type":"spinner"})]}),_:1}),s(l(g),{size:"small",type:"danger",onClick:P},{default:a(()=>[he]),_:1})]),_:1})):B("",!0),s(l(re),null,{default:a(()=>[s(l(T),{modelValue:e.MovieType,"onUpdate:modelValue":t[2]||(t[2]=o=>e.MovieType=o),options:Z,onChange:m},null,8,["modelValue"]),s(l(T),{modelValue:e.SortField,"onUpdate:modelValue":t[3]||(t[3]=o=>e.SortField=o),options:G,onChange:m},null,8,["modelValue"]),s(l(T),{modelValue:e.SortType,"onUpdate:modelValue":t[4]||(t[4]=o=>e.SortType=o),options:H,onChange:m},null,8,["modelValue"])]),_:1}),s(l(de),{modelValue:e.Keyword,"onUpdate:modelValue":[t[5]||(t[5]=o=>e.Keyword=o),X],placeholder:"\u8BF7\u8F93\u5165\u641C\u7D22\u5173\u952E\u8BCD",onSearch:m,onCancel:q,"input-align":"center"},null,8,["modelValue"]),s(l(pe),{modelValue:D.value,"onUpdate:modelValue":t[8]||(t[8]=o=>D.value=o),onRefresh:t[9]||(t[9]=()=>{e.Page=1,m(),C.value=!1})},{default:a(()=>[s(l(me),{class:"mlist",loading:L.value,"onUpdate:loading":t[6]||(t[6]=o=>L.value=o),error:x.value,"onUpdate:error":t[7]||(t[7]=o=>x.value=o),finished:C.value,"finished-text":"\u6CA1\u6709\u66F4\u591A\u4E86",onLoad:b},{default:a(()=>[(r(!0),f(E,null,V(e.ModelList,o=>(r(),f("div",{key:o.Id,style:{width:"23rem",float:"left",height:"12rem",margin:"6px 8px",display:"flex","box-shadow":"0 0 4px grey"}},[d("div",Ce,[s(l(fe),{src:l(ue)(o.Id),style:{height:"auto",width:"8rem"}},null,8,["src"])]),d("div",Fe,[d("div",De,[o.Actress?(r(),f("a",{key:0,onClick:c=>S(o.Actress)},[p(y(o.Actress)+" ",1),s(l(R),{color:"#7232dd"},{default:a(()=>[p(y(o.MovieType),1)]),_:2},1024)],8,xe)):B("",!0),we,o.Code?(r(),f("span",Ae,y(o.Code),1)):B("",!0),d("span",null,"\u3010"+y(o.SizeStr)+"\u3011 ",1)]),d("div",Be,[d("span",null," \u3010"+y(o.Name)+"\u3011",1)]),d("div",Ee,[(r(!0),f(E,null,V(o.Tags,c=>(r(),h(l(R),{plain:"",type:"danger",onClick:Ue=>S(c)},{default:a(()=>[p(y(c),1)]),_:2},1032,["onClick"]))),256)),s(l(ye),{type:"flex",justify:"space-around"},{default:a(()=>[s(l(U),{span:"8"},{default:a(()=>[s(l(g),{size:"small",type:"primary",onClick:c=>Y(o)},{default:a(()=>[Ve]),_:2},1032,["onClick"])]),_:2},1024),s(l(U),{span:"8"},{default:a(()=>[s(l(g),{size:"small",type:"primary",onClick:c=>$(o)},{default:a(()=>[ke]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024)])])]))),128))]),_:1},8,["loading","error","finished"]),s(l(g),{onClick:b,block:"",type:"primary"},{default:a(()=>[Te]),_:1})]),_:1},8,["modelValue"]),(r(),h(N,{to:"body"},[z(d("div",Le,[d("div",be,[s(i,{type:"primary",onClick:W},{default:a(()=>[Se]),_:1}),s(i,{type:"primary",onClick:P},{default:a(()=>[Pe]),_:1})]),s(A,te(oe(_)),null,16)],512),[[I,e.videoVisible]])])),(r(),h(N,{to:"body"},[z(d("div",Me,[d("div",ze,[s(l(g),{type:"primary",onClick:Q},{default:a(()=>[Ie]),_:1})]),(r(!0),f(E,null,V(e.imageList,(o,c)=>(r(),f("div",{key:c,style:{display:"flex",margin:"1px auto"}},[s(u,{style:{width:"100%",margin:"0 auto",opacity:"9","z-index":"99"},src:o},{default:a(()=>[Ne]),_:2},1032,["src"])]))),128))],512),[[I,w.value]])]))])}}});export{Ct as default};
