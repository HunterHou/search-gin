import{u as P}from"./vue-router.168b8979.js";import{R as L,O as V,D as K}from"./index.63b23a96.js";import{T as R,a as A,S as H}from"./index.cac4527c.js";import{o as O}from"./@vueuse.01f8cc47.js";import{u as j}from"./index.d11b08b1.js";import{e as v,f as T,g as f,h as G,j as W,k as m}from"./element-plus.df9a4506.js";import{K as X,r as w,f as Y,g as q,o as u,c as y,a as C,W as r,Y as a,S as t,u as o,F as J,a7 as Q,V as _,a5 as U,R as k,X as d}from"./@vue.aac442b6.js";import"./axios.647abbdf.js";import"./@kangc.e6acbb3a.js";import"./vue.8e517399.js";import"./qs.0ddf2e0d.js";import"./side-channel.db6cd5a0.js";import"./get-intrinsic.7b6078ff.js";import"./has-symbols.6b764405.js";import"./function-bind.c99feded.js";import"./has.38a7880d.js";import"./call-bind.a2ca479f.js";import"./object-inspect.a67a4921.js";import"./pinia.78dfdeea.js";import"./vue-demi.6e7a88e9.js";import"./pinia-plugin-persist.32a83e37.js";import"./vant.f448ad5c.js";import"./@vant.aebe3a02.js";import"./@element-plus.148c5373.js";import"./vue3-video-play.cdf2b84d.js";import"./highlight.js.a2669c08.js";import"./lodash-es.94e8499d.js";import"./@popperjs.fd04dfd6.js";import"./@ctrl.9375a141.js";import"./dayjs.944d2b57.js";import"./async-validator.73a10b83.js";import"./memoize-one.c87f6fc8.js";import"./escape-html.86960cf8.js";import"./normalize-wheel-es.e2b4fa49.js";import"./@floating-ui.6065d27f.js";const Z={align:"center"},ee={key:0},te={style:{"font-size":"10px"}},ae={key:1,class:"left-div d-li"},ie={class:"right-div d-li"},Ae=X({__name:"Home",setup(le){const{push:F,go:oe}=P(),c=j();document.title="\u9996\u9875";const z=w(!1),N=Y({tableData:[],indexLoading:!1}),S=w([]),g=w([]),h=w([]);O(["`"],i=>{D()});const x=i=>{c.setPage(1),c.setKeyword(i),c.setMovieType(""),F("/filelist")},p=i=>{const{IsDir:s,Name:l}=i,e=!s&&l!=="\u5168\u90E8"?l:"";c.setPage(1),c.setKeyword(l),c.setMovieType(e),F("/filelist")},b=async()=>{const i=await R();i&&(S.value=i,$(),E())},$=async()=>{const i=await A();i&&(g.value=i.splice(0,70))},E=async()=>{const i=await H();h.value=i};q(()=>{b()});const B=async(i,s)=>{const{Name:l}=s;(await V({dirpath:l})).Code==200?f.success("\u6267\u884C\u6210\u529F"):f.error("\u6267\u884C\u5931\u8D25")},M=async(i,s)=>{const{Name:l}=s;(await K({dirpath:l})).Code==200?(f.success("\u6267\u884C\u6210\u529F"),D()):f.error("\u6267\u884C\u5931\u8D25")},D=async()=>{N.indexLoading=!0,(await L()).Code==200?(N.indexLoading=!1,f.success("\u6267\u884C\u6210\u529F"),I()):f.error("\u6267\u884C\u5931\u8D25")},I=()=>{setTimeout(()=>{window.location.href="/home"},200)};return(i,s)=>{const l=U("el-link");return u(),y("div",null,[C("h4",Z,[r(" \u6383\u63CF\u7ED3\u679C\u5206\u6790 "),a(o(v),{type:"primary",loading:z.value,size:"small",onClick:s[0]||(s[0]=e=>D())},{default:t(()=>[r("\u91CD\u5EFA\u7D22\u5F15 ")]),_:1},8,["loading"])]),g.value&&g.value.length>0?(u(),y("div",ee,[(u(!0),y(J,null,Q(g.value,e=>(u(),k(l,{key:e.Name,class:"d-tag",underline:!1},{default:t(()=>[a(o(W),{size:"default",value:e.Cnt,onClick:n=>p(e)},{default:t(()=>[a(o(G),{value:e.Cnt,max:999},{default:t(()=>[C("span",te,[C("b",null,[r(d(e.Name)+" (",1),C("i",null,d(e.SizeStr),1),r(") ")])])]),_:2},1032,["value"])]),_:2},1032,["value","onClick"])]),_:2},1024))),128))])):_("",!0),h.value&&h.value.length>0?(u(),y("li",ae,[a(o(T),{data:h.value,align:"center",stripe:!0},{default:t(()=>[a(o(m),{label:"\u6587\u4EF6\u5939","header-align":"left",align:"left"},{default:t(e=>[a(l,{title:e.row.Name,onClick:n=>x(e.row.Name)},{default:t(()=>[r(d(e.row.Name),1)]),_:2},1032,["title","onClick"])]),_:1}),a(o(m),{label:"\u6570\u91CF","header-align":"right",align:"right"},{default:t(e=>[a(l,{title:e.row.Size,onClick:n=>x(e.row.Size)},{default:t(()=>[r(d(e.row.Size),1)]),_:2},1032,["title","onClick"])]),_:1}),a(o(m),{label:"\u8017\u65F6",width:"80px","header-align":"right",align:"right"},{default:t(e=>[a(l,{title:e.row.Cnt,onClick:n=>x(e.row.Name)},{default:t(()=>[r(d(e.row.Cnt)+"\xA0ms ",1)]),_:2},1032,["title","onClick"])]),_:1})]),_:1},8,["data"])])):_("",!0),C("li",ie,[a(o(T),{data:S.value,align:"center",style:{margin:"20px auto"},stripe:!0,border:""},{default:t(()=>[a(o(m),{label:"\u7ED3\u679C\u96C6","header-align":"left","min-width":"250px",align:"left"},{default:t(e=>[a(l,{title:e.row.Name,onClick:n=>p(e.row)},{default:t(()=>[r(d(e.row.Name),1)]),_:2},1032,["title","onClick"])]),_:1}),a(o(m),{label:"\u5927\u5C0F","header-align":"right",align:"right"},{default:t(e=>[a(l,{title:e.row.Name,onClick:n=>p(e.row)},{default:t(()=>[r(d(e.row.SizeStr),1)]),_:2},1032,["title","onClick"])]),_:1}),a(o(m),{label:"\u6570\u91CF","header-align":"right",align:"right"},{default:t(e=>[a(l,{title:e.row.Name,onClick:n=>p(e.row)},{default:t(()=>[r(d(e.row.Cnt),1)]),_:2},1032,["title","onClick"])]),_:1}),a(o(m),{prop:"Name",label:"\u64CD\u4F5C","header-align":"left",align:"left"},{default:t(e=>[e.row.IsDir?_("",!0):(u(),k(o(v),{key:0,type:"success",onClick:n=>p(e.row)},{default:t(()=>[r("\u524D\u5F80 ")]),_:2},1032,["onClick"])),e.row.IsDir?(u(),k(o(v),{key:1,size:"small",type:"info",onClick:n=>B(e.$index,e.row)},{default:t(()=>[r("\u6253\u5F00 ")]),_:2},1032,["onClick"])):_("",!0),e.row.IsDir?(u(),k(o(v),{key:2,size:"small",type:"danger",onClick:n=>M(e.$index,e.row)},{default:t(()=>[r("\u5220\u9664 ")]),_:2},1032,["onClick"])):_("",!0)]),_:1})]),_:1},8,["data"])])])}}});export{Ae as default};
