(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{573:function(t,e,n){"use strict";e.a={mounted:function(){var path=this.$route.path;this.$store.commit("setStorePath",path)}}},581:function(t,e,n){var content=n(617);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(55).default)("82c8d74e",content,!0,{sourceMap:!1})},616:function(t,e,n){"use strict";n(581)},617:function(t,e,n){var r=n(54)(!1);r.push([t.i,".icon-style{font-size:30px;color:red}.floatButton{float:right;position:fixed;width:60;top:300px;overflow:auto;z-index:999}",""]),t.exports=r},623:function(t,e,n){"use strict";n.r(e);n(67),n(56),n(66),n(26),n(93),n(57),n(94);var r=n(44),o=(n(112),n(95)),l=n.n(o);function c(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,n)}return e}function f(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?c(Object(source),!0).forEach((function(e){Object(r.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):c(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}var d={mixins:[n(573).a],data:function(){return{tabIndex:"base",id:"",code:"",lastPageNo:1,file:"",iframeSrc:"",baseUrl:"",imageList:[],sourceList:[]}},mounted:function(){var t=this,e=this.$route.params.id,n=this.$route.query.pageNo;this.lastPageNo=n,this.settingBase(),this.loadInfo(e),document.onkeydown=function(){var e=window.event.keyCode;(37===e||39===e)&&t.nextPage(t.id)}},methods:{tabChange:function(){"web"==this.tabIndex?this.makeIrameUrl(this.file):"dir"==this.tabIndex&&this.loadImageList()},loadImageList:function(){this.sourceList=this.imageList},urlBack:function(){var t=this.$route.query;this.$router.push({path:"/fileList",query:f({},t)})},openActress:function(t){this.keywords=t,this.$router.push({path:"/fileList",query:f({},this.$router.query)})},settingBase:function(){var t=this;l.a.get("api/buttoms").then((function(e){200===e.status&&(t.BaseUrl=e.data.BaseUrl)}))},makeIrameUrl:function(t){var e=this;setTimeout((function(){e.iframeSrc=e.BaseUrl+t.Code}),1)},loadInfo:function(t){var e=this;l.a.get("/api/info/"+t).then((function(t){200===t.status&&(e.file=t.data,e.id=e.file.Id,e.imageList=[],e.loadDirInfo(e.id))}))},loadDirInfo:function(t,e){var n=this;l.a.get("/api/dir/"+t).then((function(t){if(200===t.status&&t.data&&t.data.length>0){n.imageList=[];for(var i=0;i<t.data.length;i++)"jpg"==t.data[i].FileType&&n.imageList.push(t.data[i].ImageBase);e&&n.loadImageList()}}))},getRouterParam:function(){var t=this.$route.query,e="&page="+t.no+"&pageSize="+t.pageSize+"&sortField="+t.sortField+"&sortType="+t.sortType+"&movieType="+t.movieType;return t.keywords&&(e+="&keywords"+t.keywords),e},lastPage:function(){var t=this,e="/api/infoLast/"+this.id+this.getRouterParam();this.iframeSrc="";var n=this.$route.query;l.a.get(e).then((function(e){if(200===e.status){var r=e.data.Id;t.file=e.data,t.id=r,t.$router.push({path:"/context/".concat(r),query:f({},n)})}}))},nextPage:function(){var t=this,e=this.$route.query,n="/api/infoNext/"+this.id+this.getRouterParam();this.iframeSrc="",l.a.get(n).then((function(n){if(200===n.status){var r=n.data.Id;t.file=n.data,t.id=r,t.$router.push({path:"/context/".concat(r),query:f({},e)})}}))},playThis:function(t){var e=this;l.a.get("api/play/"+t).then((function(t){200===t.status?e.alertSuccess(t.data.Message):e.alertFail(t.data.Message)}))},openThisFolder:function(t){var e=this;l.a.get("api/openFolder/"+t).then((function(t){200===t.status&&e.alertSuccess(t.data.Message)}))},getImageList:function(t){var e=this;l.a.get("api/imageList/"+t).then((function(t){200===t.status&&(e.alertSuccess(t.data.Message),e.loadDirInfo(e.id,!0))}))},deleteThis:function(t){var e=this;this.$confirm("此操作将永久删除该文件, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){l.a.get("api/delete/"+t).then((function(t){200===t.status&&e.alertSuccess(t.data.Message)}))})).catch((function(){e.$message({type:"info",message:"已取消删除"})}))},alertSuccess:function(t){this.$message({message:t,type:"success"})},alertFail:function(t){this.$message({message:t,type:"fail"})}}},h=(n(616),n(58)),component=Object(h.a)(d,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticStyle:{width:"100%",background:"white",border:"1px"},attrs:{align:"center"}},[n("el-page-header",{attrs:{title:"返回",content:t.file?t.file.Name:""},on:{back:function(e){return t.urlBack()}}}),t._v(" "),n("div",{staticStyle:{position:"flex","z-index":"100",left:"0",right:"0",background:"white",border:"1px"}},[n("el-button",{staticClass:"floatButton",staticStyle:{float:"left",left:"0px"},attrs:{icon:"el-icon-back"},on:{click:t.lastPage}}),t._v(" "),n("el-button",{staticClass:"floatButton",staticStyle:{float:"right",right:"0px"},attrs:{icon:"el-icon-right"},on:{click:t.nextPage}}),t._v(" "),n("el-backtop",{staticStyle:{width:"50px",height:"50px"},attrs:{bottom:100}},[n("div",{staticClass:"up"},[t._v("UP")])])],1),t._v(" "),n("el-row",{staticStyle:{"margin-top":"10px","margin-buttom":"10px"},attrs:{gutter:20}},[n("el-col",{attrs:{span:1}},[n("el-link",[n("i",{staticClass:"el-icon-video-play icon-style",attrs:{underline:!1,title:"播放"},on:{click:function(e){return t.playThis(t.file.Id)}}})])],1),t._v(" "),n("el-col",{attrs:{span:1}},[n("el-link",[n("i",{staticClass:"el-icon-folder-opened icon-style",attrs:{title:"文件夹"},on:{click:function(e){return t.openThisFolder(t.file.Id,2)}}})])],1),t._v(" "),n("el-col",{attrs:{span:1}},[n("el-link",[n("i",{staticClass:"el-icon-delete icon-style",attrs:{title:"删除"},on:{click:function(e){return t.deleteThis(t.file.Id,2)}}})])],1),t._v(" "),n("el-col",{attrs:{span:1}},[n("el-link",[n("i",{staticClass:"el-icon-download icon-style",attrs:{title:"刮图"},on:{click:function(e){return t.getImageList(t.file.Id,2)}}})])],1)],1),t._v(" "),n("el-tabs",{staticStyle:{"margin-top":"10px"},attrs:{type:"card","tab-position":"top-center"},on:{"tab-click":function(e){return t.tabChange()}},model:{value:t.tabIndex,callback:function(e){t.tabIndex=e},expression:"tabIndex"}},[n("el-tab-pane",{attrs:{label:"基础信息",name:"base"}},[n("div",{staticStyle:{margin:"0 auto"}},[n("el-row",{attrs:{gutter:20,offset:2}},[n("el-image",{staticStyle:{display:"flex","max-width":"900px",width:"auto",height:"auto",magin:"0 auto"},attrs:{src:"api/jpg/"+t.file.Id}})],1),t._v(" "),n("el-row",{attrs:{gutter:20}},[n("el-col",{attrs:{span:4}},[n("span",[t._v("番号 :")])]),t._v(" "),n("el-col",{attrs:{span:16}},[t.file?n("span",[t._v(t._s(t.file.Code))]):t._e()])],1),t._v(" "),n("el-row",{attrs:{gutter:20}},[n("el-col",{attrs:{span:4}},[n("span",[t._v("优优 :")])]),t._v(" "),n("el-col",{attrs:{span:16}},[t.file?n("el-link",{on:{click:function(e){return t.openActress(t.file.Actress)}}},[n("span",[t._v(t._s(t.file.Actress))])]):t._e()],1)],1),t._v(" "),n("el-row",{attrs:{gutter:20}},[n("el-col",{attrs:{span:4}},[n("span",[t._v("时间 :")])]),t._v(" "),n("el-col",{attrs:{span:16}},[t.file?n("span",[t._v(t._s(t.file.MTime))]):t._e()])],1),t._v(" "),n("el-row",{attrs:{gutter:20}},[n("el-col",{attrs:{span:4}},[n("span",[t._v("大小 :")])]),t._v(" "),n("el-col",{attrs:{span:16}},[t.file?n("span",[t._v(t._s(t.file.SizeStr))]):t._e()])],1)],1)]),t._v(" "),n("el-tab-pane",{attrs:{label:"文件夹",name:"dir"}},t._l(t.sourceList,(function(e,r){return n("div",{key:r,staticStyle:{display:"flex",margin:"10px auto"}},[n("el-image",{staticStyle:{width:"auto","min-width":"1000px",height:"auto",margin:"0 auto"},attrs:{src:e,"preview-src-list":t.sourceList,lazy:""}})],1)})),0),t._v(" "),n("el-tab-pane",{attrs:{label:"数据源",name:"web"}},[t.iframeSrc?n("iframe",{attrs:{frameborder:"0",src:t.iframeSrc,width:"100%",height:"900px"}}):t._e()])],1)],1)}),[],!1,null,null,null);e.default=component.exports}}]);